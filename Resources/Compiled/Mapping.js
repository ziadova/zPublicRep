/*
	
	Copyright (c) 2013, Latitude Geographics Group Ltd.
	All rights reserved.
	       
	Redistribution is not permitted. 
	
	Use in binary form, without modification, is permitted provided that neither 
	the name of the organization nor the names of its contributors may be used 
	to endorse or promote products derived from this software without specific 
	prior written permission.
	       
	THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDER ''AS IS'' AND ANY
	EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	DISCLAIMED. IN NO EVENT SHALL LATITUDE GEOGRAPHICS GROUP LTD. BE LIABLE FOR ANY
	DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
	ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase",geocortex.framework.ui.ViewBase,{attach:function(a){this.viewModel=a;this.addDisposableBinding(a.isValid,a.isValid.bind(this,function(){this.calculateIndicatorDisplay()}));this.addDisposableBinding(a.isRequired,a.isRequired.bind(this,function(){this.calculateIndicatorDisplay()}));this.calculateIndicatorDisplay();this.inherited(arguments)},calculateIndicatorDisplay:function(){this.viewModel.attached_showIndicator&&
(this.viewModel.attached_showIndicator.set(this.viewModel.isRequired.get()===true||this.viewModel.isValid.get()===false),this.viewModel.isValid.get()==false?this.viewModel.attached_indicatorClass.set("form-item invalid"):this.viewModel.attached_indicatorClass.set("form-item required"))}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.TimePickerFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{attached_seconds:null,attached_minutes:null,attached_hours:null,attached_second:null,attached_minute:null,attached_hour:null,attach:function(a){a.attached_time=this.attached_time=new Observable;this._buildComboBoxes(a);this.inherited(arguments);this.viewModel.date?this.setPickerDateTime(this.viewModel.date.get()):
this.viewModel.time&&this.setPickerDateTime(this.viewModel.time.get())},_buildComboBoxes:function(a){this.attached_seconds=new ObservableCollection;this.attached_minutes=new ObservableCollection;this.attached_hours=new ObservableCollection;this.attached_second=new Observable(0);this.attached_minute=new Observable(0);this.attached_hour=new Observable(0);for(var b=[],c=[],d=[],e=0;e<24;++e)b.push({val:e,desc:"{0}".format(e)});this.attached_hours.addItems(b);for(e=0;e<60;++e)c.push(e),d.push(e);this.attached_minutes.addItems(c);
this.attached_seconds.addItems(d);a.attached_seconds=this.attached_seconds;a.attached_minutes=this.attached_minutes;a.attached_hours=this.attached_hours;a.attached_second=this.attached_second;a.attached_minute=this.attached_minute;a.attached_hour=this.attached_hour},setPickerDateTime:function(a){a!=null?(this.attached_second.set(a.getSeconds()),this.attached_minute.set(a.getMinutes()),this.attached_hour.set(a.getHours())):(this.attached_second.set(null),this.attached_minute.set(null),this.attached_hour.set(null))},
handleChangeComboBoxTime:function(){var a;a=this.viewModel.time?this.viewModel.time.get():this.viewModel.date?this.viewModel.date.get():new Date;this.attached_hour.get()!=null||this.attached_minute.get()!=null||this.attached_second.get()!=null?(a==null&&(a=new Date,a.setMilliseconds(0)),this.attached_hour.get()==null&&this.attached_hour.set(date.getHours()),this.attached_minute.get()==null&&this.attached_minute.set(date.getMinutes()),this.attached_second.get()==null&&this.attached_second.set(date.getSeconds()),
a.setHours(this.attached_hour.get()),a.setMinutes(this.attached_minute.get()),a.setSeconds(this.attached_second.get())):a=null;this.viewModel.time?this.viewModel.time.set(a):this.viewModel.date&&this.viewModel.date.set(a)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase",geocortex.framework.ui.ViewModelBase,{app:null,feature:null,constructor:function(a,b){this.app=a;this.feature=b}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewBase",geocortex.framework.ui.ViewBase,{featureClickedEventName:"ResultsListFeatureClickedEvent",featurePressedEventName:"ResultsListFeaturePressedEvent",_longPressTimer:null,_pressStartTime:null,_pressLengthMs:1500,_firedTouchOrPress:false,_ignoreMouseEventFlag:false,_pressYStart:null,_lastTouchY:null,_scrollYDeltaThreshold:35,_firstEvent:null,handleTouchStart:function(a,b,c){if(!this._firstEvent)this._firstEvent="touch start",
this._beginLongPress(c);return true},handleTouchMove:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleTouchEnd:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleTouchCancel:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleMouseDown:function(a,b,c){if(!this._firstEvent)this._firstEvent="mouse down",this._beginLongPress(c);
return true},handleClick:function(a,b,c){if(this._firstEvent)this._firstEvent=null,this._cancelLongPress();if(a.target.tagName==="A")return true;else this.app.eventRegistry.event(this.featureClickedEventName).publish(c);return false},handleMouseUp:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleMouseOut:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress()},_beginLongPress:function(a){this._longPressTimer&&
clearTimeout(this._longPressTimer);var b=this;this._longPressTimer=setTimeout(function(){b.app.eventRegistry.event(b.featurePressedEventName).publish(a)},b._pressLengthMs)},_cancelLongPress:function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null},scrollView:function(a){if(this.scrollContainerElement)this.scrollContainerElement.scrollTop=a||0}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewModel",geocortex.framework.ui.ViewModelBase,{headerText:null,featureSetCollection:null,app:null,libraryId:null,featureActions:null,currentFeature:null,isBusy:null,defaultIsPaged:true,defaultPageSize:50,constructor:function(a,b){this.app=a;this.libraryId=b;this.headerText=new Observable(this.app.getResource(this.libraryId,"language-common-results"));this.featureSetCollection=new Observable;this.featureSetCollection.bind(this,
this.handleCollectionChanged);this.featureActions=new ObservableCollection;this.currentFeature=new Observable;this.isBusy=new Observable(false);this.registerCommand();this.subscribeEvents()},initialize:function(){},subscribeEvents:function(){this.app.eventRegistry.event("FSMCollectionOpenedEvent").subscribe(this,this._openFSC);this.app.eventRegistry.event("FSMCollectionClosedEvent").subscribe(this,this._closeFSC);this.app.eventRegistry.event("FSMCollectionRemovedEvent").subscribe(this,this._removeFSC);
this.app.eventRegistry.event("PulseResultViewInternalEvent").subscribe(this,this._pulseFeatureSetCollection)},handleCollectionChanged:function(a){this.app.featureSetManager.getCollectionById(a.id)?this.isBusy.set(this.app.featureSetManager.isCollectionOpen(a.id)):this.isBusy.set(false)},updateHeaderText:function(a){var b=null,c="";a&&(c=" ("+a+")");this.featureSetCollection.get()&&(b=this.featureSetCollection.get().displayName.get());this.headerText.set((b?b:this.app.getResource(this.libraryId,"language-common-results"))+
c)},_openFSC:function(a){this.featureSetCollection.get()&&a&&a.featureSetCollectionId&&a.featureSetCollectionId==this.featureSetCollection.get().id&&this.isBusy.set(true)},_closeFSC:function(a){this.featureSetCollection.get()&&a&&a.featureSetCollectionId&&a.featureSetCollectionId==this.featureSetCollection.get().id&&this.isBusy.set(false)},_removeFSC:function(a){this.featureSetCollection.get()&&a&&a.featureSetCollectionId&&a.featureSetCollectionId==this.featureSetCollection.get().id&&this.featureSetCollection.set(this._getDummyFeatureSetCollection())},
_getDummyFeatureSetCollection:function(){this._dummyFeatureSetCollection==null?this._dummyFeatureSetCollection=new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection:this._dummyFeatureSetCollection.clear();return this._dummyFeatureSetCollection},registerCommand:function(){var a=this;this.app.commandRegistry.command("ShowResultsListFeatureAction").register(this,function(b){a.currentFeature.set(b);a.getResultsFeatureActions();a.app.commandRegistry.command("ActivateView").execute("ResultsFeatureActionsView")})},
getResultsFeatureActions:function(){this.featureActions.clear();var a=this.app.menuRegistry.getMenu("ResultsListFeatureAction"),b=this.app.menuRegistry.getDefaultIconUri("ResultsListFeatureAction");if(a){if(this.featureActions.addItems(a),b)for(a=0;a<this.featureActions.getLength();a++)this.featureActions.getAt(a).iconUri.get()||this.featureActions.getAt(a).iconUri.set(b)}else throw Error("Results Feature Actions not found");},_pulseFeatureSetCollection:function(){if(this.featureSetCollection&&this.featureSetCollection.get()&&
this.featureSetCollection.get().featureSets&&this.featureSetCollection.get().featureSets.length()>0){for(var a=this.featureSetCollection.get().featureSets,b=a.get(),c=0;c<b.length;c++)b[c].features.length()===0&&b.splice(c,1);a.pulse()}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.alert.AlertModule",geocortex.framework.application.ModuleBase,{alertRegion:"ModalWindowRegion",nativeImplementation:null,initialize:function(a){function b(a,b,f){if(f)try{var g=c.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.alert.AlertView",markup:"Mapping/modules/Alert/AlertView.html",visible:true,region:c.alertRegion,libraryId:c.libraryId});b||(b=c.app.getResource(c.libraryId,"language-alert-default-title"));
a={alertTitle:b,alertBody:a,callback:f,isOpen:true,pending:[]};g.title.set(b);g.attach(a);c.app.viewManager.activateView(g)}catch(h){c.app.trace.error("Error: Could not display alert: "+h)}else try{c.nativeImplementation.apply(window,[a])}catch(j){c.nativeImplementation(a)}}this.nativeImplementation=window.alert;this.inherited(arguments);this.alertRegion=a.alertRegion;this.overrideNativeAlert=a.overrideNativeAlert;var c=this;if(this.overrideNativeAlert)window.alert=b;this.app.commandRegistry.command("Alert").register(this,
function(a,c,f){f||(f=function(){});b(a,c,f)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.alert.AlertView",geocortex.framework.ui.ViewBase,{hasSubscribed:false,userInitiatedDA:false,attach:function(a){this.inherited(arguments);this.title.set(a.alertTitle);if(this.okButtonElement)try{this.okButtonElement.focus()}catch(b){}if(!this.hasSubscribed)this.hasSubscribed=true,this.app.eventRegistry.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId==this.id&&this._deactivateForUser()})},handleClickOk:function(){this._deactivateForUser();
return false},_deactivateForUser:function(){this.userInitiatedDA=true;this.app.viewManager.deactivateView(this);this.app.viewManager.destroyView(this);this.viewModel.callback&&this.userInitiatedDA&&this.viewModel.callback()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationModule",geocortex.framework.application.ModuleBase,{attempts:null,authView:null,constructor:function(){this.attempts=0},initialize:function(a){this.inherited(arguments);var b=a.region||"ModalWindowRegion",c=this;dojo.subscribe("geocortex_authenticationSucceeded",function(a){c.attempts=0;var b=new geocortex.essentialsHtmlViewer.mapping.infrastructure.AuthenticationEventArgs;b.username=a.username;b.token=a.token;
b.result=true;c.app.eventRegistry.event("AuthenticationSucceededEvent").publish(b)});dojo.extend(geocortex.essentials.RestHelperHTTPService,{_gatherCredentials:function(a){var e=false;if(c.attempts>0){var f=new geocortex.essentialsHtmlViewer.mapping.infrastructure.AuthenticationEventArgs;f.username=null;f.token=null;f.result=false;e=true;c.app.eventRegistry.event("AuthenticationFailedEvent").publish(f)}deferred=a?a:new dojo.Deferred;if(c.authView==null)c.authView=c.app.viewManager.createView({id:"AuthenticationdialogView",
markup:"Mapping/modules/Authentication/AuthenticationView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",title:c.app.getResource(c.libraryId,"language-auth-title"),libraryId:c.libraryId,region:b}),a=new geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel(c.app),a.libraryId=c.libraryId,a.error.set(e),c.authView.attach(a);c.authView.deferred=deferred;c.app.viewManager.activateView(c.authView);++c.attempts;return deferred}})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationView",geocortex.framework.ui.ViewBase,{deferred:null,attach:function(a){this.inherited(arguments);this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)});this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)});this.app.eventRegistry.event("SiteInitializationFailedEvent").subscribe(this,
function(){this.app.viewManager.destroyView(this)});this.app.eventRegistry.event("SiteAuthenticationFailedEvent").subscribe(this,function(){this.app.viewManager.destroyView(this)})},handleClickLogin:function(){this.viewModel.username.get()==""?(this.app.viewManager.destroyView(this),this.viewModel.password.set(),this.viewModel.error.set(true),this.viewModel.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-username-empty")),this.app.viewManager.activateView(this)):this.deferred&&
this.viewModel&&(this.viewModel.authenticating.set(true),this.deferred.resolve({username:this.viewModel.username.get(),password:this.viewModel.password.get()}))}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.authentication.AuthenticationViewModel",geocortex.framework.application.ModuleBase,{username:null,password:null,authenticating:null,error:null,errorMessage:null,constructor:function(){this.inherited(arguments);this.username=new Observable("");this.password=new Observable("");this.authenticating=new Observable(false);this.error=new Observable(false);this.errorMessage=new Observable;this.app.eventRegistry.event("AuthenticationFailedEvent").subscribe(this,
function(){this.error.set(true);this.authenticating.set(false);this.errorMessage.set(this.app.getResource(this.libraryId,"language-auth-error"))});this.app.eventRegistry.event("AuthenticationSucceededEvent").subscribe(this,function(){this.error.set(false);this.errorMessage.set(null);this.authenticating.set(false)});this.app.commandRegistry.command("HideSplashScreen").execute()},reset:function(){this.username.set("");this.password.set("");this.authenticating.set(false);this.error.set(false);this.errorMessage.set(null)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerModule",geocortex.framework.application.ModuleBase,{initialize:function(a){this.inherited(arguments)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerView",geocortex.framework.ui.ViewBase,{_longPressTimer:null,_pressLengthMs:1E3,_firstEvent:null,handleTouchStart:function(){if(!this._firstEvent)this._firstEvent="touch start",this._beginLongPress();return true},handleMouseDown:function(){if(!this._firstEvent)this._firstEvent="mouse down",this._beginLongPress();return true},handleTouchEnd:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();
return true},handleMouseUp:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleMouseOut:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleTouchCancel:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleTouchMove:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleDoubleClick:function(){this.app.commandRegistry.command("ToggleToolbar").execute()},
_beginLongPress:function(){this._longPressTimer&&clearTimeout(this._longPressTimer);var a=this;this._longPressTimer=setTimeout(function(){a.app.commandRegistry.command("ActivateView").execute("LogView")},a._pressLengthMs)},_cancelLongPress:function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.banner.BannerViewModel",geocortex.framework.ui.ViewModelBase,{applicationTitle:null,applicationSubtitle:null,backgroundColor:null,backgroundImage:null,leftImage:null,rightImage:null,height:null,initialize:function(a){this.inherited(arguments);this.applicationTitle=new Observable(a.applicationTitle);this.applicationSubtitle=new Observable(a.applicationSubtitle||"");this.backgroundColor=new Observable(a.backgroundColor||"White");this.backgroundImage=
new Observable(a.backgroundImage?"url({0})".format(a.backgroundImage):"");this.leftImage=new Observable(a.leftImage?"url({0})".format(a.leftImage):"");this.rightImage=new Observable(a.rightImage?"url({0})".format(a.rightImage):"");this.height=new Observable(a.height?a.height+"px":"50px")}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.browser.BrowserModule",geocortex.framework.application.ModuleBase,{initialize:function(a){this.inherited(arguments);if(a&&a.title)document.title=a.title}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.confirm.ConfirmModule",geocortex.framework.application.ModuleBase,{confirmRegion:"ModalWindowRegion",nativeImplementation:null,initialize:function(a){function b(a,b,f){if(!f)return c.nativeImplementation.apply(window,[a]);try{var g=c.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.confirm.ConfirmView",markup:"Mapping/modules/Confirm/ConfirmView.html",visible:true,region:c.confirmRegion,libraryId:c.libraryId});
b||(b=c.app.getResource(c.libraryId,"language-confirm-default-title"));a={title:b,confirmBody:a,callback:f,isOpen:true,pending:[]};g.title.set(b);g.attach(a);c.app.viewManager.activateView(g)}catch(h){c.app.trace.error("Error: Could not display confirm: "+h)}}this.nativeImplementation=window.confirm;this.inherited(arguments);this.confirmRegion=a.confirmRegion;this.overrideNativeConfirm=a.overrideNativeConfirm;var c=this;if(this.overrideNativeConfirm)window.confirm=b;this.app.commandRegistry.command("Confirm").register(this,
function(a,c,f){c||(c=this.app.getResource(this.libraryId,"language-confirm-default-title"));f||(f=function(){});b(a,c,f)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.confirm.ConfirmView",geocortex.framework.ui.ViewBase,{userHasClicked:false,hasSubscribed:false,userCanceled:false,attach:function(a){this.inherited(arguments);this.title.set(a.title);if(this.cancelButtonElement)try{this.cancelButtonElement.focus()}catch(b){}if(!this.hasSubscribed)this.hasSubscribed=true,this.app.eventRegistry.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId===this.id&&this._deactivateForUser(true)})},
handleClickOk:function(){this._deactivateForUser(false);return false},handleClickCancel:function(){this._deactivateForUser(true);return false},_deactivateForUser:function(a){this.userCanceled=a;this.userHasClicked=true;this.app.viewManager.deactivateView(this);this.app.viewManager.destroyView(this);this.userHasClicked&&this.viewModel&&this.viewModel.callback&&this.viewModel.callback(!this.userCanceled)}});
var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c},geocortex;
(function(a){(function(b){(function(b){(function(b){(function(b){var c=function(b){function c(){b.apply(this,arguments);this._isEditingGeometry=this._hasGeometry=false}__extends(c,b);c.prototype.initialize=function(){this._registerCommands()};c.prototype._registerCommands=function(){this.app.commandRegistry.command("SetEditorFeatureGeometry").register(this,this._executeSetEditorFeatureGeometry,this._canExecuteSetEditorFeatureGeometry);this.app.commandRegistry.command("StartEditingGraphicGeometry").register(this,
this._executeStartEditingGeometry,this._canExecuteStartEditingGeometry);this.app.commandRegistry.command("StopEditingGraphicGeometry").register(this,this._executeStopEditingGeometry,this._canExecuteStopEditingGeometry)};c.prototype._canExecuteSetEditorFeatureGeometry=function(){return true};c.prototype._executeSetEditorFeatureGeometry=function(b){this._executeStopEditingGeometry();var c=this._feature;if(c)b.type==="extent"&&(b=a.essentials.GeometryUtilities.envelopeToPolygon(b)),this._geometry=b,
this._hasGeometry=!!b,this._graphic.setGeometry(b),this.app.eventRegistry.event("GeometryEditCompletedEvent").publish({originalGraphic:this._feature,editedGraphic:this._graphic,cancelled:false}),this._destroyEditingLayer(),this.app.eventRegistry.event("FeatureGeometryEditedEvent").publish(c);this.app.commandRegistry.command("HideFeatureTemplatePicker").execute();this.app.commandRegistry.command("ActivateView").execute("EditorView");this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()};
c.prototype._canExecuteStartAddingFeatureGeometry=function(){return true};c.prototype._executeStartAddingFeatureGeometry=function(){};c.prototype._canExecuteStartEditingGeometry=function(){return true};c.prototype._executeStartEditingGeometry=function(a,b){this._isEditingGeometry=true;this._editObject&&this._editObject.deactivate();this._feature=a;this._graphic=new esri.Graphic(a.toJson());this._hasGeometry=!!this._graphic.geometry;var c=b?b:this._feature.getLayer();this._featureLayer=c;var d=this;
this._createEditingLayer();this._hideOriginalFeature();this._graphic.symbol=a.symbol?a.symbol:c.renderer.getSymbol(this._graphic);this._editingLayer.add(this._graphic);this._layerUpdateEndToken&&dojo.disconnect(this._layerUpdateEndToken);this._layerUpdateEndToken=dojo.connect(this._graphic._graphicsLayer,"onUpdateEnd",dojo.hitch(this,this._handleLayerUpdateEnd));if(this._hasGeometry){c=null;if(a===null)throw Error("Can't edit geometry of null feature");if(esri.toolbars.Edit){var c=esri.toolbars.Edit.MOVE|
esri.toolbars.Edit.EDIT_VERTICES|esri.toolbars.Edit.SCALE|esri.toolbars.Edit.ROTATE,e={allowAddVertices:true,allowDeleteVertices:true};this._editObject=new esri.toolbars.Edit(this.app.map,e);dojo.connect(this._editObject,"onDeactivate",function(){if(this._editingGeometryMapClickHandle!=null)dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null;d._destroyEditingLayer();d._indicateGeometryEditing(false);d.app.eventRegistry.event("GeometryEditCompletedEvent").publish({originalGraphic:d._feature,
editedGraphic:d._graphic,cancelled:false})});this._editingGeometryMapClickHandle=dojo.connect(this.app.map,"onClick",function(){d._executeStopEditingGeometry(true)});this._indicateGeometryEditing(true);this._editObject.activate(c,this._graphic,e);this.app.eventRegistry.event("GeometryEditInvokedEvent").publish(this._feature)}else c=this.app.getResource(this.libraryId,"language-feature-editing-package-required"),e=d.app.getResource(d.libraryId,"language-feature-layer-error-title"),this.app.commandRegistry.command("Alert").execute(c,
e)}else this._currentToolName=this._getToolNameByDrawType(a._drawType),this.app.commandRegistry.command("SetActiveTool").execute(this._currentToolName),this._indicateGeometryEditing(true)};c.prototype._createEditingLayer=function(){var a=this.app.map;this._editingLayer=new esri.layers.GraphicsLayer;a.addLayer(this._editingLayer)};c.prototype._destroyEditingLayer=function(){var a=this.app.map;if(this._editingLayer)this._editingLayer.clear(),a.removeLayer(this._editingLayer),this._editingLayer=null};
c.prototype._handleLayerUpdateEnd=function(){this._hideOriginalFeature()};c.prototype._hideOriginalFeature=function(){if(this._feature){var b=a.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(this._feature,this.app.site);b&&b.hide()}};c.prototype._canExecuteStopEditingGeometry=function(){return true};c.prototype._executeStopEditingGeometry=function(){if(this._isEditingGeometry){this.app.commandRegistry.command("ClearActiveTool").execute();if(this._editObject)this._editObject.deactivate(),
this._editObject=null;if(this._editingGeometryMapClickHandle!=null)dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null;this._indicateGeometryEditing(false)}};c.prototype._indicateGeometryEditing=function(b){if(this._feature.geometry)if(b){var b=this._feature.geometry.type,c=null,c=this.getEditingGeometryStatusMessage(this.app,this.libraryId,a.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getEsriGeometryType(b,esri.toolbars.Draw.POINT)),b=new a.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(c,
null,null,"geometry-type-"+b.toLowerCase(),"geometryEditingStatus");this.app.commandRegistry.command("AddStatus").execute(b);this.app.commandRegistry.command("ShowMap").execute()}else this.app.commandRegistry.command("RemoveStatus").execute("geometryEditingStatus")};c.prototype.getEditingGeometryStatusMessage=function(a,b,c){switch(c){case esri.toolbars.Draw.POINT:return a.getResource(b,"language-feature-editing-geometry-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:return a.getResource(b,
"language-feature-editing-geometry-polyline");case esri.toolbars.Draw.CIRCLE:case esri.toolbars.Draw.ELLIPSE:case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:return a.getResource(b,"language-feature-editing-geometry-polygon");case esri.toolbars.Draw.EXTENT:return a.getResource(b,"language-feature-editing-geometry-rectangle")}return a.getResource(b,"language-feature-editing-geometry-default")};c.prototype._getToolNameByDrawType=function(a){a||(a="Polygon");return"Editing"+a+
"Tool"};return c}(a.framework.application.ModuleBase);b.EditingModule=c})(b.editing||(b.editing={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(a){(function(a){(function(a){(function(a){(function(a){var b=function(){function a(){}a.findFeatureInLayer=function(a,b){if(!a||!b)return null;var c=b.graphics;if(c.length<1)return null;var d=["__editingMeta","timestamp"];if(b.editFieldsInfo)for(var e in b.editFieldsInfo)b.editFieldsInfo.hasOwnProperty(e)&&d.push(b.editFieldsInfo[e]);var f=function(a){var b=0,c;for(c in a)!Array.contains(d,c)&&a.hasOwnProperty(c)&&++b;return b};e=c[0].attributes;if(f(e)!==f(a.attributes))return null;var f=
0,g=[],m=[],r;for(r in e){var s=Array.contains(d,r);if(!s&&(!e.hasOwnProperty(r)||!a.attributes.hasOwnProperty(r)))return null;s||(g.push(r),m.push(r),++f)}for(r=0;r<f;++r)if(g[r]!==m[r])return null;for(r=0;r<c.length;r++);return null};return a}();a.EditingUtils=b})(a.editing||(a.editing={}))})(a.modules||(a.modules={}))})(a.mapping||(a.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(b){(function(b){var c=function(a){function c(){a.apply(this,arguments)}__extends(c,a);c.prototype.attach=function(b){a.prototype.attach.call(this,b);this.isBusy.sync(b.isBusy);this.title.sync(b.headerText);this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,this.cancelEditing);this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this.cancelEditing)};c.prototype.deactivated=function(){a.prototype.deactivated.call(this);
this.viewModel.cancelEditing()};c.prototype.handleTypeFieldChange=function(a,b,c){this.viewModel.handleTypeFieldSelected(c)};c.prototype.handleClickEditGeometry=function(){this.viewModel.isEditingGeometry.get()?this.viewModel.stopEditingGeometry():this.viewModel.startEditingGeometry();return false};c.prototype.handleClickDeleteFeature=function(){var a=this.viewModel;a.state===b.EditorState.EditingGeometry&&a.stopEditingGeometry();a.confirmDelete();return false};c.prototype.handleClickSave=function(){var a=
this.viewModel;a.state===b.EditorState.EditingGeometry&&a.stopEditingGeometry();this.isBusy.set(true);a.save(dojo.hitch(this,this.saveSuccessCallback),dojo.hitch(this,this.saveErrorCallback));return false};c.prototype.saveSuccessCallback=function(){this.app.commandRegistry.command("DeactivateView").execute("EditorView")};c.prototype.saveErrorCallback=function(){};c.prototype.cancelEditing=function(){this.viewModel.cancelEditing();this.app.commandRegistry.command("DeactivateView").execute(this.id)};
c.prototype.handleClickCancel=function(){this.cancelEditing();return false};c.prototype.handleClickAddRelatedRecord=function(a,b,c){if(!c)return false;if(!c.editable)return false;if(c.relatedFeature&&c.relationship.keyField&&(a=c.relatedFeature.attributes[c.relationship.keyField],a===null||typeof a==="undefined"||a===""))return c=this.app.getResource(this.viewModel.libraryId,"language-feature-editing-related-key-field-missing").format(c.relationship.keyField),this.app.commandRegistry.command("Alert").execute(c),
false;this.app.commandRegistry.command("StartEditingNewRelatedRecord").execute(c);return false};return c}(a.framework.ui.ViewBase);b.EditorView=c})(b.editing||(b.editing={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(b){(function(b){(function(a){a[a.Idle=0]="Idle";a[a.Paused=1]="Paused";a[a.CantEdit=2]="CantEdit";a[a.EditingAttributes=3]="EditingAttributes";a[a.EditingGeometry=4]="EditingGeometry";a[a.Saving=5]="Saving"})(b.EditorState||(b.EditorState={}));var c=b.EditorState,d=function(d){function j(a,b){d.call(this,a,b);this.validateGeometry=false;this.state=c.Idle;this.isBusy=new Observable(false);this.title=new Observable("");this.headerText=new Observable("");
this.form=new Observable;this.isEditingGeometry=new Observable(false);this.isEditingNewFeature=new Observable(false);this.isEditingLogEntry=new Observable(false);this.isEditingRelatedFeatureNotInSite=new Observable(false);this.currentFeatureRelationships=new ObservableCollection;this.hasRelatedLayers=new Observable(false);this.showRelatedLayers=new Observable(false);this.canDeleteFeature=new Observable(true);this.canEditGeometry=new Observable(false);this.showEditGeometryButton=new Observable(false);
this.showStopEditingGeometryButton=new Observable(false);this.geometryHasBeenEdited=new Observable(false);this.layerUpdateEndToken=null;this._registerCommands();this._subscribeToEvents();this.canDeleteFeature.syncTransform(this.isEditingNewFeature,function(a){return!a});this.auto(this.hasRelatedLayers,this,this._hideOrShowRelateds);this.auto(this.isEditingRelatedFeatureNotInSite,this,this._hideOrShowRelateds)}__extends(j,d);j.prototype.initialize=function(a){var b=this.app;a&&a.tools&&b&&b.toolRegistry&&
b.toolRegistry.createTools(a.tools,true);this.validateGeometry=a&&a.validateGeometry?a.validateGeometry:true};j.prototype._registerCommands=function(){this.app.commandRegistry.command("StartEditingFeature").register(this,this._executeStartEditingFeature,this._canExecuteStartEditingFeature);this.app.commandRegistry.command("StartEditingNewFeature").register(this,this._executeStartEditingNewFeature,this._canExecuteStartEditingNewFeature);this.app.commandRegistry.command("StartEditingEditLogEntry").register(this,
this._executeStartEditingEditLogEntry,this._canExecuteStartEditingEditLogEntry);this.app.commandRegistry.command("StartEditingNewRelatedRecord").register(this,this._executeStartEditingRelatedRecord);this.app.commandRegistry.command("StartEditingRelatedRecord").register(this,this._executeStartEditingRelatedRecord);this.app.commandRegistry.command("FeatureLayerModuleStartSync").register(this,this.cancelEditing);this.app.commandRegistry.command("StartAddingFeatureGeometry").register(this,this._executeStartAddingFeatureGeometry,
this._canExecuteStartEditingNewFeature)};j.prototype._executeStartAddingFeatureGeometry=function(a,b){this.app.commandRegistry.command("StartEditingNewFeature").execute(a,b)};j.prototype._subscribeToEvents=function(){this.app.eventRegistry.event("GeometryEditInvokedEvent").subscribe(this,this._handleGeometryEditInvokedEvent);this.app.eventRegistry.event("GeometryEditCompletedEvent").subscribe(this,this._handleGeometryEditCompletedEvent)};j.prototype.performValidation=function(){var a=true;this.form.get().clearValidationMessages();
a=this.performFormValidation()&&a;this.validateGeometry&&(a=this.performGeometryValidation()&&a);return a};j.prototype.performFormValidation=function(){for(var a=true,b=this.form.get(),c=0;c<b.fields.getLength();++c){var d=b.fields.getAt(c);try{if(d.validationFunc){var e=d.validationFunc(d.value.get(),d,b);e&&(a=false,b.addValidationMessage(e))}}catch(j){this.app.trace.warning("Error validating field {0}: {1}".format(d.displayName,j))}}return a};j.prototype.performGeometryValidation=function(){var b=
true,c=this.form.get(),d=this.currentFeatureEsriClone;d.geometry&&d.geometry.type==="polygon"&&a.essentials.GeometryUtilities.isSelfIntersectingPolygon(d.geometry)&&(c.addValidationMessage(this.app.getResource(this.libraryId,"language-feature-editing-self-intersecting-polygon-need-fixing")),b=false);return b};j.prototype.confirmDelete=function(){var a=this;this.app.commandRegistry.command("Confirm").execute(a.app.getResource(a.libraryId,"language-feature-editing-delete-confirmation"),a.app.getResource(a.libraryId,
"language-feature-editing-module-title"),function(b){if(b){var c=false;a._preventDeleteForRelOrigin(a.currentFeatureRelationships,function(){a.app.commandRegistry.command("Alert").execute(a.app.getResource(a.libraryId,"language-feature-editing-delete-with-relation-forbidden"),a.app.getResource(a.libraryId,"language-feature-editing-module-title"));c=true},function(){c||a.deleteCurrentFeature()})}})};j.prototype.deleteCurrentFeature=function(a,b){var c=this,d=this.currentFeatureEsri,e=d.getLayer()||
this._sourceLayer,j={mapService:this._getMapServiceByLayer(e),layer:e,feature:d,successCallback:function(){c._deleteFeatureSuccessCallback(d,e,a)},errorCallback:function(a){c._deleteFeatureErrorCallback(a,e,b)}};this.isBusy.set(true);this.app.commandRegistry.command("DeleteFeature").execute(j)};j.prototype._deleteFeatureErrorCallback=function(a){var a=this.app.getResource(this.libraryId,"language-feature-layer-error-feature-edits").format(a),b=this.app.getResource(this.libraryId,"language-feature-layer-error-title");
this.app.commandRegistry.command("Alert").execute(a,b);this.app.trace.error(a);this.isBusy.set(false)};j.prototype._deleteFeatureSuccessCallback=function(a,b,c){b&&b.remove(a);this.app.commandRegistry.command("HideFeatureAttributeEditor").execute();this.app.commandRegistry.command("ShowMap").execute();this.app.eventRegistry.event("FeatureDeletedEvent").publish(a);this.currentFeatureEsriClone.hide();this._destroyEditingLayer();this._sourceLayer.refresh();c&&c();this.isBusy.set(false)};j.prototype._buildFeatureRelationships=
function(){this.currentFeatureRelationships.clear();for(var a=this.currentFeatureEsri,b=this._sourceLayer,c=this.currentMapService,d=0;d<b.relationships.length;++d){var e=b.relationships[d];if(c){var j=c._getRelation(e.id);if(j&&!j.visible)continue}j=true;if(e.role){if(e.role!=="esriRelRoleOrigin")continue}else j=false;var h=this.app.getResource(this.libraryId,"language-feature-editing-create-related-feature").format(e.name);this.currentFeatureRelationships.addItem({id:e.id,text:h,editable:j,relatedFeature:a,
relationship:e})}this.hasRelatedLayers.set(this.currentFeatureRelationships.getLength()>0)};j.prototype._preventDeleteForRelOrigin=function(a,b,c){var d=this,e=this.currentFeatureEsri,j=this._sourceLayer,h=null,f=false;if(e&&j&&a&&a.length()>0&&(h=a.length(),j))for(var g=0;g<a.length();g++){var v=function(){h--;h<=0&&c&&c()},y=function(a){var c=parseInt(a.id),k=a.relatedTableId?a.relatedTableId.get():a.relationship.relatedTableId,h=j.url||j._essentialsMetadata.serviceUrl,a=new esri.tasks.RelationshipQuery;
a.objectIds=[e.attributes[j.objectIdField]];a.outFields=["*"];a.relationshipId=c;var g=new esri.tasks.QueryTask(h),o=null,o=d.app.isOffline.get()===false?g.executeRelationshipQuery(a):d.app.featureLayerModule._getRelatedFeatures(d._getMapServiceByLayer(j),c,a.objectIds[0]);o.then(function(a){var c=false,e;for(e in a)if(a.hasOwnProperty(e)){c=true;break}c?d._getRelatedFeatureLayer(k,h).then(function(){if(!f){var c=[],d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d].features||a[d];if(e)if(e.length)for(var k=
0;k<e.length;k++)c.push(e[k]);else c.push(e)}c.length>0&&b&&(b(c),f=true);v()}},function(){v()}):v()},function(){v()})},w=a.getAt(g);w.relationship&&w.relationship.role==="esriRelRoleOrigin"&&y(w)}(!h||h<=0)&&c&&c()};j.prototype._getMapServiceByLayer=function(a){a=a.url||a._essentialsMetadata.serviceUrl;if(!a)return null;var b=a.indexOf("?token=");b!=-1&&(a=a.substring(0,b));for(b=0;b<this.app.site.essentialsMap.mapServices.length;++b){var c=this.app.site.essentialsMap.mapServices[b];if(c.serviceUrl===
a)return c}return null};j.prototype._getRelatedFeatureLayer=function(b,c,d,e){var j=new dojo.Deferred,b=c.substring(0,c.lastIndexOf("/")+1)+b,b=new esri.layers.FeatureLayer(b,{mode:esri.layers.FeatureLayer.MODE_SELECTION,outFields:["*"]});dojo.connect(b,"onLoad",dojo.hitch(this,function(b){a.deferredResolve(j,b);typeof d=="function"&&d(b)}));dojo.connect(b,"onError",dojo.hitch(this,function(b){a.deferredReject(j,b);typeof e==="function"&&e(b)}));return j};j.prototype._executeStartEditingRelatedRecord=
function(a){var d=this,j=a.relationship,h=a.relatedFeature,g=this._sourceLayer,m=this._getMapServiceByLayer(g);m?this.app.featureLayerModule._getRelatedFeatureLayer(m,j.id,function(g){var n=d._getMapServiceByLayer(g);n?(d.isEditingRelatedFeatureNotInSite.set(false),d.currentMapService=n):d.isEditingRelatedFeatureNotInSite.set(true);d.isEditingNewFeature.set(!a.feature);d._sourceLayer=g;d.state!==c.Idle&&d.cancelEditing();d.isEditingNewFeature.get()?(n=d._createNewEsriFeature(),n.geometry=null):n=
h;d._relatedFeature=a.relatedFeature;d._editingRelationshipOrigin=j;d.canEditGeometry.set(!!g.geometryType);d.showEditGeometryButton.set(!!g.geometryType);d.showStopEditingGeometryButton.set(false);d.currentFeatureEsri=n;d.currentFeatureEsriClone=d._cloneEsriFeature(d.currentFeatureEsri);d.originalFeatureClone=null;d.form.set(new b.EditingFormViewModel(d.app,d.libraryId,n,g));d.app.eventRegistry.event("Internal.EditorFormSetupForRelatedFeatureEvent").publish(d.form,n);if(j.keyField){for(var n=null,
m=0;m<g.relationships.length;++m){var v=g.relationships[m];if(v.id===j.id){d._editingRelationshipDestination=v;n=v.keyField;break}}if(n)for(m=0;m<d.form.get().fields.getLength();++m){if(g=d.form.get().fields.getAt(m),g.name.get()===n)if(n.toLowerCase()==="objectid"||n.toLowerCase()==="globalid")g.editable.set(false);else{g.editable.set(false);g.value.set(d._relatedFeature.attributes[j.keyField]);break}}else d.app.trace.error(d.app.getResource(d.libraryId,"language-feature-editing-relationships-key-field-missing"))}else d.app.trace.error(d.app.getResource(d.libraryId,
"language-feature-editing-relationships-require-arcgis-version"))},function(){d.app.trace.error(d.app.getResource(d.libraryId,"language-feature-editing-related-feature-failed").format(j.id))}):this.app.trace.warning("Could not edit related feature. No map service for layer '{0}' was found.".format(g.url))};j.prototype.startEditingGeometry=function(){if(!this.currentFeatureEsri)throw Error("Could not edit geometry - no feature selected.");this.currentFeatureEsriClone.hide();this.app.commandRegistry.command("StartEditingGraphicGeometry").execute(this.currentFeatureEsriClone,
this._sourceLayer)};j.prototype.stopEditingGeometry=function(){this.app.commandRegistry.command("StopEditingGraphicGeometry").execute();this.currentFeatureEsriClone&&this.currentFeatureEsriClone.show()};j.prototype._createEditingLayer=function(){this._destroyEditingLayer();var a=this.app.map;this._editingLayer=new esri.layers.GraphicsLayer;this._sourceLayer&&this._editingLayer.setRenderer(this._sourceLayer.renderer);a.addLayer(this._editingLayer);return this._editingLayer};j.prototype._destroyEditingLayer=
function(){var a=this.app.map;this.currentFeatureEsriClone&&(this.currentFeatureEsriClone.hide(),this._editingLayer&&this._editingLayer.remove(this.currentFeatureEsriClone));if(this._editingLayer)this._editingLayer.clear(),a.removeLayer(this._editingLayer),this._editingLayer=null};j.prototype._createNewEsriFeature=function(a,b,c,d){var e=new esri.Graphic(null);e.attributes=b||{};e.geometry=a||new esri.geometry.Point(NaN,NaN);e.symbol=c||null;e.infoTemplate=d||null;return e};j.prototype.save=function(a,
b){this.stopEditingGeometry();var d=this.performValidation();this.isBusy.set(false);if(d){this.state=c.Saving;this.isBusy.set(true);var d=this.currentFeatureEsri?this._cloneEsriFeature(this.currentFeatureEsri):new esri.Graphic(null),e={__editingMeta:{}};this.isEditingRelatedFeatureNotInSite.get()||!this.isEditingNewFeature.get()&&this.currentFeatureEsri&&this.currentFeatureEsri.hasOwnProperty("__editingMeta")&&dojo.mixin(d,this.currentFeatureEsri);for(var j in d.attributes)d.attributes.hasOwnProperty(j)&&
(j||delete d.attributes[j]);j=this.currentFeatureEsri;var h=this._sourceLayer;try{var g=this.form.get().getAttributeValues(),s=null;if(this.isEditingNewFeature.get())s=g;else{var s={},t;for(t in g)g.hasOwnProperty(t)&&j.attributes[t]!==g[t]&&(s[t]=g[t]);var v=h.objectIdField,y=h.globalIdField;j.attributes.hasOwnProperty(v)&&(s[v]=j.attributes[v]);j.attributes.hasOwnProperty(y)&&(s[y]=j.attributes[y])}var w=new esri.Graphic(this.currentFeatureEsriClone.toJson());w.attributes=s;this.geometryHasBeenEdited.get();
if(!this.isEditingNewFeature.get()&&typeof this.currentFeatureEsri.__editingMeta!=="undefined"){var z=dojo.clone(this.currentFeatureEsri.__editingMeta);z.dependencies[this.currentFeatureEsri.attributes[z.objectIdField]]=[];z.dependencies[this.currentFeatureEsri.attributes[z.objectIdField]].push({from:z.objectIdField,to:z.objectIdField});w.__editingMeta=e}var g=null,u=h.url||h._essentialsMetadata.serviceUrl;if(!this.isEditingRelatedFeatureNotInSite.get()&&(g=this.getMapServiceByLayer(h),!g))throw Error("Could not find map service for feature layer while saving.");
h.url=u;w.__editingMeta=d.__editingMeta;this.isBusy.set(true);var x={mapService:g,layer:h,feature:w,successCallback:dojo.hitch(this,function(){this.isBusy.set(false);this._handleSaveSuccess(w,h,a,b)}),errorCallback:dojo.hitch(this,function(a){this.isBusy.set(false);this._handleSaveError(a,b)})};try{this.app.eventRegistry.event("Internal.EditorFormPreSaveEvent").publish(this.form,x)}catch(C){return}if(this.editLogEntry!=null)x.oldEditLogEntry=this.editLogEntry,x.successCallback=function(){this.app.commandRegistry.command("RefreshOfflineLayers").execute();
a()},this.app.commandRegistry.command("ChangeEditLogEntry").execute(x);else if(this.isEditingRelatedFeatureNotInSite.get())if(this.isEditingNewFeature.get()){var A=this;x.successCallback=function(){A.app.eventRegistry.event("RelatedRecordCreatedEvent").publish(A._relatedFeature);a()};x.relatedFeature=this._relatedFeature;x.relationshipOrigin=this._editingRelationshipOrigin;x.relationshipDestination=this._editingRelationshipDestination;this.app.commandRegistry.command("CreateRelatedRecord").execute(x)}else A=
this,x.successCallback=function(){A.app.eventRegistry.event("RelatedRecordEditedEvent").publish(A._relatedFeature);a()},this.app.commandRegistry.command("UpdateRelatedRecord").execute(x);else this.isEditingNewFeature.get()?(this.app.eventRegistry.event("EditorPreCreateFeatureEvent").publish(w),this.app.commandRegistry.command("CreateFeature").execute(x)):(this.app.eventRegistry.event("EditorPreUpdateFeatureEvent").publish(w),this.app.commandRegistry.command("UpdateFeature").execute(x));this.state=
c.Saving}catch(B){this.state=c.Idle,this.isBusy.set(false),this.app.trace.error("Error applying edits: {0}".format(B))}}};j.prototype._handleSaveError=function(a,b){this.isBusy.set(false);this.state=c.Idle;var d=this.app.getResource(this.libraryId,"language-feature-layer-error-feature-edits").format(a),e=this.app.getResource(this.libraryId,"language-feature-layer-error-title");this.app.commandRegistry.command("Alert").execute(d,e);this.app.trace.error(d);b&&b(a)};j.prototype._handleSaveSuccess=function(b,
d,e){if(this.layerUpdateEndToken)dojo.disconnect(this.layerUpdateEndToken),this.layerUpdateEndToken=null;var j=a.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInLayer(this.currentFeatureEsri,this._sourceLayer);if(j){var h=b.attributes;b.attributes=null;j.attributes={};dojo.mixin(j.attributes,this.originalFeatureClone.attributes);dojo.mixin(j.attributes,h);j.show()}this._destroyEditingLayer();this.originalFeatureClone&&j&&(j={originalFeature:this.originalFeatureClone,editedFeature:j},
this.app.eventRegistry.event("FeatureEditedEvent").publish(j));this.isEditingNewFeature.set(false);this.state=c.Idle;this.editLogEntry?this.editLogEntry.setFeature(b):d.refresh();!this.editLogEntry&&this.isEditingRelatedFeatureNotInSite.get()&&(d=this.findGeocortexLayerForUrl(d.url),this.headerText.set((new a.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:b,layer:d})).label.get()));this.cancelEditing();e&&e()};j.prototype._cloneEsriFeature=function(a){return new esri.Graphic(a.toJson())};
j.prototype._handleGeometryEditInvokedEvent=function(){this.isEditingGeometry.set(true);this.showEditGeometryButton.set(false);this.showStopEditingGeometryButton.set(true);this.geometryHasBeenEdited.set(true)};j.prototype._handleGeometryEditCompletedEvent=function(a){this.isEditingGeometry.set(false);this.showEditGeometryButton.set(true);this.showStopEditingGeometryButton.set(false);this.currentFeatureEsriClone.setGeometry(a.editedGraphic.geometry);this.currentFeatureEsriClone.show();this._swapOriginalFeatureForClone()};
j.prototype._handleLayerUpdateEnd=function(){this._swapOriginalFeatureForClone()};j.prototype._swapOriginalFeatureForClone=function(){if(this.currentFeatureEsri){var b=a.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInLayer(this.currentFeatureEsri,this._sourceLayer);b&&(b.hide(),!this.isEditingGeometry.get()&&this.currentFeatureEsriClone.getLayer()&&this.currentFeatureEsriClone.show())}};j.prototype._restoreOriginalFeature=function(){if(this.currentFeatureEsri){var b=a.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInLayer(this.currentFeatureEsri,
this._sourceLayer);b&&b.show()}};j.prototype.cancelEditing=function(){this.stopEditingGeometry();this.geometryHasBeenEdited.set(false);this._restoreOriginalFeature();this._destroyEditingLayer();this.form.get()&&this.form.get().clear();this.layerUpdateEndToken&&dojo.disconnect(this.layerUpdateEndToken);this.state=c.Idle};j.prototype._canExecuteStartEditingFeature=function(b){if(b&&b.layer){var c=b.layer;if(c.mapService&&c.mapService.serviceLayer&&c.mapService.serviceLayer.isEditable&&!c.mapService.serviceLayer.isEditable())return false;
if(b.esriFeature)return!!a.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(b.esriFeature.get(),this.app.site)}return false};j.prototype._executeStartEditingFeature=function(b,c){typeof c==="undefined"&&(c=false);this.app.commandRegistry.command("ClearDefaultHighlights").execute();this.isEditingNewFeature.set(c);this.geometryHasBeenEdited.set(false);try{if(b!==null&&b instanceof a.essentialsHtmlViewer.mapping.infrastructure.Feature){var d=b;if(d.layer&&d.layer.mapService)this.currentMapService=
d.layer.mapService;this.headerText.set(d.label.get());b=d.esriFeature.get()}if(!this.app.map||!this.app.site||!this.app.site.isInitialized){var e=this;this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){e._executeStartEditingFeatureImpl(b,c)})}else this._executeStartEditingFeatureImpl(b,c)}catch(j){this.app.trace.error("Could not start editing: {0}".format(j)),this.cancelEditing()}};j.prototype._executeStartEditingFeatureImpl=function(d,j){typeof j==="undefined"&&(j=false);
this.state!==c.Idle&&this.cancelEditing();var h=null,g=j?d:a.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(d,this.app.site);if(g)if(this.originalFeatureClone=this._cloneEsriFeature(g),h=j?this._sourceLayer:g.getLayer()){j&&(h.objectIdField&&(d.attributes[h.objectIdField]=0),h.globalIdField&&(d.attributes[h.globalIdField]=""));this._sourceLayer=h;this.layerUpdateEndToken=dojo.connect(h,"onUpdateEnd",dojo.hitch(this,this._handleLayerUpdateEnd));this.state=c.EditingAttributes;
this.isEditingRelatedFeatureNotInSite.set(false);this.canEditGeometry.set(!!h.geometryType&&h.allowGeometryUpdates);this.showStopEditingGeometryButton.set(false);this.showEditGeometryButton.set(this.canEditGeometry.get());this.currentFeatureEsri=g;this.currentFeatureEsriClone=this._cloneEsriFeature(g);g.hasOwnProperty("_drawType")&&(this.currentFeatureEsriClone._drawType=g._drawType);this._createEditingLayer();this._editingLayer.add(this.currentFeatureEsriClone);this.form.set(new b.EditingFormViewModel(this.app,
this.libraryId,d,h));this.app.eventRegistry.event("Internal.EditorFormSetupEvent").publish(this.form,g);if(this._sourceLayer.typeIdField!=null){h=this.form.get();for(g=0;g<h.fields.getLength();g++){var n=h.fields.getAt(g);n.name.get()===this._sourceLayer.typeIdField&&this.handleTypeFieldSelected(n)}}try{this._buildFeatureRelationships()}catch(m){this.app.trace.warning("Could not set up related records for editing.")}this.isBusy.set(false);j||this._activateEditingView()}else this.app.trace.error("Error - could not find layer for feature.")};
j.prototype._canExecuteStartEditingNewFeature=function(){return true};j.prototype._executeStartEditingNewFeature=function(a,b){this.currentFeatureEsri=a;this._sourceLayer=b;this.headerText.set(this.app.getResource(this.libraryId,"language-common-feature-editing"));this._executeStartEditingFeature(a,true);b.geometryType&&b.allowGeometryUpdates?this.startEditingGeometry():this._activateEditingView()};j.prototype._canExecuteStartEditingEditLogEntry=function(){return true};j.prototype._executeStartEditingEditLogEntry=
function(){return true};j.prototype.handleTypeFieldSelected=function(a){if(a)for(var b=a.value.get(),c=0;c<a.valueOptions.getLength();c++){var d=a.valueOptions.getAt(c);if(d.id!=null&&d.id.toString()===b.toString()){this._loadCodedDomainsForType(d.domains);break}}};j.prototype._loadCodedDomainsForType=function(a){if(a){var b=this.form.get(),c;for(c in a)if(a.hasOwnProperty(c)&&a[c].type)for(var d=0;d<b.fields.getLength();d++){var e=b.fields.getAt(d);if(e.name.get()===c){var j=[];if(a[c].type!=="inherited")j=
a[c].codedValues;else for(var h=0;h<this._sourceLayer.fields.length;++h){var g=this._sourceLayer.fields[h];if(g.name===e.name.get()&&(g=g.domain)&&g.codedValues){j=g.codedValues;break}}this._addValueCollection({viewModel:e,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:j,nullable:e.nullable.get(),nullOption:{name:"",code:null,id:null}})}}}};j.prototype._addValueCollection=function(a){if(a){var b=a.viewModel.valueOptions;if(!b)b=a.viewModel.valueOptions=new ObservableCollection([]);
for(var c=0;c<a.valueCollection.length;++c){var d=a.valueCollection[c];!d.hasOwnProperty("id")&&d.hasOwnProperty("code")&&(d.id=d.code)}b.clear();b.addItems(a.valueCollection);a.nullable&&b.insertItem(0,a.nullOption)}};j.prototype._activateEditingView=function(){this.app.commandRegistry.command("HideFeatureTemplatePicker").execute();this.app.commandRegistry.command("ActivateView").execute("EditorView")};j.prototype._getEditingToolMessage=function(a){switch(a){case esri.toolbars.Draw.POINT:return this.app.getResource(this.libraryId,
"language-feature-editing-geometry-point");case esri.toolbars.Draw.MULTI_POINT:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-multi-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-polyline");case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:return this.app.getResource(this.libraryId,"language-feature-editing-geometry-polygon");case esri.toolbars.Draw.EXTENT:return this.app.getResource(this.libraryId,
"language-feature-editing-geometry-rectangle")}return this.app.getResource(this.libraryId,"language-feature-editing-geometry-default")};j.prototype.getMapServiceByLayer=function(a){a=a.url||a._essentialsMetadata.serviceUrl;if(!a)return null;var b=a.indexOf("?token=");b!=-1&&(a=a.substring(0,b));for(b=0;b<this.app.site.essentialsMap.mapServices.length;++b){var c=this.app.site.essentialsMap.mapServices[b];if(c.serviceUrl===a)return c}return null};j.prototype.findGeocortexLayerForUrl=function(a){for(var b=
this.app.site,c=0;c<b.essentialsMap.mapServices.length;c++){var d=b.essentialsMap.mapServices[c];if(d.serviceUrl===a&&d.layers.length>0)return d.layers[0]}return null};j.prototype._findServiceLayerForUrl=function(a){for(var b=this.app.site,c=0;c<b.essentialsMap.mapServices.length;c++){var d=b.essentialsMap.mapServices[c];if(d.url===a)return d.serviceLayer}return null};j.prototype._hideOrShowRelateds=function(){this.showRelatedLayers.set(this.hasRelatedLayers.get()&&!this.isEditingRelatedFeatureNotInSite.get()&&
!this.isEditingNewFeature.get())};return j}(a.framework.ui.ViewModelBase);b.EditorViewModel=d})(b.editing||(b.editing={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));var Shapes;(function(a){var b=function(){function a(b,c){this.x=b;this.y=c}a.prototype.getDist=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};a.origin=new a(0,0);return a}();a.Point=b})(Shapes||(Shapes={}));
var p=new Shapes.Point(3,4),dist=p.getDist();
(function(a){(function(a){(function(a){(function(a){(function(a){(function(a){a[a.esriFieldTypeSmallInteger=0]="esriFieldTypeSmallInteger";a[a.esriFieldTypeInteger=1]="esriFieldTypeInteger";a[a.esriFieldTypeSingle=2]="esriFieldTypeSingle";a[a.esriFieldTypeDouble=3]="esriFieldTypeDouble";a[a.esriFieldTypeString=4]="esriFieldTypeString";a[a.esriFieldTypeDate=5]="esriFieldTypeDate";a[a.esriFieldTypeOID=6]="esriFieldTypeOID";a[a.esriFieldTypeGeometry=7]="esriFieldTypeGeometry";a[a.esriFieldTypeBlob=8]=
"esriFieldTypeBlob";a[a.esriFieldTypeRaster=9]="esriFieldTypeRaster";a[a.esriFieldTypeGUID=10]="esriFieldTypeGUID";a[a.esriFieldTypeGlobalID=11]="esriFieldTypeGlobalID";a[a.esriFieldTypeXML=12]="esriFieldTypeXML";a[a.other=13]="other"})(a.esriFieldTypeEnum||(a.esriFieldTypeEnum={}));var b=a.esriFieldTypeEnum,c=function(){return function(){this.type=b.esriFieldTypeString;this.name=new Observable;this.displayName=new Observable;this.editable=new Observable(true);this.readOnly=new Observable(false);
this.required=new Observable(false);this.nullable=new Observable(false);this.cssClass=new Observable;this.showIndicator=new Observable(false);this.value=new Observable(null)}}();a.EditingFormField=c})(a.editing||(a.editing={}))})(a.modules||(a.modules={}))})(a.mapping||(a.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(b){(function(b){var c=function(c){function d(a,b,e,h){c.call(this,a,b);this.id="EditingFormViewModel";this.fields=new ObservableCollection;this.validationMessages=new ObservableCollection;this.buttons=new ObservableCollection;this.currentFeature=new Observable;this.featureIsNew=new Observable(false);e&&this.setup(e,h?h:null)}__extends(d,c);d.prototype.addValidationMessage=function(a){this.validationMessages.addItem(a)};d.prototype.clearValidationMessages=
function(){this.validationMessages.clear()};d.prototype.setup=function(c,d,h){this.clear();var g=[];if(!d)throw Error("Attempted to edit a feature with no layer attached!");for(var f=null,n=this.app.site.getFeatureServices(),h=null,m=0;m<n.length;++m){var r=n[m];if(r.serviceLayer===d||this.app.isOffline.get()&&r.serviceLayer.name===d.name){h=r.layers[0];break}}n=function(a){if(!h)return null;for(var b=0;b<h.fields.length;++b){var c=h.fields[b];if(c.name===a)return c}return null};r=d.fields;for(m=
0;m<r.length;++m){var s=r[m];if(s.editable){var t=n(s.name);if(!t||t.visible){var v=typeof s.nullable==="undefined"||s.nullable===null||s.nullable===true,y=s.editable===false,w=v===false&&!y,z=null;if(!this.featureIsNew.get()||s.name===d.typeIdField)c.attributes&&(z=c.attributes[s.name]);var u=new b.EditingFormField;u.name.set(s.name);u.readOnly.set(y);u.nullable.set(v);u.required.set(w);u.showIndicator.set(u.required.get());u.type=b.esriFieldTypeEnum[s.type];u.renderType=s.type;u.value=new Observable(c.attributes[s.name]);
u.length=s.length;u.editable.set(s.editable);t?u.displayName.set(t.displayName):u.displayName.set(s.alias!=null?s.alias:s.name);if(s.type==="esriFieldTypeDate")w=new a.forms.items.DatePickerFormItem(null,null),w.timePickerItem=new a.forms.items.TimePickerFormItem(null,null),s=c&&c.attributes[s.name]?new Date(c.attributes[s.name]):u.nullable.get()?null:new Date,w.includeTimePicker.set(true),w.initialDate.set(s),w.date.set(s),w.isRequired.set(u.required.get()),w.nullable.set(u.nullable.get()),u.value.sync(w.date),
u.datePickerViewModel=w;else if(s.name===d.typeIdField)f={viewModel:u,valueCollection:d.types,nullable:!w,nullOption:{name:"",code:null,id:null}},u.renderType="typeField",this._applyFieldConfiguration(f,u),f=z;else if(s.domain){if(s=s.domain,u.domain=s,s.type==="codedValue")s={viewModel:u,collectionName:"codedDomainValues",valueCollection:s.codedValues,nullable:!w,nullOption:{name:"",code:null,id:null}},u.renderType="codedDomainValue",this._applyFieldConfiguration(s,u)}else u.renderType=this._getRenderTypeForField(u);
u.validationFunc=this.app.urlParameters.hasOwnProperty("noval")?function(){return null}:b.ValidationFunctionFactory.createValidationFunction(this.app,this.libraryId,u,this);g.push(u)}}}if(f!==null)for(m=0;m<d.types.length;m++)c=d.types[m],c.id.toString()===f&&this._applyCodedDomains(c.domains);this.fields.addItems(g)};d.prototype.getRawFieldValue=function(a){for(var b=0;b<this.fields.getLength();++b){var c=this.fields.getAt(b);if(c.name.get()===a)return c.value.get()}return null};d.prototype.getAttributeValues=
function(){for(var a={},c=0;c<this.fields.getLength();++c){var d=this.fields.getAt(c),h=d.value.get(),g=null;d.type===b.esriFieldTypeEnum.esriFieldTypeDate?(h=d.value.get(),g=h===null?null:(new Date(h)).getTime()):g=d.type===b.esriFieldTypeEnum.esriFieldTypeDouble||d.type===b.esriFieldTypeEnum.esriFieldTypeInteger||d.type===b.esriFieldTypeEnum.esriFieldTypeOID||d.type===b.esriFieldTypeEnum.esriFieldTypeSingle||d.type===b.esriFieldTypeEnum.esriFieldTypeSmallInteger?Number(h):h;h===""&&d.type!==b.esriFieldTypeEnum.esriFieldTypeString&&
(g=null);a[d.name.get()]=g}return a};d.prototype._getRenderTypeForField=function(){return"text"};d.prototype._applyCodedDomains=function(a){if(a)for(var b in a)if(a.hasOwnProperty(b)&&a[b].type==="codedValue")for(var c=0;c<this.fields.getLength();c++){var d=this.fields.getAt(c);if(d.name===b){c={field:d,collectionName:"codedDomainValues",valueCollection:a[b].codedValues,nullable:d.nullable.get(),nullOption:{name:"",code:null,id:null}};d.renderType="codedDomainValue";this._applyFieldConfiguration(c,
d);break}}};d.prototype._applyFieldConfiguration=function(a,b){b.valueOptions?b.valueOptions.clear():b.valueOptions=new ObservableCollection([]);b.valueOptions.addItems(a.valueCollection);a.nullable&&b.valueOptions.insertItem(0,a.nullOption)};d.prototype.clear=function(){this.fields.clear();this.clearValidationMessages()};return d}(a.framework.ui.ViewModelBase);b.EditingFormViewModel=c})(b.editing||(b.editing={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||
(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));(function(a){a.Point=function(){function a(b,d){this.x=b;this.y=d}a.prototype.getDist=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};a.origin=new a(0,0);return a}()})(Shapes||(Shapes={}));p=new Shapes.Point(3,4);dist=p.getDist();
(function(a){(function(a){(function(a){(function(a){(function(b){var c=function(){function c(){}c.createValidationFunction=function(b,e,k){var f=a.editing.esriFieldTypeEnum[k.type],o=function(a){return a.editable.get()!==false&&(a.nullable.get()===false||a.required.get()===true)?b.getResource(e,"language-feature-editing-requires-value").format(a.displayName.get()):null};if(k.domain){var q=function(a,d,f,l){d=b.getResource(e,"language-feature-editing-invalid-number").format(d,f,l);return!a?o(k):!c.isValidNumber(k,
a)?d:a<f||a>l?d:null};if(k.domain.type==="codedValue")return function(){return null};else if(k.domain.type==="range"){var n=k.domain;return k.domain.hasOwnProperty("range")?(typeof n.replace==="Function"&&(n=n.replace("[","").replace("]","").split(",")),function(a){return q(a,k.displayName.get(),n[0],n[1])}):function(a){return q(a,k.displayName.get(),n.minValue,n.maxValue)}}else return function(){return null}}else switch(f){case "esriFieldTypeDate":return function(a){return!a?o(k):null};case "esriFieldTypeString":case "esriFieldTypeGUID":return function(a){return!a?
o(k):k.length&&a.toString().length>k.length?b.getResource(e,"language-feature-editing-value-too-long").format(k.displayName.get(),k.length):null};case "esriFieldTypeSingle":case "esriFieldTypeDouble":return function(a){return!a&&a!==0?o(k):!c.isWithinNumericTypeRange(k,a)?b.getResource(e,"language-feature-editing-invalid-numeric-range").format(k.displayName.get()):c.isValidNumber(k,a)?null:b.getResource(e,"language-feature-editing-invalid-decimal").format(k.displayName.get())};case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return function(a){return!a&&
a!==0?o(k):!c.isWithinNumericTypeRange(k,a)?b.getResource(e,"language-feature-editing-invalid-numeric-range").format(k.displayName.get()):c.isValidNumber(k,a)?null:b.getResource(e,"language-feature-editing-invalid-integer").format(k.displayName.get())};default:return function(){return null}}};c.isWithinNumericTypeRange=function(a,c){if(Number(c)===NaN)return false;var d=Number(c.toString()),f=true;a.type===b.esriFieldTypeEnum.esriFieldTypeSingle?(f=3.402823*Math.pow(10,38),f=d>=-f&&d<=f):a.type===
b.esriFieldTypeEnum.esriFieldTypeSmallInteger?f=d>=-32768&&d<=32767:a.type===b.esriFieldTypeEnum.esriFieldTypeInteger&&(f=d>=-2147483648&&d<=2147483647);return f};c.isValidNumber=function(a,c){if(!a)return false;var d=null;switch(a.type){case b.esriFieldTypeEnum.esriFieldTypeSingle:case b.esriFieldTypeEnum.esriFieldTypeDouble:d=/^[+-]?\d+.?\d*$/;break;case b.esriFieldTypeEnum.esriFieldTypeSmallInteger:case b.esriFieldTypeEnum.esriFieldTypeInteger:d=/^\s*(\+|-)?\d+\s*$/}return!d.test(String(c.toString()))?
false:true};return c}();b.ValidationFunctionFactory=c})(a.editing||(a.editing={}))})(a.modules||(a.modules={}))})(a.mapping||(a.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(a){(function(a){(function(a){(function(a){(function(a){var b=function(){return function(){this.name=new Observable("");this.description=new Observable;this.drawingTool=new Observable;this.symbolUri=new Observable;this.symbolStyle=new Observable("");this.proto={};this.swatchElement=null}}();a.FeatureTemplate=b})(a.editing||(a.editing={}))})(a.modules||(a.modules={}))})(a.mapping||(a.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(b){(function(b){var c=function(b){function c(d,e){b.call(this,d,e);this.app.commandRegistry.command("ShowFeatureTemplatePicker").register(this,function(a){this.app.commandRegistry.command("ActivateView").execute(this.id);if(this.viewModel)if(this.app.isOffline.get()===true){var b=this;this.app.store.get("__featureLayerModuleIndex",function(c){if(c&&(c=dojo.fromJson(c))){b.viewModel.filteredLayers=[];for(var d in c.featureLayers){if(!c.featureLayers.hasOwnProperty(d))break;
b.viewModel.filteredLayers.push(c.featureLayers[d].serviceId)}}b._loadTemplate(a)})}else{if(this.viewModel.filteredLayers)this.viewModel.filteredLayers.length=0,this.viewModel.filteredLayers=null;this._loadTemplate(a)}},function(b){return b===void 0?true:typeof b==="object"&&b instanceof a.essentials.Layer&&b.mapService&&b.mapService.serviceLayer&&b.mapService.serviceLayer.isEditable?b.mapService.serviceLayer.isEditable():false});this.app.commandRegistry.command("HideFeatureTemplatePicker").register(this,
function(){this.isActive&&this.app.viewManager.deactivateView(this)})}__extends(c,b);c.prototype._loadTemplate=function(a){a?this.viewModel.loadTemplatesForCurrentLayer(a):this.viewModel.loadLayerTemplates()};c.prototype.handleFeatureTemplateClick=function(a,b,c){a=null;if(c.proto&&c.proto.toJson)a=new esri.Graphic(c.proto.toJson());else if(a=new esri.Graphic(null),c.proto.attributes)a.attributes=c.proto.attributes;b=null;if(c.drawingTool&&c.drawingTool.value)switch(c.drawingTool.value){case "esriFeatureEditToolPoint":b=
"MapPoint";break;case "esriFeatureEditToolLine":b="Polyline";break;case "esriFeatureEditToolFreehand":c.layer.geometryType==="esriGeometryPolyline"?b="FreehandPolyline":c.layer.geometryType==="esriGeometryPolygon"&&(b="FreehandPolygon");break;case "esriFeatureEditToolAutoCompletePolygon":case "esriFeatureEditToolPolygon":b="Polygon";break;case "esriFeatureEditToolEllipse":b="Ellipse";break;case "esriFeatureEditToolCircle":b="Circle";break;case "esriFeatureEditToolRectangle":b="Rectangle";break;default:b=
"Polygon"}if(!b)switch(c.layer.geometryType){case "esriGeometryPoint":b="MapPoint";break;default:b=c.layer.geometryType.replace("esriGeometry","")}a._drawType=b;this.app.commandRegistry.command("StartAddingFeatureGeometry").execute(a,c.layer);this.app.commandRegistry.command("ActivateView").execute("MapView")};return c}(a.framework.ui.ViewBase);b.TemplatePickerView=c})(b.editing||(b.editing={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer=
{}))})(geocortex||(geocortex={}));__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(b){(function(b){var c=function(b){function c(a,d){b.call(this,a,d);this.layerIsEditable=new Observable(false);this.layerTemplates=new ObservableCollection}__extends(c,b);c.prototype.initialize=function(){this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this.loadLayerTemplates)};c.prototype._layerIsValidForEditing=function(a){if(!a)return false;var b=true;if(this.filteredLayers)for(var b=false,c=0;c<this.filteredLayers.length;c++)if(this.filteredLayers[c]===
a){b=true;break}return b};c.prototype.loadTemplatesForCurrentLayer=function(a){a&&a.mapService&&(this.layerTemplates.clear(),(a=this._getFeatureLayerModel(a.mapService))&&this.layerTemplates.addItem(a))};c.prototype.loadLayerTemplates=function(){var a=this.app.site;if(a&&a.essentialsMap&&a.isInitialized){a=a.getFeatureServices();this.layerTemplates.clear();for(var b=[],c=0;c<a.length;c++){var d=this._getFeatureLayerModel(a[c]);d&&b.push(d)}this.layerTemplates.addItems(b)}};c.prototype._getFeatureLayerModel=
function(a){var b=a.serviceLayer;if(!this._layerIsValidForEditing(a.id))return null;if(b.isEditable&&b.isEditable()){b=a.displayName;if(a&&a.layers&&a.layers.length>0)b=a.layers[0].displayName;var c=new ObservableCollection,d=this._loadFeatureTemplates(a.serviceLayer);d&&d.length>0&&c.addItems(d);return{displayName:new Observable(b),mapServiceId:new Observable(a.id),layer:a.serviceLayer,templates:c,proto:null}}};c.prototype.createTemplate=function(b,c){var d=new a.essentialsHtmlViewer.mapping.modules.editing.FeatureTemplate;
if(c&&(d.name.set(c.name),d.description.set(c.description),d.drawingTool.set(c.drawingTool),d.proto=c.prototype,b.renderer)){var e=this._getTemplateSymbol(c,b.renderer);if(e)switch(e.type){case "picturemarkersymbol":d.symbolUri.set(e.url);d.swatchElement=null;break;default:d.swatchElement="<div class='simple-swatch square' style='background-color: {0}'></div>".format(e.color.toCss())}}d.layer=b;return d};c.prototype._consumeTemplate=function(a,b){return this.createTemplate(a,b)};c.prototype._getTemplateSymbol=
function(a,b){var c=new esri.Graphic(null);c.attributes={};a.prototype.attributes&&dojo.mixin(c.attributes,a.prototype.attributes);return b.getSymbol(c)||b.defaultSymbol};c.prototype._loadFeatureTemplates=function(a){if(a&&a.templates){var b=[];if(a.templates.length>0)for(var c=0;c<a.templates.length;++c)b.push(this._consumeTemplate(a,a.templates[c]));else if(a.types&&a.types.length>0)for(c=0;c<a.types.length;++c){var d=a.types[c];if(d.templates)for(var e=0;e<d.templates.length;++e)b.push(this._consumeTemplate(a,
d.templates[e]))}return b}};return c}(a.framework.ui.ViewModelBase);b.TemplatePickerViewModel=c})(b.editing||(b.editing={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsModule",geocortex.framework.application.ModuleBase,{activeViewModelsList:null,activeViewsList:null,detailsProviders:null,regionNames:null,constructor:function(){this.activeViewModelsList=[];this.activeViewsList=[];this.regionNames=["FeatureRegion"]},initialize:function(a){this.inherited(arguments);if(a){if(a.regionNames)this.regionNames=dojo.isArray(a.regionNames)?a.regionNames:[a.regionNames];a.providers&&this.registerCommands(a.providers)}},
registerCommands:function(a){var b=this;this.app.commandRegistry.command("GetFeatureDetailsProviders").register(this,function(c){this.activeViewModelsList.length<1&&dojo.forEach(this.regionNames,function(c){dojo.forEach(a,function(a){var f=dojo.getObject(a.type);if(f)f=new f(b.app,b.libraryId),f.app=b.app,f.libraryId=b.libraryId,f.initialize(a.config),a=b.app.viewManager.createView({markup:a.markup,type:a.viewType,iconUri:a.iconUri,regionName:c,visible:true,libraryId:b.libraryId,configuration:a.viewConfig}),
a.attach(f),b.app.commandRegistry.command("ActivateView").execute(a.id),b.activeViewsList.push(a),b.activeViewModelsList.push(f)})});this.updateFeature(c)})},updateFeature:function(a){dojo.forEach(this.activeViewModelsList,function(b){b.currentFeature.set(a)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsView",geocortex.framework.ui.ViewBase,{constructor:function(){this.app.eventRegistry.event("FeatureDeletedEvent").subscribe(this,function(){this.app.viewManager.deactivateView(this);return false})},attach:function(a){this.inherited(arguments);a&&this.title.sync(a.headerText)},deactivated:function(){this.inherited(arguments);if(this.configuration&&this.configuration.onDeactivated)for(var a=this.configuration.onDeactivated,
b=0;b<a.length;b++)this.app.commandRegistry.command(a[b]).execute()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsViewModel",geocortex.framework.ui.ViewModelBase,{headerText:null,currentFeature:null,currentEsriFeatureClone:null,currentFeatureSet:null,viewsToActivate:null,constructor:function(){this.featureSetCollection=new Observable;this.headerText=new Observable("");this.currentFeature=new Observable("");this.currentFeature.bind(this,function(){var a=this.currentFeature.get();this.currentEsriFeatureClone=a?geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.cloneEsriFeature(a._graphic):
null});this.registerCommands();this.subscribeEvents()},initialize:function(a){if(a&&(a.viewsToActivate||a.viewToActivate))if(this.viewsToActivate=a.viewsToActivate||a.viewToActivate,!dojo.isArray(this.viewsToActivate))this.viewsToActivate=[this.viewsToActivate]},registerCommands:function(){this.app.commandRegistry.command("ShowFeatureDetails").register(this,function(a){this.handleShowFeatureDetails(a);this.currentFeatureSet=this.currentFeature.get().featureSet})},subscribeEvents:function(){this.app.eventRegistry.event("FeatureEditedEvent").subscribe(this,
this._handleEditedFeature);this.app.eventRegistry.event("FeatureDeletedEvent").subscribe(this,this._handleDeletedFeature);this.app.eventRegistry.event("FSMCollectionRemovedEvent").subscribe(this,this._onFeatureSetCollectionRemoved)},_handleDeletedFeature:function(a){var b={};if(!a.originalFeature)if(a instanceof esri.Graphic)b.originalFeature=a;else{this.app.trace.warning("FeatureDetailsViewModel: Could not handle FeatureDeletedEvent. Original feature not provided.");return}if(!b.originalFeature)b.originalFeature=
a.originalFeature;b.action="delete";this._handleEditedFeature(b)},_handleEditedFeature:function(a){if(!a.originalFeature||!a.editedFeature&&!a.action)this.app.trace.warning("FeatureDetailsViewModel: Could not handle FeatureEditedEvent. Original or Edited feature not provided.");else if(this.currentEsriFeatureClone&&geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.esriFeaturesEqual(this.currentEsriFeatureClone,a.originalFeature))for(var b=0;b<this.currentFeatureSet.features.length();b++){var c=
this.currentFeatureSet.features.getAt(b);if(c===this.currentFeature.get()){!a.editedFeature&&a.action==="delete"?this.currentFeatureSet.features.get().splice(b,1):(c.esriFeature.set(a.editedFeature),this.processCurrentFeature());this.app.eventRegistry.event("PulseResultViewInternalEvent").publish();break}}},handleShowFeatureDetails:function(a){this._setCurrentFeature(a);this.currentFeature.get()&&this.app.commandRegistry.command("GetFeatureDetailsProviders").execute(this.currentFeature.get());for(a=
0;a<this.viewsToActivate.length;a++){var b=this.viewsToActivate[a];this.app.commandRegistry.command("ActivateView").execute(b)}},_onFeatureSetCollectionRemoved:function(a){var a=a.featureSetCollection,b=this.currentFeature.get();if(b&&b.featureSet&&a&&a.getFeatureSetById(b.featureSet.id)){this.currentFeature.set(null);for(a=0;a<this.viewsToActivate.length;a++)b=this.viewsToActivate[a],this.app.commandRegistry.command("DeactivateView").execute(b)}},_setCurrentFeature:function(a){if(typeof a=="string"){var b=
this.app.featureSetManager.getCollectionById(a);b?(a=b.firstFeature())?this.currentFeature.set(a):this.app.trace.error("No feature in feature set collection"):this.app.trace.error("No feature set collection found matching id: "+a)}else a&&a instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature&&this.currentFeature.set(a);this.processCurrentFeature()},processCurrentFeature:function(){this.headerText.set(this.currentFeature.get().label.get())}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.AttachmentsView",geocortex.framework.ui.ViewBase,{constructor:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.AttachmentsViewModel",geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase,{hasAttachments:null,attachmentInfos:null,isAttachmentInfosInitialized:null,noAttachments:null,isOffline:null,bindToken:null,currentFeature:null,constructor:function(a,b){this.inherited(arguments);this.currentFeature=new Observable;this.currentFeature.bind(this,this.handleFeatureChanged);
this.hasAttachments=new Observable(false);this.noAttachments=new Observable(false);this.isOffline=new Observable(false);this.isAttachmentInfosInitialized=new Observable(false);this.attachmentInfos=new ObservableCollection;this.app.eventRegistry.event("FeatureAttachmentAddedEvent").subscribe(this,this.handleFeatureChanged)},handleFeatureChanged:function(a){this.hasAttachments.set(false);this.noAttachments.set(false);this.isOffline.set(false);this.isAttachmentInfosInitialized.set(false);this.attachmentInfos.clear();
if(a){if(this.hasAttachments.set(a.hasAttachments.get()),this.hasAttachments.get())a.attachmentInfosInitialized.get()?(this._setAttachmentInfos(a.attachmentInfos),this.attachmentInfos.length()==0&&(this.isOffline.set(this.app.isOffline.get()),this.noAttachments.set(!this.app.isOffline.get())),this.isAttachmentInfosInitialized.set(true)):this.bindToken=a.attachmentInfosInitialized.bind(this,function(b){b&&(this.isAttachmentInfosInitialized.set(true),this.attachmentInfos.clear(),this._setAttachmentInfos(a.attachmentInfos),
this.attachmentInfos.length()==0&&(this.isOffline.set(this.app.isOffline.get()),this.noAttachments.set(!this.app.isOffline.get())),a.attachmentInfosInitialized.unbind(this.bindToken))}),a.attachmentInfos.get()}else throw Error("Feature cannot be null for the attachment infos view model");},_setAttachmentInfos:function(a){this.attachmentInfos.clear();for(var b=a.getLength(),c=0;c<b;c++){var d=a.getAt(c);this.attachmentInfos.addItem({name:d.name,url:d.url,size:this.formatSize(d.size.get())})}},formatSize:function(a){for(var b=
0;a>1E3;b++)a=Math.round(a/1E3);return a+" "+"B,KB,MB,GB,TB,PB".split(",")[b]}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.AttributesView",geocortex.framework.ui.ViewBase,{constructor:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.AttributesViewModel",geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase,{currentFeature:null,attributes:null,attributeTypes:null,_attributesChangedSubscriptionToken:null,constructor:function(a,b){this.inherited(arguments);this.attributes=new ObservableCollection;this.currentFeature=new Observable;this.currentFeature.bind(this,this.handleCurrentFeatureChanged)},
handleCurrentFeatureChanged:function(a){if(a){this._getAttributeTypes(this.currentFeature.get());var b=a.getAttributes();this._attributesChangedSubscriptionToken=a.linkedAttributes.bind(this,this._handleAttributesChanged);this.processAttributes(b);this.attributes.set(b)}else this.attributes.clear()},_getAttributeTypes:function(a){this.attributeTypes={};if(a.layer&&a.layer.fields)for(var b=0;b<a.layer.fields.length;b++){var c=a.layer.fields[b];this.attributeTypes[c.name]=c.dataType}},_handleAttributesChanged:function(){var a=
this.currentFeature.get().getAttributes();this.processAttributes(a);this.attributes.set(a)},processAttributes:function(a){for(var b=0;b<a.length;b++){var c=a[b].name.get(),d=a[b].value.get();a[b].displayAsUrl=/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/.test(d);this.attributeTypes[c]=="DateTime"?d&&a[b].value.set(this._formatDate(d)):d===0?a[b].value.set("0"):d===false&&a[b].value.set("false")}},_formatDate:function(a){var b=new Date(a),c=this.getResource("language-feature-date-format")||
"EEE MMM dd";try{a=dojo.date.locale.format(b,{datePattern:c,selector:"date"})}catch(d){this.app.trace.warning("Unable to format date: "+d.message)}return a}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.DataLinksView",geocortex.framework.ui.ViewBase,{constructor:function(){},handleViewClick:function(a,b,c){this.viewModel.currentDataLink.set(c);this.viewModel.activateDataLinkView(this.regionName)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.DataLinksViewModel",geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase,{currentFeature:null,hasDataLinks:null,dataLinksList:null,currentDataLink:null,featureDataLinkBindingToken:null,constructor:function(a,b){this.inherited(arguments);this.hasDataLinks=new Observable;this.dataLinksList=new ObservableCollection;this.currentFeature=new Observable;
this.currentFeature.bind(this,this.handleCurrentFeatureChanged);this.currentDataLink=new Observable},initialize:function(a){if(a&&a.dataLinkView)this.targetRegion=a.dataLinkView},handleCurrentFeatureChanged:function(a){this.hasDataLinks.set(false);this.dataLinksList.clear();this.featureDataLinkBindingToken=a.dataLinkingResults.bind(this,this.handleCollectionChanged);this._handleDataLinks(a.dataLinkingResults.get())},activateDataLinkView:function(a){if(this.targetRegion)a=this.targetRegion;if(!a)throw Error("No target region has been specified for the data link details.");
if(!this.dataLinkView)this.dataLinkView=this.app.viewManager.createView({markup:"Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinkView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.DataLinkView",iconUri:"Resources/Images/Icons/file-multi-24.png",regionName:a,visible:false,libraryId:this.libraryId}),this.dataLinkView.attach(this);this.dataLinkView.title.set(this.currentDataLink.get().displayName);this.app.viewManager.activateView(this.dataLinkView)},
handleCollectionChanged:function(a){a.type==="append"&&this._handleDataLinks(a.sender.value.slice(a.rangeStart,a.rangeStart+1))},_handleDataLinks:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.dataLink&&c.dataLink.get()&&!c.dataLink.get().isOneToOne){var d=new ObservableCollection(this._buildLinkGroup(c));this.dataLinksList.addItem({displayName:c.dataLink.get().displayName,dataLinks:d});this.hasDataLinks.get()||this.hasDataLinks.set(true)}}},_buildLinkGroup:function(a){for(var a=a.table.get(),
b=[],c=0;c<a.rows.length;c++){var d=a.rows[c].row;b.push({displayName:d[0],attributes:new ObservableCollection(this.toDict(a.columns,d))})}return b},toDict:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push({name:a[d],value:b[d]});return c}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.DataLinkView",geocortex.framework.ui.ViewBase,{constructor:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureActionsView",geocortex.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView,{attach:function(a){this.inherited(arguments);this.menuContext.sync(a.currentFeature)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureActionsViewModel",geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase,{currentFeature:null,constructor:function(a,b){this.inherited(arguments);this.currentFeature=new Observable}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.Hyperlink",null,{text:null,uri:null,iconUri:null,target:null,toolTip:null,currentFeature:null,constructor:function(a,b){if(b&&(this.currentFeature=b,a)){if(a.text)this.text=this.currentFeature.formatTemplateString(a.text);else if(a.uri)this.text=this.currentFeature.formatTemplateString(a.uri);else return;if(a.uri)this.uri=this.currentFeature.formatTemplateString(a.uri);if(a.iconUri)this.iconUri=a.iconUri;
if(a.target)this.target=a.target;if(a.toolTip)this.toolTip=this.currentFeature.formatTemplateString(a.toolTip)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.HyperlinksViewModel",geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase,{currentFeature:null,hyperlinks:null,constructor:function(a,b){this.inherited(arguments);this.currentFeature=new Observable;this.currentFeature.bind(this,this.handleCurrentFeatureChanged);this.hyperlinks=new ObservableCollection(null)},handleCurrentFeatureChanged:function(a){this.hyperlinks.set(null);
if(a.hyperlinks){var b=dojo.getObject("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.Hyperlink");if(b)for(var c=0;c<a.hyperlinks.getLength();c++)this.hyperlinks.addItem(new b(a.hyperlinks.getAt(c),a));else this.hyperlinks.additems(a.hyperlinks)}}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.HyperlinksView",geocortex.framework.ui.ViewBase,{constructor:function(){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.RelatedFeaturesView",geocortex.framework.ui.ViewBase,{constructor:function(){},handleViewClick:function(a,b,c){if(c&&c.attributes&&c.attributes.getLength()>0){a=c.attributes.get(0);for(b=0;b<a.length;b++){var d=a[b].value.get();a[b].displayAsUrl=/^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/.test(d)}}this.viewModel.currentRelatedFeature.set(c);this.viewModel.activateRelatedFeatureView(this.regionName)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.RelatedFeaturesViewModel",geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.FeatureProviderBase,{currentFeature:null,hasRelationships:null,relationList:null,currentRelatedFeature:null,constructor:function(a,b){this.inherited(arguments);this.currentFeature=new Observable;this.currentFeature.bind(this,this.handleCurrentFeatureChanged);this.hasRelationships=new Observable(false);
this.relationList=new ObservableCollection;this.currentRelatedFeature=new Observable;this.subscribeEvents()},subscribeEvents:function(){this.app.eventRegistry.event("RelatedRecordCreatedEvent").subscribe(this,this._relatedRecordUpdated);this.app.eventRegistry.event("RelatedRecordEditedEvent").subscribe(this,this._relatedRecordUpdated);this.app.eventRegistry.event("FeatureEditedEvent").subscribe(this,this._relatedRecordUpdated)},handleCurrentFeatureChanged:function(a){if(a){if(this.hasRelationships.set(false),
this.relationList.clear(),a.hasVisibleRelationships.get()&&a.layer&&a.layer.relationships){this.hasRelationships.set(true);for(var b=0;b<a.layer.relationships.length;b++)a.layer.relationships[b].visible&&this.relationList.addItem({displayName:new Observable(a.layer.relationships[b].displayName),id:new Observable(a.layer.relationships[b].id),relatedTableId:new Observable(a.layer.relationships[b].relatedTableId),visible:new Observable(a.layer.relationships[b].visible),relatedEsriFeatures:new ObservableCollection,
hasRetrievedData:new Observable(false),noRelatedFeatures:new Observable(false)});this._fetchRelatedFeatures()}}else throw Error("Feature cannot be null for the related features view model");},initialize:function(a){if(a&&a.relatedFeatureView)this.targetRegion=a.relatedFeatureView},activateRelatedFeatureView:function(a){if(this.targetRegion)a=this.targetRegion;if(!a)throw Error("No target region has been specified for the related feature details.");if(!this.relatedDetailsView)this.relatedDetailsView=
this.app.viewManager.createView({markup:"Mapping/modules/FeatureDetails/FeatureDetailsProviders/RelatedFeatureView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.RelatedFeatureView",iconUri:"Resources/Images/Icons/file-multi-24.png",regionName:a,visible:false,libraryId:this.libraryId}),this.relatedDetailsView.attach(this);this.relatedDetailsView.title.set(this.currentRelatedFeature.get().relationName.get()+": "+this.currentRelatedFeature.get().displayName.get());
this.app.viewManager.activateView(this.relatedDetailsView)},_relatedRecordUpdated:function(){this.currentFeature.pulse()},_fetchRelatedFeatures:function(){var a=this,b=this.currentFeature.get();if(b&&b.layer&&this.relationList&&this.relationList.length()>0){var c=b.layer;if(c){var d;for(d=0;d<this.relationList.length();d++){var e=function(d){var e=d.id.get(),j=new esri.tasks.RelationshipQuery;j.outFields=["*"];j.relationshipId=d.id.get();j.objectIds=[b.getPrimaryKeyValue()];var k=b.layer.getLayerUrl();
c.mapService&&c.mapService.serviceToken&&(k+=k.indexOf("?")>-1?"&token=":"?token=",k+=encodeURIComponent(c.mapService.serviceToken));(new esri.tasks.QueryTask(k)).executeRelationshipQuery(j).then(function(b){var j=false,k;for(k in b)if(b.hasOwnProperty(k)){j=true;break}j?c.getRelatedFeatureLayer(e).then(function(c){for(var e in b)if(b.hasOwnProperty(e))for(var j=0;j<b[e].features.length;j++){var h=a._processRelatedFeature(c,b[e].features[j],d);d.relatedEsriFeatures.addItem(h);c.hasAttachments&&setTimeout(function(a,
b){return function(){b._loadAttachments(a)}}(h,a),100)}d.hasRetrievedData.set(true)},function(b){d.hasRetrievedData.set(true);d.noRelatedFeatures.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(c.displayName,b.message))}):(d.hasRetrievedData.set(true),d.noRelatedFeatures.set(true))},function(b){d.hasRetrievedData.set(true);d.noRelatedFeatures.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(c.displayName,b.message))})},f=function(d){var e=
parseInt(d.id.get());c.mapService&&(c.mapService.mapServiceType===geocortex.essentials.MapServiceType.FEATURE||c.mapService.mapServiceType===geocortex.essentials.MapServiceType.DYNAMIC)&&a.app.featureLayerModule?a.app.featureLayerModule._getRelatedFeatures(c.mapService,e,b.getPrimaryKeyValue()).then(function(b){b&&b.length>0?a.app.featureLayerModule._getRelatedFeatureLayer(c.mapService,e).then(function(c){for(var e=0;e<b.length;e++){var h=a._processRelatedFeature(c,b[e],d);d.relatedEsriFeatures.addItem(h)}d.hasRetrievedData.set(true)},
function(b){d.hasRetrievedData.set(true);d.noRelatedFeatures.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(c.displayName,b.message))}):(d.hasRetrievedData.set(true),d.noRelatedFeatures.set(true))},function(b){d.hasRetrievedData.set(true);d.noRelatedFeatures.set(true);a.app.trace.error("Error getting related record for layer {0}: {1}.".format(c.displayName,b.message))}):d.hasRetrievedData.set(true)};this.app.isOffline.get()?f(this.relationList.getAt(d)):e(this.relationList.getAt(d))}}}},
_makeAttributesObservable:function(a,b){var c=new ObservableCollection,d=this._getAttributeTypes(b);if(a)for(var e in a)a.hasOwnProperty(e)&&(value=a[e],d[e]&&d[e]==="esriFieldTypeDate"&&(value=this._formatDate(value)),c.addItem({name:new Observable(e),value:new Observable(value)}));return c},_processRelatedFeature:function(a,b,c){var d=new ObservableCollection,e=b.attributes[a.displayField];e||(e=b.attributes[a.objectIdField]);return{displayName:new Observable(e),relationName:new Observable(c.displayName.get()),
featureUrl:a.url+"/"+b.attributes[a.objectIdField],attributes:this._makeAttributesObservable(b.attributes,a),geometry:new Observable(b.geometry),hasAttachments:new Observable(false),attachmentInfos:d}},_loadAttachments:function(a){var b=this,c=a.featureUrl+"/attachments";esri.request({url:c+"?f=json&ts="+(new Date).getTime(),handleAs:"json"}).then(function(b){if(b&&b.attachmentInfos&&b.attachmentInfos.length>0){var e;for(e=0;e<b.attachmentInfos.length;e++){var f=b.attachmentInfos[e],g=new geocortex.essentialsHtmlViewer.mapping.infrastructure.AttachmentInfo;
g.id.set(f.id);g.contentType.set(f.contentType);g.size.set(f.size);g.name.set(f.name);g.url.set(c+"/"+f.id);a.attachmentInfos.addItem(g)}a.hasAttachments.set(true)}},function(c){b.app.trace.error("Unable to retrieve attachment information for related feature '"+a.featureUrl+"': "+c.message)})},_getAttributeTypes:function(a){var b={};a&&a.fields&&dojo.forEach(a.fields,function(a){b[a.name]=a.type});return b},_formatDate:function(a){var a=new Date(a),b=this.getResource("language-feature-date-format")||
"EEE MMM dd";try{dateString=dojo.date.locale.format(a,{datePattern:b,selector:"date"})}catch(c){this.app.trace.warning("Unable to format date: "+c.message)}return dateString}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.FeatureDetails.FeatureDetailsProviders.RelatedFeatureView",geocortex.framework.ui.ViewBase,{constructor:function(){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.FeatureEditingModule",geocortex.framework.application.ModuleBase,{constructor:function(){},initialize:function(){}});
geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.FeatureEditingModule.getEditingGeometryStatusMessage=function(a,b,c,d){switch(c){case esri.toolbars.Draw.POINT:return a.getResource(b,"language-feature-editing-geometry-point");case esri.toolbars.Draw.MULTI_POINT:return d?a.getResource(b,"language-feature-editing-geometry-multi-point"):a.getResource(b,"language-feature-editing-geometry-point");case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYLINE:return a.getResource(b,
"language-feature-editing-geometry-polyline");case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.FREEHAND_POLYGON:return a.getResource(b,"language-feature-editing-geometry-polygon");case esri.toolbars.Draw.EXTENT:return a.getResource(b,"language-feature-editing-geometry-rectangle")}return a.getResource(b,"language-feature-editing-geometry-default")};
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.TemplatePickerView",geocortex.framework.ui.ViewBase,{constructor:function(){this.app.commandRegistry.command("ShowFeatureTemplatePicker").register(this,function(a){this.app.commandRegistry.command("ActivateView").execute(this.id);if(this.viewModel)if(this.app.isOffline.get()===true){var b=this;this.app.store.get("__featureLayerModuleIndex",function(c){if(c&&(c=dojo.fromJson(c))){b.viewModel.filteredLayers=[];for(var d in c.featureLayers){if(!c.featureLayers.hasOwnProperty(d))break;
b.viewModel.filteredLayers.push(c.featureLayers[d].serviceId)}}b._loadTemplate(a)})}else{if(this.viewModel.filteredLayers)this.viewModel.filteredLayers.length=0,this.viewModel.filteredLayers=null;this._loadTemplate(a)}},function(a){return a===void 0?true:typeof a==="object"&&a instanceof geocortex.essentials.Layer&&a.mapService&&a.mapService.serviceLayer&&a.mapService.serviceLayer.isEditable?a.mapService.serviceLayer.isEditable():false})},_loadTemplate:function(a){a?this.viewModel.loadTemplatesForCurrentLayer(a):
this.viewModel.loadLayerTemplates()},handleFeatureTemplateClick:function(a,b,c){a=null;if(c.proto&&c.proto.toJson)a=new esri.Graphic(c.proto.toJson());else if(a=new esri.Graphic(null),c.proto.attributes)a.attributes=c.proto.attributes;b=null;if(c.drawingTool&&c.drawingTool.value)switch(c.drawingTool.value){case "esriFeatureEditToolPoint":b="MapPoint";break;case "esriFeatureEditToolLine":b="Polyline";break;case "esriFeatureEditToolFreehand":c.layer.geometryType==="esriGeometryPolyline"?b="FreehandPolyline":
c.layer.geometryType==="esriGeometryPolygon"&&(b="FreehandPolygon");break;case "esriFeatureEditToolAutoCompletePolygon":case "esriFeatureEditToolPolygon":b="Polygon";break;case "esriFeatureEditToolRectangle":c.layer.geometryType==="esriGeometryPolygon"&&dojo.mixin(a,{needsConversion:true});b="Rectangle";break;default:b="Polygon"}if(!b)switch(c.layer.geometryType){case "esriGeometryPoint":b="MapPoint";break;default:b=c.layer.geometryType.replace("esriGeometry","")}c.layer.add(a);c.layer.show&&c.layer.show();
dojo.mixin(a,{drawType:b});this.app.commandRegistry.command("StartAddingFeatureGeometry").execute(a);this.app.commandRegistry.command("ActivateView").execute("MapView")}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.TemplatePickerViewModel",geocortex.framework.ui.ViewModelBase,{layerTemplates:null,filteredLayers:null,constructor:function(){this.layerTemplates=new ObservableCollection},initialize:function(){this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this.loadLayerTemplates)},_layerIsValidForEditing:function(a){if(!a)return false;var b=true;if(this.filteredLayers)for(var b=false,c=0;c<this.filteredLayers.length;c++)if(this.filteredLayers[c]===
a){b=true;break}return b},loadTemplatesForCurrentLayer:function(a){a&&a.mapService&&(this.layerTemplates.clear(),(a=this._getFeatureLayerModel(a.mapService))&&this.layerTemplates.addItem(a))},loadLayerTemplates:function(){if(this.app.site&&this.app.site.essentialsMap&&this.app.site.isInitialized){var a=this.app.site.getFeatureServices();this.layerTemplates.clear();for(var b=[],c=0;c<a.length;c++){var d=this._getFeatureLayerModel(a[c]);d&&b.push(d)}this.layerTemplates.addItems(b)}},_getFeatureLayerModel:function(a){if(a){if(!this._layerIsValidForEditing(a.id))return null;
if(a.serviceLayer.isEditable&&a.serviceLayer.isEditable()){var b=a.displayName;if(a&&a.layers&&a.layers.length>0)b=a.layers[0].displayName;var c=new ObservableCollection,d=true,e=this._loadFeatureTemplates(a.serviceLayer);e&&e.length>0&&(c.addItems(e),d=false);b={displayName:new Observable(b),mapServiceId:new Observable(a.id),layer:a.serviceLayer,templates:c};if(d){b.proto={attributes:[]};for(d=0;d<a.serviceLayer.fields.length;d++)b.proto.attributes.push(a.serviceLayer.fields[d])}return b}}},createTemplate:function(a,
b){var c=new geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Templates.FeatureTemplateViewModel;if(b){var d=b.name;c.name.set(d);c.description.set(b.description);c.drawingTool.set(b.drawingTool);c.proto=b.prototype;if(a.renderer&&(d=this._getTemplateSymbol(d,a.renderer)))switch(d.type){case "picturemarkersymbol":c.symbolUri.set(d.url);break;default:c.setTemplateShapeStyle("background-color:"+d.color.toCss()+";height:24px;width:24px"),d=this._getSVGShapeType(d.type),c.createSVGElement(d.shapeType,
d.points)}}c.layer=a;return c},_consumeTemplate:function(a,b){return this.createTemplate(a,b)},_getSVGShapeType:function(a){var b={shapeType:null,points:null};switch(a){case "simplelinesymbol":b.shapeType="polyline";b.points="20,1 25,9 16,21 8,2";break;case "simplemarkersymbol":case "simplefillsymbol":b.shapeType="polygon",b.points="30,1 35,9 20,21 8,2"}return b},_getTemplateSymbol:function(a,b){if(a&&b)if(b.infos)for(var c=0;c<b.infos.length;c++){var d=b.infos[c];if(d.label===a||d.value===a)return d.symbol}else return b.symbol},
_loadFeatureTemplates:function(a){if(a&&a.templates){var b=[];if(a.templates.length>0)for(var c=0;c<a.templates.length;++c)b.push(this._consumeTemplate(a,a.templates[c]));else if(a.types&&a.types.length>0)for(c=0;c<a.types.length;++c){var d=a.types[c];if(d.templates)for(var e=0;e<d.templates.length;++e)b.push(this._consumeTemplate(a,d.templates[e]))}return b}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Editor.AttributeEditorView",geocortex.framework.ui.ViewBase,{inactive:null,constructor:function(){this.app.commandRegistry.command("ShowFeatureAttributeEditor").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)});this.app.commandRegistry.command("HideFeatureAttributeEditor").register(this,function(){this.isActive&&this.app.viewManager.deactivateView(this);return false})},deactivated:function(){if(!this.inactive)this.inactive=
true,this.inherited(arguments),this.viewModel&&this.viewModel._cancelEditing()},attach:function(a){this.inherited(arguments);a&&this.title.sync(a.headerText)},handleButtonClick:function(a,b,c){this.viewModel.applyButtonClick(c);return false},handleTypeFieldChange:function(a,b,c){this.viewModel.typeFieldSelected(c);return false},handleClickAddRelatedRecord:function(a,b,c){if(!c)return false;if(c.editable&&!c.editable.get())return false;if(c.relationship.keyField&&(a=c.feature.get(),String.isNullOrEmpty(a.attributes[c.relationship.keyField])))return c=
this.app.getResource(this.viewModel.libraryId,"language-feature-editing-related-key-field-missing").format(c.relationship.keyField),this.app.commandRegistry.command("Alert").execute(c),false;this.viewModel.startAddingNewRelatedRecord(c);return false}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Editor.AttributeEditorViewModel",geocortex.framework.ui.ViewModelBase,{isApplyingEdits:null,feature:null,featureClone:null,fields:null,currentMapService:null,currentToolName:null,editingActive:null,editingNewFeature:null,currentFeatureRelationships:null,hasRelatedLayers:null,validationMessages:null,isEditingRelatedFeatureNotInSite:null,isEditingGeometry:null,featureTypeHasGeometry:null,editGeometryButton:null,hasGeometry:null,
geometry:null,attributes:null,templates:null,defaultButton:null,buttons:null,validateGeometry:null,headerText:null,originalSymbol:null,_editingRelationshipOrigin:null,_editingRelationshipDestination:null,_editingGeometryMapClickHandle:null,_relatedFeature:null,_editObject:null,_layerClickEvents:null,_lastLayer:null,_newObjectId:0,_editLogEntry:null,constructor:function(){this.isApplyingEdits=new Observable(false);this.feature=new Observable(null);this.gcxFeature=new Observable(null);this.fields=new ObservableCollection([]);
this.editingActive=new Observable(false);this.editingNewFeature=new Observable(null);this.validationMessages=new ObservableCollection([]);this.currentFeatureRelationships=new ObservableCollection;this.hasRelatedLayers=new Observable(false);this.isEditingRelatedFeatureNotInSite=new Observable(false);this.isEditingGeometry=new Observable(false);this.featureTypeHasGeometry=new Observable(false);this.hasGeometry=new Observable(false);this.geometry=new Observable(null);this.currentMapService=new Observable(null);
this.headerText=new Observable("");this._layerClickEvents=[];this.buttons=new ObservableCollection;this._registerCommands();this._listenToMapEvents()},initialize:function(a){a&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);this.validateGeometry=a&&a.validateGeometry?a.validateGeometry:true},_getToolNameByDrawType:function(a){a||(a="Polygon");return"Editing"+a+"Tool"},_registerCommands:function(){this.app.commandRegistry.command("StartAddingFeatureGeometry").register(this,
function(a){if(a)this.headerText.set(this.app.getResource(this.libraryId,"language-common-feature-editing")),this.currentToolName=this._getToolNameByDrawType(a.drawType),this.editingNewFeature.set(true),this.setFeature(a),this.app.commandRegistry.command("ShowMap").execute(),this._editGeometry()});this.app.commandRegistry.command("StartEditingFeature").register(this,this._executeStartEditingFeature,function(a){return a&&a.layer&&(a=a.layer,a.mapService&&a.mapService.serviceLayer&&a.mapService.serviceLayer.isEditable)?
a.mapService.serviceLayer.isEditable():false});this.app.commandRegistry.command("StartEditingNewFeature").register(this,this._executeStartEditingNewFeature);this.app.commandRegistry.command("SetEditorFeatureGeometry").register(this,this._executeSetEditorGeometry);this.app.commandRegistry.command("StartEditingEditLogEntry").register(this,function(a){this.headerText.set(a.getDescription(this.app,this.libraryId));this.editingNewFeature.set(false);var b=new esri.Graphic(a.feature.toJson?a.feature.toJson():
a.feature);b.__editingMeta=a.metadata;this.setFeature(b,a.mapServiceUrl);this._editLogEntry=a;this._setupButtons();this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()});this.app.commandRegistry.command("FeatureLayerModuleStartSync").register(this,this._cancelEditing)},_listenToMapEvents:function(){this.app.eventRegistry.event("MapExtentChangedEvent").subscribe(this,function(){var a=this;if(a.isEditingGeometry.get()&&!a.editingNewFeature.get()){var b=a.featureClone;if(b){var c=
function(c){if(c=a._findFeatureInLayer(b,c))c.setGeometry(b.geometry),c.hide()};if(a._lastLayer.updating)var d=dojo.connect(a._lastLayer,"onUpdateEnd",function(){if(a._lastLayer.loaded)c(this);else var b=dojo.connect(a._lastLayer,"onLoad",function(){c(this);dojo.disconnect(b)});dojo.disconnect(d)});else c(a._lastLayer)}}});this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,this._resetGeometryEditingTool);this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this._resetGeometryEditingTool)},
_resetGeometryEditingTool:function(){var a=this,b=this.app.isOffline.get()?"FeatureLayerOfflineEvent":"FeatureLayerOnlineEvent",c=this.app.eventRegistry.event(b).subscribe(this,function(){a.editingNewFeature.get()&&(a.cancel(),a.app.commandRegistry.command("ShowFeatureTemplatePicker").execute());this.app.eventRegistry.event(b).unsubscribe(c)})},_setupButtons:function(){var a=[];this.buttons.clear();var b=new Observable(true),c=null,d=null;this._editLogEntry==null&&(c=this.app.getResource(this.libraryId,
"language-common-delete"),c=dojo.mixin(new geocortex.forms.FormButton(c,"Delete",false,false),{visibility:new Observable,callback:this._confirmDelete}),c.visibility.syncTransform(this.editingNewFeature,function(a){return!a}),a.push(c));if(this.featureTypeHasGeometry.get())this.hasGeometry.get()?(c=this.app.getResource(this.libraryId,"language-feature-editing-edit-geometry-caption"),d="EditGeometry"):(c=this.app.getResource(this.libraryId,"language-feature-editing-add-geometry-caption"),d="AddGeometry"),
this.editGeometryButton=dojo.mixin(new geocortex.forms.FormButton(c,d,true,false),{visibility:b,callback:this._editGeometry}),this.editGeometryButton.visibility.syncTransform(this.isEditingGeometry,function(a){return!a}),a.push(this.editGeometryButton),c=this.app.getResource(this.libraryId,"language-feature-editing-stop-editing-geometry-caption"),b=dojo.mixin(new geocortex.forms.FormButton(c,"StopEditingGeometry",false,false),{visibility:new Observable,callback:this.stopEditingGeometry}),b.visibility.syncTransform(this.isEditingGeometry,
function(a){return a}),a.push(b);c=this.app.getResource(this.libraryId,"language-common-save");b=this.defaultButton=dojo.mixin(new geocortex.forms.FormButton(c,"Save",true,true),{visibility:new Observable(true),callback:this.save});a.push(b);c=this.app.getResource(this.libraryId,"language-common-cancel");a.push(dojo.mixin(new geocortex.forms.FormButton(c,"Cancel",false,false),{visibility:new Observable(true),callback:this._cancelEditing}));this.buttons.addItems(a)},applyButtonClick:function(a){a&&
a.callback&&a.callback.apply(this)},_removeFeatureClickEvents:function(){for(var a=0;a<this._layerClickEvents.length;++a)dojo.disconnect(this._layerClickEvents[a]);this._layerClickEvents=[]},_executeStartEditingFeature:function(a,b){this.app.commandRegistry.command("ClearDefaultHighlights").execute();b||(b=false);try{if(!this.app.map||!this.app.site||!this.app.site.isInitialized){var c=this;this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){c._executeStartEditingFeatureImpl(a,
b)})}else this._executeStartEditingFeatureImpl(a,b)}catch(d){this.app.trace.error("Could not start editing: {0}".format(d)),this.cancel()}},_executeStartEditingNewFeature:function(a){this._executeStartEditingFeature(a,true)},_executeStartEditingFeatureImpl:function(a,b){this.cancel();try{var c=a;a&&a instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature&&(a.layer&&a.layer.mapService&&this.currentMapService.set(a.layer.mapService),this.headerText.set(a.label.get()),c=a.esriFeature.get());
if(c){if(typeof c.getLayer!="function"){this.app.trace.warning("Could not edit feature - No associated graphic layer was found.");return}this.editingNewFeature.set(b);this.setFeature(c)}this._setupButtons();this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()}catch(d){this.app.trace.error("Could not start editing: {0}".format(d)),this.cancel()}},_findFeatureInLayer:function(a,b){if(!a||!b)return null;var c=b.objectIdField,d=b.graphics;if(d.length<1)return null;var e=["__editingMeta",
"timestamp"];if(b.editFieldsInfo)for(var f in b.editFieldsInfo)b.editFieldsInfo.hasOwnProperty(f)&&e.push(b.editFieldsInfo[f]);var g=function(a){var b=0,c;for(c in a)!Array.contains(e,c)&&a.hasOwnProperty(c)&&++b;return b};f=d[0].attributes;if(g(f)!==g(a.attributes))return null;var g=0,h=[],j=[],k;for(k in f){var l=Array.contains(e,k);if(!l&&(!f.hasOwnProperty(k)||!a.attributes.hasOwnProperty(k)))return null;l||(h.push(k),j.push(k),++g)}for(k=0;k<g;++k)if(h[k]!==j[k])return null;for(k=0;k<d.length;k++)if(f=
d[k],!f.gcxIsClone&&f.attributes[c]===a.attributes[c])return f._graphicsLayer=b,f;return null},_findFeatureInLayers:function(a){var b=null;if(this._lastLayer&&(b=this._findFeatureInLayer(a,this._lastLayer)))return this._lastLayer=b._graphicsLayer=e,b;for(var c=this.app.site.getFeatureServices(),d=0;d<c.length;d++){var e=c[d].serviceLayer;if(e!==this._lastLayer&&(b=this._findFeatureInLayer(a,e))){this._lastLayer=b._graphicsLayer=e;break}}return b},_findGeocortexLayerForUrl:function(a){if(this.app&&
this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var b=0;b<this.app.site.essentialsMap.mapServices.length;b++){var c=this.app.site.essentialsMap.mapServices[b];if(c.serviceUrl===a&&c.layers.length>0)return c.layers[0]}return null},_findServiceLayerForUrl:function(a){if(this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices)for(var b=0;b<this.app.site.essentialsMap.mapServices.length;b++){var c=this.app.site.essentialsMap.mapServices[b];
if(c.url===a)return c.serviceLayer}return null},_reAttachLayerToFeature:function(a,b){if(a.getLayer())this._lastLayer=a.getLayer();else if(b)this._lastLayer=this._findServiceLayerForUrl(b);else{var c=this._findFeatureInLayers(a);c&&(a=c)}this._lastLayer&&this.featureTypeHasGeometry.set(!!this._lastLayer.geometryType);return a},setFeature:function(a,b,c){c||this.cancel();a?(a=this._reAttachLayerToFeature(a,b),this.feature.set(a),this.geometry.set(a.geometry),this.hasGeometry.set(!!a.geometry),c||(this._buildFeatureAttributes(),
this._buildFeatureRelationships()),this.editingActive.set(true)):(this.editingNewFeature.set(true),this.feature.set(null),this._lastLayer=null,this.geometry.set(null),this.hasGeometry.set(false))},cloneFeature:function(a){return new esri.Graphic(a.toJson())},_executeSetEditorGeometry:function(a){this.stopEditingGeometry();var b=this.feature.get();b&&(b.needsConversion&&a.type==="extent"&&this._lastLayer.geometryType==="esriGeometryPolygon"&&(a=geocortex.essentials.GeometryUtilities.envelopeToPolygon(a)),
this.geometry.set(a),this.hasGeometry.set(!!a),b.setGeometry(a),this.app.eventRegistry.event("FeatureGeometryEditedEvent").publish(b));this._setupButtons();this.app.commandRegistry.command("ShowFeatureAttributeEditor").execute()},_createNewFeature:function(a,b,c,d){var e=new esri.Graphic;e.attributes=b||{};e.geometry=a||new esri.geometry.Point(NaN,NaN);e.symbol=c||null;e.infoTemplate=d;return e},_getMapServiceByLayer:function(a){a=a.url||a._essentialsMetadata.serviceUrl;if(!a)return null;var b=a.indexOf("?token=");
b!=-1&&(a=a.substring(0,b));for(b=0;b<this.app.site.essentialsMap.mapServices.length;++b){var c=this.app.site.essentialsMap.mapServices[b];if(c.serviceUrl===a)return c}return null},_getRelatedFeatureLayer:function(a,b,c,d){var e=new dojo.Deferred,a=b.substring(0,b.lastIndexOf("/")+1)+a,a=new esri.layers.FeatureLayer(a,{mode:esri.layers.FeatureLayer.MODE_SELECTION,outFields:["*"]});dojo.connect(a,"onLoad",dojo.hitch(this,function(a){geocortex.deferredResolve(e,a);typeof c=="function"&&c(a)}));dojo.connect(a,
"onError",dojo.hitch(this,function(a){geocortex.deferredReject(e,a);typeof d=="function"&&d(a)}));return e},_preventDeleteForRelOrigin:function(a,b,c){var d=this,e=this.feature.get(),f=this._lastLayer,g=null,h=false;if(e&&f&&a&&a.length()>0&&(g=a.length(),f))for(var j=0;j<a.length();j++){var k=function(){g--;g<=0&&c&&c()},l=function(a){var c=parseInt(a.id.get()),j=a.relatedTableId?a.relatedTableId.get():a.relationship.relatedTableId,g=f.url||f._essentialsMetadata.serviceUrl,a=new esri.tasks.RelationshipQuery;
a.objectIds=[e.attributes[f.objectIdField]];a.outFields=["*"];a.relationshipId=c;var l=new esri.tasks.QueryTask(g),o=null,o=d.app.isOffline.get()===false?l.executeRelationshipQuery(a):d.app.featureLayerModule._getRelatedFeatures(d._getMapServiceByLayer(f),c,a.objectIds[0]);o.then(function(a){var c=false,e;for(e in a)if(a.hasOwnProperty(e)){c=true;break}c?d._getRelatedFeatureLayer(j,g).then(function(){if(!h){var c=[],d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d].features||a[d];if(e)if(e.length)for(var j=
0;j<e.length;j++)c.push(e[j]);else c.push(e)}c.length>0&&b&&(b(c),h=true);k()}},function(){k()}):k()},function(){k()})},o=a.getAt(j);o.relationship&&o.relationship.role==="esriRelRoleOrigin"&&l(o)}(!g||g<=0)&&c&&c()},_confirmDelete:function(){var a=this;this.app.commandRegistry.command("Confirm").execute(a.app.getResource(a.libraryId,"language-feature-editing-delete-confirmation"),a.app.getResource(a.libraryId,"language-feature-editing-module-title"),function(b){if(b){var c=false;a._preventDeleteForRelOrigin(a.currentFeatureRelationships,
function(){a.app.commandRegistry.command("Alert").execute(a.app.getResource(a.libraryId,"language-feature-editing-delete-with-relation-forbidden"),a.app.getResource(a.libraryId,"language-feature-editing-module-title"));c=true},function(){c||a.deleteCurrentFeature()})}})},deleteCurrentFeature:function(a,b){var c=this,d=this.feature.get(),e=d.getLayer()||this._lastLayer,f=null,f=this._getMapServiceByLayer(e);b||(b=function(a){c.isApplyingEdits.set(false);var a=c.app.getResource(c.libraryId,"language-feature-layer-error-feature-edits").format(a),
b=c.app.getResource(c.libraryId,"language-feature-layer-error-title");c.app.trace.error(a);c.app.commandRegistry.command("Alert").execute(a,b)});f={mapService:f,layer:e,feature:d,successCallback:function(){e&&e.remove(d);c.app.commandRegistry.command("HideFeatureAttributeEditor").execute();c.app.commandRegistry.command("ShowMap").execute();c.app.eventRegistry.event("FeatureDeletedEvent").publish(d);a&&a();c.isApplyingEdits.set(false)},errorCallback:b};this.isApplyingEdits.set(true);this.app.commandRegistry.command("DeleteFeature").execute(f)},
_editGeometry:function(){this.startEditingGeometry()},stopEditingGeometry:function(a){this.app.commandRegistry.command("ClearActiveTool").execute();var b=this.feature.get();b&&(this.featureClone&&!a&&b.setGeometry(this.featureClone.geometry),b.show());if(this._lastLayer){a=this._lastLayer.graphics;for(b=0;b<a.length;++b){var c=a[b];c.gcxIsClone&&this._lastLayer.remove(c)}}this.featureClone=null;if(this._editObject)this._editObject.deactivate(),this._editObject=null;if(this._editingGeometryMapClickHandle!=
null)dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null;this._indicateGeometryEditing(false)},startEditingGeometry:function(){this._editObject&&this._editObject.deactivate();var a=this;this._lastLayer&&this.app.map.reorderLayer(this._lastLayer,this.app.map._layers.length-1);if(this.hasGeometry.get()){var b=null,b=this.feature.get();if(b==null)throw Error("Can't edit geometry of null feature");if(b.geometry!=this.geometry.get())b.geometry=this.geometry.get();
this.featureClone&&this._lastLayer.remove(this.featureClone);this.featureClone=new esri.Graphic(b.toJson());this.featureClone=dojo.mixin(this.featureClone,{gcxIsClone:true});this._lastLayer.add(this.featureClone);b.hide();this.originalSymbol=b.symbol;if(esri.toolbars.Edit){var b=esri.toolbars.Edit.MOVE|esri.toolbars.Edit.EDIT_VERTICES|esri.toolbars.Edit.SCALE|esri.toolbars.Edit.ROTATE,c={allowAddVertices:true,allowDeleteVertices:true};this._editObject=new esri.toolbars.Edit(this.app.map,c);var d=
function(b,c,d){a._indicateGeometryEditing(false);c.setSymbol(a.originalSymbol);d.isModified&&a.app.commandRegistry.command("SetEditorFeatureGeometry").execute(c.geometry)};dojo.connect(this._editObject,"onDeactivate",d);if(this._editingGeometryMapClickHandle!=null)dojo.disconnect(this._editingGeometryMapClickHandle),this._editingGeometryMapClickHandle=null;this._editingGeometryMapClickHandle=dojo.connect(this.app.map,"onClick",function(){d(a._editObject,a.featureClone,{isModified:true});dojo.disconnect(a._editingGeometryMapClickHandle);
this._editingGeometryMapClickHandle=null});this._indicateGeometryEditing(true);this._editObject.activate(b,this.featureClone,c)}else b=this.app.getResource(this.libraryId,"language-feature-editing-package-required"),c=a.app.getResource(a.libraryId,"language-feature-layer-error-title"),this.app.commandRegistry.command("Alert").execute(b,c)}else this.app.commandRegistry.command("SetActiveTool").execute(this.currentToolName),this._indicateGeometryEditing(true)},_indicateGeometryEditing:function(a){this.isEditingGeometry.set(a);
if(a){var a=null,b=this.feature.get(),c=this.geometry.get();if(b&&(a=b.drawType||null,!a&&c))a=c.type;c&&(b=geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getEsriGeometryType(a,esri.toolbars.Draw.POINT),c=null,c=geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.FeatureEditingModule.getEditingGeometryStatusMessage(this.app,this.libraryId,b,true),a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(c,null,null,"geometry-type-"+a.toLowerCase(),
"geometryEditingStatus"),this.app.commandRegistry.command("AddStatus").execute(a));this.app.commandRegistry.command("ShowMap").execute()}else this.app.commandRegistry.command("RemoveStatus").execute("geometryEditingStatus")},save:function(a,b){var c=this,d,e={__editingMeta:null},f=this.feature.get();this.isEditingGeometry.get()&&f.setSymbol(this.originalSymbol);if(f){f.__editingMeta&&(e.__editingMeta=dojo.clone(f.__editingMeta));d=this.cloneFeature(f);d=dojo.mixin(d,e);for(var g in d.attributes)d.attributes.hasOwnProperty(g)&&
(g||delete d.attributes[g])}var h=f&&f.getLayer()||this._lastLayer;this.stopEditingGeometry();if(!d&&(d=this._createNewFeature(),h.renderer))d.symbol=h.renderer.getSymbol(d);d.geometry=h.geometryType&&this.hasGeometry.get()?this.geometry.get():null;this.validationMessages.clear();for(e=0;e<this.fields.getLength();++e){g=this.fields.getAt(e);var j=g.value.get();g.type.get()==="esriFieldTypeDate"&&(j=g.value.get())&&(j=j.getTime());j===""&&g.type.get()!=="esriFieldTypeString"&&(j=null);var k=g.validationFunc(j);
k?(g.cssClass.set("invalid"),this.validationMessages.addItem(k)):(g.cssClass.set(""),d.attributes[g.name.get()]=j)}this.validateGeometry&&d.geometry&&d.geometry.type==="polygon"&&geocortex.essentials.GeometryUtilities.isSelfIntersectingPolygon(d.geometry)&&this.validationMessages.addItem(this.app.getResource(this.libraryId,"language-feature-editing-self-intersecting-polygon-need-fixing"));if(this.validationMessages.getLength()>0)return b&&b(),false;var l=new esri.Graphic(d.toJson());if(!this.editingNewFeature.get()&&
typeof d.__editingMeta!=="undefined"&&d.__editingMeta)e=dojo.clone(d.__editingMeta),e.dependencies[d.attributes[e.objectIdField]]=[],e.dependencies[d.attributes[e.objectIdField]].push({from:e.objectIdField,to:e.objectIdField}),l.__editingMeta=e;e=null;g=h.url||h._essentialsMetadata.serviceUrl;this.isEditingRelatedFeatureNotInSite.get()||(e=this._getMapServiceByLayer(h));var o=function(){d=l;c.app.eventRegistry.event("FeatureEditedEvent").publish(l);c.editingNewFeature.set(false);c.isApplyingEdits.set(false);
var b=null;c._editLogEntry?(b=c._editLogEntry,b.setFeature(d)):(h.remove(f)||(f=c._findFeatureInLayer(f,h))&&h.remove(f),d.getLayer()==null&&(h.add(d),h.refresh()));c.feature.set(d);c._buildFeatureAttributes();c._buildFeatureRelationships();if(b)c._editLogEntry=b;!b&&!c.isEditingRelatedFeatureNotInSite.get()&&(b=c._findGeocortexLayerForUrl(h.url),b=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:d,layer:b}),c.headerText.set(b.label.get()));c.app.commandRegistry.command("DeactivateView").execute("AttributeEditorView");
a&&a()};h.url=g;l.__editingMeta=d.__editingMeta;e={mapService:e,layer:h,feature:l,successCallback:o,errorCallback:function(a){c.isApplyingEdits.set(false);b&&b();c._cancelEditing();var d="";a.message&&(d+=a.message,a.details&&(d+=" (Details: {0})".format(a.details[0])));a=c.app.getResource(c.libraryId,"language-feature-layer-error-feature-edits").format(d?d:a);d=c.app.getResource(c.libraryId,"language-feature-layer-error-title");c.app.trace.error(a);c.app.commandRegistry.command("Alert").execute(a,
d)}};this._editLogEntry!=null?(e.oldEditLogEntry=this._editLogEntry,e.successCallback=function(){c.app.commandRegistry.command("RefreshOfflineLayers").execute();o()},this.app.commandRegistry.command("ChangeEditLogEntry").execute(e)):this.isEditingRelatedFeatureNotInSite.get()?this.editingNewFeature.get()?(e.relatedFeature=c._relatedFeature,e.relationshipOrigin=c._editingRelationshipOrigin,e.relationshipDestination=c._editingRelationshipDestination,this.app.commandRegistry.command("CreateRelatedRecord").execute(e)):
this.app.commandRegistry.command("UpdateRelatedRecord").execute(e):this.editingNewFeature.get()?(this.app.eventRegistry.event("EditorPreCreateFeatureEvent").publish(l),this.app.commandRegistry.command("CreateFeature").execute(e),this.app.isOffline.get()===false&&this._lastLayer.remove(this.feature.get())):(this.app.eventRegistry.event("EditorPreUpdateFeatureEvent").publish(l),this.app.commandRegistry.command("UpdateFeature").execute(e));this.isApplyingEdits.set(true)},_cancelEditing:function(){this._lastLayer&&
(this.editingNewFeature.get()&&this._lastLayer.remove(this.feature.get()),this._lastLayer.refresh());this.cancel();this.app.commandRegistry.command("HideFeatureAttributeEditor").execute()},cancel:function(){this.feature.get();this.validationMessages.clear();this.stopEditingGeometry(true);this._editLogEntry=this._lastLayer=null;this.feature.set(null);this.editingActive.set(false);this.isEditingRelatedFeatureNotInSite.set(false);this.fields.clear();this.geometry.set(null);this.hasGeometry.set(false);
this._relatedFeature=this._editingRelationshipDestination=this._editingRelationshipOrigin=null},startAddingNewRelatedRecord:function(a){var b=this,c=a.relationship,d=this._lastLayer,e=this._getMapServiceByLayer(d);this.setFeature(null);e?this.app.featureLayerModule._getRelatedFeatureLayer(e,c.id,function(d){var e=b._getMapServiceByLayer(d);e?(b.isEditingRelatedFeatureNotInSite.set(false),b.currentMapService.set(e)):b.isEditingRelatedFeatureNotInSite.set(true);d&&b.featureTypeHasGeometry.set(!!d.geometryType);
e=a.feature.get();b._lastLayer=d;b._editingRelationshipOrigin=c;b._relatedFeature=e;b.editingNewFeature.set(true);b.feature.set(null);b.geometry.set(null);b.hasGeometry.set(false);b._buildFeatureAttributes();if(c.keyField){for(var h=null,j=0;j<d.relationships.length;++j){var k=d.relationships[j];if(k.id===c.id){b._editingRelationshipDestination=k;h=k.keyField;break}}if(h){for(j=0;j<b.fields.getLength();++j)if(d=b.fields.getAt(j),d.name.get()===h)if(h.toLowerCase()==="objectid"||h.toLowerCase()===
"globalid")d.value.set("[Automatic]"),d.editable.set(false),d.cantEdit.set(true);else{d.value.set(e.attributes[c.keyField]);break}b._setupButtons()}else b.app.trace.error(b.app.getResource(b.libraryId,"language-feature-editing-relationships-key-field-missing"))}else b.app.trace.error(b.app.getResource(b.libraryId,"language-feature-editing-relationships-require-arcgis-version"))},function(){b.app.trace.error(b.app.getResource(b.libraryId,"language-feature-editing-related-feature-failed").format(c.id))}):
this.app.trace.warning("Could not edit feature. No map service for layer '{0}' was found.".format(d.url))},_buildFeatureRelationships:function(){this.currentFeatureRelationships.clear();this.hasRelatedLayers.set(false);var a=this.feature.get(),b=this.currentMapService.get(),c=this._lastLayer;if(c){for(var d=0;d<c.relationships.length;++d){var e=c.relationships[d];if(b){var f=b._getRelation(e.id);if(f&&!f.visible)continue}f=true;if(e.role){if(e.role!=="esriRelRoleOrigin")continue}else f=false;var g=
this.app.getResource(this.libraryId,"language-feature-editing-create-related-feature").format(e.name);this.currentFeatureRelationships.addItem({id:new Observable(e.id),text:new Observable(g),feature:new Observable(a),editable:new Observable(f),relationship:e})}this.currentFeatureRelationships.getLength()>0&&this.hasRelatedLayers.set(true)}},typeFieldSelected:function(a){if(a)for(var b=0;b<a.subTypes.getLength();b++){var c=a.subTypes.getAt(b);if(c.id!==null&&c.id.toString()===a.value.get()){this._loadRelatedCodedDomains(c.domains);
break}}},_loadRelatedCodedDomains:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b)&&a[b].type==="codedValue")for(var c=0;c<this.fields.getLength();c++){var d=this.fields.getAt(c);d.name.get()===b&&this._addValueCollection({viewModel:d,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:a[b].codedValues,nullable:d.nullable.get(),nullOption:{name:"",code:null}})}},_addValueCollection:function(a){if(a)a.viewModel.renderType=new Observable(a.typeName),a.viewModel[a.collectionName]=
new ObservableCollection([]),a.viewModel[a.collectionName].addItems(a.valueCollection),a.nullable&&a.viewModel[a.collectionName].insertItem(0,a.nullOption)},_buildFeatureAttributes:function(){var a=null,b=this.feature.get();if(!this._lastLayer&&this._findFeatureInLayers(b))this._lastLayer=feature.getLayer();var c=this._lastLayer;if(c){this.fields.clear();b===null&&(b=new esri.Graphic);var d=[],e=[];if(c._outFields&&c._outFields.length>0)for(var f=0;f<c._outFields.length;++f){var g=c._outFields[f];
if(f===0&&g==="*"){e=c.fields;break}for(var h=0;h<c.fields.length;++h){var j=c.fields[h];if(j.name===g){e.push(j);break}}}else e=c.fields;for(f=0;f<e.length;++f)if(h=e[f],h.editable){var k=h.editable===false,g=h.nullable===false&&!k,j=null;if(!this.editingNewFeature.get()||h.name===c.typeIdField)b.attributes&&(j=b.attributes[h.name]);var l=this._buildValidationFunc(h),k={name:new Observable(h.name),alias:new Observable(h.alias),length:new Observable(h.length),editable:new Observable(!k),cantEdit:new Observable(k),
nullable:new Observable(!g),type:new Observable(h.type),renderType:new Observable(h.type),value:new Observable(j),cssClass:new Observable(""),attached_showIndicator:new Observable(g),attached_indicatorClass:new Observable(""),validationFunc:l||function(){return true}};if(h.type==="esriFieldTypeDate"){l=new geocortex.forms.items.DatePickerFormItem;l.timePickerItem=new geocortex.forms.items.TimePickerFormItem;var o=this.feature.get()?new Date(this.feature.get().attributes[h.name]):new Date;l.includeTimePicker.set(true);
l.initialDate.set(o);l.date.set(o);k.value.sync(l.date);dojo.safeMixin(l,k);k=l}h.name===c.typeIdField&&(this._addValueCollection({viewModel:k,typeName:"subType",collectionName:"subTypes",valueCollection:c.types,nullable:!g,nullOption:{name:"",id:null}}),a=j);if(h.hasOwnProperty("domain"))(h=h.domain)&&h.type==="codedValue"&&this._addValueCollection({viewModel:k,typeName:"codedDomainValue",collectionName:"codedDomainValues",valueCollection:h.codedValues,nullable:!g,nullOption:{name:"",code:null}});
d.push(k)}this.fields.addItems(d);if(a===null)for(f=0;f<c.types.length;f++)b=c.types[f],b.id===a&&this._loadRelatedCodedDomains(b.domains)}},_isValidEsriDate:function(a){return Object.prototype.toString.call(a)!=="[object Date]"?false:!isNaN(a.getTime())},_buildValidationFunc:function(a){if(this.app.urlParameters.hasOwnProperty("noval"))return function(){};var b=this,c=function(a){return a.editable!==false&&a.nullable===false?b.app.getResource(b.libraryId,"language-feature-editing-requires-value").format(a.alias):
null},d=function(a,b){var c=null;if(!a)return false;switch(a.type){case "esriFieldTypeSingle":case "esriFieldTypeDouble":c=/^[+-]?\d+.?\d*$/;break;case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":c=/^\s*(\+|-)?\d+\s*$/}return c.test(String(b.toString()))};if(a.domain){var e=function(e,h,j,k){h=b.app.getResource(b.libraryId,"language-feature-editing-invalid-number").format(h,j,k);return!e?c(a):!d(a,e)?h:e<j||e>k?h:null};if(a.domain.type==="codedValue")return function(){return null};else if(a.domain.type===
"range")if(a.domain.hasOwnProperty("range")){var f=a.domain.range;f.replace&&(f=f.replace("[","").replace("]","").split(","));return function(b){return e(b,a.alias,f[0],f[1])}}else return function(b){return e(b,a.alias,a.domain.minValue,a.domain.maxValue)};else return function(){return null}}else switch(a.type){case "esriFieldTypeDate":return function(d){return!d?c(a):b._isValidEsriDate(new Date(d))?null:b.app.getResource(b.libraryId,"language-feature-editing-invalid-date").format(a.alias)};case "esriFieldTypeString":case "esriFieldTypeGUID":return function(d){return!d?
c(a):a.length&&d.toString().length>a.length?b.app.getResource(b.libraryId,"language-feature-editing-value-too-long").format(a.alias,a.length):null};case "esriFieldTypeSingle":case "esriFieldTypeDouble":return function(e){return!e&&e!==0?c(a):d(a,e)?null:b.app.getResource(b.libraryId,"language-feature-editing-invalid-decimal").format(a.name)};case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return function(e){return!e&&e!==0?c(a):d(a,e)?null:b.app.getResource(b.libraryId,"language-feature-editing-invalid-integer").format(a.name)};
default:return function(){return null}}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureEditing.Templates.FeatureTemplateViewModel",geocortex.framework.ui.ViewModelBase,{name:null,description:null,proto:null,layer:null,drawingTool:null,symbolUri:null,symbolStyle:null,constructor:function(){this.name=new Observable;this.description=new Observable;this.drawingTool=new Observable;this.symbolUri=new Observable;this.symbolStyle=new Observable("");this.proto={}},setTemplateShapeStyle:function(a){a&&this.symbolStyle.set(a)},
createSVGElement:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLog",null,{entries:null,nextFeatureId:0,constructor:function(a){this.entries=[];if(a){a=dojo.fromJson(a);this.nextFeatureId=a.nextFeatureId||0;for(var b=0;b<a.entries.length;++b){var c=a.entries[b],d=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry;dojo.safeMixin(d,c);if(c.feature)d.feature=new esri.Graphic(c.feature.toJson?c.feature.toJson():c.feature);this.entries.push(d)}}},addEntry:function(a){this.entries.push(a);
++this.nextFeatureId},removeEntry:function(a){for(var b=0,c=this.entries.length;b<c;b++)if(this.entries[b].equals(a))return this.entries.splice(b,1),true;return false},removeEntryAndRelated:function(a){for(var b=false,c=0,d=this.entries.length;c<d;c++)if(this.entries[c].equals(a)||this.entries[c].isRelated(a))this.entries.splice(c,1),c--,d--,b=true;return b},removeEntryAndDependents:function(a){for(var b=false,c=0,d=this.entries.length;c<d;c++)if(this.entries[c].equals(a)||this.entries[c].isDependentOn(a))this.entries.splice(c,
1),c--,d--,b=true;return b},getRelatedEntries:function(a){return this.entries.filter(a.isRelated)},toJson:function(){for(var a=[],b=0;b<this.entries.length;++b)a.push(this.entries[b].toJson?this.entries[b].toJson():this.entries[b]);return{nextFeatureId:this.nextFeatureId,entries:a}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry",null,{mapServiceUrl:null,layerUrl:null,keyField:null,related:{layerUrl:null,fromKeyField:null,toKeyField:null},type:null,error:null,metadata:null,committed:false,feature:null,_description:null,constructor:function(a,b,c,d,e){if(a)this.mapServiceUrl=a;if(b)this.layerUrl=b;if(c)this.keyField=c;if(d)this.type=d;if(e&&(this.feature=e,e.__editingMeta))this.metadata=e.__editingMeta},setRelatedData:function(a,b,c){this.related.layerUrl=
a;this.related.fromKeyField=b;this.related.toKeyField=c},setFeature:function(a){this.feature=a||null;this.metadata=a&&a.__editingMeta?a.__editingMeta:null;this.error=this._description=null},isAddition:function(){return/addition/i.test(this.type)},isUpdate:function(){return/update/i.test(this.type)},isDeletion:function(){return/deletion/i.test(this.type)},isRelatedRecord:function(){return/relatedRecord/i.test(this.type)},isAttachment:function(){return/attachmentInfos/i.test(this.type)},toJson:function(){return{mapServiceUrl:this.mapServiceUrl,
layerUrl:this.layerUrl,keyField:this.keyField,related:this.related,type:this.type,error:this.error&&this.error.message||this.error,committed:this.committed,metadata:this.metadata,feature:this.feature.toJson?this.feature.toJson():this.feature}},equals:function(a){function b(a,d){if(a===d)return true;if(!a&&!d)return true;if(a&&!d||!a&&d)return false;if(typeof a!=typeof d)return false;switch(typeof a){case "function":return true;case "object":for(var e in a)if(!e.toString().startsWith("_")&&!(e=="declaredClass"||
typeof a[e]=="function")){if(typeof d[e]=="undefined"&&!e==="type")return false;if(e!=="type"&&!b(a[e],d[e]))return false}for(e in d)if(!e.toString().startsWith("_")&&!(e=="declaredClass"||typeof d[e]=="function")&&typeof a[e]=="undefined")return false;return true;default:return false}}return this===a?true:!a?false:this.mapServiceUrl!=a.mapServiceUrl||this.layerUrl!=a.layerUrl||this.type!=a.type||this.committed!=a.committed?false:!b(this.metadata,a.metadata)?false:!b(this.feature.attributes,a.feature.attributes)?
false:!b(this.feature.geometry,a.feature.geometry)?false:true},isRelated:function(a){return!a?false:this.layerUrl==a.layerUrl&&this.keyField==a.keyField&&this._isRelated(this,this.keyField,a,a.keyField)?true:this.related.layerUrl&&this.related.layerUrl==a.layerUrl&&this._isRelated(this,this.related.fromKeyField,a,this.related.toKeyField)?true:a.related.layerUrl&&this.layerUrl==a.related.layerUrl&&this._isRelated(this,a.related.toKeyField,a,a.related.fromKeyField)?true:false},isDependentOn:function(a){return!a||
!this.metadata||!a.metadata?false:this.layerUrl==a.layerUrl&&this.keyField==a.keyField&&this.directDependencyDirection(this,this.keyField,a,a.keyField)===1?true:this.related.layerUrl&&this.related.layerUrl==a.layerUrl&&this.directDependencyDirection(this,this.related.fromKeyField,a,this.related.toKeyField)===1?true:a.related.layerUrl&&this.layerUrl==a.related.layerUrl&&this.directDependencyDirection(this,a.related.toKeyField,a,a.related.fromKeyField)===1?true:false},_isRelated:function(a,b,c,d){return a.feature.attributes[b]&&
c.feature.attributes[d]&&a.feature.attributes[b]==c.feature.attributes[d]?true:this._hasDependency(a,b,c,d)},directDependencyDirection:function(a,b,c,d){return c.metadata.dependencies&&a.metadata.GCXOBJECTID&&c.metadata.dependencies[a.metadata.GCXOBJECTID]&&this._findDependency(c.metadata.dependencies[a.metadata.GCXOBJECTID],b,d)?-1:a.metadata.dependencies&&c.metadata.GCXOBJECTID&&a.metadata.dependencies[c.metadata.GCXOBJECTID]&&this._findDependency(a.metadata.dependencies[c.metadata.GCXOBJECTID],
d,b)?1:0},_hasDependency:function(a,b,c,d){if(a.metadata&&c.metadata){if(this.directDependencyDirection(a,b,c,d)!==0)return true;if(a.metadata.dependencies&&c.metadata.dependencies)for(var e in a.metadata.dependencies)if(a.metadata.dependencies[e]&&c.metadata.dependencies[e])return true}return false},_findDependency:function(a,b,c){for(var d=0;d<a.length;d++)if(a[d]&&a[d].from==b&&a[d].to==c)return true;return false},getDescription:function(a,b){if(!this._description){if(!a||!b)return"[app or libraryId not set]";
var c=null;switch(this.type){case "addition":c=a.getResource(b,"language-feature-layer-edit-action-created");break;case "update":c=a.getResource(b,"language-feature-layer-edit-action-updated");break;case "deletion":c=a.getResource(b,"language-feature-layer-edit-action-deleted");break;case "relatedRecordAddition":c=a.getResource(b,"language-feature-layer-edit-action-created-related");break;case "relatedRecordUpdate":c=a.getResource(b,"language-feature-layer-edit-action-updated-related");break;case "relatedRecordDeletion":c=
a.getResource(b,"language-feature-layer-edit-action-deleted-related");break;case "attachmentAddition":c=a.getResource(b,"language-feature-layer-edit-action-created-attachment");break;case "attachmentUpdate":c=a.getResource(b,"language-feature-layer-edit-action-updated-attachment");break;case "attachmentDeletion":c=a.getResource(b,"language-feature-layer-edit-action-deleted-attachment");break;default:c="[Unknown action]"}var d="";this.feature&&(d=(new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:this.feature})).label.get());
var e="";this.feature&&this.feature.attributes.OBJECTID&&this.feature.attributes.OBJECTID!=d&&(e=" ({0})".format(this.feature.attributes.OBJECTID));this._description=a.getResource(b,"language-feature-layer-edit-action-format").format(c,d,e)}return this._description}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogView",geocortex.framework.ui.ViewBase,{_lastHighlightedContext:null,constructor:function(){this.app.commandRegistry.command("ShowFeatureLayerEditLog").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)})},handleSynchronizeClick:function(){var a=this;this.app.commandRegistry.command("Confirm").execute(this.app.getResource(a.libraryId,"language-feature-layer-sync-confirm"),this.app.getResource(a.libraryId,
"language-feature-layer-sync-confirm-title"),function(b){b&&a.app.commandRegistry.command("FeatureLayerModuleStartSync").execute()})},handleClickChange:function(a,b,c){c&&c.entry&&!c.entry.isDeletion()&&this.app.commandRegistry.command("StartEditingEditLogEntry").execute(c.entry)},handleClickDelete:function(a,b,c){var d=this;if(c&&c.entry){var e=0;(function g(a){e+=a.length();for(var b=0;b<a.length();b++)g(a.getAt(b).dependents)})(c.dependents);a=e>0?"language-feature-layer-delete-edit-confirmation":
"language-feature-layer-delete-edit-confirmation-singular";this.app.commandRegistry.command("Confirm").execute(d.app.getResource(d.libraryId,a).format(e),d.app.getResource(d.libraryId,"language-feature-layer-delete-edit-title"),function(a){a&&d.app.commandRegistry.command("DeleteFromEditLog").execute(c.entry,function(){d.app.commandRegistry.command("RefreshOfflineLayers").execute()},function(a){a=d.app.getResource(d.libraryId,"language-feature-layer-error-deleting-edit").format(a);d.app.commandRegistry.command("Alert").execute(a)})})}},
handleMouseDown:function(a,b,c){a=c.highlightClass.get()=="edit-highlight";b=this._lastHighlightedContext;if(b!=null)this._setDependsOnStyle(b.dependsOn,"edit-failed","edit-blocked",""),this._setDependentsStyle(b.dependents,"edit-blocked",""),b.error.get()?b.highlightClass.set("edit-failed"):b.blocked.get()?b.highlightClass.set("edit-blocked"):b.highlightClass.set(""),this._lastHighlightedContext=null;if(!a)this._setDependsOnStyle(c.dependsOn,"edit-highlight","edit-highlight","edit-highlight"),this._setDependentsStyle(c.dependents,
"edit-highlight","edit-highlight"),c.highlightClass.set("edit-highlight"),this._lastHighlightedContext=c},_setDependsOnStyle:function(a,b,c,d){for(var e=0,f=a.length();e<f;e++){var g=a.getAt(e);g.error.get()?g.highlightClass.set(b):g.blocked.get()?g.highlightClass.set(c):g.highlightClass.set(d);this._setDependsOnStyle(g.dependsOn,b,c,d)}},_setDependentsStyle:function(a,b,c){for(var d=0,e=a.length();d<e;d++){var f=a.getAt(d);f.blocked.get()?f.highlightClass.set(b):f.highlightClass.set(c);this._setDependentsStyle(f.dependents,
b,c)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogViewModel",geocortex.framework.ui.ViewModelBase,{isOffline:null,willDownloadOnSync:null,totalEdits:null,editLogEntries:null,constructor:function(){this.isOffline=new Observable(false);this.willDownloadOnSync=new Observable(false);this.totalEdits=new Observable;this.editLogEntries=new ObservableCollection([]);this.app.eventRegistry.event("DomainStorageClearedEvent").subscribe(this,this._handleDomainStorageClearedEvent);this.app.eventRegistry.event("ApplicationStorageClearedEvent").subscribe(this,
this._handleApplicationStorageClearedEvent)},initialize:function(){this.app.eventRegistry.event("FeatureLayerEditLogUpdatedEvent").subscribe(this,this._featureLayerUpdated);this.app.eventRegistry.event("FeatureLayerModuleSyncCompletedEvent").subscribe(this,this._featureLayerUpdated);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._cachingSpecUpdated);this.app.eventRegistry.event("FeatureLayerCacheSpecChanged").subscribe(this,this._cachingSpecUpdated);this.isOffline.sync(this.app.isOffline);
this._loadModel()},_loadModel:function(){var a=this;this.app.moduleManager.notifyModuleLoaded("FeatureLayer",dojo.hitch(this,function(){this.app.featureLayerModule.getEditLog(function(b,c){a._featureLayerUpdated(b,c)},null)}))},_handleDomainStorageClearedEvent:function(){this._loadModel()},_handleApplicationStorageClearedEvent:function(){this._loadModel()},_cachingSpecUpdated:function(){var a=false;if(this.app.featureLayerModule.dataCachingSpec)for(var b=this.app.site.getFeatureServices(),c=0;c<b.length;c++)if(this.app.featureLayerModule.dataCachingSpec&&
this.app.featureLayerModule.dataCachingSpec.featureLayersFuture&&this.app.featureLayerModule.dataCachingSpec.featureLayersFuture[b[c].url]){a=true;break}this.willDownloadOnSync.set(a)},_featureLayerUpdated:function(a){this.editLogEntries.clear();for(var b=0,c=0;c<a.entries.length;c++){var d=a.entries[c];if(!d.committed&&d.feature){++b;for(var e=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:d.feature}),d={entry:d,description:new Observable(d.getDescription(this.app,this.libraryId)),
hasGeometry:new Observable(d.feature.geometry!=null),hasAttributes:new Observable(d.feature.attributes!=null),feature:new Observable(e),gcxid:new Observable(d.metadata?d.metadata.GCXOBJECTID:null),committed:new Observable(d.committed),blocked:new Observable(false),error:new Observable(d.error),canBeChanged:new Observable(!d.isDeletion()&&!d.isRelatedRecord()&&!d.isAttachment()),dependsOn:new ObservableCollection,dependents:new ObservableCollection,highlightClass:new Observable(d.error?"highlight-error":
""),typeClass:new Observable(this._getTypeClass(d))},e=this.editLogEntries.length()-1;e>=0;e--){var f=this.editLogEntries.getAt(e);if(f.entry.isAddition()&&f.entry.metadata&&!d.entry.metadata&&f.entry.isRelated(d.entry))d.entry.feature.__editingMeta=f.entry.metadata;if(d.entry.isDependentOn(f.entry)){d.dependsOn.addItem(f);if(f.error.get()||f.blocked.get())d.blocked.set(true),d.highlightClass.set("highlight-error"),d.typeClass.set("error-24");f.dependents.addItem(d);break}}this.editLogEntries.addItem(d)}}this.totalEdits.set(b)},
_getTypeClass:function(a){return a.error!=null?"error-24":a.isAddition()?"add-24":a.isUpdate()?"edit-24":a.isDeletion()?"clear-24":(this.app.trace.warning("Got an entry that isn't addition, update, or deletion"),"error-24")}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditMetadata",null,{isNew:false,objectIdField:"OBJECTID",isRelated:false,relationship:null,dependencies:{},GCXOBJECTID:-1,constructor:function(){this.isRelated=this.isNew=false;this.relationship=null;this.dependencies={};this.GCXOBJECTID=-1}});var oldFeatureEditResult=esri.layers.FeatureEditResult;
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureEditResult",null,{constructor:function(a){if(a){this.objectId=jsonresultobjectId;this.success=a.success;if(!a.success){var b=a.error;this.error=Error();this.error.code=b.code;this.error.message=b.description}this.GID=a.globalId}}});esri.layers.FeatureEditResult=geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureEditResult;
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerDetailsView",geocortex.framework.ui.ViewBase,{_syncedCurrentFeature:false,constructor:function(){this.app.commandRegistry.command("ShowFeatureLayerDetails").register(this,function(a){a&&this.viewModel&&this.viewModel.currentFeatureLayer.set(a.get());this.app.commandRegistry.command("ActivateView").execute(this.id)})},activated:function(){this.inherited(arguments);if(!this._syncedCurrentFeature)this._syncCurrentFeature(),
this._syncedCurrentFeature=true},_syncCurrentFeature:function(){var a=this.app.getResource(this.libraryId,"language-common-feature-layer-details");this.title.syncTransform(this.viewModel.currentFeatureLayer,function(b){return b!=null?a.format(b.displayName.get()):a})},handleCheckCacheCheckbox:function(a,b,c){c.isSet.get()?this.handleClearClick(null,null,c):this.handleCacheClick(null,null,c)},handleZoomClick:function(a,b,c){if(a=esri.geometry.fromJson(c.geometry.get()))this.app.site.essentialsMap.extentManager.setExtentWithPriority(a.getExtent(),
5),this.app.commandRegistry.command("ShowMap").execute()},handleClearClick:function(a,b,c){this.app.commandRegistry.command("FeatureLayerClearCacheSpec").execute(c.serviceId.get());this.viewModel._refreshData()},handleCacheClick:function(a,b,c){a=new esri.tasks.Query;b=c.whereClause.get();a.where=b?b:"1=1";a.returnGeometry=true;a.outFields=["*"];a.geometry=this.app.map.extent;this.app.commandRegistry.command("FeatureLayerSetCacheSpec").execute(c.serviceId.get(),a);this.viewModel._refreshData()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerListView",geocortex.framework.ui.ViewBase,{activated:function(){this.inherited(arguments);this.app.commandRegistry.command("FeatureLayerModuleRefreshData").execute("")},handleSynchronizeClick:function(){this.app.commandRegistry.command("ActivateView").execute("EditLogView")},handleRefreshClick:function(){this.app.commandRegistry.command("FeatureLayerModuleRefreshData").execute("")},handleFeatureLayerClick:function(a,
b,c){this.viewModel.currentFeatureLayer.set(c);this.app.commandRegistry.command("ActivateView").execute("FeatureLayerDetailsView")}});
geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl={_featureLayerModuleDataCachingSpecKey:null,_featuresStoragePrefix:null,_featuresStorageEditsPrefix:null,_showingOfflineLayers:null,_modalMessageView:null,_modalMessageViewModel:null,_relatedFeatureLayerCache:null,_hasDisplayedSyncNeededAlert:false,dataCachingSpec:null,layerEditSummaries:null,syncNeeded:null,isSyncing:null,latestFeatureEditId:null,constructor:function(){this.dataCachingSpec={};this._featureLayerModuleDataCachingSpecKey=
"_featureLayerModuleDataCachingSpec";this._featuresStorageEditsPrefix="__featureLayerModuleEdits";this._featuresStoragePrefix="__featureLayerModule";this._showingOfflineLayers=false;this._relatedFeatureLayerCache={};this.layerEditSummaries=new ObservableCollection;this.syncNeeded=new Observable(false);this.isSyncing=new Observable(false);this.latestFeatureEditId=new Observable(0);if(this.app)this.app.featureLayerModule=this;this._registerCommands();this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
this._refreshModuleData);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._checkIfOfflineOnStartup);this.app.eventRegistry.event("DomainStorageClearedEvent").subscribe(this,this._handleDomainStorageClearedEvent);this.app.eventRegistry.event("ApplicationStorageClearedEvent").subscribe(this,this._handleApplicationStorageClearedEvent);this.app.eventRegistry.event("FeatureLayerModuleSyncCompletedEvent").subscribe(this,this._handleSyncComplete);this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,
this._refreshModuleData);this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this._refreshModuleData)},_handleDomainStorageClearedEvent:function(){this._resetFeatureLayersInfo(false);this._refreshModuleData()},_handleApplicationStorageClearedEvent:function(){this._resetFeatureLayersInfo(false);this._refreshModuleData()},_registerCommands:function(){this.app.commandRegistry.command("AttachFeatureAttachment").register(this,this._executeAttachFeatureAttachment);this.app.commandRegistry.command("FeatureLayerSetCacheSpec").register(this,
this._setFeatureLayerFutureSpec);this.app.commandRegistry.command("FeatureLayerClearCacheSpec").register(this,this._clearFeatureLayerFutureSpec);this.app.commandRegistry.command("ShowFeatureLayerModalMessage").register(this,this._showModalMessage);this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").register(this,this._updateModalMessage);this.app.commandRegistry.command("AllowHideFeatureLayerModalMessage").register(this,this._allowHideModalMessage);this.app.commandRegistry.command("HideFeatureLayerModalMessage").register(this,
this._removeModalMessage);this.app.commandRegistry.command("CreateFeature").register(this,this._executeCreateFeature);this.app.commandRegistry.command("UpdateFeature").register(this,this._executeUpdateFeature);this.app.commandRegistry.command("DeleteFeature").register(this,this._executeDeleteFeature);this.app.commandRegistry.command("CreateRelatedRecord").register(this,this._executeCreateRelatedRecord);this.app.commandRegistry.command("UpdateRelatedRecord").register(this,this._executeUpdateRelatedRecord);
this.app.commandRegistry.command("DeleteRelatedRecord").register(this,this._executeDeleteRelatedRecord);this.app.commandRegistry.command("CreateAttachment").register(this,this._executeCreateAttachment);this.app.commandRegistry.command("UpdateAttachment").register(this,this._executeUpdateAttachment);this.app.commandRegistry.command("DeleteAttachment").register(this,this._executeDeleteAttachment);this.app.commandRegistry.command("GetRelatedFeatures").register(this,this._executeGetRelatedFeatures);this.app.commandRegistry.command("GetEditLog").register(this,
this._executeGetEditLog);this.app.commandRegistry.command("SetEditLog").register(this,this._executeSetEditLog);this.app.commandRegistry.command("DeleteFromEditLog").register(this,this._removeFromEditLog);this.app.commandRegistry.command("ChangeEditLogEntry").register(this,this._changeEditLogEntry);this.app.commandRegistry.command("FeatureLayerModuleRefreshData").register(this,this._refreshModuleData);this.app.commandRegistry.command("FeatureLayerModuleStartSync").register(this,this._startSync);this.app.commandRegistry.command("ApplyFeatureLayerEdits").register(this,
this._applyFeatureLayerEdits);this.app.commandRegistry.command("FeatureLayerClearData").register(this,this._clearCachedFeatureLayerData);this.app.commandRegistry.command("FeatureLayerCacheData").register(this,this._cacheFeatureLayer)},initialize:function(){var a=this;this.app.commandRegistry.command("RefreshOfflineLayers").register(this,function(){this.app.isOffline.get()&&this._goOffline()});this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,function(){this._goOffline();this._clearFeatureSets()});
this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,function(){this._goOnline();this._clearFeatureSets()});this.app.store.get(this._featureLayerModuleDataCachingSpecKey,function(b){if(b){a.dataCachingSpec=dojo.fromJson(b);if(!a.dataCachingSpec.featureLayers)a.dataCachingSpec.featureLayers={};if(!a.dataCachingSpec.featureLayersFuture)a.dataCachingSpec.featureLayersFuture={}}else a.app.trace.debug("Feature Layer Module - dataCachingSpec not found, creating a new one."),a._resetFeatureLayersInfo(false)},
function(b){a.app.trace.error("Feature Layer Module - Unable to get the dataCachingSpec: {0}".format(b))})},_resetFeatureLayersInfo:function(a){this.dataCachingSpec={featureLayers:{},featureLayersFuture:{}};a&&this._persistDataCachingSpec()},_showModalMessage:function(a){this._removeModalMessage();this._modalMessageView=this.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageView",markup:"Mapping/modules/FeatureLayer/ModalMessageView.html",visible:false,
region:"ModalWindowRegion",libraryId:this.libraryId});this._modalMessageView.app=this.app;this._modalMessageViewModel=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageViewModel(this.app);this._modalMessageViewModel.initialize({message:a});this._modalMessageView.attach(this._modalMessageViewModel);this.app.viewManager.activateView(this._modalMessageView)},_updateModalMessage:function(a,b){this._modalMessageView&&a&&this._modalMessageViewModel.addMessage(a,b)},_allowHideModalMessage:function(a,
b){this._modalMessageViewModel&&(a&&this._modalMessageViewModel.setSummary(a,b),this._modalMessageViewModel.setEnableCloseButton(true))},_removeModalMessage:function(){if(this._modalMessageView)this.app.viewManager.destroyView(this._modalMessageView),this._modalMessageView=null},_checkIfOfflineOnStartup:function(){this.app.map&&this.app.featureLayerModule&&this.dataCachingSpec&&(this.app.isOffline.get()&&this._goOffline(),this._refreshModuleData())},_refreshLayersInDataCachingSpec:function(){if(this.dataCachingSpec.featureLayers)for(var a in this.dataCachingSpec.featureLayers)if(this.dataCachingSpec.featureLayers.hasOwnProperty(a)){var b=
this.dataCachingSpec.featureLayers[a];if(b.serviceId&&(b=this.app.site.essentialsMap.findMapServiceById(b.serviceId))&&b.serviceLayer)b.serviceLayer.clear&&b.serviceLayer.clear(),b.serviceLayer.refresh&&b.serviceLayer.refresh()}},_refreshModuleData:function(){this._updateEditSummarys(dojo.hitch(this,function(){this.syncNeeded.set(!this.app.isOffline.get()&&this.layerEditSummaries.getLength()>0);if(this.syncNeeded.get()&&!this.app.isOffline.get()&&!this._hasDisplayedSyncNeededAlert){this._hasDisplayedSyncNeededAlert=
true;var a=this.app.getResource(this.libraryId,"language-feature-layer-edits-and-sync"),a=this.app.getResource(this.libraryId,"language-feature-layer-pending-edits-multiple-layers-ext").format(a);this.app.commandRegistry.command("AddStatus").execute({text:a,timeoutMS:1E4})}}))},_goOffline:function(){var a=this;this._hasDisplayedSyncNeededAlert=false;for(var b=this.app.site.getFeatureServices(),c=0;c<b.length;c++)if(!b[c].isServiceLayerLoaded){var d=this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,
function(){this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").unsubscribe(d);this.app.isOffline.get()&&this._goOffline()});return}this._showingOfflineLayers=true;this._clearRelatedFeaturesCache();for(c=0;c<b.length;c++)(function(){var d=b[c],f=a.dataCachingSpec.featureLayers[d.url];if(f){var g=a._getFeatureLayerStorageKey(d.url);a.app.store.get(g,function(b){a._swapFeatureLayerForOffline(d,b,f)},function(b){a.app.trace.error("Feature Layer Module - unable to retrieve features for feature layer '{2}({0})': {1}. ".format(d.id,
b,d.displayName))})}else a._swapFeatureLayerForOffline(d,null,null)})()},_goOnline:function(){if(this._showingOfflineLayers){this._showingOfflineLayers=false;for(var a=this.app.site.getFeatureServices(),b=0,b=0;b<a.length;b++){var c=a[b];c.restoreFeatureLayer();this.app.eventRegistry.event("FeatureLayerOnlineEvent").publish(c)}this._refreshModuleData()}},_clearFeatureSets:function(){for(var a=this.app.featureSetManager.getCollectionIds(),b=0;b<a.length;b++)this.app.featureSetManager.removeCollectionById(a[b])},
_getEmptyEditSet:function(){return{additions:[],updates:[],deletions:[]}},_isObjectIdInCollection:function(a,b){if(a)for(var c=0,c=0;c<a.length;c++)if(a[c].objectId==b)return true;return false}};
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_binTool:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(a){var b=Math.ceil(3*a.length/4),b=new ArrayBuffer(b);this.decode(a,b);return b},decode:function(a,b){var c=this._keyStr.indexOf(a.charAt(a.length-1)),d=this._keyStr.indexOf(a.charAt(a.length-1)),e=Math.ceil(3*a.length/4);c==64&&e--;d==64&&e--;for(var f,g,h,j,k=0,l=0,c=b?new Uint8Array(b):
new Uint8Array(e),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,""),k=0;k<e;k+=3)f=this._keyStr.indexOf(a.charAt(l++)),g=this._keyStr.indexOf(a.charAt(l++)),d=this._keyStr.indexOf(a.charAt(l++)),j=this._keyStr.indexOf(a.charAt(l++)),f=f<<2|g>>4,g=(g&15)<<4|d>>2,h=(d&3)<<6|j,c[k]=f,d!=64&&(c[k+1]=g),j!=64&&(c[k+2]=h);return c}},_executeAttachFeatureAttachment:function(a){this._syncAttachmentToServer(a.featureUrl,a.filename,a.contentType,a.payload,a.callback)},_syncAttachmentToServer:function(a,b,c,d,e){this.app.trace.debug("--- _syncAttachmentToServer called");
try{var f=function(a){for(var b=new ArrayBuffer(a.length),b=new Uint8Array(b),c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c)%255;return b},a=a.indexOf("?")>-1?a.replace("?","/addattachment?"):this.app.configuration.proxyUri+a+"/addAttachment";this.app.trace.debug("--- Creating XHR");var g=new XMLHttpRequest;g.open("POST",a,true);g.setRequestHeader("Content-Type","multipart/form-data; boundary=---------------------------L4717uD3G30");g.responseType="";g.onload=e;this.app.trace.debug("--- Creating request preamble");
var h="-----------------------------L4717uD3G30\r\n"+'Content-Disposition: form-data; name="attachment"; filename="{0}";\r\n'.format(b)+"Content-Type: {0}".format(c)+"\r\n\r\n";this.app.trace.debug("--- Encoding request preamble");var j=f(h);this.app.trace.debug("--- Encoding request payload");var k=this._binTool.decode(d);this.app.trace.debug("--- Creating request suffix");this.app.trace.debug("--- Encoding request suffix");var l=f('\r\n-----------------------------L4717uD3G30\r\nContent-Disposition: form-data; name="gdbVersion"\r\n\r\n\r\n-----------------------------L4717uD3G30\r\nContent-Disposition: form-data; name="f"\r\n\r\npjson\r\n-----------------------------L4717uD3G30--\r\n');
this.app.trace.debug("--- Creating payload buffer");var o=new ArrayBuffer(j.length+k.length+l.length),q=new Uint8Array(o),a=0;this.app.trace.debug("--- Merging output buffers");for(i=0;i<j.length;i++,a++)q[a]=j[i]&255;for(i=0;i<k.length;i++,a++)q[a]=k[i]&255;for(i=0;i<l.length;i++,a++)q[a]=l[i]&255;this.app.trace.debug("--- Sending request");g.send(q.buffer)}catch(n){this.app.trace.error("--- ERROR: {0}".format(n.toString())),e&&e(n)}},_executeCreateAttachment:function(a){var b=a.mapService,c=a.layer,
d=a.feature,e=a.featureUrl,f=a.successCallback||a.callback,g=a.errorCallback||a.callback;this.app.trace.debug("--- Create Attachment.");if(this.app.isOffline.get()!==true)this.app.trace.debug("--- invoking _executeAttachFeatureAttachment."),c=a.feature.attributes[c.objectIdField],e=e.indexOf("?")>-1?e.replace("?","/{0}?".format(c)):"{0}/{1}".format(e,c),a.featureUrl=e,this._executeAttachFeatureAttachment(a);else{var h={attributes:{}},j=this._findKeyField(c,d,b);this._assignTemporaryObjectId(h,j);
h.attributes.filename=a.filename;h.attributes.contentType=a.contentType;var k=h.attributes.key="attachment-"+(new Date).getTime(),l=this.createNewFeatureMetaData(h,c),o={},q=d.__editingMeta;q&&q.isNew?(o={},o[q.GCXOBJECTID]=[],o[q.GCXOBJECTID].push({from:c.objectIdField,to:"gcx_feature_objectId"})):h.attributes.gcx_feature_objectId=d.attributes[c.objectIdField];l.dependencies=o;h.__editingMeta=l;var n=h;h.toJson&&(n=h.toJson());n.__editingMeta=l;if(!b)b=new geocortex.essentials.MapService(e),b.serviceLayer=
c;var m=this;this.app.store.set(k,a.payload,function(){a=null;var c=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(b.url,e,j,"attachmentAddition",n);m._appendToEditLog(null,c,f,g)},g)}},_executeUpdateAttachment:function(){},_executeDeleteAttachment:function(){}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{getEditLogKey:function(){return"__edits"},createNewFeatureMetaData:function(a,b){if(b==null)throw Error("Layer cannot be null");var c=b.objectIdField,d=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditMetadata,e=this._getNewFeatureId();a.attributes&&(a.attributes[c]=e);dojo.safeMixin(d,{objectIdField:c,isNew:true,isRelated:false,relationshipOrigin:null,relationshipDestination:null,
refs:{},GCXOBJECTID:e});return d},_findKeyField:function(a,b,c){if(a&&a.objectIdField)return a.objectIdField;if(b&&b.getLayer())return b.getLayer().objectIdField;if(c&&c.serviceLayer)return c.serviceLayer.objectIdField;throw Error("Cannot find oject id field");},_assignTemporaryObjectId:function(a,b){if(b==null)throw Error("Field cannot be null");a.attributes[b]="GCX-"+geocortex.framework.utils.alphaNumericToken()},_getNewFeatureId:function(){this.latestFeatureEditId.set(this.latestFeatureEditId.get()+
1);return this.latestFeatureEditId.get()},_executeGetEditLog:function(a){this._getEditLog(a,function(b){a(b)})},_executeSetEditLog:function(a,b){this.setEditLog(b,function(a){b(a)})},_appendToEditLog:function(a,b,c,d){function e(){g.app.trace.debug("Feature Layer Module - edit log saved.");c&&c()}function f(a){g.app.trace.error("Feature Layer Module - could not persist edit log: {0}".format(a));d&&d(a)}var g=this;this.getEditLog(function(a){a.addEntry(b);g.setEditLog(a,e,f)},function(a){g.app.trace.error("Could not fetch edit log: {0}".format(a))})},
_removeFromEditLog:function(a,b,c){function d(){f.app.trace.debug("Feature Layer Module - edit log saved.");f.app.commandRegistry.command("RefreshOfflineLayers").execute();g&&f._refreshModuleData();b&&b()}function e(a){f.app.trace.error("Feature Layer Module - could not persist edit log: {0}".format(a));c&&c(a)}var f=this,g=false;this.getEditLog(function(b){b.removeEntryAndDependents(a)?(g=b.entries.length==0,f.setEditLog(b,d,e)):e("The edit log entry could not be found.")},function(a){f.app.trace.error("Could not fetch edit log: {0}".format(a));
c&&c(a)})},hasEditsInLog:function(a,b,c){var d=new dojo.Deferred;this.getEditLog(function(c){for(var f=false,g=0;g<c.entries.length;++g)if(c.entries[g].mapServiceUrl===a){f=true;break}geocortex.deferredResolve(d,f);b&&b(f)},function(a){geocortex.deferredReject(d,a);c&&c(a)});return d},clearServiceEditsFromLog:function(a,b,c){var d=this;this.getEditLog(function(e){e.entries=dojo.filter(e.entries,function(b){return b.mapServiceUrl!==a});d.setEditLog(e,function(){d.app.commandRegistry.command("RefreshOfflineLayers").execute();
b&&b()},c)},c)},getEditLog:function(a,b){var c=this;this.app.store.get(this.getEditLogKey(),function(b){var e=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLog;b?(e=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLog(b),e.nextFeatureId>c.latestFeatureEditId.get()&&c.latestFeatureEditId.set(e.nextFeatureId),a&&a(e,b)):a&&a(e)},function(a){b&&b(a)})},setEditLog:function(a,b,c){var d=this;try{var e=a.toJson();typeof e==="object"&&(e=dojo.toJson(e),dojo.fromJson(e));
a.nextFeatureId=this.latestFeatureEditId.get();this.app.store.set(this.getEditLogKey(),e,function(){d.app.eventRegistry.event("FeatureLayerEditLogUpdatedEvent").publish(a,e);b&&b()},c)}catch(f){c&&c(f)}},_applyFeatureLayerEdits:function(a){if(a){var b=a.mapService,c=a.layer;if(b)c=b.serviceLayer;else if(c)b=new geocortex.essentials.MapService(c.url),b.serviceLayer=c;else{this.app.trace.warning("Cannot apply edits: Missing map service and/or layer in edit descriptor.");return}var d=a.hasOwnProperty("additions")?
a.additions:[],e=a.hasOwnProperty("updates")?a.updates:[],f=a.hasOwnProperty("deletions")?a.deletions:[],g=a.hasOwnProperty("successCallback")?a.successCallback:function(){},h=a.hasOwnProperty("errorCallback")?a.errorCallback:function(){};this.app.isOffline.get()===true?(this._performEditsToFeatureCollection(c.objectIdField,b,b.serviceLayer.graphics,d,e,f),g&&g()):c.applyEdits(d,e,f,function(a,b){var e=null;if(b&&b.length>0)for(var f=0;f<b.length;++f){var q=b[f];if(!q.success){e=q.error;break}}if(a&&
a.length>0)for(f=0;f<a.length;++f)if(q=a[f],q.success)q.GID&&!String.isNullOrEmpty(c.globalIdField)&&(d[f].attributes[c.globalIdField]=q.GID);else{e=q.error;break}e?h((e||{message:"Editing operation was not successful"}).message):g&&g()},function(a){h(a)})}},_performEditsToFeatureCollection:function(a,b,c,d,e,f){if(c){b=b?b.serviceLayer:null;try{for(var g=0;g<d.length;++g)b?b.add(d[g]):c.push(d[g]);for(g=0;g<e.length;++g){var h=e[g];if(h.attributes&&h.attributes[a])for(var j=h.attributes[a],k=0;k<
c.length;++k){var l=c[k];if(l.attributes&&l.attributes.hasOwnProperty(a)&&l.attributes[a]===j)dojo.safeMixin(c[k].attributes,h.attributes),c[k].setGeometry?c[k].setGeometry(h.geometry):c[k].geometry=h.geometry}}for(g=0;g<f.length;++g){var o=f[g];if(o.attributes&&o.attributes[a])for(var q=o.attributes[a],k=0;k<c.length;++k)l=c[k],l.attributes&&l.attributes.hasOwnProperty(a)&&l.attributes[a]===q&&(b?b.remove(l):Array.remove(c,k))}}catch(n){this.app.trace.error("Error applying offline edits: {0}".format(n.toString()))}}},
_updateEditSummarys:function(a){var b=this;this.getEditLog(function(c){for(var d={},e=[],f=0;f<c.entries.length;++f){var g=c.entries[f];if(!g.committed){var h=d[g.mapServiceUrl];h||(h=d[g.mapServiceUrl]=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.LayerEditSummary(g.mapServiceUrl,g.mapServiceUrl),e.push(h));switch(g.type){case "addition":case "relatedRecordAddition":case "attachmentAddition":h.additions.addItem(g);h.numAdditions.set(h.numAdditions.get()+1);break;case "update":case "relatedRecordUpdate":case "attachmentUpdate":h.updates.addItem(g);
h.numUpdates.set(h.numUpdates.get()+1);break;case "deletion":case "relatedRecordDeletion":case "attachmentDeletion":h.additions.addItem(g),h.numDeletions.set(h.numDeletions.get()+1)}h.totalEdits.set(h.totalEdits.get()+1)}}b.layerEditSummaries.set(e);a&&a()},function(a){b.app.trace.error("An error occurred while generating layer edit summaries: {0}".format(a))})}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_executeCreateRelatedRecord:function(a){var b=a.mapService,c=a.layer,d=a.feature,e=a.relatedFeature,f=a.relationshipOrigin,g=a.relationshipDestination,h=a.successCallback,a=a.errorCallback,j=this.createNewFeatureMetaData(d,c);j.isRelated=true;j.relationshipOrigin=f;j.relationshipDestination=g;var k=e.__editingMeta;if(k&&k.isNew)j.dependencies={},j.dependencies[k.GCXOBJECTID]=[{from:f.keyField,to:g.keyField}];
d.__editingMeta=j;if(this.app.isOffline.get()===true){k=d;d.toJson&&(k=d.toJson());k.__editingMeta=j;j=c.url||c._essentialsMetadata.serviceUrl;if(!b)b=new geocortex.essentials.MapService(j),b.serviceLayer=c;var l=this._findKeyField(c,d,b),k=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(b.url,j,l,"relatedRecordAddition",k);k.setRelatedData(e.getLayer().url,f.keyField,g.keyField);this._appendToEditLog(b,k,h,a)}this._applyFeatureLayerEdits({mapService:b,layer:c,additions:[d],
updates:[],deletions:[],successCallback:h,errorCallback:a})},_executeUpdateRelatedRecord:function(a){var b=a.mapService,c=a.layer,d=a.feature,e=a.relatedFeature,f=a.relationshipOrigin,g=a.relationshipDestination,h=a.successCallback,a=a.errorCallback,j=e.__editingMeta;if(j){var k=this.createNewFeatureMetaData(d,c);k.isRelated=true;k.relationshipOrigin=f;k.relationshipDestination=g;j.isNew?(k.dependencies={},k.dependencies[j.GCXOBJECTID]=[{from:f.keyField,to:g.keyField}]):k.dependencies=dojo.fromJson(dojo.toJson(j.dependencies));
d.__editingMeta=k}if(this.app.isOffline.get()===true){j=d;d.toJson&&(j=d.toJson());if(!b)b=new geocortex.essentials.MapService(c.url),b.serviceLayer=c;k=this._findKeyField(c,d,b);j=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(b.url,c.url,k,"relatedRecordUpdate",j);j.setRelatedData(e.getLayer().url,f.keyField,g.keyField);this._appendToEditLog(b,j,h,a)}this._applyFeatureLayerEdits({mapService:b,layer:c,additions:[],updates:[d],deletions:[],successCallback:h,errorCallback:a})},
_executeDeleteRelatedRecord:function(a){var b=a.mapService,c=a.layer,d=a.feature,e=a.relatedFeature,f=a.relationshipOrigin,g=a.relationshipDestination,h=a.successCallback,a=a.errorCallback,j=e.__editingMeta;if(j&&j.isNew){var k=this.createNewFeatureMetaData(d,c);k.isRelated=true;k.relationshipOrigin=f;k.relationshipDestination=g;k.dependencies={};k.dependencies[j.GCXOBJECTID]=[{from:f.keyField,to:g.keyField}];d.__editingMeta=k}if(this.app.isOffline.get()===true){j=d;d.toJson&&(j=d.toJson());if(!b)b=
new geocortex.essentials.MapService(c.url),b.serviceLayer=c;k=this._findKeyField(c,d,b);j=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(b.url,c.url,k,"relatedRecordDelete",j);j.setRelatedData(e.getLayer().url,f.keyField,g.keyField);this._appendToEditLog(b,j,h,a)}this._applyFeatureLayerEdits({mapService:b,layer:c,additions:[],updates:[],deletions:[d],successCallback:h,errorCallback:a})},_executeCreateFeature:function(a){var b=this,c=a.mapService,d=a.layer,e=a.feature,
f=a.successCallback,g=a.errorCallback;typeof c==="string"&&(c=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));if(c)if(a=function(){b._applyFeatureLayerEdits({mapService:c,layer:d,additions:[e],updates:[],deletions:[],successCallback:f,errorCallback:g})},this.app.isOffline.get()===true){var h=this._findKeyField(d,e,c);this._assignTemporaryObjectId(e,h);var j=e;e.toJson&&(j=e.toJson());e.__editingMeta=j.__editingMeta=this.createNewFeatureMetaData(e,c.serviceLayer||e.getLayer());
h=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(c.url,d.url,h,"addition",j);this._appendToEditLog(c,h,a,g)}else a();else g&&g(b.app.getResource(b.libraryId,"language-feature-layer-error-no-mapservice"))},_executeUpdateFeature:function(a){var b=this,c=a.mapService,d=a.layer,e=a.feature,f=a.successCallback,g=a.errorCallback;typeof c==="string"&&(c=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));if(c)if(a=function(){b._applyFeatureLayerEdits({mapService:c,
layer:d,additions:[],updates:[e],deletions:[],successCallback:f,errorCallback:g})},this.app.isOffline.get()===true){var h=e,j=e.__editingMeta;e.toJson&&(h=e.toJson());var k=this._findKeyField(d,e,c);if(j){var l=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditMetadata;l.isNew=false;l.objectIdField=k;j.isNew?l.dependencies[j.GCXOBJECTID]=[{from:k,to:k}]:l.dependencies=dojo.fromJson(dojo.toJson(j.dependencies));h.__editingMeta=l}else h.__editingMeta=null;h=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(c.url,
d.url,k,"update",h);this._appendToEditLog(c,h,a,g)}else a();else g&&g(b.app.getResource(b.libraryId,"language-feature-layer-error-no-mapservice"))},_executeDeleteFeature:function(a){var b=this,c=a.mapService,d=a.layer,e=a.feature,f=a.successCallback,a=a.errorCallback;typeof c==="string"&&(c=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));if(e)if(this.app.isOffline.get()===false)this._applyFeatureLayerEdits({mapService:c,layer:d,additions:[],updates:[],deletions:[e],successCallback:f,
errorCallback:a});else{var g=this._findKeyField(d,e,c),h=e.attributes[g];if(h&&!(h.toString().indexOf("GCX")>-1)){var h=e,j=e.__editingMeta;e.toJson&&(h=e.toJson());if(j)j.objectIdField=g,h.__editingMeta=j;e=new geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry(c.url,d.url,g,"deletion",h);this._appendToEditLog(c,e,f,a)}else if(d=e.__editingMeta){var k=d.GCXOBJECTID,l=null;b._applyFeatureLayerEdits({mapService:c,additions:[],updates:[],deletions:[e],successCallback:f,errorCallback:a});
b.getEditLog(function(a){for(var c=0;c<a.entries.length;++c){var d=a.entries[c];if(!d.committed&&d.feature&&d.hasOwnProperty("metadata")){var e=d.metadata;if(e&&e.GCXOBJECTID===k){l=d;break}}}l&&a.removeEntryAndDependents(l);b.setEditLog(a,function(){b.app.trace.debug("Deleted a feature.")},function(a){var c=b.app.getResource(b.libraryId,"language-feature-layer-error-deleting-feature"),c=c.format(a.toString());b.app.commandRegistry.command("Alert").execute(c)})},a)}}},_changeEditLogEntry:function(a){var b=
this,c=a.mapService,d=a.feature,e=a.oldEditLogEntry,f=a.successCallback,g=a.errorCallback;typeof c==="string"&&(c=this.app.site.essentialsMap.findMapServiceById(serviceEntry.serviceId));c?this.getEditLog(function(a){for(var c=false,k=0;k<a.entries.length&&!c;k++){var l=a.entries[k];if(!l.committed&&l.equals(e))c=d.toJson?d.toJson():(new esri.Graphic(d)).toString(),c.__editingMeta=d.__editingMeta=l.metadata,l.setFeature(c),c=true}c?b.setEditLog(a,f,g):g(b.app.getResource(b.libraryId,"language-feature-layer-error-edit-not-found"))},
g):g&&g(b.app.getResource(b.libraryId,"language-feature-layer-error-no-mapservice"))}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_getFeatureLayerStorageKey:function(a){return this._featuresStoragePrefix+"_"+a},_getFeatureLayerRelatedStorageKey:function(a,b){return this._featuresStoragePrefix+"_rel_"+b+"_"+a},_getFeatureLayerEditsStorageKey:function(a){return this._featuresStorageEditsPrefix+"_"+a},_persistDataCachingSpec:function(){var a=this;this.app.store.set(this._featureLayerModuleDataCachingSpecKey,dojo.toJson(this.dataCachingSpec),
function(){a.app.trace.debug("Feature Layer Module - saved dataCachingSpec.");a.app.eventRegistry.event("FeatureLayerCacheSpecChanged").publish()},function(b){a.app.trace.error("Feature Layer Module - could not persist dataCachingSpec in storage: {0}".format(b))})},_clearCachedFeatureLayerData:function(a,b,c){if(this.app.isOffline.get()===true){var d=this.app.getResource(this.libraryId,"language-feature-layer-warning-offline-clearing-data");this.app.trace.error(d);c&&c(d)}else{this.app.commandRegistry.command("ShowFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,
"language-feature-layer-clearing-data"));delete this.dataCachingSpec.featureLayers[a];this._persistDataCachingSpec();this.app.store.remove(this._getFeatureLayerStorageKey(a),function(){},function(){});var e=this;this.getEditLog(function(d){for(var g=0;g<d.entries.length;++g)d.entries[g].mapServiceUrl===a&&(Array.remove(d.entries,g,g),--g);e.setEditLog(d,function(){e.app.commandRegistry.command("HideFeatureLayerModalMessage").execute();b&&b()},function(a){e.app.trace.error("Error saving edit log after removing layer edits: {0}".format(a));
e.app.commandRegistry.command("HideFeatureLayerModalMessage").execute();c&&c(a)})},function(a){e.app.trace.error("Error removing layer edits from edit log: {0}".format(a));e.app.commandRegistry.command("HideFeatureLayerModalMessage").execute()})}},_swapFeatureLayerForOffline:function(a,b,c){function d(d){var h=a.getEmptyFeatureCollection();b?(h.featureSet.features=dojo.fromJson(b),c&&c.layerMetadata&&e._applyLayerMetadataToFeatures(h.featureSet.features,c.layerMetadata)):h.featureSet.features=[];
if(d.entries){for(var j=[],k=[],l=[],o=0;o<d.entries.length;++o){var q=d.entries[o];if(q.mapServiceUrl===a.url){var n=new esri.Graphic(q.feature.toJson());n.attributes.__editingMeta=q.metadata;if(!n.symbol&&a&&a.serviceLayer&&a.serviceLayer.renderer)n.symbol=a.serviceLayer.renderer.getSymbol(n);switch(q.type){case "addition":n.attributes&&(!n.attributes.hasOwnProperty(f)||!n.attributes[f])&&e._assignTemporaryObjectId(n,f);j.push(n);break;case "update":k.push(n);break;case "deletion":l.push(n)}}}(j.length>
0||k.length>0||l.length>0)&&e._performEditsToFeatureCollection(f,null,h.featureSet.features,j,k,l)}var d=h.layerDefinition.hasAttachments,m=new esri.layers.FeatureLayer(h);if(d!=null)m.hasAttachments=d;for(h=0;h<m.graphics.length;++h)if(d=m.graphics[h],d.attributes&&d.attributes.__editingMeta)d.__editingMeta=d.attributes.__editingMeta,delete d.attributes.__editingMeta;h=[];h.push(dojo.connect(m,"onBeforeApplyEdits",function(a,b,c){e._layerOnBeforeApplyEdits(m,a,b,c)}));h.push(dojo.connect(m,"onAddAttachmentComplete",
function(a){e._layerOnAddAttachmentComplete(m,a)}));h.push(dojo.connect(m,"onDeleteAttachmentsComplete",function(a){e._layerOnDeleteAttachmentsComplete(m,a)}));h.push(dojo.connect(m,"onEditsComplete",function(a,b,c){e._layerOnEditsComplete(m,a,b,c)}));m._eventHandlers=h;d={};d.serviceUrl=a.serviceUrl;d.onlineUrl=a.url;d.eventHandlers=h;m._essentialsMetadata=d;a.replaceFeatureLayer(m,true,true,true);h=null;e.app.eventRegistry.event("FeatureLayerOfflineEvent").publish(a)}var e=this,f=a.serviceLayer?
a.serviceLayer.objectIdField:"OBJECTID";this.getEditLog(function(a){d(a)},function(a){e.app.trace.error("Feature Layer Module - Unable to retrieve edit log: {0}".format(a))})},_applyLayerMetadataToFeatures:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.geometry&&b.spatialReference)d.geometry.spatialReference=b.spatialReference}},_cacheAllFeatureLayers:function(a){function b(){g++;if(g>=e.length)a(h);else{d=e[g];var j=f.dataCachingSpec.featureLayersFuture[d],k=j.serviceId,l=new esri.tasks.Query;
l.where=j.whereClause;l.returnGeometry=true;l.outFields=["*"];l.geometry=new esri.geometry.Extent(j.geometry.xmin,j.geometry.ymin,j.geometry.xmax,j.geometry.ymax,new esri.SpatialReference({wkid:j.geometry.spatialReference.wkid}));f._cacheFeatureLayer(k,l,b,c)}}function c(a){h.push(a);b()}for(var d in this.dataCachingSpec.featureLayers)this.dataCachingSpec.featureLayersFuture[d]||this.app.store.remove(this._getFeatureLayerStorageKey(this.dataCachingSpec.featureLayers[d].serviceUrl),function(){},function(){});
this.dataCachingSpec.featureLayers={};var e=[];for(d in this.dataCachingSpec.featureLayersFuture)e.push(d);var f=this,g=-1,h=[];b()},_cacheFeatureLayer:function(a,b,c,d){var e=this,f=null,g=null;if(this.app.isOffline&&this.app.isOffline.get())d(Error(this.app.getResource(this.libraryId,"language-feature-layer-caching-not-allowed")));else{var h=function(a){c&&c(a)},j=function(a){d&&d(a)};this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,
"language-feature-layer-caching-data"));var k=this.app.site.essentialsMap.findMapServiceById(a);k||d&&d("map service not found");if(k.serviceLayer)f=k.serviceLayer.version,g=f>=10.1?k.serviceLayer.maxRecordCount:f>=10?1E3:500;var f=[],l=k.queryFeatures(b);f.push(l);k.hasOriginRelationships()&&(l=k.queryIds(b),f.push(l));f=new dojo.DeferredList(f);this.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,"language-feature-layer-fetching-data"));
f.then(function(a){function c(a){if(a){var g=[],l;for(l=0;l<a.length;l++)if(a[l]&&a[l].length===2&&a[l][0]){var q={};q.info=r[l];q.data=e._prepRelatedData(a[l][1]);g.push(q)}else{g="";a[l]&&a[l].length===2&&(g=a[l][1]);a="Error getting related records for layer {0}. {1}".format(k.displayName,g);d&&d(Error(a));e.app.trace.error(a);return}e._storeFeatureLayerForOfflineUse(f,k,b,h,j,g)}}if(a&&a.length>0&&a[0]&&a[0].length>=2&&a[0][0]===false)a[0][1].code==400&&a[0][1].details&&a[0][1].details.length&&
/.*operation was attempted on an empty geometry.*/.test(a[0][1].details[0])?e._storeFeatureLayerForOfflineUse([],k,b,h,j):j(a[0][1]);else{var f=null,l,r;if(a&&a.length>0&&a[0]&&a[0].length>=2&&a[0][0])a[0][1].features.length===0?f=[]:(f=a[0][1].toJson().features,a[0][1].features.length===g&&e.app.trace.warning(e.app.getResource(e.libraryId,"language-feature-layer-max-record-warning").format(k.displayName,a[0][1].features.length)));if(k.hasOriginRelationships()&&a&&a.length>1&&a[1]&&a[1].length>=2){l=
[];r=[];var s,t;for(s=0;s<k.serviceLayer.relationships.length;s++)if(t=k._getRelation(k.serviceLayer.relationships[s].id),(!t||t.visible)&&k.serviceLayer.relationships[s].role==="esriRelRoleOrigin")t=new esri.tasks.RelationshipQuery,t.outFields=["*"],t.relationshipId=k.serviceLayer.relationships[s].id,t.objectIds=a[1][1],l.push(k.queryRelatedFeatures(t)),r.push(k.serviceLayer.relationships[s]);l.length>0?(a=new dojo.DeferredList(l),e.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(e.app.getResource(e.libraryId,
"language-feature-layer-fetching-related-data")),a.then(c,j)):e._storeFeatureLayerForOfflineUse(f,k,b,h,j)}else e._storeFeatureLayerForOfflineUse(f,k,b,h,j)}},function(b){e.app.trace.error("Feature Layer Module - unable to cache data for feature layer '{2}({0})': {1}. ".format(a,b,k.displayName));d&&d(b)})}},_storeFeatureLayerForOfflineUse:function(a,b,c,d,e,f){var g=this,h=b.serviceLayer,j=null;c&&c.geometry&&(j=c.geometry.toJson());var k=null;if(c&&c.where)k=c.where;var l=this._getSpatialReferenceAndClense(a),
o=dojo.toJson(l.jsonFeatures),c=[],q=this.app.store.set(this._getFeatureLayerStorageKey(b.url),o);c.push(q);if(f)for(q=0;q<f.length;q++){var n=dojo.toJson(f[q].data);f[q].info.size=n.length*2;n=this.app.store.set(this._getFeatureLayerRelatedStorageKey(b.url,f[q].info.id),n);c.push(n)}(new dojo.DeferredList(c)).then(function(){g.app.trace.info("Feature Layer Module -  saved {1} feature(s) for Feature Layer '{2}({0})'".format(b.id,a.length,b.displayName));var c=g._grabLayerMetadata(h);c.spatialReference=
l.spatialReference;var e=g.getRelationshipMetadata(f);g.dataCachingSpec.featureLayers[b.url]={relationships:e,layerMetadata:c,count:a.length,size:o.length*2,storedOn:(new Date).toLocaleString(),geometry:j,whereClause:k,serviceUrl:b.url,serviceId:b.id};g._persistDataCachingSpec();d&&d()},function(a){g.app.trace.error("Feature Layer Module - unable to store features for Feature Layer '{2}({0})': {1}".format(b.id,a,b.displayName));e&&e(a)})},_setFeatureLayerFutureSpec:function(a,b){var c=this.app.site.essentialsMap.findMapServiceById(a),
d=b&&b.geometry?b.geometry.toJson():null,e=b&&b.where?b.where:null;this.dataCachingSpec.featureLayersFuture[c.url]={layerMetadata:this._grabLayerMetadata(c.serviceLayer),geometry:d,whereClause:e,serviceUrl:c.url,serviceId:c.id};this._persistDataCachingSpec()},_clearFeatureLayerFutureSpec:function(a){delete this.dataCachingSpec.featureLayersFuture[this.app.site.essentialsMap.findMapServiceById(a).url];this._persistDataCachingSpec()},_grabLayerMetadata:function(a){return{fields:a.fields,version:a.version,
capabilities:a.capabilities,relationships:a.relationships,objectIdField:a.objectIdField}},_getSpatialReferenceAndClense:function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];if(d.geometry&&d.geometry.spatialReference){if(!b.spatialReference)b.spatialReference=d.geometry.spatialReference;delete d.geometry.spatialReference}}b.jsonFeatures=a;return b},_layerOnBeforeApplyEdits:function(){},_layerOnAddAttachmentComplete:function(){},_layerOnDeleteAttachmentsComplete:function(){},_layerOnEditsComplete:function(){}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_executeGetRelatedFeatures:function(a){this._getRelatedFeatures(a.mapService,a.relationshipId,a.objectId,a.callbackResults,a.callbackErrors)},_clearRelatedFeaturesCache:function(){if(this._relatedFeatureLayerCache)for(var a in this._relatedFeatureLayerCache)this._relatedFeatureLayerCache.hasOwnProperty(a)&&(this._relatedFeatureLayerCache[a].clear(),delete this._relatedFeatureLayerCache[a])},getRelationshipMetadata:function(a){var b=
[];if(a){var c;for(c=0;c<a.length;c++)b.push({id:a[c].info.id,name:a[c].info.name,count:a[c].data.length,size:a[c].info.size})}return b},_getRelatedFeatureLayerIndex:function(a,b){return a&&!isNaN(b)?b+"_"+a.url:null},_prepRelatedData:function(a){var b=[];if(a)for(var c in a)if(a.hasOwnProperty(c)){var d={},e=a[c].toJson().features,f;for(f in e)!d.hasOwnProperty(f)&&e.hasOwnProperty(f)&&(d[f]=true,b.push(e[f]))}return b},_getRelatedFeatures:function(a,b,c,d,e){var f=new dojo.Deferred,g=this;if(!a){var h=
Error("_getRelatedFeatures: mapService cannot be null.");geocortex.deferredReject(f,h);typeof e=="function"&&e(h);return f}if(isNaN(b))return h=Error("_getRelatedFeatures: relationshipId cannot be null."),geocortex.deferredReject(f,h),typeof e=="function"&&e(h),f;if(!c)return h=Error("_getRelatedFeatures: objectId cannot be null."),geocortex.deferredReject(f,h),typeof e=="function"&&e(h),f;this.app.isOffline.get()?(h=new esri.tasks.Query,h.objectIds=[c],h.outFields=["*"],h=a.serviceLayer.queryFeatures(h),
h.then(function(j){if(!j.features||j.features.length===0){j.features=[];for(var h=a.serviceLayer.objectIdField,l=a.serviceLayer.graphics.length-1;l>=0;--l){var o=a.serviceLayer.graphics[l];if(o.attributes&&o.attributes[h]===c){j.features.push(o);break}}}for(var q=a.serviceLayer._essentialsMetadata.serviceUrl,h=q.substring(0,q.lastIndexOf("/")),o=null,l=0;l<a.serviceLayer.relationships.length;++l){var n=a.serviceLayer.relationships[l];if(n.id===b){o=n;break}}q="{0}/{1}".format(h,o.relatedTableId);
l=q.replace("https://","").replace("http://","").replace("//","/");h=l.indexOf("/local-proxy/");h!=-1&&(l=l.substring(h));g.app.store.get(l,function(c){if(c==null)c=Error("Could not find offline related layer '{0}'".format(q)),geocortex.deferredReject(f,c),typeof e=="function"&&e(c);else{var h=dojo.fromJson(geocortex.framework.utils.base64Decode(c));h.url=q;g.app.store.get(g._getFeatureLayerRelatedStorageKey(a.url,b)).then(function(c){h.graphics=dojo.fromJson(c);g._performEditsToRelatedData(h,h.graphics,
function(){var c=g._findRelatedRecord(a,b,j,h);geocortex.deferredResolve(f,c);typeof d=="function"&&d(c)},function(a){geocortex.deferredReject(f,a);typeof e=="function"&&e(a)})},e)}})})):(h=new esri.tasks.RelationshipQuery,h.outFields=["*"],h.relationshipId=b,h.objectIds=[c],h=a.serviceLayer.queryRelatedFeatures(h),h.then(function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c))for(var e=0;e<a[c].features.length;e++)b.push(a[c].features[e]);geocortex.deferredResolve(f,b);typeof d=="function"&&d(b)},
function(a){geocortex.deferredReject(f,a)}));return f},_findRelatedRecord:function(a,b,c,d){var e=[];if(!a||isNaN(b)||!c||!d)return e;var f=a._getEsriRelation(b);if(!f)return e;for(var a=e,g=0;g<d.relationships.length;g++)if(d.relationships[g].id==b){a=d.relationships[g];break}if(!a)return e;if(c&&c.features&&c.features.length>0){b=c.features[0].attributes[f.keyField];c={};for(g=0;g<d.graphics.length;g++)f=d.graphics[g].attributes[d.objectIdField],d.graphics[g].attributes[a.keyField]==b&&!c[f]&&(c[f]=
true,e.push(d.graphics[g]))}return e},_isRelatedFeatureLayerCached:function(a,b){return this._relatedFeatureLayerCache[this._getRelatedFeatureLayerIndex(a,b)]&&true},_getRelatedFeatureLayerFromCache:function(a,b){return this._relatedFeatureLayerCache[this._getRelatedFeatureLayerIndex(a,b)]},_addRelatedLayerToCache:function(a,b,c){this._relatedFeatureLayerCache[this._getRelatedFeatureLayerIndex(a,b)]=c},_performEditsToRelatedData:function(a,b,c,d){var e=this,f=[],g=[],h=[];this.getEditLog(function(d){for(var k=
0;k<d.entries.length;++k){var l=d.entries[k];l.layerUrl===a.url&&(l.type==="relatedRecordAddition"?f.push(l.feature):l.type==="relatedRecordUpdate"?g.push(l.feature):l.type==="relatedRecordDeletion"&&h.push(l.feature))}e._performEditsToFeatureCollection(a.objectIdField,null,b,f,g,h);c&&c(b)},function(a){e.app.trace.error("Error fetching offline edit log while loading offline edits: {0}".format(a));d&&d(a)})},_getRelatedFeatureLayer:function(a,b,c,d){var e=new dojo.Deferred,f=this;if(!a){var g=Error("_getRelatedFeatureLayer: mapService cannot be null.");
geocortex.deferredReject(e,g);typeof d=="function"&&d(g);return e}if(isNaN(b))return g=Error("_getRelatedFeatureLayer: relationshipId cannot be null."),geocortex.deferredReject(e,g),typeof d=="function"&&d(g),e;g=this._getRelatedFeatureLayerFromCache(a,b);if(this.app.isOffline.get()===true){for(var h=a.serviceLayer._essentialsMetadata.serviceUrl,g=h.substring(0,h.lastIndexOf("/")),j=null,k=0;k<a.serviceLayer.relationships.length;++k){var l=a.serviceLayer.relationships[k];if(l.id===b){j=l;break}}h=
"{0}/{1}".format(g,j.relatedTableId);g=h.replace("https://","").replace("http://","").replace("//","/");j=g.indexOf("/local-proxy/");j!=-1&&(g=g.substring(j));var o=new dojo.Deferred;this.app.store.get(g,function(a){try{if(a==null)throw Error("Could not find offline related layer '{0}'".format(h));var b=dojo.fromJson(geocortex.framework.utils.base64Decode(a));b.url=h;b.graphics=[];geocortex.deferredResolve(o,b);typeof c=="function"&&c(b)}catch(e){geocortex.deferredReject(o,e),typeof d=="function"&&
d(e)}finally{return o}});return o}if(g)return geocortex.deferredResolve(e,g),typeof c=="function"&&c(g),e;a.getRelatedFeatureLayer(b).then(function(h){function j(d){var k=d.toJson();k.featureSet.features=d?dojo.fromJson(d):[];f._performEditsToRelatedData(h,k.featureSet.features);d=new esri.layers.FeatureLayer(k);k={};k.serviceUrl=h.url;k.onlineUrl=a.url;d._essentialsMetadata=k;f._addRelatedLayerToCache(a,b,d);geocortex.deferredResolve(e,d);typeof c=="function"&&c(d)}if(f.app.isOffline.get()===false)f._addRelatedLayerToCache(a,
b,h),geocortex.deferredResolve(e,h),typeof c=="function"&&c(h);else{var k=f.dataCachingSpec.featureLayers[a.url],g=null;if(k&&k.relationships){var l;for(l=0;l<k.relationships.length;l++)if(k.relationships[l].id===b){g=k.relationships[l];break}}g&&g.count>0?f.app.store.get(f._getFeatureLayerRelatedStorageKey(a.url,b)).then(j,function(a){geocortex.deferredReject(e,a);typeof d=="function"&&d(a)}):j()}},function(a){geocortex.deferredReject(e,a);typeof d=="function"&&d(a)});return e}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_updateEditLogForNewFeature:function(a,b,c,d,e){for(var f=this,g=b.metadata.GCXOBJECTID,h=0;h<a.entries.length;++h){var j=a.entries[h],k=j.metadata;if(k&&k.dependencies&&k.dependencies.hasOwnProperty(g)&&k.dependencies[g]!=null)for(var k=k.dependencies[g],l=0;l<k.length;++l){var o=k[l];j.feature.attributes[o.to]=b.feature.attributes[o.from]}}this.setEditLog(a,function(){f.app.trace.debug("Successfully updated relationships in edit log.");
d&&d(c)},function(a){f.app.trace.debug("An error occurred while updating relationships in the edit log: {0}.".format(a.toString()));e&&e(a)})}});
dojo.safeMixin(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl,{_handleSyncComplete:function(){this._refreshModuleData()},_startSync:function(){function a(){function a(){f.app.eventRegistry.event("FeatureLayerModuleSyncCompletedEvent").publish(g);if(j.length==0)b();else{var c=f.app.getResource(f.libraryId,"language-feature-layer-sync-end-edits-errors"),d=f.app.getResource(f.libraryId,"language-feature-layer-edits-and-sync"),c=c.format(k.length,d);f.app.commandRegistry.command("AllowHideFeatureLayerModalMessage").execute(c,
false)}}function b(){var a=[],d=[],e=[],h=[],j=0,k=f.app.site.getFeatureServices();if(k.length==0)f._cacheAllFeatureLayers(c);else{for(var g=0;g<k.length;g++){var l=k[g].serviceLayer;l.setAutoGeneralize&&l.setAutoGeneralize(false);l.visible||(d.push(l),l.show());l.visibleAtMapScale||(e.push(l),h.push({maxScale:l.maxScale,minScale:l.minScale}),l.setMaxScale(0),l.setMinScale(0));a.push(dojo.connect(l,"onUpdateEnd",function(){j++;if(j==a.length){for(;a.length>0;)dojo.disconnect(a.pop());for(f._cacheAllFeatureLayers(c);d.length>
0;)d.pop().hide();for(;e.length>0;){var b=e.pop();b.setMaxScale(h[e.length].maxScale);b.setMinScale(h[e.length].minScale)}}}))}for(g=0;g<k.length;g++)k[g].serviceLayer.refresh()}}function c(a){for(var b=f.app.site.getFeatureServices(),d=0;d<b.length;d++){var e=b[d].serviceLayer;e.setAutoGeneralize&&e.setAutoGeneralize(true)}b=null;if(a.length==0)b=f.app.getResource(f.libraryId,"language-feature-layer-sync-end-success");else for(d=0;d<a.length;d++)if(f.app.trace.error(a[d]),a[d].name&&a[d].name=="RequestTimeoutError"){b=
f.app.getResource(f.libraryId,"language-feature-layer-sync-end-request-timeout");break}f.app.commandRegistry.command("AllowHideFeatureLayerModalMessage").execute(b,a.length==0)}if(j.length>0){for(var d=0;d<j.length&&d<3;d++)f.app.trace.error(j[d]);j.length>3&&f.app.trace.error(j.length-3+" more sync errors")}if(j.length==0)g.entries.length=0;f.setEditLog(g,a,function(b){f.app.trace.error(b);b=f.app.getResource(f.libraryId,"language-feature-layer-error-setting-edit-log").format(b);j.push(b);f.app.commandRegistry.command("Alert").execute(b);
a()})}function b(){h++;if(h>=g.entries.length)a();else{var e=g.entries[h];if(e.committed)b();else if(k.some(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry.prototype.isRelated,e)){var j=f.app.getResource(f.libraryId,"language-feature-layer-skipping-feature-failed"),j=j.format(e.getDescription(f.app,f.libraryId));f.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(j,"error");l.push(e);b()}else l.some(geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.EditLogEntry.prototype.isRelated,
e)?(j=f.app.getResource(f.libraryId,"language-feature-layer-skipping-feature-blocked"),j=j.format(e.getDescription(f.app,f.libraryId)),f.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(j,"warn"),l.push(e),b()):(e.error=null,f._syncEditToServer(g,e,c,d))}}function c(){var a=g.entries[h];o++;if(!a.error)a.committed=true;f.setEditLog(g,function(){b()},function(a){j.push("Error saving updated edit log: {0}".format(a));b()})}function d(a){var c=g.entries[h];c.error=a;var d="";if(a&&
a.message)d=a.message,a.details&&(d+=" (Details: {0})".format(a.details[0]));f.app.eventRegistry.event("FeatureLayerModuleSyncErrorEvent").publish(a);f.app.eventRegistry.event("FeatureLayerModuleSyncFailedEvent").publish(a);var e=f.app.getResource(f.libraryId,"language-feature-layer-error-sync-feature"),e=e.format(c.getDescription(f.app,f.libraryId)+" "+(d?d:a));f.app.commandRegistry.command("UpdateFeatureLayerModalMessage").execute(e,"error");k.push(c);j.push("Error syncing edits to server: {0}".format(e));
b()}if(this.app.isOffline.get()){var e=this.app.getResource(this.libraryId,"language-feature-layer-cannot-sync-edits-offline");this.app.trace.info(e);this.app.commandRegistry.command("Alert").execute(e)}else{var f=this,g=null,h=-1,j=[],k=[],l=[],o=0;this.app.commandRegistry.command("ShowFeatureLayerModalMessage").execute(this.app.getResource(this.libraryId,"language-feature-layer-syncing"));this.getEditLog(function(c){h=-1;g=c;try{f.app.eventRegistry.event("FeatureLayerModuleSyncStartedEvent").publish(g),
f.app.trace.debug("Fetched the edit log from storage. Edit log has {0} entries.".format(g.entries.length)),b()}catch(d){j.push("An error occurred while syncing: {0}".format(d)),a()}},function(a){f.app.trace.error("Could not fetch offline edit log for synchronization: {0}".format(a))})}},_syncEditToServer:function(a,b,c,d){var e=this,f=null,g=b.mapServiceUrl,h=null;if(!this.dataCachingSpec||!this.dataCachingSpec.featureLayers)throw Error("Missing offline layer dataCachingSpec!");if(h=this.dataCachingSpec.featureLayers[g]){var j=
this.app.site.essentialsMap.findMapServiceById(h.serviceId);if(j)f=j.serviceLayer;else{d(Error("Could not find map service '{0}'.".format(h.serviceId)));return}}else{h=this.app.site.essentialsMap.mapServices;for(j=0;j<h.length;++j){var k=h[j];if(k.url===g){f=k.serviceLayer;break}}}switch(b.type){case "attachmentAddition":var l=b.feature.attributes.filename,o=b.feature.attributes.contentType;this.app.store.get(b.feature.attributes.key,function(j){e._syncAttachmentToServer(b.mapServiceUrl+"/"+b.feature.attributes.gcx_feature_objectId,
l,o,j,function(j){try{var h=dojo.fromJson(j.target.responseText);e._updateEditLogForNewFeature(a,b,f,function(){e.app.store.remove(b.feature.attributes.key,function(){c&&c(h.addAttachmentResult.objectId)},d)},d)}catch(k){d&&d(k)}})},function(a){d&&d(a)});return}var q=[],n=[],m=[],h=false,r=function(j){j.applyEdits(q,n,m,function(h,k){var f=null;if(k&&k.length>0)for(var g=0;g<k.length;++g){var l=k[g];if(!l.success){f=l.error;break}}if(h&&h.length>0)if(g=h[0],g.success){var f=g.objectId,o=g.GID,g=new esri.tasks.Query;
g.objectIds=[f];g.outFields=["*"];g.where="1=1";j.queryFeatures(g,function(h){!h||!h.features||!h.features.length?e.app.trace.error("Error updating synchronized feature: Could not requery saved feature."):(dojo.safeMixin(b.feature,h.features[0]),o&&!String.isNullOrEmpty(h.globalIdFieldName)&&(b.feature.attributes[h.globalIdFieldName]=o),e._updateEditLogForNewFeature(a,b,j,c,d))},function(a){b.error=a;e.app.trace.error("Error updating synchronized feature: {0}".format(a.toString()));d&&d(a)})}else f=
g.error||{message:"Editing operation was not successful"},d(f.message);else f?(f=f||{message:"Editing operation was not successful"},d(f.message)):c&&c()},function(a){d&&d(a)})};switch(b.type){case "addition":q.push(b.feature);break;case "update":n.push(b.feature);break;case "deletion":m.push(b.feature);break;case "relatedRecordAddition":case "relatedRecordUpdate":case "relatedRecordDeletion":b.type==="relatedRecordAddition"?q.push(b.feature):b.type==="relatedRecordUpdate"?n.push(b.feature):b.type===
"relatedRecordDeletion"&&m.push(b.feature);f||(f=new esri.layers.FeatureLayer(g,{mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"]}),f.loaded?r(f):(dojo.connect(f,"onLoad",dojo.hitch(this,function(){r(f)})),dojo.connect(f,"onError",dojo.hitch(this,function(){}))),h=true);break;default:throw Error("Cannot sync unknown edit type '{0}'".format(b.type));}h||r(f)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModule",geocortex.framework.application.ModuleBase,geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerModuleDecl);
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.FeatureLayerViewModel",geocortex.framework.ui.ViewModelBase,{featureLayers:null,showDetails:null,currentFeatureLayer:null,syncNeeded:null,showWhereClause:null,layerEditSummaries:null,isOffline:null,constructor:function(){this._registerCommands();this.currentFeatureLayer=new Observable(null);this.showDetails=new Observable(false);this.featureLayers=new ObservableCollection;this.showWhereClause=new Observable(false);this.layerEditSummaries=
this.app.featureLayerModule.layerEditSummaries;this.syncNeeded=new Observable(false);this.syncNeeded.sync(this.app.featureLayerModule.syncNeeded);this.isOffline=this.app.isOffline},initialize:function(a){this.inherited(arguments);a&&a.showWhereClause&&this.showWhereClause.set(a.showWhereClause)},_registerCommands:function(){this.app.commandRegistry.command("FeatureLayerModuleRefreshData").register(this,this._refreshData);this.app.eventRegistry.event("DomainStorageClearedEvent").subscribe(this,this._handleDomainStorageClearedEvent);
this.app.eventRegistry.event("ApplicationStorageClearedEvent").subscribe(this,this._handleApplicationStorageClearedEvent);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._refreshData)},_handleDomainStorageClearedEvent:function(){this._refreshData()},_handleApplicationStorageClearedEvent:function(){this._refreshData()},_refreshData:function(){if(this.app.site&&this.app.site.isInitialized&&this.app.featureLayerModule.dataCachingSpec.featureLayers){var a=this.app.site.getFeatureServices();
this.featureLayers.clear();for(var b=[],c=0;c<a.length;c++){var d=null,e=null;this.app.featureLayerModule.dataCachingSpec&&(d=this.app.featureLayerModule.dataCachingSpec.featureLayers[a[c].url],e=this.app.featureLayerModule.dataCachingSpec.featureLayersFuture[a[c].url]);var f=a[c].displayName;if(a[c]&&a[c].layers&&a[c].layers.length>0)f=a[c].layers[0].displayName;b.push({displayName:new Observable(f),mapServiceId:new Observable(a[c].id),isOffline:this.isOffline,hasCachedDataInfo:d!=null&&typeof d!=
"undefined",cachedDataInfo:new Observable(this._prepCachedDataInfo(d,a[c])),futureCachedDataInfo:new Observable(this._prepCachedDataInfo(e,a[c])),layer:a[c].serviceLayer})}this.featureLayers.addItems(b);if(this.currentFeatureLayer&&(a=this.currentFeatureLayer.get())){a=a.mapServiceId.get();for(b=0;b<this.featureLayers.getLength();b++)if(c=this.featureLayers.getAt(b),c.mapServiceId.get()==a){this.currentFeatureLayer.set(c);break}}}},_augmentInformation:function(a,b){a.count=new Observable(null);a.size=
new Observable(null);if(b&&b.relationships)for(var c in b.relationships)if(b.relationships.hasOwnProperty(c)&&b.relationships[c].id===a.relInfo.id){a.count=new Observable(b.relationships[c].count);a.size=new Observable(b.relationships[c].size);break}},_geometryToString:function(a){return!a||a.xmin===null||a.ymin===null||a.xmax===null||a.ymax===null?null:"{0}, {1}, {2}, {3}".format(a.xmin.toFixed(2),a.ymin.toFixed(2),a.xmax.toFixed(2),a.ymax.toFixed(2))},_prepCachedDataInfo:function(a,b){var c={};
c.relationships=new ObservableCollection;var d=false;if(b.hasOriginRelationships()&&b.serviceLayer.relationships)for(var e=0;e<b.serviceLayer.relationships.length;e++){var f=null;b&&b.layers&&b.layers.length>0&&(f=b._getRelation(b.serviceLayer.relationships[e].id));if(f&&f.visible&&b.serviceLayer.relationships[e].role==="esriRelRoleOrigin"){var d=true,g={};g.relInfo=b.serviceLayer.relationships[e];g.name=new Observable(f.displayName?f.displayName:b.serviceLayer.relationships[e].name);this._augmentInformation(g,
a);c.relationships.addItem(g)}}a?(c.hasRelatedTables=new Observable(d),c.isSet=new Observable(true),c.count=new Observable(a.count?a.count:0),c.size=new Observable(a.size?a.size:0),c.storedOn=new Observable(a.storedOn?a.storedOn:""),c.geometry=new Observable(a.geometry),c.whereClause=new Observable(a.whereClause),c.serviceUrl=new Observable(a.serviceUrl),c.serviceId=new Observable(a.serviceId)):(c.hasRelatedTables=new Observable(false),c.isSet=new Observable(false),c.count=new Observable(null),c.size=
new Observable(null),c.storedOn=new Observable(null),c.geometry=new Observable(null),c.whereClause=new Observable(""),c.serviceUrl=new Observable(b.url),c.serviceId=new Observable(b.id));c.showWhereClause=new Observable(this.showWhereClause.get());c.geometryString=new Observable(this._geometryToString(c.geometry.get()));return c}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.LayerEditSummary",null,{mapServiceUrl:null,displayName:null,numAdditions:null,numUpdates:null,numDeletions:null,additions:null,updates:null,deletions:null,totalEdits:null,constructor:function(a,b){this.mapServiceUrl=new Observable(a||null);this.displayName=new Observable(b||null);this.numAdditions=new Observable(0);this.numUpdates=new Observable(0);this.numDeletions=new Observable(0);this.additions=new ObservableCollection;
this.updates=new ObservableCollection;this.deletions=new ObservableCollection;this.totalEdits=new Observable(0)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageView",geocortex.framework.ui.ViewBase,{scrollElement:null,_scrollElementScrolls:null,constructor:function(){this._scrollElementScrolls=null},attach:function(a){this.inherited(arguments);this.title.set(a.title.get());var b=this;a.onContentChanged=function(){if(b._scrollElementScrolls===null)b._scrollElementScrolls=b.scrollElement&&b.scrollElement.currentStyle?b.isOverflow(b.scrollElement.currentStyle.overflowY):b.scrollElement&&
window.getComputedStyle?b.isOverflow(document.defaultView.getComputedStyle(b.scrollElement,null).overflowY):true;b._scrollElementScrolls?$(b.scrollElement).stop().animate({scrollTop:$(b.scrollElement)[0].scrollHeight},400):$("html,body").stop().animate({scrollTop:$(b.scrollElement)[0].scrollHeight},400)}},isOverflow:function(a){return a=="auto"||a=="scroll"},handleClose:function(){this.app.commandRegistry.command("HideFeatureLayerModalMessage").execute()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.featureLayer.ModalMessageViewModel",geocortex.framework.ui.ViewModelBase,{title:null,messages:null,summary:null,summaryClass:null,showCloseButton:null,onContentChanged:null,_traceEventToken:null,constructor:function(){this.title=new Observable;this.messages=new ObservableCollection;this.summary=new Observable;this.summaryClass=new Observable;this.showCloseButton=new Observable(false)},initialize:function(a){a&&a.message&&this.title.set(a.message)},
addMessage:function(a,b){var c="trace";if(b&&(b==="error"||b==="warning"))c=b;this.messages.addItem({message:a,cssClass:c});if(this.onContentChanged)this.onContentChanged()},setSummary:function(a,b){this.summary.set(a);this.summaryClass.set(b?"list-menu-icon check-24":"list-menu-icon error-24");if(this.onContentChanged)this.onContentChanged()},setEnableCloseButton:function(a){this.showCloseButton.set(a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Highlight.HighlightModule",geocortex.framework.application.ModuleBase,{app:null,_additionalLayers:null,_defaultHighlightLayerName:null,_isInitialized:false,constructor:function(a){this.app=a;this._defaultHighlightLayerName="defaultHighlightLayer"},initialize:function(a){a.borderColor&&this.app.highlightManager.setHighlightBorderColor(a.borderColor);a.fillColor&&this.app.highlightManager.setHighlightFillColor(a.fillColor);if(a.additionalLayers)this._additionalLayers=
a.additionalLayers;this.app.commandRegistry.command("CreateHighlightLayer").register(this,this._createHighlightLayer,this._canCreateHighlightLayer);this.app.commandRegistry.command("SetActiveHighlightLayer").register(this,this._setActiveHighlightLayer,this._canSetActiveHighlightLayer);this.app.commandRegistry.command("SetActiveHighlightLayerDefault").register(this,this._setActiveHighlightLayerDefault,this._canSetActiveHighlightLayerDefault);this.app.commandRegistry.command("HighlightEsriFeatureSet").register(this,
this._highlightEsriFeatureSet,this._canHighlightEsriFeatureSet);this.app.commandRegistry.command("SetHighlightBorderColor").register(this,this._setHighlightBorderColor);this.app.commandRegistry.command("SetHighlightFillColor").register(this,this._setHighlightFillColor);this.app.commandRegistry.command("RemoveHighlightLayer").register(this,this._removeHighlightLayer,this._canRemoveHighlightLayer);this.app.commandRegistry.command("ClearHighlights").register(this,this._clearHighlights,this._canClearHighlights);
this.app.commandRegistry.command("HighlightFeatureSet").register(this,this._highlightFeatureSet,this._canHighlightFeatureSet);this.app.commandRegistry.command("HighlightFeature").register(this,this._highlightFeature,this._canHighlightFeature);this.app.commandRegistry.command("HighlightFeatureDefault").register(this,this._highlightFeatureDefault,this._canHighlightFeatureDefault);this.app.commandRegistry.command("ClearDefaultHighlights").register(this,this._clearHighlightsDefault);this.app.commandRegistry.command("HighlightFeatureSetTestHarness").register(this,
function(a){a=this.app.featureSetManager.getCollectionById(a).featureSets;a.bind(this,function(a){if(a.type==="append")for(var b=a.rangeStart;b<a.rangeEnd+1;b++)this.app.commandRegistry.command("HighlightFeatureSet").execute(a.sender.getAt(b))});for(var c=0;c<a.length;c++)this.app.commandRegistry.command("HighlightFeatureSet").execute(a[c])});this.app.commandRegistry.command("HighlightFeatureTestHarness").register(this,function(a){var c=this.app.featureSetManager.getCollectionById(a);if(a=c.firstFeature())this.app.commandRegistry.command("HighlightFeature").execute(a);
else var d=c.featureSets.bind(this,function(){var a=c.firstFeature();a&&(c.featureSets.unbind(d),this.app.commandRegistry.command("HighlightFeature").execute(a))})});this._layersReady()?this._initializeDefaultHighlights():this.app.eventRegistry.event("SiteServiceLayersLoaded").subscribe(this,this._initializeDefaultHighlights)},_layersReady:function(){if(this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.mapServices){for(var a=this.app.site.essentialsMap.mapServices,b=0;b<a.length;b++)if(!a[b].serviceLayer.loaded)return false;
return true}return false},_initializeDefaultHighlights:function(){this.app.highlightManager._defaultHighlightLayerName=this._defaultHighlightLayerName;this.app.highlightManager.createHighlightLayer(this._defaultHighlightLayerName);if(this._additionalLayers)for(var a=0;a<this._additionalLayers.length;a++){var b=this._additionalLayers[a];this.app.highlightManager.createHighlightLayer(b.name,b.hasOwnProperty("fillColor")?b.fillColor:void 0,b.hasOwnProperty("borderColor")?b.borderColor:void 0)}this._setActiveHighlightLayerDefault();
this._isInitialized=true;b="CreateHighlightLayer,SetActiveHighlightLayer,SetActiveHighlightLayerDefault,HighlightEsriFeatureSet,RemoveHighlightLayer,ClearHighlights,HighlightFeatureSet,HighlightFeature".split(",");for(a=0;a<b.length;a++)this.app.commandRegistry.command(b[a]).raiseCanExecuteChanged()},_canCreateHighlightLayer:function(a){return this._isInitialized&&!this.app.highlightManager.getHighlightLayer(a)},_createHighlightLayer:function(a,b,c){this.app.highlightManager.createHighlightLayer(a,
b,c)},_canSetActiveHighlightLayer:function(a){return this._isInitialized&&!!this.app.highlightManager.getHighlightLayer(a)},_setActiveHighlightLayer:function(a){this.app.highlightManager.setActiveHighlightLayer(a)},_canSetActiveHighlightLayerDefault:function(){return this._isInitialized&&!!this.app.highlightManager.getHighlightLayer(this.app.highlightManager._defaultHighlightLayerName)},_setActiveHighlightLayerDefault:function(){this.app.highlightManager.setActiveHighlightLayer(this.app.highlightManager._defaultHighlightLayerName)},
_canHighlightEsriFeatureSet:function(a){return this._isInitialized&&a&&a.isInstanceOf&&a.isInstanceOf(esri.tasks.FeatureSet)?true:false},_highlightEsriFeatureSet:function(a){this.app.highlightManager.highlightEsriFeatureSet(a)},_setHighlightBorderColor:function(a){this.app.highlightManager.setHighlightBorderColor(a)},_setHighlightFillColor:function(a){this.app.highlightManager.setHighlightFillColor(a)},_canRemoveHighlightLayer:function(a){return this._isInitialized&&!!this.app.highlightManager.getHighlightLayer(a)},
_removeHighlightLayer:function(a){this.app.highlightManager.removeHighlightLayer(a)},_clearHighlights:function(){this.app.highlightManager.clearHighlights()},_canClearHighlights:function(){return this._isInitialized},_clearHighlightsDefault:function(){this.app.highlightManager.clearHighlights(this._defaultHighlightLayerName)},_canHighlightFeatureSet:function(a){return this._isInitialized&&a&&a.esriFeatureSet},_highlightFeatureSet:function(a){this.app.highlightManager.highlightFeatures(a.features.get())},
_featureInHighlights:function(a,b){if(a&&a.esriFeature&&a.esriFeature.get()&&a.esriFeature.get().geometry){var a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:a.esriFeature}),c=b.apply(this.app.highlightManager);if(c)for(var d=0;d<c.length;d++){var e=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:c[d]});if(a.equals(e))return false}return true}return false},_canHighlightFeature:function(a){return this._isInitialized&&this._featureInHighlights(a,
this.app.highlightManager.activeHighlightLayerGraphics)},_canDefaultHighlightFeature:function(a){return this._isInitialized&&this._featureInHighlights(a,this.app.highlightManager.defaultHighlightLayerGraphics)},_highlightFeature:function(a){var b=[];b.push(a);this.app.highlightManager.highlightFeatures(b)},_highlightFeatureDefault:function(a){var b=[];b.push(a);this._clearHighlightsDefault();this.app.highlightManager.highlightFeatures(b,this.app.highlightManager._defaultHighlightLayerName)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyModule",geocortex.framework.application.ModuleBase,{_fscRootID:"IdentifyResultsCollection",_count:0,_previousFscID:null,_mapTipCount:0,_previousMapTipFscID:null,_previousIdentifyFscID:null,_fscSourceName:"Identify",_fscDisplayName:"",_identifyTask:null,_pixelTolerance:5,_polygonPixelTolerance:2,_topMostLayerOnly:false,_returnGeometry:false,_artificialDelay:0,constructor:function(a,b){this.app.commandRegistry.command("Identify").register(this,
this.executeIdentifyTask);this._fscDisplayName=a.getResource(b,"language-identify-results-header")},initialize:function(a){this.inherited(arguments);if(a.pixelTolerance!=null)this._pixelTolerance=a.pixelTolerance;if(a.polygonPixelTolerance!=null)this._polygonPixelTolerance=a.polygonPixelTolerance;if(a.topMostLayerOnly!=null)this._topMostLayerOnly=a.topMostLayerOnly;if(a.returnGeometry!=null)this._returnGeometry=a.returnGeometry;if(a.artificialDelay!=null)this._artificialDelay=a.artificialDelay;if(a.resultsDisplayName)this._fscDisplayName=
a.resultsDisplayName;a&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true)},executeIdentifyTask:function(a){var b,c,d,e,f,g=null,h=null;if(a.hasOwnProperty("geometry")){b=a.geometry;c=a.source||this._fscSourceName;d=a.extent||null;e=a.width||null;f=a.height||null;if(typeof a.visibleLayersOnly=="boolean")g=a.visibleLayersOnly;if(typeof a.visibleMapServicesOnly=="boolean")h=a.visibleMapServicesOnly}else b=a,c=this._fscSourceName,f=e=d=null;var j=this;this._identifyTask!=
null&&this._identifyTask.cancel();this._previousFscID&&(this.app.featureSetManager.tryCloseCollection(this._previousFscID),c==="MapTip"?this._previousMapTipFscID&&this.app.featureSetManager.removeCollectionById(this._previousMapTipFscID):this._previousIdentifyFscID&&this.app.featureSetManager.removeCollectionById(this._previousIdentifyFscID));var k=new FeatureSetCollection;k.displayName.set(this._fscDisplayName);k.id=c==="MapTip"?c+this._mapTipCount++:this._fscRootID+this._count++;c==="MapTip"?this._previousMapTipFscID=
k.id:this._previousIdentifyFscID=k.id;this._previousFscID=k.id;k.sourceName=c;this.app.featureSetManager.addCollection(k);k.tag=b;c=null;if(a.delayFSCOpen){var l=k.id,o=false;c=function(){o||(o=true,j.app.featureSetManager.openCollection(l))}}else this.app.featureSetManager.openCollection(k.id);this._identifyTask=new geocortex.essentialsHtmlViewer.mapping.modules.identify.MapIdentifyTask(this.app.map,this.app);this._identifyTask.tag=k;this._identifyTask.pixelTolerance=this._pixelTolerance;this._identifyTask.polygonPixelTolerance=
this._polygonPixelTolerance;this._identifyTask.topMostLayerOnly=this._topMostLayerOnly;this._identifyTask.returnGeometry=this._returnGeometry;if(d)this._identifyTask.extent=d;if(e)this._identifyTask.width=e;if(f)this._identifyTask.height=f;if(g!==null)this._identifyTask.visibleLayersOnly=g;if(h!==null)this._identifyTask.visibleMapServicesOnly=h;if(a.layerRestriction)this._identifyTask.layerRestriction=a.layerRestriction;if(c)this._identifyTask.delayedFSCOpen=c;setTimeout(function(){j._identifyTask.execute(b,
function(a,b,c){j.identifyTaskProgress(a,b,c)},function(a){j.identifyTaskComplete(a)},function(a,b,c){j.identifyTaskError(a,b,c)})},this._artificialDelay)},identifyTaskProgress:function(a,b,c){geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.appendToFeatureSetCollection(b,a.tag,c,this.app)},identifyTaskComplete:function(a){this.app.featureSetManager.tryCloseCollection(a.tag.id)},identifyTaskError:function(a,b,c){this.app.featureSetManager.tryCloseCollection(a.tag.id);a=this.getResource("language-identify-error-message").format(b.message,
b.details);this.app.commandRegistry.command("Alert").execute(a);c&&this.app.trace.error("Error performing identify operation on service {0}. Message: {1}. Error details: {2}.".format(c.serviceLayer.url,b.message,b.details))}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils");dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils",null,{});
dojo.mixin(geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils,{getIdentifyLayerIds:function(a,b,c,d,e){var f=[];if(e===false||a.isVisible())for(var e=a.essentialsMap.site.essentialsMap.calculateScale(),g=0;g<a.layers.length;g++){var h=a.layers[g];if((h.isVisible()&&h.areAllAncestorsVisible()&&(h.identifiableAtAllScales||h.withinScaleRange(e))||d===false)&&b(h))(c==null||c.length==0||dojo.indexOf(c,h.featureType)>=0)&&f.push(h.id)}return f},getLayerDefinitions:function(a,b){var c=
[];if(a.serviceLayer.layerDefinitions)for(var d=0;d<a.serviceLayer.layerDefinitions.length;d++)if(a.serviceLayer.layerDefinitions[d])for(var e=0;e<b.length;e++)if(b[e]==d){c[d]=a.serviceLayer.layerDefinitions[d];break}return c},getIdentifyTaskUrl:function(a){if(!a||!a.serviceUrl)return null;if(!this._hasQueryCapability(a))return null;if(a instanceof geocortex.essentials.FeatureLayerService){var b=a.serviceUrl.substring(0,a.serviceUrl.lastIndexOf("/"));return b.replace(/FeatureServer$/i,"MapServer")}return a.mapServiceType==
geocortex.essentials.MapServiceType.DYNAMIC||a.mapServiceType==geocortex.essentials.MapServiceType.TILED?(b=a.serviceUrl,a.serviceToken&&(b+="?token="+encodeURIComponent(a.serviceToken)),b):null},_hasQueryCapability:function(a){if(!a&&!a.serviceLayer)return false;a=a.serviceLayer;return a.version<10?true:a.capabilities&&a.capabilities.indexOf("Query")>=0},appendToFeatureSetCollection:function(a,b,c,d){b==null&&(b=new FeatureSetCollection);for(var e={},f=0;f<a.length;f++){var g=a[f],h=e[g.layerId];
if(h==null){for(var j=c.findLayerById(g.layerId),h={},k=0;k<j.fields.length;k++){var l=j.fields[k];h[l.alias]=l}k=null;if(g.displayFieldName&&(h=h[g.displayFieldName])&&h.name)k=h.name;if(!k&&j.primaryKeyField&&j.primaryKeyField.name)k=j.primaryKeyField.name;h=new esri.tasks.FeatureSet({displayFieldName:k,features:[]});if(g.feature.geometry)h.geometryType=g.feature.geometry.type,h.spatialReference=g.feature.geometry.spatialReference;h=new FeatureSet({esriFeatureSet:h,layer:j});h.displayName.set(j.displayName);
e[g.layerId]=h}geocortex.essentialsHtmlViewer.mapping.infrastructure.GraphicUtils.sanitizeAttributeNames(g.feature,h.layer);h.esriFeatureSet.features.push(g.feature);g=new Feature({graphic:g.feature,layer:h.layer,resolveLayerFields:true});h.features.addItem(g)}for(var o in e)e.hasOwnProperty(o)&&(h=e[o],b.featureSets.addItem(h),h.resolveDataLinks(function(a){d.eventRegistry.event("FeatureChangedEvent").publish(a)}));return b}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.identify.MapIdentifyTask");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.identify.MapIdentifyTask",null,{_identifyTaskExecutedCount:0,_identifyTaskCompletedCount:0,_identifyTaskErrorCount:0,_taskExecutionComplete:false,_isCancelled:false,_pendingProgressQueue:null,app:null,map:null,tag:null,extent:null,width:null,height:null,topMostLayerOnly:false,returnGeometry:false,visibleLayersOnly:true,visibleMapServicesOnly:true,pixelTolerance:5,polygonPixelTolerance:2,allServicesInError:false,delayedFSCOpen:null,layerRestriction:null,
constructor:function(a,b){this.app=b||null;this.map=a;this._pendingProgressQueue=[]},_pointToExtent:function(a){var b=this.pixelTolerance*(this.map.extent.getWidth()/this.map.width);return new esri.geometry.Extent(a.x-b,a.y-b,a.x+b,a.y+b,this.map.spatialReference)},execute:function(a,b,c,d,e){var f=this.layerRestriction;f||(f=function(a){return a.identifiable});if(this.app&&!this.app.isOffline.get()&&a&&a.type=="polygon"&&geocortex.essentials.GeometryUtilities.isSelfIntersectingPolygon(a)&&!e){var g=
this;geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.simplifyPolygon(a,function(a){g.execute(a,b,c,d,true)},function(a){g.app.trace.warning("An error occurred while attempting to simplify the identify geometry. Make sure that your proxy is configured correctly.");d(g,a)},g.app)}else{this._identifyTaskErrorCount=this._identifyTaskCompletedCount=this._identifyTaskExecutedCount=0;this._pendingProgressQueue.length=0;this.allServicesInError=this._taskExecutionComplete=false;e=new esri.tasks.IdentifyParameters;
e.tolerance=this.pixelTolerance;e.returnGeometry=this.returnGeometry;e.layerOption=this.topMostLayerOnly?esri.tasks.IdentifyParameters.LAYER_OPTION_TOP:esri.tasks.IdentifyParameters.LAYER_OPTION_ALL;e.width=this.width||this.map.width;e.height=this.height||this.map.height;e.mapExtent=this.extent||this.map.extent;e.geometry=a;for(var g=this,h=0;h<this.app.site.essentialsMap.mapServices.length;h++){var j=this.app.site.essentialsMap.mapServices[h];if(j.serviceLayer&&j.serviceLayer instanceof esri.layers.FeatureLayer){if(e.layerIds=
geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyLayerIds(j,f,null,this.visibleLayersOnly,this.visibleMapServicesOnly),e.layerIds.length>0){this.delayedFSCOpen&&this.delayedFSCOpen();var k=new esri.tasks.Query,l=null,l=a.type==="point"?this._pointToExtent(a):this.app&&this.app.isOffline.get()===false?a:a.getExtent();k.geometry=l;k.outFields=["*"];g._identifyTaskExecutedCount++;var o=function(a,e){a.queryFeatures(k).then(dojo.hitch(e,function(a){if(!g._isCancelled){var d=
[];if(a&&a.features&&a.features.length>0)for(var h=0;h<a.features.length;h++){var j={};a.features[h]._graphicsLayer=e.serviceLayer;j.feature=a.features[h];j.displayFieldName=this.serviceLayer.displayField;j.layerId=this.serviceLayer.layerId;j.layerName=this.serviceLayer.name;d.push(j)}g._identifyTaskCompletedCount++;b(g,d,this);g._conditionallyInvokeCompleteCallback(g,c)}}),dojo.hitch(e,function(a){g._isCancelled||(g._identifyTaskCompletedCount++,g._identifyTaskErrorCount++,d(g,a,this),g._conditionallyInvokeCompleteCallback(g,
c))}))},q=j.serviceLayer;if(q.updating)var n=dojo.connect(q,"onUpdateEnd",dojo.hitch(j,function(){o(q,this);dojo.disconnect(n)}));else o(q,j)}}else if(l=geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyTaskUrl(j)){var m=dojo.clone(e);m.layerIds=geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyLayerIds(j,f,["Polygon"],this.visibleLayersOnly,this.visibleMapServicesOnly);m.tolerance=this.polygonPixelTolerance;var r=dojo.clone(e);r.layerIds=
geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getIdentifyLayerIds(j,f,["None","Point","Multipoint","Line"],this.visibleLayersOnly,this.visibleMapServicesOnly);var s=[m,r];this.delayedFSCOpen&&(m.layerIds.length>0||r.layerIds.length>0)&&this.delayedFSCOpen();for(m=0;m<s.length;m++)r=s[m],r.layerIds.length>0?(this._identifyTaskExecutedCount++,r.layerDefinitions=geocortex.essentialsHtmlViewer.mapping.modules.identify.IdentifyUtils.getLayerDefinitions(j,r.layerIds),(new esri.tasks.IdentifyTask(l)).execute(r,
dojo.hitch(j,function(a){g._isCancelled||(g._identifyTaskCompletedCount++,g._queueInvokeProgress.call(g,this,b,[g,a,this]),g._conditionallyInvokeCompleteCallback(g,c))}),dojo.hitch(j,function(a){g._isCancelled||(g._identifyTaskCompletedCount++,g._identifyTaskErrorCount++,g._queueInvokeProgress.call(g,this,b,[g,a,this]),g._conditionallyInvokeCompleteCallback(g,c))}))):(g._queueInvokeProgress.call(g,j,b,[g,[],j]),g._conditionallyInvokeCompleteCallback(g,c))}}this._taskExecutionComplete=true;this._conditionallyInvokeCompleteCallback(g,
c)}},_queueInvokeProgress:function(a,b,c){this._pendingProgressQueue[a.id]||(this._pendingProgressQueue[a.id]=[]);var d=this._pendingProgressQueue[a.id];d.push({func:b,args:c});if(d.length==2){b=d[0].args[1];if(b[0]&&b[0].feature){var e;if(b[0].feature.geometry)e=b[0].feature.geometry.type;else if(b[0].layerId)e=a.findLayerById(b[0].layerId).featureType;if(e=="polygon"||e=="Polygon")a=d[0],d[0]=d[1],d[1]=a}for(a=0;a<d.length;a++)d[a].func.apply(this,d[a].args)}},_conditionallyInvokeCompleteCallback:function(a,
b){if(a._taskExecutionComplete&&a._identifyTaskExecutedCount==a._identifyTaskCompletedCount)a.allServicesInError=a._identifyTaskExecutedCount==a._identifyTaskErrorCount,b(a)},cancel:function(){this._isCancelled=true}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Info.InfoModule",geocortex.framework.application.ModuleBase,{constructor:function(){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Info.InfoView",geocortex.framework.ui.ViewBase,{constructor:function(){this.inherited(arguments)},attach:function(a){this.inherited(arguments);if(this.viewModel.content.get()!==null)this._activateHomePanel();else var b=this.app.eventRegistry.event("HomePanelContentIntiailizedEvent").subscribe(this,function(){this._activateHomePanel();this.app.eventRegistry.event("HomePanelContentIntiailizedEvent").unsubscribe(b)})},_registerCommands:function(){this.app.commandRegistry.command("ActivateHomePanel").register(this,
function(){this.app.commandRegistry.command("ActivateView").execute(this.id)},function(){return this.viewModel.included.get()})},_activateHomePanel:function(){this.viewModel.included.get()&&this.title.set(this.viewModel.title.get());this._registerCommands()},resolveWidget:function(a,b){this.inherited(arguments);if(a==="GetHTMLContent"){var c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView;c.app=this.app;c.libraryId=this.libraryId;c.root=dojo.create("div");
c.root.className="content";var d=c.cleansedFormatForFormat(b).replace(/{{.+?}}|{.+?}/g,function(a){if(a.match(/{{.+?}}/g))return a.substring(1,a.length-1)});c.root.innerHTML=d;c.attach(b);return c}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Info.InfoViewModel",geocortex.framework.ui.ViewModelBase,{included:null,content:null,title:null,constructor:function(){this.inherited(arguments);this.content=new Observable(null);this.title=new Observable;this.included=new Observable(false)},initialize:function(a){this.inherited(arguments);a&&(a.hasOwnProperty("included")&&this.included.set(a.included),a.hasOwnProperty("title")&&this.title.set(a.title),a.hasOwnProperty("content")&&(this.content.set(unescape(a.content)),
this.app.eventRegistry.event("HomePanelContentIntiailizedEvent").publish()))}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.IWantToMenu.IWantToMenuButtonView",geocortex.framework.ui.ViewBase,{_menuIsActive:false,constructor:function(){dojo.connect(document.body,"onmousedown",this,this.mouseDownOrTouchStart);dojo.connect(document.body,"ontouchstart",this,this.mouseDownOrTouchStart);this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(a){if(a.id==="IWantToMenuView"&&this.root)dojo.removeClass(this.root,"wtm-inactive"),dojo.addClass(this.root,
"wtm-active"),this._menuIsActive=true});this.app.eventRegistry.event("ViewDeactivatedEvent").subscribe(this,function(a){if(a.id==="IWantToMenuView"&&this.root)dojo.removeClass(this.root,"wtm-active"),dojo.addClass(this.root,"wtm-inactive"),this._menuIsActive=false})},attach:function(a){this.inherited(arguments);a.menuTitle.sync(this.title)},mouseDownOrTouchStart:function(a){var b=this;if(this._menuIsActive){var c=false,d=this.app.viewManager.getViewById("IWantToMenuView");$(a.target).parents().each(function(){this==
b.root&&(c=true);d&&this==d.root&&(c=true)});c||b.app.commandRegistry.command("DeactivateView").execute("IWantToMenuView")}},handleButtonClick:function(){this.app.commandRegistry.command("ToggleView").execute("IWantToMenuView");return false}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.IWantToMenu.IWantToMenuItemViewModel",geocortex.framework.ui.ViewModelBase,{name:null,description:null,cssClass:null,iconUri:null,commandName:null,commandParameter:null,constructor:function(){this.name=new Observable("");this.description=new Observable("");this.cssClass=new Observable("menu-item disabled");this.iconUri=new Observable("");this.commandParameter=this.commandName=null},initialize:function(a){this.name.set(a.name);this.description.set(a.description);
this.iconUri.set(a.iconUri||"Resources/Images/Icons/arrow-right-24.png");this.commandName=a.command;this.commandParameter=a.commandParameter}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.IWantToMenu.IWantToMenuModule");dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.IWantToMenu.IWantToMenuModule",geocortex.framework.application.ModuleBase,{constructor:function(){},initialize:function(a){this.inherited(arguments);a&&a.menus&&this.app.menuRegistry.loadMenus(a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.IWantToMenu.IWantToMenuView",geocortex.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView,{_lastViewTilePressed:null,_lastState:false,constructor:function(){this.app.eventRegistry.event("ToolbarViewTilePressedEvent").subscribe(this,function(a){this._lastViewTilePressed=="IWantToMenuView"&&a==this._lastViewTilePressed&&this._lastState===this.isActive&&this.app.commandRegistry.command("DeactivateView").execute(this.id);this._lastState=
this.isActive;this._lastViewTilePressed=a})},activated:function(){this.inherited(arguments);this.app.commandRegistry.command("ClearActiveTool").execute()},deactivated:function(){this.inherited(arguments);this._lastState=false},handleMenuItemClick:function(a,b,c){this.app.commandRegistry.command("DeactivateView").execute(this.id);this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.IWantToMenu.IWantToMenuViewModel",geocortex.framework.ui.ViewModelBase,{menuItems:null,menuTitle:null,constructor:function(){this.menuItems=new ObservableCollection;this.menuTitle=new Observable("")}});__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(d){(function(e){var f=function(){return function(){}}();e.LegendItemViewModel=f;f=function(a){function e(){a.apply(this,arguments)}__extends(e,a);e.prototype.initialize=function(){b.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new d.legend.providers.ArcGISDynamicMapServiceLegendProvider(this.app,this.libraryId));b.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new d.legend.providers.FeatureLayerLegendProvider(this.app,
this.libraryId));b.infrastructure.legend.LegendItemProviderFactory.registerLegendItemProvider(new d.legend.providers.WMSLayerLegendProvider(this.app,this.libraryId))};return e}(a.framework.application.ModuleBase);e.LegendModule=f})(d.legend||(d.legend={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(b){(function(b){var c=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype.attach=function(b){a.prototype.attach.call(this,b)};b.prototype.handleSlideToggleClick=function(a,b,c){c.expanded.set(!c.expanded.get())};b.prototype.handleClickShowLayerList=function(){this.app.commandRegistry.command("ActivateView").execute("SimpleLayerListView")};return b}(a.framework.ui.ViewBase);b.LegendView=c})(b.legend||(b.legend={}))})(b.modules||
(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c};
(function(a){(function(b){(function(b){(function(d){(function(d){var f=function(a){function d(){a.apply(this,arguments);this._firstActivation=false}__extends(d,a);d.prototype.initialize=function(){this.rootNode=new b.infrastructure.legend.LegendItem(null);this._layerLegendItems={};this._layerItems=new ObservableCollection;this._topLevelItems=[];this.hasVisibleItems=new Observable(false);this.app.site&&this.app.site.isInitialized?this._handleInitializedSite(this.app.isOffline.get()):this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
dojo.hitch(this,function(){this._handleInitializedSite(this.app.isOffline.get())}));this.app.eventRegistry.event("MapExtentChangedEvent").subscribe(this,this._handleMapExtentChangedEvent);this.app.isOffline.bind(this,function(a){try{this._clear();this._handleInitializedSite(a);var b=this;setTimeout(function(){b._handleMapExtentChangedEvent()},100)}catch(c){this.app.trace.warning("Legend error while transitioning between online/offline modes: "+c)}})};d.prototype._clear=function(){dojo.disconnect(this._onLayerAddConnectHandle);
this._onLayerVisibilityChangeOnHandle.remove();dojo.unsubscribe(this._layerVisEventSubscribeHandle);this.rootNode.children.clear();this._layerLegendItems={};this._layerItems.clear();this._topLevelItems=[];this.hasVisibleItems.set(false)};d.prototype._handleInitializedSite=function(a){this._map=this.app.map;for(var b={},c=0;c<this._map.layerIds.length;++c){var d=this._map.getLayer(this._map.layerIds[c]);if(d){b[d.url]=d;try{this._handleLayerAddition(d,a)}catch(e){this.app.trace.warning("Error loading legend items for layer '{0}': {1}".format(d.url,
e.toString()))}}}var h=this;this._onLayerAddConnectHandle=dojo.connect(this._map,"onLayerAdd",function(c){h._onLayerVisibilityChangeOnHandle=c.on("visibility-change",dojo.hitch(h,h._handleMapExtentChangedEvent));if(!b[c.url])try{h._handleLayerAddition(c,a)}catch(d){h.app.trace.warning("Error loading legend items for layer '{0}': {1}".format(c.url,d.toString()))}});this._layerVisEventSubscribeHandle=dojo.subscribe("LayerVisibilityChange",dojo.hitch(this,this._handleMapExtentChangedEvent))};d.prototype._handleMapExtentChangedEvent=
function(){try{this._handleMapExtentChangedEventImpl()}catch(a){}};d.prototype._handleMapExtentChangedEventImpl=function(){for(var a=this.app.map.getScale(),b=0,c=false,d=0;d<this._topLevelItems.length;++d){var e=this._topLevelItems[d];b+=this._walkLegendTree(a,e);e.isVisible.get()&&(c=true)}c!==this.hasVisibleItems.get()&&this.hasVisibleItems.set(c)};d.prototype._isVisibleInTree=function(a){if(a&&!a.isVisible())return true;else if(a){if(a.parentLayerId==null)return false;if(a=a.mapService.findLayerById(a.parentLayerId))return this._isVisibleInTree(a)}return false};
d.prototype._walkLegendTree=function(a,b){if(b.essLayer&&this._isVisibleInTree(b.essLayer))return this._hideLegendItem(b),0;else if(!b.essLayer&&!b.esriLayer.visible)return this._hideLegendItem(b),0;for(var c=0,d=b.children.getLength()>0,e=0;e<b.children.getLength();++e)c+=this._walkLegendTree(a,b.children.getAt(e));var e=Number.POSITIVE_INFINITY,h=0,e=b.essLayer?b.essLayer.minScale:b.esriLayer.minScale,h=b.essLayer?b.esriLayer.maxScale:b.esriLayer.maxScale,f=false;e===0&&h===0?f=true:a>=h&&a<=e&&
(f=true);(f=f&&(b.essLayer?b.essLayer.isVisible():b.esriLayer.visible))?d&&c===0?this._hideLegendItem(b):this._showLegendItem(b):this._hideLegendItem(b);return!f||c===0&&b.children.getLength()>0?0:c+(d?0:1)};d.prototype._hideLegendItem=function(a){a.isVisible.get()===true&&a.isVisible.set(false)};d.prototype._showLegendItem=function(a){a.isVisible.get()===false&&a.isVisible.set(true)};d.prototype._handleLayerAddition=function(a,d){for(var e=b.infrastructure.legend.LegendItemProviderFactory.getProviders(),
h=0;h<e.length;++h){var f=e[h];if(!d||f.supportsOffline()){var g;try{g=f.provide(a)}catch(m){this.app.trace.warning("Error building legend: "+m);continue}if(g&&g.code!==b.infrastructure.legend.LegendItemProviderResponseCode.NotFound&&(g.code===b.infrastructure.legend.LegendItemProviderResponseCode.Show||g.code===b.infrastructure.legend.LegendItemProviderResponseCode.Pending))f=g.item,this._addTopLevelItem(f),this._layerItems.addItem(f)}}};d.prototype._addTopLevelItem=function(a){this.rootNode.children.addItem(a);
this._topLevelItems.push(a)};return d}(a.framework.ui.ViewModelBase);d.LegendViewModel=f})(d.legend||(d.legend={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(a){(function(b){(function(b){(function(d){(function(d){(function(d){var e=function(){function d(a,b){this.app=a;this.libraryId=b}d.prototype.supportsOffline=function(){return false};d.prototype.provide=function(d){if((d.declaredClass!=null?d.declaredClass:null)!=="esri.layers.ArcGISDynamicMapServiceLayer")return new b.infrastructure.legend.LegendItemProviderResponse(b.infrastructure.legend.LegendItemProviderResponseCode.NotFound,null);if(Number(d.version)<10.01)return new b.infrastructure.legend.LegendItemProviderResponse(b.infrastructure.legend.LegendItemProviderResponseCode.NotFound,
null);for(var e=this.app.site,h="",f,g=0;g<e.essentialsMap.mapServices.length;++g){var n=e.essentialsMap.mapServices[g];if(n.serviceLayer===d){f=n;break}}var e=d.url.replace("/MapServer","/MapServer/legend"),m=new b.infrastructure.legend.LegendItem(d);a.request({content:{f:"json"},url:e,load:dojo.hitch(this,function(a){this._handleLegendResponse(a,m,d,f)}),error:dojo.hitch(this,function(a){this._handleLegendError(m,a)}),callbackParamName:"CallBack"});n?h=n.displayName:(n=d.url.lastIndexOf("/"),n>
-1&&(h=d.url.substr(n)));m.label.set(h);m.templateType="group";return new b.infrastructure.legend.LegendItemProviderResponse(b.infrastructure.legend.LegendItemProviderResponseCode.Pending,m)};d.prototype._handleLegendResponse=function(a,b,c,d){this._populateItemForLayer(a,b,c,d)};d.prototype._findGcxLayerForEsriLayer=function(a,b){return a.findLayerById(b.layerId)};d.prototype._populateItemForLayer=function(a,d,e,h){if(a){d.isVisible.set(true);for(e=0;e<a.layers.length;++e){var f=a.layers[e],g=null;
if(h&&(g=this._findGcxLayerForEsriLayer(h,f))&&!g.includeInLegend)continue;var m=new b.infrastructure.legend.LegendItem(f);m.label.set(f.layerName);m.esriLayer=f;m.essLayer=g;for(var r=0;r<f.legend.length;++r){var s=f.legend[r],t=new b.infrastructure.legend.LegendItem(f),v="data:{0};base64,{1}".format(s.contentType,s.imageData);t.swatchElement="<img src='{0}' />".format(v);t.label.set(!s.label?f.layerName:s.label);t.sublayerId=f.layerId;t.essLayer=g;m.children.addItem(t)}if(m.children.getLength()===
1)f=m.children.getAt(0),f.templateType="single-item",d.children.addItem(f);else if(m.children.getLength()>1)m.templateType="group",d.children.addItem(m)}if(d.children.getLength()>0)d.templateType="group"}else this.app.trace.warning("Could not fetch legend entry for '{0}'".format(e.url))};d.prototype._handleLegendError=function(a,b){this.app.trace.warning("Error fetching legend information: "+b.toString());a.isVisible.set(false)};return d}();d.ArcGISDynamicMapServiceLegendProvider=e})(d.providers||
(d.providers={}))})(d.legend||(d.legend={}))})(b.modules||(b.modules={}))})(b.mapping||(b.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(a){(function(a){(function(a){(function(b){(function(b){(function(b){var d=function(){function b(a,c){this.app=a;this.libraryId=c;this.mapServiceLegends={}}b.prototype.supportsOffline=function(){return true};b.prototype.provide=function(b){if((b.declaredClass!=null?b.declaredClass:null)!=="esri.layers.FeatureLayer")return new a.infrastructure.legend.LegendItemProviderResponse(a.infrastructure.legend.LegendItemProviderResponseCode.NotFound,null);for(var d=new a.infrastructure.legend.LegendItem(b),
e=this.app.site.getFeatureServices(),h=0;h<e.length;++h){var f=e[h];if(f.serviceLayer===b)break}if(f){d.label.set(f.displayName);for(h=0;h<f.layers.length;++h){var g=f.layers[h];g.includeInLegend&&this._populateItemForLayer(d,g,b,null)}}else d.label.set(b.name),this._populateItemForLayer(d,g,b,null);return new a.infrastructure.legend.LegendItemProviderResponse(a.infrastructure.legend.LegendItemProviderResponseCode.Show,d)};b.prototype._buildLegendItemForTemplate=function(b,d,e){var h;h=new a.infrastructure.legend.LegendItem(d);
h.essLayer=b;h.label.set(e.name);if(d.renderer&&(b=this._getTemplateSymbol(e,d.renderer)))switch(b.type){case "picturemarkersymbol":h.swatchElement="<img src='{0}' />".format(b.url);break;default:h.swatchElement="<div class='simple-swatch square' style='background-color: {0}'></div>".format(b.color.toCss())}return h};b.prototype._getTemplateSymbol=function(a,b){var c=new esri.Graphic(null);c.attributes={};a.prototype.attributes&&dojo.mixin(c.attributes,a.prototype.attributes);return b.getSymbol(c)||
b.defaultSymbol};b.prototype._populateItemForLayer=function(a,b,c){var d=[];a.esriLayer=c;a.essLayer=b;if(c.templates&&c.templates.length>0)for(var e=0;e<c.templates.length;++e)d.push(this._buildLegendItemForTemplate(b,c,c.templates[e]));else if(c.types&&c.types.length>0)for(e=0;e<c.types.length;++e){var h=c.types[e];if(h.templates)for(var f=0;f<h.templates.length;++f)d.push(this._buildLegendItemForTemplate(b,c,h.templates[f]))}a.children.addItems(d);if(a.children.getLength()>0)a.templateType="group"};
b.prototype._handleLegendError=function(a,b){this.app.trace.warning("Error fetching legend information: "+b.toString())};return b}();b.FeatureLayerLegendProvider=d})(b.providers||(b.providers={}))})(b.legend||(b.legend={}))})(a.modules||(a.modules={}))})(a.mapping||(a.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));
(function(a){(function(a){(function(a){(function(b){(function(b){(function(b){var d=function(){function b(a,c){this.app=a;this.libraryId=c}b.prototype.supportsOffline=function(){return false};b.prototype.provide=function(b){if((b.declaredClass!=null?b.declaredClass:null)!=="esri.layers.WMSLayer")return new a.infrastructure.legend.LegendItemProviderResponse(a.infrastructure.legend.LegendItemProviderResponseCode.NotFound,null);for(var d=new a.infrastructure.legend.LegendItem(b),e=this.app.site,h="",
f=0;f<e.essentialsMap.mapServices.length;++f){var g=e.essentialsMap.mapServices[f];if(g.serviceLayer===b)break}if(g){h=g.displayName;e=[];for(f=0;f<g.layers.length;++f){var m=g.layers[f];if(m.includeInLegend&&m.legendUrl){var r=new a.infrastructure.legend.LegendItem(b);r.essLayer=m;r.label.set(m.displayName);r.swatchElement="<img src='{0}' />".format(m.legendUrl);e.push(r)}}d.children.addItems(e)}else return null;d.label.set(h);if(d.children.getLength()>0)d.templateType="group";return new a.infrastructure.legend.LegendItemProviderResponse(a.infrastructure.legend.LegendItemProviderResponseCode.Show,
d)};return b}();b.WMSLayerLegendProvider=d})(b.providers||(b.providers={}))})(b.legend||(b.legend={}))})(a.modules||(a.modules={}))})(a.mapping||(a.mapping={}))})(a.essentialsHtmlViewer||(a.essentialsHtmlViewer={}))})(geocortex||(geocortex={}));dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.log.LogModule",geocortex.framework.application.ModuleBase,{initialize:function(a){this.inherited(arguments)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.log.LogStatusView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.log.LogStatusView",geocortex.framework.ui.ViewBase,{handleClick:function(){this.app.commandRegistry.command("ToggleLogView").execute()}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.log.LogView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.log.LogView",geocortex.framework.ui.ViewBase,{isActive:false,constructor:function(){this.app.commandRegistry.command("ToggleLogView").register(this,function(){this.isActive?this.app.commandRegistry.command("DeactivateView").execute(this.id):this.app.commandRegistry.command("ActivateView").execute(this.id)})},activated:function(){this.inherited(arguments)},deactivated:function(){this.inherited(arguments)},handleClickClear:function(){this.viewModel.logEntries.clear();
this._deactivateView()},handleClickHide:function(){this._deactivateView()},_deactivateView:function(){this.app.commandRegistry.command("DeactivateView").execute(this.id);this.app.eventRegistry.event("ToolbarViewTilePressedEvent").publish("IWantToMenuView")}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.log.LogViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.log.LogViewModel",geocortex.framework.ui.ViewModelBase,{logEntries:null,isVisible:null,logToConsole:true,initialize:function(a){this.logEntries=new ObservableCollection;this.isVisible=new Observable(false);this.logToConsole=a.logToConsole||true;var b=this;this.app.eventRegistry.event("TraceEvent").subscribe(this,function(a){function d(a,b,c){c==null&&(c=true);var a=a.toString(),d="";if(b>a.length)for(var e=0;e<b-a.length;e++)d+="0";return c?
d.toString()+a:a+d.toString()}var e="{0}:{1}:{2}.{3}".format(d((new Date).getHours(),2),d((new Date).getMinutes(),2),d((new Date).getSeconds(),2),d((new Date).getMilliseconds(),3));a.timestamp=e;a.cssClass="trace "+a.level;b.logEntries.addItem(a);this.logToConsole&&console.log("[{0}]: {1}: {2}".format(a.level,a.timestamp,a.message))});this.app.trace.info("Version {0}. {1}".format(geocortex.essentialsHtmlViewer.version,this.app.locale))}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.map.MapHostView",geocortex.framework.ui.ViewBase,{attach:function(){this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,this._activateMapHost);this.app.eventRegistry.event("ViewDeactivatedEvent").subscribe(this,this._deactivateMapHost)},_activateMapHost:function(a){a.id=="MapView"&&(this.app.commandRegistry.command("ActivateView").execute(this.id),this.app.commandRegistry.command("MapResize").execute())},_deactivateMapHost:function(a){a.id==
"MapView"&&this.app.commandRegistry.command("DeactivateView").execute(this.id)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.map.MapModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.map.MapModule",geocortex.framework.application.ModuleBase,{_subscribedToMapEvents:false,_config:null,_isAndroid3plus:false,_shownProjectError:null,_showMapOnZoom:true,_showMapOnPan:true,constructor:function(){this.registerCommands();this._shownProjectError=false;this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,this._handleSiteInitialized);this.app.eventRegistry.event("LayerUpdateStartedEvent").subscribe(this,this._handleLayerUpdateStart);
this.app.eventRegistry.event("LayerUpdateEndedEvent").subscribe(this,this._handleLayerUpdateEnd);this.app.eventRegistry.event("LayerAddedEvent").subscribe(this,this._handleLayerAdded);this.app.eventRegistry.event("LayerRemovedEvent").subscribe(this,this._handleLayerRemoved);this._isAndroid3plus=navigator.userAgent.indexOf("Android 3")>-1||navigator.userAgent.indexOf("Android 4")>-1},initialize:function(a){a||(a={});if(!a.hasOwnProperty("showLoadingStatus"))a.showLoadingStatus=true;if(!a.hasOwnProperty("loadingMessageTiming")||
!a.loadingMessageTiming.length)a.loadingMessageTiming=[1E3,3E3,3E3];if(!a.hasOwnProperty("defaultPointFeatureZoomScales")||!a.defaultPointFeatureZoomScales.length)a.defaultPointFeatureZoomScales=[];if(a&&a.hasOwnProperty("panDuration")){var b=parseInt(a.panDuration);if(!isNaN(b))esri.config.defaults.map.panDuration=b}if(a&&a.hasOwnProperty("panRate")&&(b=parseInt(a.panRate),!isNaN(b)))esri.config.defaults.map.panRate=b;if(a&&a.hasOwnProperty("zoomDuration")&&(b=parseInt(a.zoomDuration),!isNaN(b)))esri.config.defaults.map.zoomDuration=
b;if(a&&a.hasOwnProperty("zoomRate")&&(b=parseInt(a.zoomRate),!isNaN(b)))esri.config.defaults.map.zoomRate=b;a&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);if(a&&a.hasOwnProperty("showMapOnZoom"))this._showMapOnZoom=a.showMapOnZoom;if(a&&a.hasOwnProperty("showMapOnPan"))this._showMapOnPan=a.showMapOnPan;this._config=a;this.app.eventRegistry.event("MapLoadedEvent").subscribe(this,this.subscribeToMapEvents)},registerCommands:function(){this.app.commandRegistry.command("ZoomToLayerVisibleScale").register(this,
this._executeZoomToVisibleScale);this.app.commandRegistry.command("ZoomToLayerExtent").register(this,this._executeZoomToLayerExtent);this.app.commandRegistry.command("PanToFeature",Object).register(this,this._executePanToFeature,function(a){return a&&a.esriFeature&&a.esriFeature.get()&&a.esriFeature.get().geometry});this.app.commandRegistry.command("PanToPoint").register(this,this._executePanToPoint);this.app.commandRegistry.command("Project").register(this,this._executeProject);this.app.commandRegistry.command("RecenterMapOnNextMapResize").register(this,
this._executeRecenterMapOnNextMapResize);this.app.commandRegistry.command("ZoomOutToExtent").register(this,this._executeZoomOutToExtent);this.app.commandRegistry.command("ZoomToFeatures").register(this,this._executeZoomToFeatures);this.app.commandRegistry.command("ZoomToAllFeatures").register(this,this._executeZoomAllToFeatures);this.app.commandRegistry.command("ZoomToExtent").register(this,this._executeZoomToExtent);this.app.commandRegistry.command("ZoomToFeature").register(this,this._executeZoomToFeature,
function(a){if(a&&a.esriFeature&&a.esriFeature.get()&&a.esriFeature.get().geometry)if(this.app.isOffline.get()){var b=this.app.map.spatialReference,a=a.esriFeature.get().geometry.spatialReference;return b.equals(a)||b.isWebMercator()&&a.wkid===4326||a.isWebMercator()&&b.wkid===4326}else return true;return false});this.app.commandRegistry.command("ZoomToScale").register(this,this._executeZoomToScale);this.app.commandRegistry.command("PanUp").register(this,this._executePanUp);this.app.commandRegistry.command("PanDown").register(this,
this._executePanDown);this.app.commandRegistry.command("PanLeft").register(this,this._executePanLeft);this.app.commandRegistry.command("PanRight").register(this,this._executePanRight)},_executeRecenterMapOnNextMapResize:function(){if(this.app.map&&this.app.map.extent)var a=this,b=this.app.map.extent.getCenter(),c=dojo.connect(this.app.map,"onResize",function(){dojo.disconnect(c);dojo.disconnect(d);dojo.disconnect(e);dojo.disconnect(f);b&&setTimeout(function(){var c=esri.config.defaults.map.panDuration;
a.app.site.essentialsMap.extentManager.centerAtWithPriority(b,4);esri.config.defaults.map.panDuration=c},0)}),d=dojo.connect(this.app.map,"onExtentChange",function(a){b=a.getCenter()}),e=dojo.connect(this.app.map,"onPanStart",function(){b=null}),f=dojo.connect(this.app.map,"onPanEnd",function(a){b=a.getCenter()})},_executeZoomOutToExtent:function(a){var b=this,c=function(a){var c=null;if(a&&a.length>0){c=a[0];b.app.commandRegistry.command("ShowMap").execute();var f=2,a=2;c.getWidth()>0&&(f=b.app.map.extent.getWidth()/
c.getWidth());c.getHeight()>0&&(a=b.app.map.extent.getHeight()/c.getHeight());f*=b.app.map.extent.getWidth();a*=b.app.map.extent.getHeight();c=new esri.geometry.Extent(c.getCenter().x-f/2,c.getCenter().y-a/2,c.getCenter().x+f/2,c.getCenter().y+a/2,c.spatialReference);b.app.site.essentialsMap.extentManager.setExtentWithPriority(c,5)}};if(a&&a.isInstanceOf(esri.geometry.Extent))!a.spatialReference&&this.app.map.spatialReference?(a.spatialReference=this.app.map.spatialReference,c([a])):(a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([a],
c,function(a){b.app.trace.warning("ZoomOutToExtent: "+a.message)}),this.app.commandRegistry.command("Project").execute(a))},_executeZoomToExtent:function(a){geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,a,10,void 0,this._showMapOnZoom)},_executePanToPoint:function(a){geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.panToPointWithPriority(this.app,a,9,void 0,this._showMapOnPan)},_executeProject:function(a){var b=this;if(a&&a instanceof
geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs)if(a.geometries.length>0&&!geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.needsProjection(a.geometries[0],this.app))callback=a.callback,c=a.errback,!a.callback||!dojo.isFunction(callback)?c&&dojo.isFunction(c)&&c(Error("callback function required.")):callback(a.geometries);else{var c=function(c){if(b.app.isOffline.get()){if(!b._shownProjectError)b._shownProjectError=true,b.app.commandRegistry.command("Alert").execute(b.app.getResource(b.libraryId,
"language-map-operation-unavailable-offline"))}else b.app.commandRegistry.command("Alert").execute(b.app.getResource(b.libraryId,"language-map-operation-project-failed"));b.app.trace.warning(c);a.errback&&a.errback(c)},d;d=esri.tasks.ProjectParameters!==void 0?new esri.tasks.ProjectParameters:{};d.geometries=a.geometries;d.outSR=a.outputSpatialReference?a.outputSpatialReference:this.app.map.spatialReference;d.transformation=a.transformation;geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.project(d,
a.callback,c,this.app)}},_executeZoomToVisibleScale:function(a){if(a){var b=1,c=null,d=this.app.map,e=this;if(this.app.site.essentialsMap){var f=this.app.site.essentialsMap.calculateScale();if(f&&!(f<=0)){if(a.withinScaleRange(f))c=null;else if(f<a.maxScale)c=a.maxScale+1;else if(f>a.minScale)c=a.minScale;c&&(b=c/f);if(b===1)this.app.commandRegistry.command("ShowMap").execute();else{c=a.fullExtent;if(!c)if(a.mapService&&a.mapService.serviceLayer)c=a.mapService.serviceLayer.fullExtent;else return;
a=c.getCenter();a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([a],function(a){var c=null;a&&a.length>0&&(c=a[0]);c&&geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(e.app,d.extent.centerAt(c).expand(b),8,void 0,e._showMapOnZoom)});this.app.commandRegistry.command("Project").execute(a)}}}}},_executeZoomToLayerExtent:function(a){a&&a.fullExtent&&geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,
a.fullExtent,8,void 0,this._showMapOnZoom)},_executePanToFeature:function(a){!a||!(a instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature)?this.app.trace.error("Error PanToFeature: not a feature."):(a=a.esriFeature.get())&&a.geometry?this.app.commandRegistry.command("PanToPoint").execute(a.geometry):this.app.trace.warning("Error PanToFeature: No geometry.")},_executeZoomToFeatures:function(a){a&&a instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSet&&this._executeZoomAllToFeatures(a.features.getItems())},
_executeZoomAllToFeatures:function(a){if(a&&dojo.isArray(a))if(a.length==1)this._executeZoomToFeature(a[0]);else{for(var b=null,c=0;c<a.length;c++){var d=a[c];if(d&&d instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature&&(d=d.esriFeature.get())&&d.geometry)d=geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.getExtent(d.geometry),b=b==null?d:b.union(d)}b&&(b.getWidth()==0&&b.getHeight()==0?geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.panToPointWithPriority(this.app,
b.getCenter(),8,void 0,this._showMapOnPan):(b=b.expand(1.5),geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,b,8,void 0,this._showMapOnZoom)))}},_executeZoomToFeature:function(a){var b=this;if(!a||!(a instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature))this.app.trace.error("Error ZoomToFeature: No feature provided.");else if(!this.app||!this.app.map)this.app.trace.error("Error ZoomToFeature: No access to the Esri map.");else if(a.zoomExtent.get())geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,
a.zoomExtent.get(),8,void 0,this._showMapOnZoom);else if(a.esriFeature.get()&&a.esriFeature.get().geometry){var c=a.esriFeature.get().geometry,d=a.zoomScale.get();if(d)var e=null,e=c.type=="point"?c:c.getExtent().getCenter(),c=esri.geometry.getScale(this.app.map.extent,this.app.map.width,this.app.map.spatialReference.wkid),f=d/c,c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([e],function(a){var c=null;a&&a.length>0&&(c=a[0]);c&&geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(b.app,
b.app.map.extent.centerAt(c).expand(f),8,void 0,b._showMapOnZoom)});else c.type=="point"?c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([c],function(c){var d=null;c&&c.length>0&&(d=c[0]);d&&(c=b.app.map.extent.centerAt(d),d=b._pickDefaultZoomScaleForPointFeature(a),isNaN(d)&&(d=esri.geometry.getScale(c,b.app.map.width,b.app.map.spatialReference.wkid)),c=esri.geometry.getExtentForScale(b.app.map,a.calculateScaleToMakeVisible(d)).centerAt(c.getCenter()),geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(b.app,
c,8,void 0,b._showMapOnZoom))}):((d=a.zoomFactor.get())||(d=1.5),c=c.getExtent().expand(d),c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.ProjectArgs([c],function(c){var d=null;c&&c.length>0&&(d=c[0]);d&&(c=esri.geometry.getScale(d,b.app.map.width,b.app.map.spatialReference.wkid),!a.withinScaleRange(c)&&a.minScale.get()&&(d=esri.geometry.getExtentForScale(b.app.map,a.minScale.get()).centerAt(d.getCenter())),geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(b.app,
d,8,void 0,b._showMapOnZoom))}));this.app.commandRegistry.command("Project").execute(c)}else this.app.trace.warning("Error ZoomToFeature: No geometry.")},_executeZoomToScale:function(a){a&&this.app&&this.app.site&&this.app.site.essentialsMap&&this.app.site.essentialsMap.extentManager.setScaleWithPriority(a,6)},_executePanUp:function(){this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panUp()},6)},_executePanDown:function(){this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panDown()},
6)},_executePanLeft:function(){this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panLeft()},6)},_executePanRight:function(){this.app.site.essentialsMap.extentManager.changeExtentWithPriority(function(a){return a.panRight()},6)},_pickDefaultZoomScaleForPointFeature:function(a){if(a=a.layer)for(var b=0;b<this._config.defaultPointFeatureZoomScales.length;b++){var c=this._config.defaultPointFeatureZoomScales[b];if(a.withinScaleRange(c))return c}else if(this._config.defaultPointFeatureZoomScales.length>
0)return this._config.defaultPointFeatureZoomScales[0];return NaN},_pointToExtent:function(a){var b=5*(this.app.map.extent.getWidth()/this.app.map.width);return new esri.geometry.Extent(a.x-b,a.y-b,a.x+b,a.y+b,this.app.map.spatialReference)},_lastClickTime:0,_lastClickScreenPoint:null,_firstClickTimer:null,subscribeToMapEvents:function(){if(this._config.onClick){var a=this,b=dojo.hitch(this,function(b){if(a._config.onClick){var c=(new Date).getTime();a._isAndroid3plus?c-a._lastClickTime<=300&&a._lastClickScreenPoint&&
Math.abs(a._lastClickScreenPoint.x-b.screenPoint.x)<50&&Math.abs(a._lastClickScreenPoint.y-b.screenPoint.y)<50?clearTimeout(a._firstClickTimer):a._firstClickTimer=setTimeout(function(){a._fireOnClickCommands(b.mapPoint)},300):a._fireOnClickCommands(b.mapPoint);a._lastClickTime=c;a._lastClickScreenPoint=b.screenPoint}}),c=[dojo.connect(a.app.map,"onClick",b)],d=esri.toolbars.Draw.prototype.activate;esri.toolbars.Draw.prototype.activate=function(){if(!this.__attached_isActive)d.apply(this,arguments),
this.__attached_isActive=true,dojo.forEach(c,dojo.disconnect),c=[]};var e=esri.toolbars.Draw.prototype.deactivate;esri.toolbars.Draw.prototype.deactivate=function(){if(this.__attached_isActive)dojo.forEach(c,dojo.disconnect),c=[],c.push(dojo.connect(a.app.map,"onClick",b)),e.apply(this,arguments),this.__attached_isActive=false};if(typeof esri.toolbars.Edit!=="undefined"){var f=esri.toolbars.Edit.prototype.activate;esri.toolbars.Edit.prototype.activate=function(){if(!this.__attached_isActive)f.apply(this,
arguments),this.__attached_isActive=true,dojo.forEach(c,dojo.disconnect),c=[]};var g=esri.toolbars.Edit.prototype.deactivate;esri.toolbars.Edit.prototype.deactivate=function(){if(this.__attached_isActive)dojo.forEach(c,dojo.disconnect),c=[],c.push(dojo.connect(a.app.map,"onClick",b)),g.apply(this,arguments),this.__attached_isActive=false}}}},_fireOnClickCommands:function(a){if(this._config&&this._config.onClick){var b=this._config.onClick;if(typeof b==="string")this.app.commandRegistry.command(b).execute(a);
else if(typeof b==="object")for(var c=0;c<b.length;c++)this.app.commandRegistry.command(b[c]).execute(a)}},_onGeoRssLayerLoaded:function(a){a&&a.esriLayer&&dojo.connect(a.esriLayer,"onClick",this,function(a){dojo.stopEvent(a);var c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature({graphic:a.graphic,allowUnsafeContent:this.app.configuration.allowUnsafeContent}),d=a.graphic.attributes;c.descriptionFormat.set("{content}");var e=c.description.get();String.isNullOrEmpty(e)&&(e=d.content);
c.labelFormat.set("{title}");c=c.label.get();String.isNullOrEmpty(c)&&(c=d.title);a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.ShowMapElementArgs("MapTipResultsCallout",a.mapPoint,e,c);this.app.commandRegistry.command("ShowMapCallout").execute(a)})},_handleSiteInitialized:function(a){if(!a||!a.isInitialized)this.app.trace.error("Error processing MapModule._handleSiteInitialized. - site was not initialized.");else{if(this.app&&this.app.urlParameters){if(this.app.urlParameters.extent)if(a=
this.app.urlParameters.extent.split(","),a.length>=4){var b=new esri.geometry.Extent(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));if(a.length>=5&&!isNaN(parseInt(a[4])))b.spatialReference=new esri.SpatialReference(parseInt(a[4]));else if(this.app.map&&this.app.map.spatialReference)b.spatialReference=this.app.map.spatialReference;geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.zoomToExtentWithPriority(this.app,b,7,void 0,this._showMapOnZoom)}else this.app.trace.warning("Unable to parse the extent parameter '{0}': expected four comma separated values.".format(this.app.urlParameters.extent));
this.app.urlParameters.scale&&((a=Number(this.app.urlParameters.scale))?this.app.commandRegistry.command("ZoomToScale").execute(a):this.app.trace.warning("Unable to parse the scale parameter '{0}': expected a single number value.".format(this.app.urlParameters.scale)))}dojo.subscribe("geoRssLayerLoaded",this,"_onGeoRssLayerLoaded")}},_handleLayerUpdateStart:function(a,b){if(b){b.attached_isLoading=true;if(!b.attached_timers)b.attached_timers=[];var c=setTimeout(dojo.hitch(this,function(){if(!(this._config.loadingMessageTiming.length<
1)&&this._config.showLoadingStatus&&b.attached_isLoading){var c=this.app.getResource(this.libraryId,"language-map-loading-stage1").format(b.displayName),e=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(c);e.id=a.id+"LoadingStatus";e.showBusyIcon=true;this.app.commandRegistry.command("AddStatus").execute(e);this._config.loadingMessageTiming.length<2||(c=setTimeout(dojo.hitch(this,function(){if(b.attached_isLoading){var a=this.app.viewManager.getViewById(e.id);a&&
a.viewModel&&a.viewModel.text.set(this.app.getResource(this.libraryId,"language-map-loading-stage2").format(b.displayName));this._config.loadingMessageTiming.length<3||(a=setTimeout(dojo.hitch(this,function(){if(b.attached_isLoading){var a=this.app.viewManager.getViewById(e.id);a&&a.viewModel&&a.viewModel.text.set(this.app.getResource(this.libraryId,"language-map-loading-stage3").format(b.displayName))}}),this._config.loadingMessageTiming[2]),b.attached_timers.push(a))}}),this._config.loadingMessageTiming[1]),
b.attached_timers.push(c))}}),this._config.loadingMessageTiming[0]);b.attached_timers.push(c)}},_handleLayerUpdateEnd:function(a,b){if(b){if(b.attached_timers){for(var c=0;c<b.attached_timers.length;c++)clearTimeout(b.attached_timers[c]);b.attached_timers.length=0}b.attached_isLoading=false;c=a.id+"LoadingStatus";this.app.commandRegistry.command("RemoveStatus").execute(c)}},_handleLayerAdded:function(){},_handleLayerRemoved:function(a){a=a.id+"LoadingStatus";this.app.commandRegistry.command("RemoveStatus").execute(a)}});
dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.map.MapView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.map.MapView",geocortex.framework.ui.ViewBase,{active:null,resizeTimer:null,firstResize:false,initialized:false,extentEpoch:null,extentBroadcastFrequency:null,_startupExtent:null,constructor:function(a){this.inherited(arguments);this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,this._handleConnectivityChange);this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this._handleConnectivityChange)},removed:function(){this.app.map!=
null&&this.app.map.destroy()},activated:function(){this.inherited(arguments);this.initialized||this.initialize();this.active=true;this.resize()},deactivated:function(){this.inherited(arguments);this.active=false;clearTimeout(this.resizeTimer)},attach:function(a){this.inherited(arguments);this.viewModel&&(this.initialized||this.initialize())},_handleConnectivityChange:function(){if(this.app.map&&this.app.site){var a=this.mapDiv;if(a){dojo.style(a,"display","none");var b=esri.config.defaults.map.zoomDuration,
c=esri.config.defaults.map.panDuration;esri.config.defaults.map.zoomDuration=0;esri.config.defaults.map.panDuration=0;this.app.commandRegistry.command("StepZoomOut").execute();var d=this;setTimeout(function(){d.app.commandRegistry.command("StepZoomIn").execute();dojo.style(a,"display","block");esri.config.defaults.map.zoomDuration=b;esri.config.defaults.map.panDuration=c},10)}}},resize:function(){var a=this.app.map,b=this.mapDiv;if(a!=null&&a.extent!=null){if(this.resizeTimer)clearTimeout(this.resizeTimer),
this.resizeTimer=null;var c=this;this.resizeTimer=setTimeout(function(){try{if(b){var d=dojo.coords(b);if(c.isActive===true&&d.w>2&&d.h>2&&a.width&&a.height&&(a.resizeDelay=0,c.app.site.essentialsMap.extentManager.blockForResize(d.w,d.h,false),c.app.site.essentialsMap.extentManager.blockForReposition(),!c.firstResize&&(c.app.site.essentialsMap.initialExtent||c._startupExtent)))c.firstResize=true,c.app.site.essentialsMap.extentManager.setExtentWithPriority(c._startupExtent||c.app.site.essentialsMap.initialExtent,
3),c.app.site.essentialsMap.extentManager.firstResize()}}catch(e){}},200)}},initialize:function(){if(!this.initialized&&this.viewModel&&this.root){var a=false,b=true;if(this.configuration&&this.configuration.hasOwnProperty("wrapAround180"))a=this.configuration.wrapAround180;if(this.configuration&&this.configuration.hasOwnProperty("force3DTransforms"))b=this.configuration.force3DTransforms;this.app.map=new esri.Map("map",{slider:false,logo:false,showAttribution:false,wrapAround180:a,force3DTransforms:b,
autoResize:false});this.app.map.hideZoomSlider();this.extentBroadcastFrequency=this.configuration.extentBroadcastFrequency||0;this.app.commandRegistry.command("InitializeSite").execute(this.app.map);this.app.commandRegistry.command("ZoomToInitialExtent").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)});this.app.commandRegistry.command("ZoomToFullExtent").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)});this.app.eventRegistry.event("ApplicationResizedEvent").subscribe(this,
function(){this.resize()});this.app.commandRegistry.command("MapResize").register(this,function(){this.resize()});this.app.commandRegistry.command("ShowMap").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)});this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(){this.resize()});this.app.eventRegistry.event("ViewDeactivatedEvent").subscribe(this,function(){this.resize()});this.app.eventRegistry.event("MapStartupExtentChangedEvent").subscribe(this,
function(a){this._startupExtent=a});this.app.eventRegistry.event("ActiveToolChangedEvent").subscribe(this,this._toolChanged);var c=this;dojo.connect(this.app.map,"onExtentChange",function(a,b,f,g){c.app.eventRegistry.event("MapExtentChangeEvent").publish(a,b,f,g);!g&&c.app.site.essentialsMap&&(g=c._getLevelOfDetails(a));c._publishWithMapExtent("MapExtentChangedEvent",g)});dojo.connect(this.app.map,"onLayerAdd",this,this._layerAdd);dojo.connect(this.app.map,"onLayerAddResult",function(a,b){c.app.eventRegistry.event("LayerAddResultEvent").publish(a,
b);c.app.eventRegistry.event("LayerAddedWithResultEvent").publish(a,b)});dojo.connect(this.app.map,"onLayerRemove",function(a){c.app.eventRegistry.event("LayerRemoveEvent").publish(a);c.app.eventRegistry.event("LayerRemovedEvent").publish(a)});dojo.connect(this.app.map,"onLayersAddResult",function(a,b){c.app.eventRegistry.event("LayersAddResultEvent").publish(a,b);c.app.eventRegistry.event("LayersAddedWithResultEvent").publish(a,b)});dojo.connect(this.app.map,"onPanStart",function(a,b){c.app.eventRegistry.event("MapPanStartEvent").publish(a,
b);c.app.eventRegistry.event("MapPanStartedEvent").publish(a,b)});dojo.connect(this.app.map,"onPan",function(a,b){c.app.eventRegistry.event("MapPanEvent").publish(a,b);c._broadcastExent(a)});dojo.connect(this.app.map,"onPanEnd",function(a,b){c.app.eventRegistry.event("MapPanEndEvent").publish(a,b);c.app.eventRegistry.event("MapPanEndedEvent").publish(a,b)});dojo.connect(this.app.map,"onZoomStart",function(a,b,f,g){c.app.eventRegistry.event("MapZoomStartEvent").publish(a,b,f,g);c.app.eventRegistry.event("MapZoomStartedEvent").publish(a,
b,f,g)});dojo.connect(this.app.map,"onZoom",function(a,b,f){c.app.eventRegistry.event("MapZoomEvent").publish(a,b,f);c._broadcastExent(a)});dojo.connect(this.app.map,"onZoomEnd",function(a,b,f,g){c.app.eventRegistry.event("MapZoomEndEvent").publish(a,b,f,g);c.app.eventRegistry.event("MapZoomEndedEvent").publish(a,b,f,g)});dojo.connect(this.app.map,"onLoad",function(a){c.resize();c.app.eventRegistry.event("MapLoadedEvent").publish(a)});dojo.connect(this.app.map,"onClick",function(a){c.app.eventRegistry.event("MapClickEvent").publish(a);
c.app.eventRegistry.event("MapClickedEvent").publish(a)});dojo.connect(this.app.map,"onMouseDown",function(a){c.app.eventRegistry.event("MapMouseDownEvent").publish(a)});this.initialized=true}},_broadcastExent:function(a){var b=null,c=null;if(!this.extentEpoch)this.extentEpoch=+new Date;b=+new Date;if(b-this.extentEpoch>this.extentBroadcastFrequency)this.app.site.essentialsMap&&(c=this._getLevelOfDetails(a)),this._publishWithMapExtent("MapExtentChangingEvent",c),this.extentEpoch=b},_layerAdd:function(a){for(var b=
this.app.site.essentialsMap.mapServices,c,d=0;d<b.length;d++)if(b[d].serviceLayer==a){c=b[d];break}this.app.eventRegistry.event("LayerAddEvent").publish(a,c);this.app.eventRegistry.event("LayerAddedEvent").publish(a,c);this.app.trace.debug("Subscribing to layer start and end update events for layer: "+(c!=null?c.displayName:a.url));dojo.connect(a,"onUpdateStart",this,function(){this.app.trace.debug("Layer update start: "+(c!=null?c.displayName:a.url));this.app.eventRegistry.event("LayerUpdateStartEvent").publish(a,
c);this.app.eventRegistry.event("LayerUpdateStartedEvent").publish(a,c)});dojo.connect(a,"onUpdateEnd",this,function(){this.app.trace.debug("Layer update end: "+(c!=null?c.displayName:a.url));this.app.eventRegistry.event("LayerUpdateEndEvent").publish(a,c);this.app.eventRegistry.event("LayerUpdateEndedEvent").publish(a,c)})},_getLevelOfDetails:function(a){var b={};b.scale=this.app.site.essentialsMap.calculateScale();if(a&&this.app.map&&this.app.map.width>0)b.resolution=a.getWidth()/this.app.map.width;
return b},_publishWithMapExtent:function(a,b){var c=null;if(b)c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.MapExtentEventArgs,c.currentScale=b.scale,c.currentResolution=b.resolution;this.app.eventRegistry.event(a).publish(c)},_toolChanged:function(a){a.tool&&this.app.commandRegistry.command("ActivateView").execute(this.id)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.map.MapViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.map.MapViewModel",geocortex.framework.ui.ViewModelBase,{_zoomedExtent:null,showMap:null,showError:null,showAuthError:null,showCriticalServicesError:null,temporaryGraphicsLayer:null,temporaryMarkupSymbol:null,stepZoomFactor:0.5,busyMessage:null,orientationEvent:null,geolocationCancelled:false,constructor:function(a){this.showMap=new Observable(true);this.showError=new Observable(false);this.showAuthError=new Observable(false);this.showCriticalServicesError=
new Observable(false);this.busyMessage=new Observable(null);this.inherited(arguments);this.registerCommands()},initialize:function(a){this.inherited(arguments);if(a&&a.hasOwnProperty("stepZoomFactor")){var b=parseFloat(a.stepZoomFactor);this.stepZoomFactor=!isNaN(b)&&b>0?b:0.5}this.zoomToGeolocation=typeof a.zoomToGeolocation!=="undefined"?!!a.zoomToGeolocation:true;this.showGeolocationCircle=typeof a.showGeolocationCircle!=="undefined"?!!a.showGeolocationCircle:true;this.temporaryMarkupSymbol=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_DIAMOND,
20,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0]),1),new dojo.Color([255,255,0,0.5]));this.siteFailed=new Observable(false);this.app.eventRegistry.event("SiteInitializationFailedEvent").subscribe(this,function(){this.showMap.set(false);this.showError.set(true)});this.app.eventRegistry.event("SiteAuthorizationFailedEvent").subscribe(this,function(){this.showMap.set(false);this.showAuthError.set(true)});this.app.eventRegistry.event("SiteServiceLayersFailedEvent").subscribe(this,
function(a){dojo.some(a,function(a){return a.failureAction===geocortex.essentials.FailureAction.ERROR})&&(this.showMap.set(false),this.showCriticalServicesError.set(true))});this.app.eventRegistry.event("UserSignInCancelledEvent").subscribe(this,function(){this.showMap.set(false);this.showAuthError.set(true)});this.app.eventRegistry.event("MapLoadedEvent").subscribe(this,this._subscribeToMapEvents)},registerCommands:function(){this.app.commandRegistry.command("AddTemporaryMarkupGeometry").register(this,
function(a){if(!this.temporaryGraphicsLayer)this.temporaryGraphicsLayer=new esri.layers.GraphicsLayer({id:"TemporaryMarkup"}),this.app.map.addLayer(this.temporaryGraphicsLayer);if(a){var b=null;switch(a.type){case "polygon":case "extent":b=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,51,51,0.8]),2),new dojo.Color([255,51,51,0.5]));break;case "polyline":b=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
new dojo.Color([204,51,51,0.8]),2);break;default:b=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,14,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0]),1),new dojo.Color([204,51,51]))}this.temporaryGraphicsLayer.add(new esri.Graphic(a,b))}});this.app.commandRegistry.command("ClearTemporaryMarkup").register(this,function(){this.temporaryGraphicsLayer&&this.temporaryGraphicsLayer.clear()});this.app.commandRegistry.command("ZoomToInitialExtent").register(this,
function(a){param=a?parseInt(a):0;var b=this;setTimeout(function(){b.app.map!=null&&(b.app.site===null||!b.app.site.isInitialized||b.app.site.essentialsMap===null?b.app.trace.warning("Could not zoom to initial extent - Site was null or uninitialized."):!b.app.site.essentialsMap.isInitialized||b.app.site.essentialsMap.initialExtent===null?b.app.trace.warning("Could not zoom to initial extent - Map was not initialized or has no initial extent."):b.app.site.essentialsMap.extentManager.setExtentWithPriority(b.app.site.essentialsMap.initialExtent,
8))},a)});this.app.commandRegistry.command("ZoomToFullExtent").register(this,function(a){param=a?parseInt(a):0;var b=this;setTimeout(function(){b.app.map!=null&&(b.app.site===null||!b.app.site.isInitialized||b.app.site.essentialsMap===null?b.app.trace.warning("Could not zoom to full extent - Site was null or uninitialized."):!b.app.site.essentialsMap.isInitialized||b.app.site.essentialsMap.fullExtent===null?b.app.trace.warning("Could not zoom to full extent - Map was not initialized or has no full extent."):
b.app.site.essentialsMap.extentManager.setExtentWithPriority(b.app.site.essentialsMap.fullExtent,8))},a)});this.app.commandRegistry.command("Geolocate").register(this,function(){this._geolocate()});this.app.commandRegistry.command("StepZoomIn").register(this,this._executeStepZoomIn);this.app.commandRegistry.command("StepZoomOut").register(this,this._executeStepZoomOut)},_geolocate:function(){if(navigator.geolocation){this._showBusyLocating(true);this.geolocationCancelled=false;var a=dojo.hitch(this,
function(a){setTimeout(dojo.hitch(this,function(){this._handleGeolocationResult(a)}),0)});navigator.geolocation.getCurrentPosition(a,dojo.hitch(this,this._handleGeoLocationError))}},_executeStepZoomOut:function(){this.app.commandRegistry.command("ShowMap").execute();this._zoomedExtent=geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.stepZoomWithPriority(this.app.site,this.stepZoomFactor,this._zoomedExtent,5)},_executeStepZoomIn:function(){this.app.commandRegistry.command("ShowMap").execute();
this._zoomedExtent=geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.stepZoomWithPriority(this.app.site,1/this.stepZoomFactor,this._zoomedExtent,5)},_showBusyLocating:function(a){a?(a=this.app.getResource(this.libraryId,"language-geolocation-in-progress"),a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a,null,dojo.hitch(this,function(){this.geolocationCancelled=true})),a.showBusyIcon=true,this.app.commandRegistry.command("AddStatus").execute(a)):
this.app.commandRegistry.command("RemoveStatus").execute()},_handleGeolocationResult:function(a){if(!this.geolocationCancelled){var b=this;if(a&&a.coords){var c=this.app.map,d=new esri.SpatialReference({wkid:4326}),e=new esri.SpatialReference({wkid:102100}),d=new esri.geometry.Point(a.coords.longitude,a.coords.latitude,d),f=esri.geometry.geographicToWebMercator(d),a=geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.createCircle(e,f,a.coords.accuracy,60),e=new esri.tasks.ProjectParameters;
e.geometries=[a];e.outSR=b.app.map.spatialReference;geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.project(e,function(a){a=a[0];b._showBusyLocating(false);var d=new geocortex.essentialsHtmlViewer.mapping.infrastructure.eventArgs.GeolocationEventArgs;d.mapPoint=f;b.app.eventRegistry.event("GeolocatedEvent").publish(d);var e=a.getExtent(),d=esri.geometry.getExtentForScale(c,2E4),d=d.centerAt(e.getCenter()),e=e.expand(2);b.zoomToGeolocation&&b.app.site.essentialsMap.extentManager.setExtentWithPriority(e.getWidth()>
d.getWidth()?e:d,10);if(b.showGeolocationCircle){var d=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([42,84,155,0.65]),2),new dojo.Color([42,84,155,0.35])),a=new esri.Graphic(a,d),k=new esri.layers.GraphicsLayer;k.add(a);b.app.map.addLayer(k);var l=dojo.connect(k,"onClick",function(){b.app.map.removeLayer(k);dojo.disconnect(l)})}},function(a){b._showBusyLocating(false);var c;c=b.app.isOffline.value?
b.getResource("language-geolocation-error-offline"):b.getResource("language-geolocation-error-projection").format(a.message);b.app.trace.warning(a);b.app.commandRegistry.command("Alert").execute(c)},this.app)}}},_handleGeoLocationError:function(a){var b="";this._showBusyLocating(false);switch(a.code){case a.PERMISSION_DENIED:b="language-geolocation-error-permission";break;case a.POSITION_UNAVAILABLE:b="language-geolocation-error-position-unavailable";break;case a.TIMEOUT:b="language-geolocation-error-timeout";
break;default:b="language-geolocation-error-unknown"}a=this.app.getResource(this.libraryId,"language-geolocation-error")+this.getResource(b);this.app.trace.warning(a);this.app.commandRegistry.command("Alert").execute(a)},_subscribeToMapEvents:function(){dojo.connect(this.app.map,"onPanEnd",this,function(){this._zoomedExtent=null});dojo.connect(this.app.map,"onZoomEnd",this,function(){this._zoomedExtent=null})}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCallout");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCallout",null,{_startLeft:0,_startTop:0,_node:null,_map:null,_mapPoint:null,_isVisible:false,_connections:null,_lastUpdateTime:null,_makeVisibleAfterDelay:false,_previousPosition:null,id:null,constructor:function(){this._connections=[]},attachToMap:function(a,b,c,d,e){this.destroy();this.id=a;this._map=c;this._node=b;this._mapPoint=d;this._isVisible=false;dojo.style(b,{position:"absolute",left:"0px",top:"0px",display:"none"});
dojo.place(b,dojo.byId("map_root"));this.show(d,e)},show:function(a,b){b||(b=0);this._mapPoint=a;this._isVisible=true;b>0?(this._makeVisibleAfterDelay=true,setTimeout(dojo.hitch(this,this.doDelayedShow),b)):(dojo.style(this._node,"width","auto"),this._mapPoint=a,this._makeVisibleAfterDelay=false,this._doResetPosition(),this._disconnectEventHandlers(),this._subscribeToMapEvent("onPanStart",this._onPanStart),this._subscribeToMapEvent("onPanEnd",this._onPanEnd),this._subscribeToMapEvent("onPan",this._onPan),
this._subscribeToMapEvent("onZoomStart",this._onZoomStart),this._subscribeToMapEvent("onZoomEnd",this._onZoomEnd),this.notifyContentChanged())},doDelayedShow:function(){this._makeVisibleAfterDelay&&this.show(this._mapPoint)},hide:function(){this._makeNotVisible();this._disconnectEventHandlers();this._makeVisibleAfterDelay=this._isVisible=false},_disconnectEventHandlers:function(){for(var a=0;a<this._connections.length;a++)dojo.disconnect(this._connections[a]);this._connections.length=0},_makeNotVisible:function(){this._node!=
null&&dojo.style(this._node,"display","none")},_makeVisible:function(){this._node!=null&&dojo.style(this._node,"display","block")},destroy:function(){this.hide();this._node&&this._node.parentNode&&this._node.parentNode.removeChild(this._node)},getNode:function(){return this._node},_subscribeToMapEvent:function(a,b){this._connections.push(dojo.connect(this._map,a,this,b))},_onPanStart:function(){var a=this._setPositionByMapPoint(this._mapPoint);this._startLeft=a.x;this._startTop=a.y;this._lastUpdateTime=
(new Date).getTime()},_onPan:function(a,b){if(this._getEllapsedMilliseconds()>=0){if(a.spatialReference._isWebMercator()&&this._map.wrapAround180){for(var c=false;this._mapPoint.x<a.xmin;)c=true,this._mapPoint.x+=40075017;for(;this._mapPoint.x>a.xmax;)c=true,this._mapPoint.x-=40075017;c&&this._setPositionByMapPoint(this._mapPoint)}this._node.style.WebkitTransform===void 0?this._setPositionByScreenPoint(this._startLeft+b.x,this._startTop+b.y):this._node.style.WebkitTransform="translate3d({0}px, {1}px, 1px)".format(b.x,
b.y);this._lastUpdateTime=(new Date).getTime()}},_onPanEnd:function(a){if(this._map.wrapAround180&&a.spatialReference._isWrappable()){if(a.spatialReference._isWebMercator()){for(;this._mapPoint.x<a.xmin;)this._mapPoint.x+=40075017;for(;this._mapPoint.x>a.xmax;)this._mapPoint.x-=40075017}else if(a.spatialReference.wkid==4326){for(;this._mapPoint.x<a.xmin;)this._mapPoint.x+=360;for(;this._mapPoint.x>a.xmax;)this._mapPoint.x-=360}this._setPositionByMapPoint(this._mapPoint)}},_getEllapsedMilliseconds:function(){if(this._lastUpdateTime==
null)this._lastUpdateTime=(new Date).getTime();return(new Date).getTime()-this._lastUpdateTime},fixPosition:function(){this._isVisible&&this._doResetPosition()},notifyContentChanged:function(){var a=this;$(this._node).find("img").each(function(){if(!this.complete&&!this.naturalWidth)this.attached_calloutConnection&&(dojo.disconnect(this.attached_calloutConnection),Array.removeItem(this,this.attached_calloutConnection)),Object.prototype.hasOwnProperty.call(this,"attached_originalDisplayValue")||(this.attached_originalDisplayValue=
dojo.style(this,"display")),dojo.style(this,"display","none"),this.attached_calloutConnection=dojo.connect(this,"load",a,function(a){this._contentLoaded(a)})})},_contentLoaded:function(a){if(this._isVisible)console.log("img loaded"),a=a.target,dojo.style(a,"display",a.attached_originalDisplayValue),a.attached_calloutConnection&&(dojo.disconnect(a.attached_calloutConnection),Array.removeItem(a,a.attached_calloutConnection)),this._doResetPosition()},_doResetPosition:function(){var a=dojo.style(this._node,
"opacity");dojo.style(this._node,"opacity",0);this._makeVisible();dojo.position(this._node).w<=0||(dojo.style(this._node,"width","auto"),this._setPositionByMapPoint(this._mapPoint,true),dojo.style(this._node,"opacity",a))},_setPositionByMapPoint:function(a,b){var c=null,d=this._map.toScreen(a);if((c=dojo.position(this._node))&&d){var e;this.position&&c.w===0&&c.h===0?(e=d.x-this.position.w/2,d=d.y-this.position.h):(e=d.x-c.w/2,d=d.y-c.h,this.position=c);b&&dojo.style(this._node,"width",c.w+3+"px");
this._setPositionByScreenPoint(e,d);return c=new esri.geometry.Point({x:e,y:d})}},_setPositionByScreenPoint:function(a,b){if(this._node.style.WebkitTransform!==void 0)this._node.style.WebkitTransform="translate3d(0px, 0px, 1px)";dojo.style(this._node,{left:a+"px",top:b+"px"})},_onZoomStart:function(){this._makeNotVisible()},_onZoomEnd:function(){this._isVisible&&(this._makeVisible(),this._setPositionByMapPoint(this._mapPoint))}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCalloutView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCalloutView",geocortex.framework.ui.ViewBase,{innerContent:null,constructor:function(a){this.inherited(arguments);this.innerContent=new Observable},handleClose:function(){dojo.style(this.root,"display","none");var a=this.attached_calloutID;a&&this.app.commandRegistry.command("HideMapElement").execute(a);this.app.eventRegistry.event("MapTipClosedEvent").publish(a)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCalloutViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCalloutViewModel",geocortex.framework.ui.ViewModelBase,{title:null,constructor:function(a){this.inherited(arguments);this.title=new Observable},initialize:function(a){this.inherited(arguments)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipContent");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipContent",geocortex.framework.ui.ViewBase,{_featureChangedSubscriptionToken:null,_view:null,constructor:function(a){this.inherited(arguments)},attach:function(a){this._featureChangedSubscriptionToken&&this.app.eventRegistry.event("FeatureChangedEvent").unsubscribe(this._featureChangedSubscriptionToken);this._featureChangedSubscriptionToken=this.app.eventRegistry.event("FeatureChangedEvent").subscribe(this,this.handleFeatureChanged);
this.inherited(arguments)},resolveWidget:function(a,b){this.inherited(arguments);if(b&&a==="GetDescription"){var c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView;c.app=this.app;c.libraryId=this.libraryId;c.contentField=this.viewModel.contentField;c.root=dojo.create("div");c.root.className="feature-description";var d=c.descriptionGet(b);d||(d=this.app.getResource(this.libraryId,"language-feature-not-available"));c.root.innerHTML=d;c.attach(b);this.viewModel.showNoResults.set(false);
this.viewModel.showLoading.set(false);return this._view=c}else return null},setFeatureSetCollection:function(a){this.viewModel&&(this.viewModel.setFeatureSetCollection(a),this.destroyBindings(),this.attach(this.viewModel))},handleFeatureChanged:function(a){if(this.viewModel.currentFeature.get().token===a.token){var b=this._view;b.destroyBindings();b.root.innerHTML=b.descriptionGet(a);b.attach(a)}}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipContentViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipContentViewModel",geocortex.framework.ui.ViewModelBase,{fsc:null,currentFeature:null,title:null,showNoResults:null,showLoading:null,libraryId:null,calloutID:null,app:null,contentField:null,containerView:null,constructor:function(a,b){this.inherited(arguments);this.app=a;this.libraryId=b;this.fsc=new ObservableCollection;this.currentFeature=new Observable;this.currentFeature.bind(this,this.currentFeatureChanged);this.title=
new Observable(this.app.getResource(this.libraryId,"language-common-results"));this.showNoResults=new Observable(false);this.showLoading=new Observable(true);this.app.eventRegistry.event("FSMCollectionClosedEvent").subscribe(this,this.fsmCollectionClosed)},initialize:function(a){this.inherited(arguments)},setFeatureSetCollection:function(a){this.fsc=a;this.updateCurrentFeature();a&&a.featureSets.bindingEvent.subscribe(this,function(a){a.type==="clear"?this.clearCurrentFeature():this.updateCurrentFeature()})},
updateCurrentFeature:function(){this.fsc.featureSets&&this.fsc.featureSets.value.length>0&&this.fsc.featureSets.getAt(0).features.value.length>0?this.currentFeature.set(this.fsc.featureSets.getAt(0).features.getAt(0)):this.currentFeature.set(null)},clearCurrentFeature:function(){this.title.set(this.app.getResource(this.libraryId,"language-common-results"));this.isFscOpen()?(this.showNoResults.set(false),this.showLoading.set(true)):(this.showNoResults.set(true),this.showLoading.set(false))},currentFeatureChanged:function(a){a?
(a=a.label.get(),String.isNullOrEmpty(a)||this.title.set(a),this.showNoResults.set(false),this.showLoading.set(false)):this.clearCurrentFeature();this.calloutID&&this.app.viewManager.notifyDimensionsChanged(this.containerView)},isFscOpen:function(){return this.fsc?this.app.featureSetManager.isCollectionOpen(this.fsc.id):false},fsmCollectionClosed:function(a){this.fsc&&a.featureSetCollectionId==this.fsc.id&&this.updateCurrentFeature()}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipsModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipsModule",geocortex.framework.application.ModuleBase,{_calloutMap:null,_calloutViewMap:null,_count:0,_mapTipContentView:null,_config:null,_allowMultiple:false,_contentField:null,_isPanning:false,_isZooming:false,_pendingCommands:null,initialize:function(a){this.inherited(arguments);this._calloutMap={};this._calloutViewMap={};if((this._config=a)&&a.allowMultiple)this._allowMultiple=a.allowMultiple;if(a&&a.contentField)this._contentField=
a.contentField;this._pendingCommands=[];this.registerCommands();this.subscribeEvents()},subscribeEvents:function(){this.app.eventRegistry.event("MapPanStartedEvent").subscribe(this,function(){this._isPanning=true});this.app.eventRegistry.event("MapPanEndedEvent").subscribe(this,function(){this._isPanning=false;this._isZooming||this.flushPendingCommands()});this.app.eventRegistry.event("MapZoomStartedEvent").subscribe(this,function(){this._isZooming=true});this.app.eventRegistry.event("MapZoomEndedEvent").subscribe(this,
function(){this._isZooming=false;this._isPanning||this.flushPendingCommands()});this._config&&this._config.onClose&&this.app.eventRegistry.event("MapTipClosedEvent").subscribe(this,function(){for(var a=this._config.onClose,b=0;b<a.length;b++)this.app.commandRegistry.command(a[b]).execute()})},flushPendingCommands:function(){for(var a=0;a<this._pendingCommands.length;a++){var b=this._pendingCommands[a];this.app.commandRegistry.command(b.commandName).execute(b.commandArgs)}this._pendingCommands.length=
0},registerCommands:function(){this.app.commandRegistry.command("InvokeMapTip").register(this,function(a){this.app.commandRegistry.command("Identify").execute({geometry:a,source:"MapTip",delayFSCOpen:true,layerRestriction:function(a){return a.showMapTips}})});this.app.commandRegistry.command("ShowMapTip").register(this,function(a){if(typeof a==="string")this.app.commandRegistry.command("ShowMapTipResults").execute(a);else if(!this.tryQueueCommand("ShowMapTip",a)){a.length&&a.length>0&&a[0]&&(a=a[0]);
var b=geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(a.esriFeature.get().geometry);if(b==null)this.app.trace.warning("Error ShowMapTip: {0}".format(this.app.getResource(this.libraryId,"language-identify-no-geometry-for-map-tip-results")));else{if(this._mapTipContentView==null||this._allowMultiple)this._mapTipContentView=this.createMapTipView();this._mapTipContentView.viewModel.currentFeature.set(a);this.showMapTipInCallout(this.getMapTipCalloutId(),b,0)}}});this.app.commandRegistry.command("ShowMapTipResults").register(this,
function(a){if(typeof a==="object"&&a instanceof geocortex.essentialsHtmlViewer.mapping.infrastructure.Feature)this.app.commandRegistry.command("ShowMapTip").execute(a);else if(!this.tryQueueCommand("ShowMapTipResults",a)){var b=this.app.featureSetManager.getCollectionById(a),a=geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(b.tag);if(a==null)if(a=b.firstFeature(),a==null){var c;c=b.featureSets.bind(this,function(a){this.tryRerunShowMapTipResults(a,b,c)});return}else if(a=
geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getMiddle(a.esriFeature.get().geometry),a==null){a=this.app.getResource(this.libraryId,"language-identify-no-geometry-for-map-tip-results");this.app.commandRegistry.command("Alert").execute(a);this.app.trace.error(a);return}if(this._mapTipContentView==null||this._allowMultiple)this._mapTipContentView=this.createMapTipView();this._mapTipContentView.setFeatureSetCollection(b);this.showMapTipInCallout(this.getMapTipCalloutId(),a,1E3)}});
this.app.commandRegistry.command("ShowMapCallout").register(this,function(a){if(!this.tryQueueCommand("ShowMapCallout",a)){var b,c;this._calloutViewMap.hasOwnProperty(a.elementID)?(b=this._calloutViewMap[a.elementID],c=b.viewModel):(b=this.createView("MapCalloutView"),this._calloutViewMap[a.elementID]=b,dojo.addClass(b.root,"map-callout-wrapper"),c=new geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCalloutViewModel(this.app),c.initialize({}),b.attach(c));a.title?c.title.set(a.title):a.content&&
a.contentIsView()?c.title.sync(a.content.title):c.title="";b.innerContent.set(a.getNode());b=new geocortex.essentialsHtmlViewer.mapping.infrastructure.ShowMapElementArgs(a.elementID,a.mapPoint,b);b.delay=a.delay;this.app.commandRegistry.command("ShowMapElement").execute(b)}});this.app.commandRegistry.command("ShowMapElement").register(this,function(a){if(!this.tryQueueCommand("ShowMapElement",a)){var b;this._calloutMap[a.elementID]?(b=this._calloutMap[a.elementID],b.getNode()==a.getNode()?b.show(a.mapPoint,
a.delay):a.getNode()!=null?(b.attachToMap(a.elementID,a.getNode(),this.app.map,a.mapPoint,a.delay),this._calloutMap[a.elementID]=b):b.doDelayedShow()):(b=new geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapCallout,b.attachToMap(a.elementID,a.getNode(),this.app.map,a.mapPoint,a.delay),this._calloutMap[a.elementID]=b);if(a.contentIsView())a.content.attached_calloutID=b.id}});this.app.commandRegistry.command("HideMapElement").register(this,function(a){this.tryQueueCommand("HideMapElement",
a)||(this._calloutMap[a]&&(this._calloutMap[a].destroy(),delete this._calloutMap[a]),this._calloutViewMap[a]&&(this.app.viewManager.destroyView(this._calloutViewMap[a]),delete this._calloutViewMap[a]))});this.app.commandRegistry.command("FixMapElementPosition").register(this,function(a){!this.tryQueueCommand("FixMapElementPosition",a)&&this._calloutMap[a]&&(this._calloutMap[a].notifyContentChanged(),this._calloutMap[a].fixPosition())});this.app.eventRegistry.event("ViewDimensionsChangedEvent").subscribe(this,
function(a){if((a=a.view.attached_calloutID)&&this._calloutMap[a])this.app.commandRegistry.command("FixMapElementPosition").execute(a),a=new geocortex.essentialsHtmlViewer.mapping.infrastructure.ShowMapElementArgs(a),this.app.commandRegistry.command("ShowMapElement").execute(a)})},createMapTipView:function(){var a=this.createView("MapTipContent"),b=new geocortex.essentialsHtmlViewer.mapping.modules.maptips.MapTipContentViewModel(this.app,this.libraryId);b.initialize({});b.contentField=this._contentField;
a.attach(b);a.title.sync(b.title);return a},getMapTipCalloutId:function(){var a="MapTipResultsCallout";this._allowMultiple?a+=this._count++:this.app.commandRegistry.command("HideMapElement").execute(a);return a},showMapTipInCallout:function(a,b,c){b=new geocortex.essentialsHtmlViewer.mapping.infrastructure.ShowMapElementArgs(a,b,this._mapTipContentView);b.delay=c;this.app.commandRegistry.command("ShowMapCallout").execute(b);this._mapTipContentView.viewModel.containerView=this._calloutViewMap[a];this._mapTipContentView.viewModel.calloutID=
a},tryQueueCommand:function(a,b){return this._isPanning||this._isZooming?(this._pendingCommands.push({commandName:a,commandArgs:b}),true):false},tryRerunShowMapTipResults:function(a,b,c){b.featureSets.unbind(c);this.app.commandRegistry.command("ShowMapTipResults").execute(b.id)},createView:function(a,b){return this.app.viewManager.createView({id:b,type:"geocortex.essentialsHtmlViewer.mapping.modules.maptips."+a,markup:this.libraryId+"/modules/MapTips/"+a+".html",visible:true,libraryId:this.libraryId})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.markup.MarkupModule",geocortex.framework.application.ModuleBase,{app:null,constructor:function(a){this.app=a}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.markup.MarkupViewModel",geocortex.framework.ui.ViewModelBase,{markupLayerId:null,__markerSymbol:null,__lineSymbol:null,__fillSymbol:null,__textSymbol:null,constructor:function(){this.__markerSymbol=geocortex.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultMarkerSymbol();this.__lineSymbol=geocortex.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultLineSymbol();this.__fillSymbol=geocortex.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultFillSymbol();
this.__textSymbol=geocortex.essentialsHtmlViewer.mapping.infrastructure.SymbolUtils.defaultTextSymbol()},initialize:function(a){if(a.markupLayerName)this.markupLayerId=a.markupLayerName;this.app.commandRegistry.command("AddMarkup").register(this,this.executeAddMarkupCommand,this.canExecuteAddMarkupCommand);this.app.commandRegistry.command("AddTextMarkup").register(this,this.executeAddTextMarkupCommand,this.canExecuteAddTextMarkupCommand);this.app.commandRegistry.command("ClearMarkup").register(this,
this.executeClearMarkupCommand,this.canExecuteClearMarkupCommand);this.app.commandRegistry.command("ClearMarkupQuiet").register(this,this.executeClearMarkupQuietCommand,this.canExecuteClearMarkupQuietCommand)},canExecuteAddMarkupCommand:function(a){return!!a},executeAddMarkupCommand:function(a){this.addMarkup(a)},canExecuteClearMarkupCommand:function(){return this._markupExists()},executeClearMarkupCommand:function(){this.clearMarkup()},canExecuteClearMarkupQuietCommand:function(){return this._markupExists()},
executeClearMarkupQuietCommand:function(){this.clearMarkupQuiet()},canExecuteAddTextMarkupCommand:function(a){return!!a},executeAddTextMarkupCommand:function(a){this.addTextMarkup(a)},clearMarkup:function(){var a=this;this._markupExists()&&this.app.commandRegistry.command("Confirm").execute(this.app.getResource(this.libraryId,"language-markup-clear-all-prompt"),this.app.getResource(this.libraryId,"language-markup-clear-all-prompt-title"),function(b){b&&a.clearMarkupQuiet()})},clearMarkupQuiet:function(){if(this._markupExists()){var a=
this._getGraphicsLayer(false,this.markupLayerId);a&&(a.clear(),this.app.commandRegistry.command("ClearMarkup").raiseCanExecuteChanged())}},addMarkup:function(a){if(a){var b=null;a.isInstanceOf&&(a.isInstanceOf(esri.geometry.Point)||a.isInstanceOf(esri.geometry.Multipoint)?b=this._copySymbol(this.__markerSymbol):a.isInstanceOf(esri.geometry.Polyline)?b=this._copySymbol(this.__lineSymbol):a.isInstanceOf(esri.geometry.Polygon)&&(b=this._copySymbol(this.__fillSymbol)));if(b){var c=new esri.Graphic;c.geometry=
a;c.symbol=b;this._addGraphic(c,this.markupLayerId)}this.app.commandRegistry.command("ClearMarkup").raiseCanExecuteChanged()}},addTextMarkup:function(a){var b=this;if(a){var c=a.getExtent();c?this.app.commandRegistry.command("ZoomToExtent").execute(c):this.app.commandRegistry.command("PanToPoint").execute(a);this.app.commandRegistry.command("Prompt").execute(this.app.getResource(this.libraryId,"language-markup-add-text-title"),this.app.getResource(this.libraryId,"language-markup-add-text"),"",function(c){b._addTextMarkup(c,
a)})}},_addTextMarkup:function(a,b){b.getExtent&&b.getExtent()&&(b=b.getExtent().getCenter());var c=this._copySymbol(this.__textSymbol);c.setText(a);var d=new esri.Graphic;d.geometry=b;d.symbol=c;this._addGraphic(d,this.markupLayerId)},_addGraphic:function(a,b){a&&(layer=this._getGraphicsLayer(true,b),layer.add(a),layer.visible||layer.setVisibility(true))},_getGraphicsLayer:function(a,b){var c=this.app.map.getLayer(b);if(!c&&a)c=new esri.layers.GraphicsLayer,c.id=b,this.app.map.addLayer(c);return c},
_copySymbol:function(a){var b=null;a&&a.isInstanceOf&&(a.isInstanceOf(esri.symbol.SimpleMarkerSymbol)?(outlineCopy=this._copySymbol(a.outline),b=new esri.symbol.SimpleMarkerSymbol(a.style,a.size,outlineCopy,a.color)):a.isInstanceOf(esri.symbol.SimpleLineSymbol)?b=new esri.symbol.SimpleLineSymbol(a.style,a.color,a.width):a.isInstanceOf(esri.symbol.SimpleFillSymbol)?(outlineCopy=this._copySymbol(a.outline),b=new esri.symbol.SimpleFillSymbol(a.style,outlineCopy,a.color)):a.isInstanceOf(esri.symbol.TextSymbol)&&
(b=new esri.symbol.TextSymbol,b.setText(a.text),b.setFont(a.font),b.setColor(a.color),b.setAlign(a.align)));return b},_markupExists:function(){var a=false;if(this.app.map){var b=this._getGraphicsLayer(false,this.markupLayerId);b&&b.graphics&&b.graphics.length>0&&(a=true)}return a}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.Menu.MenuModule",geocortex.framework.application.ModuleBase,{app:null,constructor:function(a){this.app=a},initialize:function(a){this.app.menuRegistry.loadMenus(a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.native.AttachFileView",geocortex.framework.ui.ViewBase,{uploadFormElement:null,handleTakeNativePhotoCamera:function(){this.viewModel._handlePhotoFromNativeApp(true)},handleTakeNativePhotoGallery:function(){this.viewModel._handlePhotoFromNativeApp(false)},handleSelectedFileInput:function(a){this.viewModel._handleFileFromBrowser(a.currentTarget.files[0])},clearFileInputField:function(){this.uploadFormElement.reset()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.native.AttachFileViewModel",geocortex.framework.ui.ViewModelBase,{_attachFileViewId:null,feature:null,esriFeature:null,esriFeatureLayer:null,browserFileAPISupported:null,deviceCordovaSupported:null,isUploading:null,constructor:function(){this.feature=new Observable(null);this.esriFeature=new Observable(null);this.esriFeatureLayer=new Observable(null);this.browserFileAPISupported=new Observable(this._fileAPISupported());this.deviceCordovaSupported=
new Observable(this._cordovaSupported());this.isUploading=new Observable(false);this.app.commandRegistry.command("AttachFileToFeature").register(this,this._executeAttachFile,this._canExecuteAttachFile)},initialize:function(a){this._attachFileViewId=a.attachFileViewId},_fileAPISupported:function(){return this._isFileInputSupported()&&window.File&&window.FileReader?true:false},_cordovaSupported:function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)&&navigator.camera&&typeof navigator.camera.getPicture!==
"undefined"?true:false},_handleFileFromBrowser:function(a){this.app.isOffline.get()===false&&this.isUploading.set(true);var b=new FileReader,c=this;b.onload=function(b){b={data:unescape(b.target.result.substring(b.target.result.indexOf("base64,")+7)),fileName:a.name,fileType:a.type};c._handleReceiveFileData(b,function(a){c._handleCallback.call(c,a)})};b.readAsDataURL(a)},_handlePhotoFromNativeApp:function(a){if(navigator.camera){var b=this;navigator.camera.getPicture(function(a){setTimeout(function(){b._handleReceiveFileData({data:a},
function(a){b._handleCallback.call(b,a)})},0)},function(){},{quality:60,sourceType:a?Camera.PictureSourceType.CAMERA:Camera.PictureSourceType.PHOTOLIBRARY,destinationType:typeof Camera!=="undefined"&&Camera.DestinationType?Camera.DestinationType.DATA_URL:1,correctOrientation:true})}else this._reportStatus("language-native-no-photo-no-camera-detected")},_handleReceiveFileData:function(a,b){(!this.feature.get()||!this.feature.get().esriFeature.get()||!this.feature.get().esriFeature.get().getLayer()||
!this.feature.get().esriFeature.get().getLayer().isEditable()||!this.feature.get().esriFeature.get().getLayer().hasAttachments)&&this._resolveFeature(this.feature.get());var c=this.esriFeature.get(),d=this.esriFeatureLayer.get();if(!this.esriFeature.get()||!this.esriFeatureLayer.get())this._reportStatus("language-native-feature-no-layer");else{var e=null;if(d&&d.url)e=d.url;else if(d._essentialsMetadata)e=d._essentialsMetadata.serviceUrl;e?(c={feature:c,layer:d,featureUrl:e,filename:this._formatAttachmentName(a.fileName),
contentType:a.fileType||"image/jpeg",payload:a.data,callback:b},this.app.commandRegistry.command("CreateAttachment").execute(c)):this._reportStatus("language-native-feature-no-layer-url")}},_formatAttachmentName:function(a){var b=new Date,c=a?a.substr(0,a.lastIndexOf(".")):"image",a=a?a.substr(a.lastIndexOf(".")+1):"jpg";return"{0}[{1}-{2}-{3}|{4}:{5}:{6}].{7}".format(c,b.getDate(),b.getMonth()+1,b.getFullYear(),b.getHours(),b.getMinutes(),b.getSeconds(),a)},_handleCallback:function(a){var b={};if(this.app.isOffline.get()===
true)this._reportStatus(!a||a===void 0||a===null?"language-native-offline-file-upload":"language-native-offline-file-upload-error");else{try{b=JSON.parse(a.currentTarget.response).error}catch(c){b.message=a.currentTarget&&a.currentTarget.statusText?a.currentTarget.statusText:this.app.getResource(this.libraryId,"language-native-internal-server-error")}b&&b.message?this._reportStatus("language-native-file-upload-failed",b.message):(this._reportStatus("language-native-file-upload-success"),this.app.eventRegistry.event("FeatureAttachmentAddedEvent").publish(this.feature.get()))}},
_executeAttachFile:function(a){this._resolveFeature(a);this.app.commandRegistry.command("HideFeatureTemplatePicker").execute();!this.esriFeature.get()||!this.esriFeatureLayer.get()?this._reportStatus("language-native-feature-no-layer"):this.app.commandRegistry.command("ActivateView").execute(this._attachFileViewId)},_canExecuteAttachFile:function(a){return a&&(this._resolveFeature(a),this.esriFeature.get()&&this.esriFeatureLayer.get()&&(a=this.esriFeatureLayer.get())&&a.isEditable()&&a.hasAttachments&&
(this.browserFileAPISupported.get()||this.deviceCordovaSupported.get()))?true:false},_resolveFeature:function(a){var b=null;a.esriFeature&&(b=geocortex.essentialsHtmlViewer.mapping.infrastructure.MapUtils.findFeatureInMap(a.esriFeature.get(),this.app.site));b?(a.esriFeature.set(b),this.feature.set(a),this.esriFeature.set(b),a=b.getLayer(),!a||!a.isEditable()?this.esriFeatureLayer.set(null):this.esriFeatureLayer.set(a)):(this.feature.set(null),this.esriFeature.set(null),this.esriFeatureLayer.set(null))},
_reportStatus:function(a,b){var c=this;this.isUploading.set(false);var d=this.app.getResource(this.libraryId,a);this.app.commandRegistry.command("Alert").execute(b?d+b:d,null,function(){var a=c.app.viewManager.getViewById(c._attachFileViewId);a&&a.isActive&&(a.clearFileInputField(),c.app.commandRegistry.command("DeactivateView").execute(c._attachFileViewId))})},_isFileInputSupported:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return false;
var a=document.createElement("input");a.type="file";return!a.disabled}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.native.NativeModule",geocortex.framework.application.ModuleBase,{initialize:function(){this.nativeInitialized=false;var a=null;this.app.commandRegistry.command("NativeHasCapability").register(this,function(b,c){a===null?this.app.isNative.get()?geocortex.GeocortexNativeApp.capabilities(function(d){a=d;c.apply(this,[a.indexOf(b)>-1])},function(){c.apply(this,[false])}):c.apply(this,[false]):c.apply(this,[a.indexOf(b)>-1])});this.app.eventRegistry.event("ApplicationNativeReadyEvent").subscribe(this,
this.checkCanExecute);(function(a){if(typeof gcxNativeReady!=="undefined")a&&a();else{var c=window.gcxNativeReadyCallback;window.gcxNativeReadyCallback=function(){c&&c();a&&a()}}})(dojo.hitch(this,function(){this.nativeInitialized=true;this.app.isNative.set(true);geocortex.GeocortexNativeApp.registerNativeEventListener(dojo.hitch(this,this.handleNativeEvent));esri.config.defaults.io.corsEnabledServers.push("localhost:8181")}));this.app.eventRegistry.event("BusMessageEvent").subscribe(this,function(a){if(a.type===
"download"){var c=a.parameters,d=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs;d.timeout=1E4;d.id="native-download-status";if(c.state==="Downloading")a=this.getResource("language-native-download-downloading"),d.text=a.format(c.filename,c.progress),this.app.commandRegistry.command("AddStatus").execute(d);else if(c.state==="Completed")a=this.getResource("language-native-download-complete"),d.text=a.format(c.filename),this.app.commandRegistry.command("AddStatus").execute(d);
else if(c.state==="Failed")a=this.getResource("language-native-download-failed"),d.text=a.format(c.filename),this.app.commandRegistry.command("AddStatus").execute(d);this.app.commandRegistry.command("ActivateView").execute(d.id)}else if(a.type==="low memory")d=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs,d.timeout=3E4,d.id="native-low-memory-status",a=this.getResource("language-native-low-memory"),d.text=a,this.app.commandRegistry.command("AddStatus").execute(d),
this.app.commandRegistry.command("ActivateView").execute(d.id)})},checkCanExecute:function(){this.app.commandRegistry.command("NativeApplicationClose").raiseCanExecuteChanged();this.app.commandRegistry.command("NativeApplicationAddFavorite").raiseCanExecuteChanged()},commandAddToFavorites:function(){var a=this,b=document.URL,c=a.getResource("language-native-add-to-favorites-viewer-name-title"),d=a.getResource("language-native-add-to-favorites-viewer-name");a.app.commandRegistry.command("Prompt").execute(c,
d,"",function(c){if(c)geocortex.GeocortexNativeApp.addViewerToFavorites(c,b,function(){var b=a.getResource("language-native-add-to-favor,ites-success-title"),c=a.getResource("language-native-add-to-favorites-success");a.app.commandRegistry.command("Alert").execute(c,b)},function(){var b=a.getResource("language-native-add-to-favorites-error-title"),c=a.getResource("language-native-add-to-favorites-error");a.app.commandRegistry.command("Alert").execute(c,b)});else{var c=a.getResource("language-native-add-to-favorites-name-invalid-title"),
d=a.getResource("language-native-add-to-favorites-name-invalid");a.app.commandRegistry.command("Alert").execute(d,c)}})},handleNativeEvent:function(a){this.app.eventRegistry.event("BusMessageEvent").publish(a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineModule",geocortex.framework.application.ModuleBase,{_hooked_esri_request:null,_hooked_esri_getTileUrl:null,_hooked_esri_getImageUrl:null,_isOnline:null,_isActiveCaching:null,_index:null,_isLoadingResourceIndex:false,_resourcesToAdd:null,_handlers:null,_rules:null,_rewriteRules:null,_ready:false,_onReadyConnect:null,_moduleConfig:null,_temporaryDevelopmentFlag_alwaysCreateNewIndex:false,_temporaryDevelopmentFlag_alwaysOverrideResources:true,
constructor:function(){this._isOnline=new Observable(true);this._isActiveCaching=new Observable(false);this._handlers={};this._rules=[];this._rewriteRules=[]},initialize:function(a){var b=this;this._moduleConfig=a;this._isOnline.get=function(){return!b.app.isOffline.get()};this._isActiveCaching.set(false);this._loadResourceIndex();b._rules=[];b._rewriteRules=[];this._loadConfiguredRoutingRules();this._loadRoutingRules();this.app.commandRegistry.command("DownloadOfflineResources").register(this,function(a){if(this.app.isOffline.get()){var a=
b.app.getResource(b.libraryId,"language-offline-viewer-provision-online-only"),d=b.app.getResource(b.libraryId,"language-offline-viewer-provision-online-only-title");b.app.commandRegistry.command("Alert").execute(a,d)}else this._provision(a)});this.app.commandRegistry.command("TakeApplicationOffline").register(this,function(){this.app.isOffline.set(true);this.app.commandRegistry.command("TakeApplicationOffline").raiseCanExecuteChanged();this.app.commandRegistry.command("TakeApplicationOnline").raiseCanExecuteChanged()},
function(){return!b._index||!b._index.entries?(b._loadResourceIndex(),false):b._index.isEmpty()?false:!this.app.isOffline.get()});this.app.commandRegistry.command("TakeApplicationOnline").register(this,function(){this.app.isOffline.set(false);this.app.commandRegistry.command("TakeApplicationOnline").raiseCanExecuteChanged();this.app.commandRegistry.command("TakeApplicationOffline").raiseCanExecuteChanged()},function(){return!b._index||!b._index.entries?(b._loadResourceIndex(),false):this.app.isOffline.get()});
this.app.commandRegistry.command("ClearStorageForApplication").register(this,function(a){var b=this,e=function(){b.app.store.clear(function(){b.app.trace.info("Offline data for this application cleared.");b.app.eventRegistry.event("ApplicationStorageClearedEvent").publish();b._loadResourceIndex();var a=b.app.getResource(b.libraryId,"language-offline-data-cleared"),c=b.app.getResource(b.libraryId,"language-offline-data-cleared-title");b.app.commandRegistry.command("Alert").execute(a,c)},function(a){b.app.trace.info("There was an error clearing offline data.");
var c=b.app.getResource(b.libraryId,"language-offline-error-clearing-data");b.app.commandRegistry.command("Alert").execute(c.format(a))})};a?this.app.commandRegistry.command("Confirm").execute(this.app.getResource(b.libraryId,"language-clear-storage-confirm"),this.app.getResource(b.libraryId,"language-clear-storage"),function(a){a&&e()}):e()});this.app.commandRegistry.command("ClearStorageForDomain").register(this,function(a){var b=this,e=function(){b.app.store.clearAllData(function(){b.app.trace.info("Offline data for this domain cleared.");
b.app.eventRegistry.event("DomainStorageClearedEvent").publish();b._loadResourceIndex();var a=b.app.getResource(b.libraryId,"language-offline-data-cleared"),c=b.app.getResource(b.libraryId,"language-offline-data-cleared-title");b.app.commandRegistry.command("Alert").execute(a,c)},function(a){b.app.trace.info("There was an error clearing offline data.");var c=b.app.getResource(b.libraryId,"language-offline-error-clearing-data");b.app.commandRegistry.command("Alert").execute(c.format(a))})};a?this.app.commandRegistry.command("Confirm").execute(this.app.getResource(b.libraryId,
"language-clear-storage-domain-confirm"),this.app.getResource(b.libraryId,"language-clear-storage-domain"),function(a){a&&e()}):e()});this.registerHandler("ServeSharedResource",function(a,d,e){b._serveNonSharedResource.apply(b,arguments)});this.registerHandler("ServeNonSharedResource",function(a,d,e){b._serveNonSharedResource.apply(b,arguments)});this.registerHandler("Fail",function(a,d,e){b._failRequest.apply(b,arguments)});this.registerHandler("Rewrite",function(a,d,e){a.url=b._rewriteRequest.apply(b,
arguments);if(!esri._hasCors&&Modernizr.cors)esri._hasCors=Modernizr.cors;b._hooked_esri_request(a,a.options).then(function(b){a.dfd.resolve(b)},function(b){a.dfd.errback(b)})});esri.request?(this._hooked_esri_request=esri.request,esri.request=function(a,d){if(b._isOnline.get()===true)return b._hooked_esri_request.apply(esri,[a,d]);else{var e=b._handleOfflineRequest(a,d),f=a.load;f&&e.addCallback(function(a){var b=e._pendingDfd,b=b&&b.ioArgs;return f.call(b&&b.args,a,b)});var g=a.error;g&&e.addErrback(function(a){var b=
e._pendingDfd,b=b&&b.ioArgs;return g.call(b&&b.args,a,b)});return e}},this._hooked_esri_getTileUrl=esri.layers.ArcGISTiledMapServiceLayer._meta.hidden.getTileUrl,this._esri__tileLoadHandler=esri.layers.ArcGISTiledMapServiceLayer.superclass._tileLoadHandler,this._hooked_ogc_getWMTSTileUrl=esri.layers.WMTSLayer._meta.hidden.getTileUrl,this._ogc__tileLoadHandler=esri.layers.WMTSLayer.superclass._tileLoadHandler,this._hooked_BingMaps_getTileUrl=esri.virtualearth.VETiledLayer._meta.hidden.getTileUrl,this._bingMaps__tileLoadHandler=
esri.virtualearth.VETiledLayer.superclass._tileLoadHandler,esri.virtualearth.VETiledLayer.extend({getTileUrl:function(a,d,e){a=b._hooked_BingMaps_getTileUrl.apply(this,[a,d,e]);if(b._isOnline.get()===true)return a;a=b._stripOutProxy(a);return(d=b._matchAndRewrite(a))?d:a},_tileLoadHandler:function(a){b._bingMaps__tileLoadHandler.apply(this,[a])}}),esri.layers.WMTSLayer.extend({getTileUrl:function(a,d,e){a=b._hooked_ogc_getWMTSTileUrl.apply(this,[a,d,e]);if(b._isOnline.get()===true)return a;a=b._stripOutProxy(a);
return(d=b._matchAndRewrite(a))?d:a},_tileLoadHandler:function(a){b._ogc__tileLoadHandler.apply(this,[a])}}),esri.layers.ArcGISTiledMapServiceLayer.extend({getTileUrl:function(a,d,e){a=b._hooked_esri_getTileUrl.apply(this,[a,d,e]);if(b._isOnline.get()===true)return a;a=b._stripOutProxy(a);return(d=b._matchAndRewrite(a))?d:a},_tileLoadHandler:function(a){b._esri__tileLoadHandler.apply(this,[a])}}),this._hooked_esri_getImageUrl=esri.layers.ArcGISDynamicMapServiceLayer._meta.hidden.getImageUrl,this._hooked_ogc_getImageUrl=
esri.layers.WMSLayer._meta.hidden.getImageUrl,esri.layers.WMSLayer.extend({getImageUrl:function(a,d,e,f){b._isOnline.get()===true?((!d||!e)&&b.app.trace.debug("Invalid dimensions on requested map image. This is usually due to an invalid map resize event."),b._hooked_ogc_getImageUrl.apply(this,arguments)):b._hooked_ogc_getImageUrl.apply(this,[a,d,e,function(a){var c=b._matchAndRewrite(a);f&&f(c?c:a)}])}}),esri.layers.ArcGISDynamicMapServiceLayer.extend({getImageUrl:function(a,d,e,f){b._isOnline.get()===
true?((!d||!e)&&b.app.trace.error("Invalid dimensions on requested map image. This is usually due to an invalid map resize event."),b._hooked_esri_getImageUrl.apply(this,arguments)):b._hooked_esri_getImageUrl.apply(this,[a,d,e,function(a){var c=b._matchAndRewrite(a);f&&f(c?c:a)}])}})):this.app.trace.warning("Offline module could not hook into ESRI API.")},_matchAndRewrite:function(a){for(var b=0;b<this._rewriteRules.length;++b){var c=this._rewriteRules[b],d=RegExp(c.pattern).exec(a);if(d&&d.length&&
d.length>0)return this._rewriteRequest(null,c,d)}return null},registerHandler:function(a,b){this._handlers[a]=b},_downloadBundle:function(a){var b=this;dojo.xhrGet({url:a,load:function(a){b._startUpdatingResources(a)},error:function(){b.app.trace.error("There was an error fetching a bundle resource for offline use: {0}".format(a));var c=b.app.getResource(b.libraryId,"language-offline-viewer-provisioning-failed");b.app.commandRegistry.command("Alert").execute(c)},preventCache:true})},_startUpdatingResources:function(a){this._index=
null;var b=dojo.fromJson(a);if(!b||!b.id)return this.app.trace.error("Downloaded an invalid bundle."),false;var c=this;this.app.store.get("__index",function(a){c._temporaryDevelopmentFlag_alwaysCreateNewIndex&&(a=null);a=a?dojo.fromJson(a):new geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceIndex;c._index=a;c._indexBundleContents.apply(c,[b])},function(a){c._isOnline.get()===false&&c.app.trace.error("Offline storage failed while trying to start the application in an offline state: {0}".format(a))})},
_indexBundleContents:function(a){var b=this;if(this._index&&a){this._resourcesToAdd={};for(var c in a.resources)if(a.resources.hasOwnProperty(c)){var d=a.resources[c];if(!this._index.entries.hasOwnProperty(d.key)||!(d.timestamp<=this._index.entries[d.key].timestamp)||this._temporaryDevelopmentFlag_alwaysOverrideResources)this._resourcesToAdd[d.key]=new geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceEntry(d),this._index.entries[d.key]=new geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceEntry(d),
delete this._index.entries[d.key].value}b=this;this.app.store.set("__index",dojo.toJson(this._index),function(){b.app.trace.debug("Created and saved offline storage index for viewer '{0}'.".format(b.app.id));b._addBundleResources(a)},function(a){b.app.trace.error("Could not save offline storage index for viewer '{0}': {1}".format(b.app.id,a));var c=b.app.getResource(b.libraryId,"language-offline-bundle-index-error");b.app.commandRegistry.command("Alert").execute(c.format(a))})}},_addBundleResources:function(){function a(a){d.app.trace.trace("Offline resource '{0}' saved.".format(a));
c()}function b(a,b){b&&a.code&&!g.hasOwnProperty(a.code)&&(d.app.trace.warning("Failed to save offline resource '{0}': {1}.".format(b,a)),g[a.code]=true,a.code==22&&window.localStorage&&window.localStorage.remainingSpace&&d.app.trace.warning("Local storage has {0} bytes remaining.".format(window.localStorage.remainingSpace)));f=false;d.index&&d._index.entries&&d._index.entries.hasOwnProperty(b)&&delete d._index.entries[b];c()}function c(){--e;if(e<=0){d._resourcesToAdd=[];if(f)var a=d.app.getResource(d.libraryId,
"language-offline-provisioning-succeeded"),b=d.app.getResource(d.libraryId,"language-offline-provisioning-succeeded-title");else b=d.app.getResource(d.libraryId,"language-offline-provisioning-failed-title"),a=g.hasOwnProperty(22)?d.app.getResource(d.libraryId,"language-offline-provisioning-failed-code22"):d.app.getResource(d.libraryId,"language-offline-provisioning-failed");d.app.commandRegistry.command("Alert").execute(a,b);d._loadResourceIndex();d._loadRoutingRules()}}var d=this,e=0,f=true,g={},
h;for(h in this._resourcesToAdd)if(this._resourcesToAdd.hasOwnProperty(h)){e+=1;var j=this._resourcesToAdd[h],k=j.value;typeof k==="object"&&(k=dojo.toJson(k));this.app.store.set(j.key.replace("://","___PROTO___").replace("//","/").replace("___PROTO___","://"),k,a,b,j.isShared)}},_provision:function(a){var b=this;dojo.xhrGet({url:a,load:function(c){var c=dojo.fromJson(c),d="Resources/Bundled/",d="";b._moduleConfig.bundlePath?d=b._moduleConfig.bundlePath:(d=a.split("/"),d=d.slice(0,d.length-1).join("/")+
"/");d=d+c[0].bundleId+".json.js";b._downloadBundle(d)},error:function(c){b.app.trace.error("There was an error fetching the bundle manifest for offline use: {0}, status: {1}".format(a,c.status));var d=null,d=c.status==500?b.app.getResource(b.libraryId,"language-offline-viewer-provisioning-failed-status500"):c.status==404?b.app.getResource(b.libraryId,"language-offline-viewer-provisioning-failed-status404"):c.status==403?b.app.getResource(b.libraryId,"language-offline-viewer-provisioning-failed-status403"):
b.app.getResource(b.libraryId,"language-offline-viewer-provisioning-failed");b.app.commandRegistry.command("Alert").execute(d)},preventCache:true})},_loadResourceIndex:function(){var a=this;if(!this._isLoadingResourceIndex)this._isLoadingResourceIndex=true,this.app.store.get("__index",function(b){if(b)try{a._index=new geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceIndex(dojo.fromJson(b))}catch(c){a.app.trace.error("Could not load offline resource index, an error occurred while parsing the resource index: {0}".format(c)),
a._index=new geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceIndex}else a._index=new geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceIndex;a.app.commandRegistry.command("TakeApplicationOnline").raiseCanExecuteChanged();a.app.commandRegistry.command("TakeApplicationOffline").raiseCanExecuteChanged();a._isLoadingResourceIndex=false},function(b){a._isOnline.get()===false&&(a.app.trace.warning("An error occurred while attempting to fetch offline request routing rules: {0}".format(b)),
a.app.commandRegistry.command("TakeApplicationOnline").raiseCanExecuteChanged(),a.app.commandRegistry.command("TakeApplicationOffline").raiseCanExecuteChanged());a._isLoadingResourceIndex=false})},onReady:function(){this._ready=true},_loadConfiguredRoutingRules:function(){if(this._moduleConfig.hasOwnProperty("rules"))for(var a=0;a<this._moduleConfig.rules.length;++a){var b=new geocortex.essentialsHtmlViewer.mapping.modules.offline.RoutingRule(this._moduleConfig.rules[a]);this._rules.push(b);b.handlerName===
"Rewrite"&&this._rewriteRules.push(b)}},_loadRoutingRules:function(){var a=this;this.app.store.get("__routing",function(b){if(b){for(var b=dojo.fromJson(b),c=0;c<b.length;++c){var d=new geocortex.essentialsHtmlViewer.mapping.modules.offline.RoutingRule(b[c]);a._rules.push(d);b[c].handlerName==="Rewrite"&&a._rewriteRules.push(d)}a.onReady()}else a.app.trace.debug("No offline request routing table was found.")},function(b){a._isOnline.get()===false&&a.app.trace.warning("An error occurred while attempting to fetch offline request routing rules: {0}".format(b))})},
_stripOutProxy:function(a){if(!a)return null;var b=this.app.configuration.proxyUri;if(a.indexOf(b)>=0){if(a.replace)return a.replace(b,"")}else return a;return null},_handleOfflineRequest:function(a,b){function c(){for(var c=new geocortex.essentialsHtmlViewer.mapping.modules.offline.RequestContext(a,d,b),g=e._stripOutProxy(c.url),h=false,j=0;j<this._rules.length;++j){var k=this._rules[j],l=RegExp(k.pattern).exec(g);if(l&&l.length&&l.length>0){var o=this._handlers[k.handlerName];if(o){h=true;try{if(o(c,
k,l)===false)h=false;else break}catch(q){this.app.trace.warning("Offline request failed for resource '{0}': {1}".format(a.url,q));d.errback(Error("Offline request failed"));break}}else this.app.trace.warning("Offline request failed for resource '{0}': matching rule found without handler".format(a.url))}}if(!h)if(this._isOnline.get()===true)return this._hooked_esri_request(a,b);else this.app.trace.warning("Offline request failed for resource '{0}': no handling rule was found.".format(a.url)),d.errback(Error("Offline request failed."))}
var d=new dojo.Deferred,e=this;this._ready?setTimeout(function(){c.apply(e,[])},1):this._onReadyConnect=dojo.connect(this,"onReady",function(){c.apply(this,[])});return d},_failRequest:function(a){a.dfd.reject()},_rewriteRequest:function(a,b,c){a=b.parameters.newUrl||b.parameters[0].value;return a=a.format.apply(a,c)},_serveNonSharedResource:function(a,b,c){return this._serveResourceImpl(a,b,c,false)},_serveSharedResource:function(a,b,c){return this._serveResourceImpl(a,b,c,true)},_serveResourceImpl:function(a,
b,c,d){var e=this;if(!b.parameters)return false;var f=b.parameters.key||b.parameters[0].value;if(!f)return false;f=f.format.apply(f,c);this.app.store.get(f,function(b){if(b){var c=e._index.entries[f];c?(c.isEncoded===true&&(b=geocortex.framework.utils.base64Decode(b)),c.isJson===true&&(b=dojo.fromJson(b)),setTimeout(function(){a.dfd.resolve.apply(a.dfd,[b])},10)):(e.app.trace.warning("Missing metadata for offline resource '{0}'.".format(f)),a.dfd.reject.apply(a.dfd,["Missing offline resource '{0}'.".format(f)]))}else e.app.trace.warning("Missing offline resource '{0}'.".format(f)),
a.dfd.reject.apply(a.dfd,["Missing offline resource '{0}'.".format(f)])},function(a){e.app.trace.error("Error occurred fetching offline resource: {0}".format(a))},d);return true}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceEntry",null,{key:null,constructor:function(a){a?dojo.safeMixin(this,a):this.key=""}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.OfflineResourceIndex",null,{generated:null,entries:null,constructor:function(a){a?dojo.mixin(this,a):this.entries={}},addEntry:function(a){this.entries.push(a)},isEmpty:function(){if(!this.entries)return false;for(var a in this.entries)if(this.entries.hasOwnProperty(a))return false;return true}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.RequestContext",null,{constructor:function(a,b,c){a&&dojo.mixin(this,a);this.dfd=b||new dojo.Deferred;this.options=c||null},url:null,dfd:null,options:null,content:null,format:null,deepInitialize:null,callbackName:null,timeout:null,preventCache:null,handle:null,handleAs:null});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.RoutingRule",null,{constructor:function(a){a&&dojo.mixin(this,a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.ClearDataView",geocortex.framework.ui.ViewBase,{handleClickClear:function(){if(this.viewModel.option.get()){var a=this.viewModel.option.get();this.app.commandRegistry.command(a).canExecute(true)?this.app.commandRegistry.command(a).execute(true):(this.app.commandRegistry.command("Alert").execute(this.app.getResource(this.libraryId,"language-offline-data-cant-clear")),this.app.viewManager.deactivateView(this))}},handleClickCancel:function(){this.app.viewManager.deactivateView(this)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.ClearDataViewModel",geocortex.framework.ui.ViewModelBase,{options:null,option:null,initialize:function(){this.options=new ObservableCollection([{text:this.app.getResource(this.libraryId,"language-clear-storage-view-this-viewer"),command:"ClearStorageForApplication"},{text:this.app.getResource(this.libraryId,"language-clear-storage-view-entire-domain"),command:"ClearStorageForDomain"}]);this.option=new Observable(this.options.getAt(0).command)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.indicator.ConnectionStatusIndicatorView",geocortex.framework.ui.ViewBase,{_statusHandle:null,attach:function(a){if(!a)throw Error("Expected viewModel");this.auto(a.canSwitchState,this,function(a){a?this.app.viewManager.activateView(this):this.app.viewManager.deactivateView(this)});this.inherited(arguments);a.canSwitchState.pulse()},handleClickToggleConnectivity:function(){if(this._statusHandle)this.app.commandRegistry.command("RemoveStatus").execute(this._statusHandle),
this._statusHandle=null;var a=this.app.isOffline.get();this.app.isOffline.set(!a);this.app.commandRegistry.command("TakeApplicationOffline").raiseCanExecuteChanged();this.app.commandRegistry.command("TakeApplicationOnline").raiseCanExecuteChanged();a={text:this.app.getResource(this.libraryId,a?"language-app-gone-online":"language-app-gone-offline")};this.app.commandRegistry.command("AddStatus").execute(a);this._statusHandle=a.id}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.offline.indicator.ConnectionStatusIndicatorViewModel",geocortex.framework.ui.ViewModelBase,{canSwitchState:null,constructor:function(a){this.isOffline=a.isOffline;this.canSwitchState=new Observable(false)},initialize:function(){this.app.commandRegistry.command("TakeApplicationOnline").canExecuteChanged.subscribe(this,this._handleCanExecuteMaybeChanged);this.app.commandRegistry.command("TakeApplicationOffline").canExecuteChanged.subscribe(this,
this._handleCanExecuteMaybeChanged);this._handleCanExecuteMaybeChanged()},_handleCanExecuteMaybeChanged:function(){this.canSwitchState.set(this.isOffline.get()?this.app.commandRegistry.command("TakeApplicationOnline").canExecute():this.app.commandRegistry.command("TakeApplicationOffline").canExecute())}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.printing.PrintingModule",geocortex.framework.application.ModuleBase,{});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.printing.PrintingView",geocortex.framework.ui.ViewBase,{constructor:function(){this.inherited(arguments);var a=this;this.app.commandRegistry.command("PrintMap").register(this,function(){a.app.viewManager.activateView(a)},function(){return this.app.site&&this.app.site.hasPrintTemplates?true:false})},handleTemplateSelectionChanged:function(){this.viewModel.updatePrintTemplate()},handlePrintClick:function(){this.viewModel.performPrint()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.printing.PrintingViewModel",geocortex.framework.ui.ViewModelBase,{printTemplates:null,outputFormats:null,resolutions:null,scales:null,textFields:null,selectedTemplate:null,selectedScale:null,selectedResolution:null,selectedFormat:null,isPrinting:null,constructor:function(){this.inherited(arguments);this.printTemplates=new ObservableCollection;this.outputFormats=new ObservableCollection;this.resolutions=new ObservableCollection;this.textFields=
new ObservableCollection;this.scales=new ObservableCollection;this.selectedTemplate=new Observable(null);this.selectedScale=new Observable(null);this.selectedResolution=new Observable(null);this.textFied=new Observable(null);this.selectedFormat=new Observable(null);this.isMapLoaded=new Observable(false);this.isPrinting=new Observable(false);this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this.serviceLayersLoaded)},serviceLayersLoaded:function(){this.app.site&&this.app.site.hasPrintTemplates&&
(this.printTemplates.addItems(this.app.site.printTemplates),this.selectedTemplate.set(this.printTemplates.getAt(0)),this.updatePrintTemplate());this.isMapLoaded.set(true);this.app.commandRegistry.command("PrintMap").raiseCanExecuteChanged()},performPrint:function(){this.isPrinting.set(true);var a=this.selectedTemplate.get(),b=new geocortex.essentials.ReportParameters;b.outputFormat=this.selectedFormat.get();b.resolution=this.selectedResolution.get();b.scale=this.selectedScale.get();b.fields=a.textFields;
this.app!=void 0&&this.app.map!=null&&b.populateMapGraphicsLayers(this.app.map);var c=this;a.print(b,function(a){window.open(a.href);c.isPrinting.set(false)},function(a){alert("Print error: "+a.message);c.isPrinting.set(false)})},updatePrintTemplate:function(){var a=this.selectedTemplate.get();if(a&&(this.outputFormats.clear(),a.supportedOutputFormats&&this.outputFormats.addItems(a.supportedOutputFormats),this.resolutions.clear(),a.supportedResolutions&&this.resolutions.addItems(a.supportedResolutions),
this.scales.clear(),this.scales.addItem({displayName:this.app.getResource(this.libraryId,"language-printing-current-scale"),scale:""}),a.supportedMapScales&&this.scales.addItems(a.supportedMapScales),this.textFields.clear(),a.textFields&&a.textFields.length>0)){var b=[];for(i=0;i<a.textFields.length;i++)b.push(Observable.makeBindableProxy(a.textFields[i]));this.textFields.addItems(b)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.prompt.PromptModule",geocortex.framework.application.ModuleBase,{promptRegion:"ModalWindowRegion",oldPrompt:null,overrideNativePrompt:true,initialize:function(a){function b(a,b,f,g){if(!g)return c.oldPrompt(a,f);try{var h=c.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.prompt.PromptView",markup:"Mapping/modules/Prompt/PromptView.html",visible:false,region:c.promptRegion,libraryId:c.libraryId}),b={title:a,
description:b,defaultText:f,callback:g};b.promptText=new Observable(f);h.attach(b);h.title.set(a);c.app.viewManager.activateView(h)}catch(j){c.app.trace.error("Error: Could not display prompt: "+j)}}this.inherited(arguments);this.promptRegion=a.promptRegion;this.oldPrompt=window.prompt;this.overrideNativePrompt=a.overrideNativePrompt;var c=this;if(this.overrideNativePrompt)window.prompt=b;this.app.commandRegistry.command("Prompt").register(this,function(a,c,f,g){a||(a=this.app.getResource(this.libraryId,
"language-prompt-default-title"));g||(g=function(){});b(a,c,f,g)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.prompt.PromptView",geocortex.framework.ui.ViewBase,{hasSubscribed:false,promptResult:null,attach:function(a){this.inherited(arguments);this.promptResult=null;this.title.set(a.promptTitle);if(this.okButtonElement)try{this.okButtonElement.focus()}catch(b){}if(!this.hasSubscribed)this.hasSubscribed=true,this.app.eventRegistry.event("ViewContainerViewClosedEvent").subscribe(this,function(a){a&&a.viewId===this.id&&this._deactivateForUser()})},
handleClickOk:function(){if(this.viewModel)this.promptResult=this.viewModel.promptText.get();this._deactivateForUser();return false},handleClickCancel:function(){this.promptResult=null;this._deactivateForUser();return false},_deactivateForUser:function(){this.app.viewManager.deactivateView(this);this.app.viewManager.destroyView(this);this.viewModel&&this.viewModel.callback&&this.viewModel.callback(this.promptResult)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.results.FeatureSetManagerView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.FeatureSetManagerView",geocortex.framework.ui.ViewBase,{activated:function(){this.inherited(arguments);this.title.set("Feature Set Collection Manager")}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.FeatureSetManagerViewModel",geocortex.framework.ui.ViewModelBase,{featureSetCollections:null,constructor:function(){this.featureSetCollections=this.app.featureSetManager.featureSetCollections},initialize:function(a){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.FlatResultsViewModel",geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewModel,{results:null,presentableResults:null,resultsPage:null,pageControlsEnabled:null,resultsList:null,pagingControlClassName:null,_featureSetsBindingToken:null,_boundFeatureSetCollection:null,_featureViewMap:null,constructor:function(){this._featureViewMap={};this.results=new geocortex.framework.ui.ObservableCollectionAggregator(new ObservableCollection);
this.presentableResults=new geocortex.framework.ui.PresentableCollection(this.results);this.resultsPage=this.presentableResults.items;this.pageControlsEnabled=new Observable(false);this.resultsList=new Observable("results-list");this.pagingControlClassName=new Observable("paging-control no-pages");this.presentableResults.pageSize.set(this.defaultPageSize);this.defaultIsPaged!=this.presentableResults.isPaginated.get()&&this.presentableResults.isPaginated.set(this.defaultIsPaged);this.resultsPage.bind(this,
this.handlePageResultsChange);this.presentableResults.numberOfItems.bind(this,function(a){a>0?this.pagingControlClassName.set("paging-control has-pages"):this.pagingControlClassName.set("paging-control no-pages");this.updateHeaderText(a)});this.app.commandRegistry.command("ShowResultsList").register(this,this.showResultsList)},subscribeEvents:function(){this.inherited(arguments);this.app.eventRegistry.event("FeatureChangedEvent").subscribe(this,this.handleFeatureChanged)},handleCollectionChanged:function(a){this.inherited(arguments);
if(a&&a.featureSets){var b=this.results.getCollectionSource();b.clear();for(var c=a.featureSets.length(),d=0;d<c;d++)b.addItem(a.featureSets.getAt(d).features);this._featureViewMap={};this.presentableResults.currPageNumber.set(1);this.unbindFeatureSet();this._featureSetsBindingToken=a.featureSets.bind(this,this.handleFeatureSetsChanged);this._boundFeatureSetCollection=a}},handleFeatureSetsChanged:function(a){var b=this.results.getCollectionSource();if(a.type==="append")for(var a=a.sender.getRange(a.rangeStart,
a.rangeEnd),c=0;c<a.length;c++)b.addItem(a[c].features);else a.type==="clear"&&(b.clear(),this.results.bindingEvent.publish(a))},handlePageResultsChange:function(a){a.type==="clear"?this._featureViewMap={}:a.type==="remove"&&delete this._featureViewMap[a.sender.getAt(a.rangeStart).token]},handleFeatureChanged:function(a){if(this._featureViewMap.hasOwnProperty(a.token)){var b=this._featureViewMap[a.token];b.destroyBindings();b.root.innerHTML=b.descriptionGet(a);b.attach(a)}},showResultsList:function(a){if((a=
typeof a==="string"?this.app.featureSetManager.getCollectionById(a):a)&&a!==this.featureSetCollection.get())this.unbindFeatureSet(),this.featureSetCollection.set(a);this.headerText.set(a.displayName.get()?a.displayName.get():this.app.getResource(this.libraryId,"language-common-results"))},getFeatureView:function(a){return this._featureViewMap[a]},setFeatureView:function(a,b){this._featureViewMap[a]=b},unbindFeatureSet:function(){if(this._featureSetsBindingToken&&this._boundFeatureSetCollection)this._boundFeatureSetCollection.featureSets.unbind(this._featureSetsBindingToken),
this._boundFeatureSetCollection=this._featureSetsBindingToken=null},_pulseFeatureSetCollection:function(){var a=this.presentableResults.currPageNumber.get();this.inherited(arguments);this.presentableResults.currPageNumber.set(a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel",null,{displayName:null,sortState:null,sortClass:null,_sharedState:null,_sortingPredicate:null,_reverseSortingPredicate:null,constructor:function(a,b,c,d){this.displayName=b.displayName;this.sortState=new Observable(0);this.sortClass=new Observable("");this._sharedState=a;c==="DateTime"?(this._sortingPredicate=this.buildDateSortingFunction(d),this._reverseSortingPredicate=this.buildReverseDateSortingFunction(d)):
(this._sortingPredicate=this.buildSortingFunction(d),this._reverseSortingPredicate=this.buildReverseSortingFunction(d));this.sortClass.syncTransform(this.sortState,function(b){switch(b){case 1:return a.sortedClass;case 2:return a.reverseSortedClass}return a.unsortedClass});this.sortState.bind(this,this.onSortStateChange)},buildSortingFunction:function(a){return function(b,c){return geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.collator(b.attributes.getAt(a).presentableValue.get(),
c.attributes.getAt(a).presentableValue.get())}},buildReverseSortingFunction:function(a){return function(b,c){return geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.collator(c.attributes.getAt(a).presentableValue.get(),b.attributes.getAt(a).presentableValue.get())}},buildDateSortingFunction:function(a){return function(b,c){var d=b.attributes.getAt(a).value.get(),e=c.attributes.getAt(a).value.get(),f=new Date(d),g=new Date(e),h=f!="Invalid Date";return h!==(g!=
"Invalid Date")?h?-1:1:h?f.getTime()-g.getTime():geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.collator(d,e)}},buildReverseDateSortingFunction:function(a){return function(b,c){var d=c.attributes.getAt(a).value.get(),e=b.attributes.getAt(a).value.get(),f=new Date(d),g=new Date(e),h=f!="Invalid Date";return h!==(g!="Invalid Date")?h?-1:1:h?f.getTime()-g.getTime():geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.collator(d,
e)}},onSortStateChange:function(a){if(!this._sharedState.ignoreStateChange){if(a<0||a>2)throw Error("Illegal column sort state: "+a);if(a==0){if(this._sharedState.lastSortedColumn!=this)throw Error("Column sort state out of sync");this._sharedState.lastSortedColumn=null;this._sharedState.presentableResults.sortingPredicate=null;this._sharedState.presentableResults.unsortCollection()}else{if(this._sharedState.lastSortedColumn!=null&&this._sharedState.lastSortedColumn!=this)this._sharedState.ignoreStateChange=
true,this._sharedState.lastSortedColumn.sortState.set(0),this._sharedState.ignoreStateChange=false;this._sharedState.lastSortedColumn=this;if(a==1)this._sharedState.presentableResults.sortingPredicate=this._sortingPredicate;else if(a==2)this._sharedState.presentableResults.sortingPredicate=this._reverseSortingPredicate;else throw Error("ERROR 654B: Detected attempt to use this program in an unauthorized reality.  Releasing the chlorine gas...");this._sharedState.presentableResults.sortCollection()}}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.SharedState",null,{ignoreStateChange:null,lastSortedColumn:null,presentableResults:null,unsortedClass:null,sortedClass:null,reverseSortedClass:null,constructor:function(a,b,c,d){this.presentableResults=a;this.unsortedClass=b;this.sortedClass=c;this.reverseSortedClass=d;this.reset()},reset:function(){this.ignoreStateChange=false;this.lastSortedColumn=null}});
geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.manualCollator=function(a,b){return!isNaN(a)&&!isNaN(b)?+a-b:a<b?-1:a>b?1:0};geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.collator=typeof Intl=="object"&&typeof Intl.Collator=="function"?(new Intl.Collator(void 0,{numeric:true})).compare:geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.manualCollator;
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsFeatureActionsView",geocortex.framework.ui.ViewBase,{handleMenuItemClick:function(a,b,c){c.execute(this.viewModel.currentFeature.get())},handleGetDescription:function(a,b,c){b.title=c.description.get()}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsListView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsListView",geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewBase,{_scrollTop:null,constructor:function(){this.featureClickedEventName="ResultsListFeatureClickedEvent";this.featurePressedEventName="ResultsListFeaturePressedEvent";this._scrollTop=0;this.app.commandRegistry.command("ShowResultsList").register(this,this.showResultsList)},activated:function(){this.inherited(arguments);if(this.resultsList){var a=
this.resultsList;setTimeout(function(){dojo.style(a,{display:"block"})},1)}},attach:function(a){this.title.sync(a.headerText);this.isBusy.sync(a.isBusy);this.configuration.isPaged!=void 0&&a.presentableResults.isPaginated.set(this.configuration.isPaged);this.configuration.pageSize&&a.presentableResults.pageSize.set(this.configuration.pageSize);a.presentableResults.currPageNumber.bindingEvent.subscribe(this,function(){this.scrollViewTop()});this.scrollViewTop(this._scrollTop);this.inherited(arguments)},
showResultsList:function(){this.app.viewManager.activateView(this)},handleShowTableView:function(){this.viewModel.unbindFeatureSet();this.app.commandRegistry.command("FSMCollectionSetCommand").execute(this.viewModel.featureSetCollection.get().sourceName,"ShowResultsTable");this.app.commandRegistry.command("ShowResultsTable").execute(this.viewModel.featureSetCollection.get());this.viewModel.featureSetCollection.set(this.viewModel._getDummyFeatureSetCollection());this.app.viewManager.deactivateView(this);
this.app.commandRegistry.command("CloseDataFrame").execute()},handlePageFirst:function(){this.viewModel.presentableResults.currPageNumber.get()>1&&this.viewModel.presentableResults.currPageNumber.set(1)},handlePagePrev:function(){this.viewModel.presentableResults.currPageNumber.get()>1&&this.viewModel.presentableResults.currPageNumber.set(this.viewModel.presentableResults.currPageNumber.get()-1)},handlePageNext:function(){this.viewModel.presentableResults.lastPageNumber.get()>this.viewModel.presentableResults.currPageNumber.get()&&
this.viewModel.presentableResults.currPageNumber.set(this.viewModel.presentableResults.currPageNumber.get()+1)},handlePageLast:function(){this.viewModel.presentableResults.currPageNumber.get()<this.viewModel.presentableResults.lastPageNumber.get()&&this.viewModel.presentableResults.currPageNumber.set(this.viewModel.presentableResults.lastPageNumber.get())},handleScrollChange:function(a,b,c){if(c)this._scrollTop=b.scrollTop},getDescription:function(a,b,c){b.title=c.description.get()},scrollViewTop:function(a){if(this.scrollContainerElement)this.scrollContainerElement.scrollTop=
a||0},resolveWidget:function(a,b){this.inherited(arguments);if(a==="GetDescription"){var c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureDescriptionPresenterView;c.app=this.app;c.libraryId=this.libraryId;c.root=dojo.create("div");c.root.className="feature-description";c.root.innerHTML=c.descriptionGet(b);c.attach(b);this.viewModel.setFeatureView(b.token,c);return c}}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsModule",geocortex.framework.application.ModuleBase,{resultMappings:null,_lastCommand:null,initialize:function(a){this.inherited(arguments);if(a)this.resultMappings=a.resultMappings;this.wireUpResultMapping();this.wireUpConfiguredEventHandlers(a)},wireUpResultMapping:function(){this.app.eventRegistry.event("FSMCollectionOpenedEvent").subscribe(this,this.fsmCollectionOpenedHandler);this.app.commandRegistry.command("FSMCollectionSetCommand").register(this,
this.fsmCollectionSetCommand)},fsmCollectionOpenedHandler:function(a){a=a.featureSetCollection;if(this.resultMappings){var b=this.resultMappings[a.sourceName];if(b)for(var c=0;c<b.length;c++){var d=b[c];this.app.commandRegistry.command(d).execute(a.id);this._lastCommand=d}}},fsmCollectionSetCommand:function(a,b){this.resultMappings[a]=[b]},wireUpConfiguredEventHandlers:function(a){if(a.eventMappings)for(var b in a.eventMappings)for(var c in a.eventMappings[b])this.wireUpConfiguredEventHandler(b,c,
a)},wireUpConfiguredEventHandler:function(a,b,c){var d=c.eventMappings[a][b];this.app.eventRegistry.event(a).subscribe(this,function(a){this.app.commandRegistry.command(d).execute(a)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsTableView",geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewBase,{constructor:function(){this.featureClickedEventName="ResultsTableFeatureClickedEvent";this.featurePressedEventName="ResultsTableFeaturePressedEvent";this.app.commandRegistry.command("ShowResultsTable").register(this,this.showResultsTable)},attach:function(a){this.title.sync(a.headerText);this.isBusy.sync(a.isBusy);this.configuration.isPaged!=
void 0&&a.presentableResults.isPaginated.set(this.configuration.isPaged);this.configuration.pageSize&&a.presentableResults.pageSize.set(this.configuration.pageSize);a.presentableResults.currPageNumber.bindingEvent.subscribe(this,function(){var a=this.viewModel.curFeatureSet.get();scrollPos=a?this.viewModel.currScrollPosWithinTab[a.uniqueId]||0:0;this.scrollView(scrollPos)});this.inherited(arguments)},showResultsTable:function(){this.app.viewManager.activateView(this)},handleTabClick:function(a,b,
c){if(this.scrollContainerElement)this.viewModel.currScrollPosWithinTab[this.viewModel.curFeatureSet.get().uniqueId]=this.scrollContainerElement.scrollTop;if((a=dojo.filter(this.viewModel.featureSetCollection.get().featureSets.get(),function(a){return a.uniqueId===c.uniqueId}))&&a[0])this.viewModel.setCurrentSelectedFeatureSet(a[0]),this.viewModel.setCurrentPageWithinTab(c.uniqueId)},handleShowListView:function(){this.viewModel.unbindFeatureSet();this.app.commandRegistry.command("FSMCollectionSetCommand").execute(this.viewModel.featureSetCollection.get().sourceName,
"ShowResultsList");this.app.commandRegistry.command("ShowResultsList").execute(this.viewModel.featureSetCollection.get());this.viewModel.featureSetCollection.set(this.viewModel._emptyFeatureSetCollection);this.app.viewManager.deactivateView(this)},handlePageFirst:function(){this.viewModel.presentableResults.currPageNumber.get()>1&&(this.viewModel.updateCurrentPageAndScrollPosWithinTab(1,0),this.viewModel.presentableResults.currPageNumber.set(1))},handlePagePrev:function(){if(this.viewModel.presentableResults.currPageNumber.get()>
1){var a=this.viewModel.presentableResults.currPageNumber.get()-1;this.viewModel.updateCurrentPageAndScrollPosWithinTab(a,0);this.viewModel.presentableResults.currPageNumber.set(a)}},handlePageNext:function(){if(this.viewModel.presentableResults.lastPageNumber.get()>this.viewModel.presentableResults.currPageNumber.get()){var a=this.viewModel.presentableResults.currPageNumber.get()+1;this.viewModel.updateCurrentPageAndScrollPosWithinTab(a,0);this.viewModel.presentableResults.currPageNumber.set(a)}},
handlePageLast:function(){if(this.viewModel.presentableResults.currPageNumber.get()<this.viewModel.presentableResults.lastPageNumber.get()){var a=this.viewModel.presentableResults.lastPageNumber.get();this.viewModel.updateCurrentPageAndScrollPosWithinTab(a,0);this.viewModel.presentableResults.currPageNumber.set(a)}},handleClickFeature:function(a,b,c){this.app.eventRegistry.event("ResultsTableFeatureClickedEvent").publish(c)},handleColumnHeadClick:function(a,b,c){c.sortState.set((c.sortState.get()+
1)%3)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.results.TabbedResultsViewModel",geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsViewModel,{curFeatureSet:null,currPageWithinTab:null,currScrollPosWithinTab:null,tabControlsEnabled:null,presentableResults:null,resultsPage:null,pageControlsEnabled:null,resultsTable:null,columnSharedState:null,columnHeaders:null,_emptyFeatureSetCollection:new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSetCollection,_emptyFeatureSet:new geocortex.essentialsHtmlViewer.mapping.infrastructure.FeatureSet,
_featureSetsBindingToken:null,constructor:function(){this.curFeatureSet=new Observable(null);this.currPageWithinTab={};this.currScrollPosWithinTab={};this.tabControlsEnabled=new Observable(false);this.presentableResults=new geocortex.framework.ui.PresentableCollection;this.resultsPage=this.presentableResults.items;this.pageControlsEnabled=new Observable(false);this.resultsTable=new Observable("results-table");this.columnHeaders=new ObservableCollection([]);this.presentableResults.pageSize.set(this.defaultPageSize);
this.defaultIsPaged!=this.presentableResults.isPaginated.get()&&this.presentableResults.isPaginated.set(this.defaultIsPaged);this.curFeatureSet.bind(this,this.handleCurrentFeatureSetChanged);this.presentableResults.numberOfItems.bind(this,this.updateHeaderText);this.app.commandRegistry.command("ShowResultsTable").register(this,this.showResultsTable)},handleCollectionChanged:function(a){this.inherited(arguments);if(a&&a.featureSets&&a.featureSets.get()){a.featureSets.get().length>1?this.tabControlsEnabled.set(true):
this.tabControlsEnabled.set(false);this.presentableResults.currPageNumber.set(1);var b;b=a.featureSets.getAt(0)?a.featureSets.getAt(0):null;if(b!==this.curFeatureSet.get())this.setCurrentSelectedFeatureSet(b),this.currPageWithinTab={},this.currScrollPosWithinTab={};this._featureSetsBindingToken=a.featureSets.bind(this,this.handleFeatureSetsChanged)}},handleCurrentFeatureSetChanged:function(a){this.presentableResults.sortingPredicate=null;this.presentableResults.attachToCollection(a.features);this.buildColumnHeaders(a)},
handleFeatureSetsChanged:function(a){a.type==="append"&&(a.rangeStart===0&&this.setCurrentSelectedFeatureSet(a.sender.value[0]),a.sender.value.length>1?this.tabControlsEnabled.set(true):this.tabControlsEnabled.set(false))},showResultsTable:function(a){if(a=typeof a==="string"?this.app.featureSetManager.getCollectionById(a):a){if(a!==this.featureSetCollection||!this._featureSetsBindingToken)this.unbindFeatureSet(),this.featureSetCollection.set(a);this.headerText.set(a.displayName.get()?a.displayName.get():
this.app.getResource(this.libraryId,"language-common-results"))}this.currPageWithinTab={};this.currScrollPosWithinTab={}},setCurrentSelectedFeatureSet:function(a){this.curFeatureSet.get()&&this.curFeatureSet.get().isSelectedInCollection.set(false);a?(a.isSelectedInCollection.set(true),this.curFeatureSet.set(a)):this.curFeatureSet.set(this._emptyFeatureSet)},unbindFeatureSet:function(){this._featureSetsBindingToken&&this.featureSetCollection.get()&&this.featureSetCollection.get().featureSets.unbind(this._featureSetsBindingToken);
this._featureSetsBindingToken=null},buildColumnHeaders:function(a){this.columnHeaders.clear();this.columnSharedState?this.columnSharedState.reset():this.columnSharedState=new geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel.SharedState(this.presentableResults,"sort","sort-down","sort-up");var b,c={};if(a.layer&&a.layer.fields)for(b=0;b<a.layer.fields.length;b++){var d=a.layer.fields[b];c[d.name]=d.dataType}d=a.attributes.length();for(b=0;b<d;b++){var e=a.attributes.getAt(b);
(!e.visible||e.visible.get())&&this.columnHeaders.addItem(new geocortex.essentialsHtmlViewer.mapping.modules.results.ResultsAttributeHeaderViewModel(this.columnSharedState,e,c[e.name.get()],b))}},setCurrentPageWithinTab:function(a){this.currPageWithinTab[a]?this.currPageWithinTab[a]!==this.presentableResults.currPageNumber.get()&&this.presentableResults.currPageNumber.set(this.currPageWithinTab[a]):this.currPageWithinTab[a]=this.presentableResults.currPageNumber.get()},updateCurrentPageAndScrollPosWithinTab:function(a,
b){this.currScrollPosWithinTab[this.curFeatureSet.get().uniqueId]=b;this.currPageWithinTab[this.curFeatureSet.get().uniqueId]=a}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.search.ArcGisGeocodeSearchProvider",geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProviderBase,{constructor:function(){this.name="ArcGIS Geocode";this.description="Search provider for the ArcGIS Geocode Service.";this.isEnabled=true;this._searchCancelState={};this.iconUri="Resources/Images/Icons/pin-blue-32.png";this.singleLineField=null;this.defaultZoomScale=8E3;this.minimumScore=70},_intSearchUniqueID:0,_currentSearchID:null,
_searchCancelState:null,_geocoder:null,_offlineSwitchToken:null,initialize:function(a){this.inherited(arguments);if(a&&a.url)this.locatorUrl=a.url;if(a&&a.iconUri)this.iconUri=a.iconUri;if(a&&a.defaultZoomScale)this.defaultZoomScale=a.defaultZoomScale;if(a&&a.singleLineField)this.singleLineField=a.singleLineField;if(a&&a.minimumScore)this.minimumScore=a.minimumScore;!this.singleLineField&&this.locatorUrl&&(this.app.site&&this.app.site.isInitialized?this._loadGeocodeDefinition():this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
function(){this._loadGeocodeDefinition()}))},_loadGeocodeDefinition:function(){var a=this;this.app.isOffline.get()?this._offlineSwitchToken=this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,function(){a.app.eventRegistry.event("ApplicationOnlineEvent").unsubscribe(a._offlineSwitchToken);a._loadGeocodeDefinition()}):!this.singleLineField&&this.locatorUrl&&esri.request({url:this.locatorUrl+"?f=json"}).then(function(b){b&&b.singleLineAddressField&&b.singleLineAddressField.name?a.singleLineField=
b.singleLineAddressField.name:a.app.trace.error("ArcGIS geocode server does not support single address line query: '"+a.locatorUrl+"'.")},function(b){a.app.trace.error("Unable to retrieve geocode server information at: '"+a.locatorUrl+"': "+b.message)})},_getGeocoder:function(){if(!this._geocoder&&(this._geocoder=new esri.tasks.Locator(this.locatorUrl),this.app&&this.app.map))this._geocoder.outSpatialReference=this.app.map.spatialReference;return this._geocoder},iconUri:null,locatorUrl:null,minimumScore:null,
defaultZoomScale:null,singleLineField:null,search:function(a,b){var c=this,d=this._intSearchUniqueID++;this._currentSearchID=d;this._searchCancelState[d]=false;var e=new geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProgressEventArgs;e.results=a;e.error=null;e.message="";var f=function(){c.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE};if(a)if(b)if(this.singleLineField){c.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING;
var g=this._getGeocoder(),h={};h[this.singleLineField]=b;var h={address:h},j=parseInt(this.minimumScore);if(!isNaN(j)&&(j<0||j>100))j=null;g.addressToLocations(h).then(function(b){if(!c._searchCancelState[d]&&b.length>0){var h=new FeatureSet;h.iconUri.set(c.iconUri);h.attributes.addItem(new FeatureAttribute("","address","address",c.app.getResource(c.libraryId,"language-search-arcgis-address")));h.attributes.addItem(new FeatureAttribute("","score","score",c.app.getResource(c.libraryId,"language-search-arcgis-score")));
h.displayName.set(c.name);dojo.forEach(b,function(a){if(isNaN(j)||a.score>=j){attributes={address:a.address,score:a.score};var b=new esri.Graphic(a.location,null,attributes),b=new Feature({graphic:b});b.label.set(a.address);b.zoomScale.set(c.defaultZoomScale);b.description.set("Score: "+a.score);h.addFeature(b)}});h.features.length()>0&&a.featureSets.addItem(h)}f();if(!c._searchCancelState[d])e.status=c.status,c.app.eventRegistry.event("SearchProgress").publish(e),c.app.eventRegistry.event("SearchInProgressEvent").publish(e)},
function(a){f();if(!c._searchCancelState[d])e.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR,e.error=a,e.message=a.message,c.app.eventRegistry.event("SearchProgress").publish(e),c.app.eventRegistry.event("SearchInProgressEvent").publish(e)})}else this.app.trace.error("ArcGIS Geocode Search Provider: Cannot perform search with a service that doesn't support single address line queries.");else this.app.trace.error("ArcGIS Geocode Search Provider: Cannot perform search without search text.");
else this.app.trace.error("ArcGIS Geocode Search Provider: Cannot perform search without a feature set collection.")},cancelSearch:function(){this.status===geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&(this._searchCancelState[this._currentSearchID]=true)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.search.BingGeocodeSearchProvider",geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProviderBase,{constructor:function(){this.name="Bing Geocode";this.description="Search provider for the Bing Geocode Service.";this.isEnabled=true;this._searchCancelState={};this.iconUri="Resources/Images/Icons/pin-red-32.png"},_intSearchUniqueID:0,_currentSearchID:null,_searchCancelState:null,_bingGeocoder:null,initialize:function(a){this.inherited(arguments);
if(a&&a.bingMapsKey)this.bingMapsKey=a.bingMapsKey;this.culture=a&&a.culture?a.culture:!this.culture&&this.app.locale?this.app.locale:"en-US";if(a&&a.iconUri)this.iconUri=a.iconUri},_getGeocoder:function(){if(!this._bingGeocoder)this._bingGeocoder=new esri.virtualearth.VEGeocoder({bingMapsKey:this.bingMapsKey,culture:this.culture});return this._bingGeocoder},iconUri:null,bingMapsKey:null,culture:null,search:function(a,b){var c=this,d=this._intSearchUniqueID++;this._currentSearchID=d;this._searchCancelState[d]=
false;var e=new geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProgressEventArgs;e.results=a;e.error=null;e.message="";var f=function(){c.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE};a?b?(c.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING,this._getGeocoder().addressToLocations(b).then(function(b){if(!c._searchCancelState[d]&&b.length>0){var h=new FeatureSet;h.iconUri.set(c.iconUri);h.attributes.addItem(new FeatureAttribute("",
"addressLine","addressLine",c.app.getResource(c.libraryId,"language-search-bing-address")));h.attributes.addItem(new FeatureAttribute("","adminDistrict","adminDistrict",c.app.getResource(c.libraryId,"language-search-bing-admin-district")));h.attributes.addItem(new FeatureAttribute("","countryRegion","countryRegion",c.app.getResource(c.libraryId,"language-search-bing-country")));h.attributes.addItem(new FeatureAttribute("","district","district",c.app.getResource(c.libraryId,"language-search-bing-district")));
h.attributes.addItem(new FeatureAttribute("","formattedAddress","formattedAddress",c.app.getResource(c.libraryId,"language-search-bing-formatted")));h.attributes.addItem(new FeatureAttribute("","locality","locality",c.app.getResource(c.libraryId,"language-search-bing-locality")));h.attributes.addItem(new FeatureAttribute("","postalCode","postalCode",c.app.getResource(c.libraryId,"language-search-bing-postal-code")));h.attributes.addItem(new FeatureAttribute("","postalTown","postalTown",c.app.getResource(c.libraryId,
"language-search-bing-postal-town")));h.displayName.set(c.name);dojo.forEach(b,function(a){attributes=dojo.fromJson(dojo.toJson(a.address));delete attributes.declaredClass;var b=new esri.Graphic(esri.geometry.geographicToWebMercator(a.location),null,attributes),b=new Feature({graphic:b});b.label.set(a.address.formattedAddress);b.description.set("Score: "+a.confidence);b.zoomExtent.set(esri.geometry.geographicToWebMercator(a.bestView));h.addFeature(b)});a.featureSets.addItem(h)}f();if(!c._searchCancelState[d])e.status=
c.status,c.app.eventRegistry.event("SearchProgress").publish(e),c.app.eventRegistry.event("SearchInProgressEvent").publish(e)},function(a){f();if(!c._searchCancelState[d]){var b="Bing Geocode error: "+a.message;e.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR;e.error=a;e.message=b;c.app.trace.error(b);c.app.eventRegistry.event("SearchProgress").publish(e);c.app.eventRegistry.event("SearchInProgressEvent").publish(e)}})):this.app.trace.error("Bing Geocode Search Provider: Cannot perform search without search text."):
this.app.trace.error("Bing Geocode Search Provider: Cannot perform search without a feature set collection.")},cancelSearch:function(){this.status===geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&(this._searchCancelState[this._currentSearchID]=true)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.search.LayerSearchProvider",geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProviderBase,{constructor:function(){this.name="Map Services";this.description="Search provider for searching a Geocortex site's map services.";this.isEnabled=true;this.exactMatch=false;this.returnGeometry=true;this._searchCancelState={}},_intSearchUniqueID:0,_currentSearchID:null,_searchCancelState:null,initialize:function(a){this.inherited(arguments);
if(a&&a.exactMatch)this.exactMatch=true;if(a&&a.hasOwnProperty("returnGeometry"))this.returnGeometry=a.returnGeometry},exactMatch:null,returnGeometry:null,search:function(a,b){var c=this,d=0,e=this._intSearchUniqueID++;this._currentSearchID=e;this._searchCancelState[e]=false;var f=new geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProgressEventArgs;f.results=a;f.error=null;f.message="";var g=function(){if(d==0)c.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.IDLE},
h=function(h){var j=[],k;for(k=0;k<h.fields.length;k++)h.fields[k].searchable&&j.push(h.fields[k].name);k=h.mapService.serviceLayer.url;h.mapService.mapServiceType===geocortex.essentials.MapServiceType.FEATURE&&(k=k.substr(0,k.lastIndexOf("/")),k=k.replace("/FeatureServer","/MapServer"));h.mapService&&h.mapService.serviceToken&&!/.*token=.*/.test(k)&&(k+=k.indexOf("?")>-1?"&token=":"?token=",k+=encodeURIComponent(h.mapService.serviceToken));k=new esri.tasks.FindTask(k);var l=parseInt(h.id),r=new esri.tasks.FindParameters;
r.returnGeometry=c.returnGeometry;r.layerIds=[l];r.contains=!c.exactMatch;r.searchFields=j;r.outSpatialReference=c.app.map.spatialReference;r.searchText=b;if(h.mapService.serviceLayer.layerDefinitions&&h.mapService.serviceLayer.layerDefinitions.length>l&&h.mapService.serviceLayer.layerDefinitions[l])r.layerDefinitions=[],r.layerDefinitions[l]=h.mapService.serviceLayer.layerDefinitions[l];f.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING;c.app.eventRegistry.event("SearchProgress").publish(f);
c.app.eventRegistry.event("SearchInProgressEvent").publish(f);d++;k.execute(r).then(function(b){if(!c._searchCancelState[e]){var j=new esri.tasks.FeatureSet;dojo.forEach(b,function(a){geocortex.essentialsHtmlViewer.mapping.infrastructure.GraphicUtils.sanitizeAttributeNames(a.feature,h);j.displayFieldName=a.displayFieldName;j.features.push(a.feature)});j.features.length>0&&(b=new FeatureSet({esriFeatureSet:j,layer:h}),b.resolveDataLinks(function(a){c.app.eventRegistry.event("FeatureChangedEvent").publish(a)}),
a.featureSets.addItem(b))}d--;g();if(!c._searchCancelState[e])f.status=c.status,c.app.eventRegistry.event("SearchProgress").publish(f),c.app.eventRegistry.event("SearchInProgressEvent").publish(f)},function(b){d--;g();c._searchCancelState[e]||c._handleError(b,a,h.displayName)})};if(a)if(!b||b.replace(" ","")=="")this._handleError(Error("Cannot perform search without search text."),a);else if(!this.app.site||!this.app.site.isInitialized)this._handleError(Error("The site needs to be initialized before a search is performed."),
a);else{var j=this.app.site.essentialsMap.filteredLayers(),k,l=[];for(k=0;k<j.length;k++)j[k].searchable&&this._layerTypeSupported(j[k])&&l.push(j[k]);if(l.length==0)this._handleWarning(Error("No layers to search. Make sure you mark some layers as searchable in your site."),a);else{c.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING;for(k=0;k<l.length;k++)h(l[k])}}else this._handleError(Error("Cannot perform search without a feature set collection."),a)},_handleWarning:function(a,
b,c){var c="Layer Search Provider"+(c?" ("+c+"): ":": ")+a.message,d=new geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProgressEventArgs;d.results=b;d.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR;d.error=a;d.message=c;this.app.trace.warning(c);this.app.eventRegistry.event("SearchProgress").publish(d);this.app.eventRegistry.event("SearchInProgressEvent").publish(d)},_handleError:function(a,b,c){var c="Layer Search Provider"+(c?" ("+c+"): ":": ")+
a.message,d=new geocortex.essentialsHtmlViewer.mapping.infrastructure.search.SearchProgressEventArgs;d.results=b;d.status=geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.ERROR;d.error=a;d.message=c;this.app.trace.error(c);this.app.eventRegistry.event("SearchProgress").publish(d);this.app.eventRegistry.event("SearchInProgressEvent").publish(d)},_layerTypeSupported:function(a){return!a||!a.mapService?false:a.mapService.mapServiceType===geocortex.essentials.MapServiceType.DYNAMIC?
true:a.mapService.mapServiceType===geocortex.essentials.MapServiceType.TILED?true:a.mapService.mapServiceType===geocortex.essentials.MapServiceType.FEATURE?true:false},cancelSearch:function(){this.status===geocortex.essentialsHtmlViewer.mapping.infrastructure.search.Status.SEARCHING&&(this._searchCancelState[this._currentSearchID]=true)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.search.SearchModule",geocortex.framework.application.ModuleBase,{app:null,autoLoadSiteGeocoders:null,constructor:function(a){this.app=a;this.autoLoadSiteGeocoders=true},initialize:function(a){var b=this;a&&a.searchProviders&&dojo.forEach(a.searchProviders,function(a){var d=dojo.getObject(a.type);if(d){d=new d(b.app);d.libraryId=b.libraryId;d.initialize(a.configuration);if(a.hasOwnProperty("enable"))d.isEnabled=a.enable;if(a.hasOwnProperty("name"))d.name=
a.name;if(a.hasOwnProperty("description"))d.description=a.description;b.app.commandRegistry.command("RegisterSearchProvider").execute(d)}});if(a&&a.hasOwnProperty("autoLoadSiteGeocoders")&&a.autoLoadSiteGeocoders==false)this.autoLoadSiteGeocoders=false;this.autoLoadSiteGeocoders&&(this.app.site&&this.app.site.isInitialized?this._loadGeocoders():this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){this._loadGeocoders()}))},_loadGeocoders:function(){if(this.app.site&&this.app.site.isInitialized&&
this.app.site.geocodingEndpoints&&this.app.site.geocodingEndpoints.length>0)for(var a=0;a<this.app.site.geocodingEndpoints.length;a++){var b=this.app.site.geocodingEndpoints[a];if(b.geocoderType==geocortex.essentials.GeocodingEndpointType.BING_GEOCODER){var c=new geocortex.essentialsHtmlViewer.mapping.modules.search.BingGeocodeSearchProvider(this.app);c.libraryId=this.libraryId;c.name=b.displayName;c.initialize({});c.bingMapsKey=b.bingProperties.bingMapsKey;if(b.bingProperties.culture)c.culture=b.bingProperties.culture;
this.app.commandRegistry.command("RegisterSearchProvider").execute(c)}else if(b.geocoderType==geocortex.essentials.GeocodingEndpointType.ARCGIS_GEOCODER)c=new geocortex.essentialsHtmlViewer.mapping.modules.search.ArcGisGeocodeSearchProvider(this.app),c.libraryId=this.libraryId,c.locatorUrl=b.geocoderUrl,c.name=b.displayName,c.minimumScore=70,c.initialize({}),this.app.commandRegistry.command("RegisterSearchProvider").execute(c)}}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.search.SearchView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.search.SearchView",geocortex.framework.ui.ViewBase,{constructor:function(){},handleKeyDown:function(a,b){if(!dojo.isIE||dojo.isIE<=8)if((a.which?a.which:a.keyCode)===13&&b.value)b.blur(),this.app.commandRegistry.command("Search").execute(b.value);return true},handleSearchClick:function(){var a=this.viewModel.searchText.get();a&&this.app.commandRegistry.command("Search").execute(a)},handleDoubleClick:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.search.SearchViewModel",geocortex.framework.ui.ViewModelBase,{searchText:null,enableUI:null,constructor:function(){this.searchText=new Observable("");this.enableUI=new Observable(false);this.app.site&&this.app.site.isInitialized?this.enableUI.set(true):this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){this.enableUI.set(true)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellView",geocortex.framework.ui.ViewBase,{_waitForEsc:null,_escTimer:null,constructor:function(){this._waitForEsc=false;this._escTimer=null},attach:function(){this.inherited(arguments);window&&dojo.connect(window,"onkeyup",this,this.handleKeyUp);this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(a){a.declaredClass=="geocortex.essentialsHtmlViewer.mapping.modules.map.MapView"&&this.app.commandRegistry.command("CloseModalRegion").execute()})},
handleKeyUp:function(a){if(a.shiftKey===true&&a.keyCode===27)if(this._waitForEsc)this._waitForEsc=false,this.app.commandRegistry.command("ToggleLogView").execute();else{this._waitForEsc=true;var b=this;this._escTimer=setTimeout(function(){b._waitForEsc=false},1E3)}else a.ctrlKey===true&&a.shiftKey===true&&a.keyCode===192&&this.app.commandRegistry.command("ToggleLogView").execute();return true},scrollToTop:function(){window.scrollTo&&window.scrollTo(0,0)},handleCloseModalRegionClick:function(){this.app.modalRegionSingleton&&
this.app.modalRegionSingleton.deactivateActiveView()}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellViewModel",geocortex.framework.ui.ViewModelBase,{});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.DataFrameTabView",geocortex.framework.ui.ViewBase,{attach:function(a){this.inherited(arguments)},handleClickTab:function(){this.app.commandRegistry.command("ToggleDataFrame").execute();this.viewModel.canAutoOpenDataframe.get()||this.viewModel.canAutoOpenDataframe.set(true)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.DataFrameTabViewModel",geocortex.framework.ui.ViewModelBase,{dataFrameOpen:null,constructor:function(){this.dataFrameOpen=new Observable(false)},initialize:function(a){this.inherited(arguments);this.app.eventRegistry.event("DataFrameOpenedEvent").subscribe(this,function(){this.dataFrameOpen.set(true)});this.app.eventRegistry.event("DataFrameClosedEvent").subscribe(this,function(){this.dataFrameOpen.set(false)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.HandheldShellView",geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellView,{constructor:function(){},_iphone:null,_ipad:null,_ios:null,_fullscreen:null,_android:null,_androidChrome:null,_androidFirefox:null,_androidWebkit:null,_androidGecko:null,attach:function(){this.inherited(arguments);var a=this;this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(a){this.resizeShell();a.declaredClass=="geocortex.essentialsHtmlViewer.mapping.modules.map.MapView"&&
(setTimeout(scrollTo,0,0,1),this.app.viewManager.activateView(this))});this.app.eventRegistry.event("ViewDeactivatedEvent").subscribe(this,function(){this.resizeShell()});this.app.eventRegistry.event("ApplicationResizedEvent").subscribe(this,function(){this.resizeShell()});this.app.eventRegistry.event("ApplicationNativeReadyEvent").subscribe(this,function(){this._native=this.app.isNative.get();this.resizeShell()});this.app.commandRegistry.command("ResizeShell").register(this,function(){a.resizeShell()});
this.resizeShell();if(!(this.configuration&&this.configuration.disableHideAddressBar===true)){var b=this.root,c=navigator.userAgent;this._iphone=~c.indexOf("iPhone")||~c.indexOf("iPod");this._ipad=~c.indexOf("iPad");this._ios=this._iphone||this._ipad;this._native=this.app.isNative.get();this._fullscreen=window.navigator.standalone;this._android=~c.indexOf("Android");this._androidChrome=/Android.*Chrome/.test(c);this._androidFirefox=/Firefox/.test(c);this._androidWebkit=this._android&&/WebKit/.test(c);
this._androidGecko=this._android&&/Gecko/.test(c);var d=function(){if(a._ios){var c=document.documentElement.clientHeight;a._iphone&&!a._fullscreen&&!a._native&&(c+=60);b.style.height=c+"px"}else if(a._androidChrome||a._androidFirefox)b.style.height=document.documentElement.clientHeight;else if(a._android)b.style.height=window.outerHeight/window.devicePixelRatio+"px";setTimeout(scrollTo,0,0,1)};window.onload=d;var e=0;window.onresize=function(){if(e!=b.offsetWidth)a.app.commandRegistry.command("RecenterMapOnNextMapResize").execute(),
e=b.offsetWidth,d()}}},resizeShell:function(){if(this.screenRegionElement&&this.bannerContainerElement){var a=this._android&&!this._androidChrome&&!this._androidFirefox?window.outerHeight/window.devicePixelRatio:dojo.window.getBox().h,b=this._android&&!this._androidChrome&&!this._androidFirefox?window.outerWidth/window.devicePixelRatio:dojo.window.getBox().w,c=this.screenRegionElement;dojo.position(this.bannerContainerElement);dojo.style(c,"height",a-50+"px");dojo.style(c,"width",b+"px");console.log("height: {0}  bannerHeight: {1}  difference: {2}".format(a,
50,a-50))}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.LargeShellView",geocortex.essentialsHtmlViewer.mapping.modules.shells.CommonShellView,{dataFrameAwaitsViewModel:null,constructor:function(a){this.app=a;this._hostedViewCount=0;this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(a){this.resizeAll();a.id==="MapView"&&this.scrollToTop();(a=this.app.viewManager.getRegionForViewId(a.id))&&a.name==="LeftPanelRegion"&&this.viewModel.canAutoOpenDataframe.get()&&this.app.commandRegistry.command("OpenDataFrame").execute();
a&&a.name==="BottomPanelRegion"&&this.viewModel.canAutoOpenDataframe.get()&&this.app.commandRegistry.command("OpenResultsFrame").execute()});this.app.eventRegistry.event("ViewDeactivatedEvent").subscribe(this,function(){this.resizeAll()});this.app.eventRegistry.event("ApplicationResizedEvent").subscribe(this,function(){this.resizeAll()});this.app.commandRegistry.command("ActivateView").register(this,function(a){(a=this.app.viewManager.getRegionForViewId(a))&&a.name==="LeftPanelRegion"&&this.viewModel.canAutoOpenDataframe.get()&&
this.app.commandRegistry.command("OpenDataFrame").execute();a&&a.name==="BottomPanelRegion"&&this.app.commandRegistry.command("OpenBottomRegion").execute()});this.app.commandRegistry.command("OpenDataFrame").register(this,this._executeOpenLeftPanel);this.app.commandRegistry.command("CloseDataFrame").register(this,this._executeCloseLeftPanel);this.app.commandRegistry.command("ToggleDataFrame").register(this,this._executeToggleLeftPanel);this.app.commandRegistry.command("OpenResultsFrame").register(this,
this._executeOpenBottomRegion);this.app.commandRegistry.command("CloseResultsFrame").register(this,this._executeCloseBottomRegion);this.app.commandRegistry.command("ToggleResultsFrame").register(this,this._executeToggleButtonRegion);this.app.commandRegistry.command("OpenBottomRegion").register(this,this._executeOpenBottomRegion);this.app.commandRegistry.command("CloseBottomRegion").register(this,this._executeCloseBottomRegion);this.app.eventRegistry.event("RegionActivatedEvent").subscribe(this,function(a){a.name===
"LeftPanelRegion"&&this.viewModel.canAutoOpenDataframe.get()&&this._activateDataRegion(true);a.name==="BottomPanelRegion"&&this._activateBottomRegion(true)});this.app.eventRegistry.event("RegionDeactivatedEvent").subscribe(this,function(a){a.name==="LeftPanelRegion"&&this._activateDataRegion(false);a.name==="BottomPanelRegion"&&this._activateBottomRegion(false)});var b=this;this.app.eventRegistry.event("WorkflowFormTextInputBlurredEvent").subscribe(this,function(){setTimeout(function(){b.scrollToTop();
b.resizeAll()},100)});this.app.commandRegistry.command("ResizeShell").register(this,function(){b.resizeAll()})},_activateDataRegion:function(a){typeof a==="boolean"&&(a?this._executeOpenLeftPanel():this._executeCloseLeftPanel())},_activateBottomRegion:function(a){typeof a==="boolean"&&(a?this._executeOpenBottomRegion():this._executeCloseBottomRegion(),this.viewModel&&this.viewModel.bottomRegionHasViews.set(a))},attach:function(){this.inherited(arguments);if(this.dataFrameAwaitsViewModel)this._activateDataRegion(true),
this.dataFrameAwaitsViewModel=false,this.resizeAll()},handleClickCloseDataFrame:function(){this.app.commandRegistry.command("CloseDataFrame").execute()},handleClickDataRegionTab:function(){this.app.commandRegistry.command("OpenDataFrame").execute()},resizeAll:function(){this.resizeShell();this.resizeScreenRegion()},resizeScreenRegion:function(){if(this.viewModel){var a=this.screenRegionElement;if(this.headerContainerElement&&a){if(this.centerElement){var b=this.centerElement;setTimeout(function(){dojo.style(b,
{display:"block"})},0)}this.app.commandRegistry.command("MapResize").execute()}}},resizeShell:function(){if(this.viewModel){dojo.position(this.app.hostElement);var a=this.mainElement;if(a){var b=this.headerContainerElement,c=this.leftElement,d=this.centerElement,e=this.bottomElement,b=(b=b?dojo.position(b):null)?b.h:0,f=this.viewModel.dataFrameIsOpen.get()?this.viewModel.dataFrameWidth.get():0,g=this.viewModel.bottomRegionIsOpen.get()?this.viewModel.bottomRegionHeight.get():0;dojo.style(a,"top",b+
"px");dojo.style(c,"width",f+"px");dojo.style(d,"left",f+"px");dojo.style(e,"left",f+"px");dojo.style(d,"bottom",g+"px");dojo.style(e,"height",g+"px")}}},_executeOpenLeftPanel:function(){if(this.viewModel){if(this.viewModel.dataFrameIsOpen.get()===false){this.viewModel.dataFrameIsOpen.set(true);var a=this.leftElement;a&&(this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(a,"panel-closed"),dojo.addClass(a,"panel-open"),this.resizeAll());this.app.eventRegistry.event("DataFrameOpenedEvent").publish();
this.app.eventRegistry.event("ApplicationResizeEvent").publish();this.app.eventRegistry.event("ApplicationResizedEvent").publish()}}else this.dataFrameAwaitsViewModel=true},_executeCloseLeftPanel:function(){if(this.viewModel&&this.viewModel.dataFrameIsOpen.get()===true){this.viewModel.dataFrameIsOpen.set(false);var a=this.leftElement;a&&(this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(a,"panel-open"),dojo.addClass(a,"panel-closed"),this.resizeAll());this.app.eventRegistry.event("DataFrameClosedEvent").publish();
this.app.eventRegistry.event("ApplicationResizeEvent").publish();this.app.eventRegistry.event("ApplicationResizedEvent").publish()}},_executeToggleLeftPanel:function(){this.viewModel.dataFrameIsOpen.get()===false?this.app.commandRegistry.command("OpenDataFrame").execute():this.app.commandRegistry.command("CloseDataFrame").execute()},_executeOpenBottomRegion:function(){if(this.viewModel&&this.viewModel.bottomRegionIsOpen.get()===false){this.viewModel.bottomRegionIsOpen.set(true);var a=this.bottomElement;
a&&(this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(a,"panel-closed"),dojo.addClass(a,"panel-open"),this.resizeAll());this.app.eventRegistry.event("ResultsRegionOpenedEvent").publish();this.app.eventRegistry.event("ApplicationResizeEvent").publish();this.app.eventRegistry.event("ApplicationResizedEvent").publish()}},_executeCloseBottomRegion:function(){if(this.viewModel&&this.viewModel.bottomRegionIsOpen.get()===true){this.viewModel.bottomRegionIsOpen.set(false);
var a=this.bottomElement;a&&(this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute(),dojo.removeClass(a,"panel-open"),dojo.addClass(a,"panel-closed"),this.resizeAll());this.app.eventRegistry.event("ResultsRegionClosedEvent").publish();this.app.eventRegistry.event("ApplicationResizeEvent").publish();this.app.eventRegistry.event("ApplicationResizedEvent").publish()}},_executeToggleButtonRegion:function(){this.viewModel.bottomRegionIsOpen.get()===false?this.app.commandRegistry.command("OpenBottomRegion").execute():
this.app.commandRegistry.command("CloseBottomRegion").execute()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.LargeShellViewModel",geocortex.framework.ui.ViewModelBase,{dataFrameIsOpen:null,dataFrameHasViews:null,dataFrameWidth:null,dataFrameOpenByDefault:null,canAutoOpenDataframe:null,bottomRegionIsOpen:null,bottomRegionHasViews:null,bottomRegionHeight:null,constructor:function(){this.dataFrameIsOpen=new Observable(false);this.dataFrameHasViews=new Observable(false);this.dataFrameWidth=new Observable(300);this.dataFrameOpenByDefault=new Observable(false);
this.canAutoOpenDataframe=new Observable(false);this.bottomRegionIsOpen=new Observable(false);this.bottomRegionHasViews=new Observable(false);this.bottomRegionHeight=new Observable(300)},initialize:function(a){a&&(a.hasOwnProperty("dataFrameWidth")&&this.dataFrameWidth.set(parseInt(a.dataFrameWidth)),a.hasOwnProperty("dataFrameOpenByDefault")&&this.dataFrameOpenByDefault.set(a.dataFrameOpenByDefault),a.hasOwnProperty("bottomRegionHeight")&&this.bottomRegionHeight.set(parseInt(a.bottomRegionHeight)));
this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){this.canAutoOpenDataframe.set(true);this.dataFrameOpenByDefault.get()&&this.app.commandRegistry.command("OpenDataFrame").execute()})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.shells.ShellModule",geocortex.framework.application.ModuleBase,{initialize:function(a){if(a.hasOwnProperty("css")){document.getElementById("shell-stylesheet");for(var b=0;b<a.css.length;++b){var c=dojo.create("link",{rel:"stylesheet",href:a.css[b]});dojo.place(c,document.getElementsByTagName("head")[0],"last")}}if(a.hasOwnProperty("homePanelVisible")&&a.homePanelVisible)var d=this,e=this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
function(){d.app.commandRegistry.command("ActivateHomePanel").execute();d.app.eventRegistry.event("SiteInitializedEvent").unsubscribe(e)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.EventMapper",null,{constructor:function(a,b){this.app=a;this.eventMappings=b||{};this._wireUpEvents()},eventMappings:null,app:null,_wireUpEvents:function(){if(this.eventMappings){var a=null,b=null;for(a in this.eventMappings){var c=this.eventMappings[a];for(b in c)this._handleEvent(b,c[b])}}},_handleEvent:function(a,b){b&&this.app.eventRegistry.event(a).subscribe(this,function(a){var d=b.commandName,e=b.commandParameter||
a;if(d)this.app.commandRegistry.command(d).execute(e);else if(b&&b.length>0)for(d=0;d<b.length;d++)this.app.commandRegistry.command(b[d]).execute(a)})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.SimpleLayerList.LayerActionsView",geocortex.essentialsHtmlViewer.mapping.infrastructure.menus.MenuView,{constructor:function(){this.inherited(arguments);this.app.commandRegistry.command("ShowLayerActions").register(this,function(a){a&&(this.menuContext.set(a),this.title.set(a.displayName),this.app.commandRegistry.command("ActivateView").execute(this.id))})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.SimpleLayerList.LayerActionsViewModel",geocortex.framework.ui.ViewModelBase,{constructor:function(a){this.inherited(arguments);this.app=a}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.LayerViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.LayerViewModel",geocortex.framework.ui.ViewModelBase,{app:null,libraryId:null,layerList:null,layerModel:null,mapServiceViewModel:null,layerId:null,visible:null,displayName:null,canNotAssignVisibility:null,enabledCss:null,enabledCheckboxCss:null,iconUri:null,toolTip:null,layerActionTooltip:null,expanded:null,expanderClass:null,constructor:function(a,b){var c=false;a.mapService&&!a.mapService.supportsLayerVisibility()&&(c=
b.hideServiceName.get()?a.mapService.layers.length>1?true:false:true);var d=c?b.visible.get()&&a.configuredVisible:a.configuredVisible;this.app=b.app;this.libraryId=b.libraryId;this.mapServiceViewModel=b;this.layerModel=a;this.layerId=a.id;this.visible=new Observable(d);this.layerList=new ObservableCollection;this.displayName=new Observable;this.toolTip=new Observable("");this.enabledCss=new Observable("");this.enabledCheckboxCss=new Observable("");this.layerActionTooltip=new Observable;this.iconUri=
new Observable;this.expanded=new Observable(false);this.expanderClass=new Observable("tree-expander collapsed");this.expanderClass.syncTransform(this.expanded,function(a){return a?"tree-expander expanded":"tree-expander collapsed"});this.canNotAssignVisibility=new Observable(c);this.displayName.set(a.displayName);this.expanded.set(a.isExpanded);this.updateLayerIcons()},initialize:function(a){this.inherited(arguments);this.layerActionTooltip.set(this.app.getResource(this.libraryId,"language-layer-actions-desc"))},
setVisibility:function(a){this.layerModel.setVisibility(a)},setAccessability:function(a){a?(this.enabledCss.set("layer-info layer-enabled"),this.enabledCheckboxCss.set("enabled")):(this.enabledCss.set("layer-info layer-disabled"),this.enabledCheckboxCss.set("disabled"))},updateLayerIcons:function(){this.layerModel.mapService&&this.layerModel.mapService.initializationFailure&&!this.layerModel.mapService.includeInLayerList?(this.iconUri.set("Resources/Images/Icons/error-24.png"),this.toolTip.set(this.getResource("language-layerlist-layer-unavailable"))):
this.layerModel.iconUri&&this.toolTip.set("");for(var a=0;a<this.layerList.length();a++)this.layerList.getAt(a).updateLayerIcons()},addSubLayer:function(a){this.layerList.addItem(a)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.MapServiceViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.MapServiceViewModel",geocortex.framework.ui.ViewModelBase,{app:null,simpleLayerListViewModel:null,libraryId:null,mapService:null,layerList:null,serviceId:null,displayName:null,hideServiceName:null,enableServiceIfHidden:null,allowMultipleVisibleBaseMaps:null,serviceLayersCss:null,visible:null,iconUri:null,iconTooltip:null,initialVisibility:null,expanded:null,expanderClass:null,constructor:function(a,b){var c=b.hideServiceName,
d=c?"flat-layers":"layers";this.app=b.app;this.simpleLayerListViewModel=b;this.libraryId=b.libraryId;this.mapService=a;this.layerList=new ObservableCollection;this.serviceId=new Observable(this.mapService.id);this.displayName=new Observable(this.mapService.displayName);this.hideServiceName=new Observable(c);this.enableServiceIfHidden=b.enableOperationalMapServicesIfNamesHidden;this.allowMultipleVisibleBaseMaps=b.allowMultipleVisibleBaseMaps;this.serviceLayersCss=new Observable(d);this.iconTooltip=
new Observable("");this.visible=new Observable(false);this.iconUri=new Observable;this.expanded=new Observable(false);this.expanderClass=new Observable("tree-expander collapsed");this.expanderClass.syncTransform(this.expanded,function(a){return a?"tree-expander expanded":"tree-expander collapsed"});this.loadLayers()},initialize:function(a){this.inherited(arguments);this.iconTooltip.set("")},subscribeEvents:function(){if(!this.mapService||!this.mapService.serviceLayer)this.app.trace.error("Error processing MapServiceViewModel.subscribeEvents - mapService or serviceLayer not available.");
else{var a=this;this.mapService.serviceLayer.on("visibility-change",function(b){if(!a.allowMultipleVisibleBaseMaps&&b.visible&&a.mapService.mapServiceFunction==="Base")for(var c=a.simpleLayerListViewModel._baseMaps,d=0;d<c.length;d++)c[d].serviceId.get()!==a.serviceId.get()&&c[d].visible.get()&&c[d].setVisibility(false);if(a.hideServiceName.get()&&a.enableServiceIfHidden&&!a.mapService.isVisible())a.setVisibility(true);else if(a.visible.set(b.visible),!a.mapService.supportsLayerVisibility())for(c=
0;c<a.layerList.length();c++)d=a.layerList.getAt(c),a._recursivelySyncVisibilityIfDisabled(d,b.visible)});dojo.subscribe("LayerVisibilityChange",function(b){if(b&&b.length>0)for(var c=0;c<b.length;c++){var d=b[c];if(d.mapServiceId&&d.layerId){if(d.mapServiceId===a.mapService.id){var e=a.getLayerById(d.layerId);e?e.visible.set(d.visibility):a.app.trace.error("SimpleLayerList: Cannot respond to 'layer-visibility-change'. Layer not found")}}else a.app.trace.error("SimpleLayerList: Cannot respond to 'layer-visibility-change' event as either mapServiceId or layerId are not available.")}})}},
setVisibility:function(a){this.mapService.setVisibility(this.hideServiceName.get()&&this.enableServiceIfHidden?true:a)},_recursivelySyncVisibilityIfDisabled:function(a,b){if(a.canNotAssignVisibility.get()||!this.mapService.supportsLayerVisibility()&&this.layerList.length()===1){a.visible.set(a.layerModel.configuredVisible&&b);for(var c=0;c<a.layerList.length();c++)this._recursivelySyncVisibilityIfDisabled(a.layerList.getAt(c),b)}},applyToLayerTree:function(a,b){var c=this;dojo.forEach((a||this.layerList).get(),
function(a){var e=a.layerList;b(a);e&&e.getLength()>0&&c.applyToLayerTree(e,b)})},_recursLayers:function(a,b){var c=a.layerModel;if(c.includeInLayerList&&(b&&b.addSubLayer(a),c=c.subLayerIds||[],c.length>0))for(var d=0;d<c.length;d++){var e=this._getModelLayerById(c[d]);e.processed=true;this._recursLayers(new geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.LayerViewModel(e,this),a)}},_traverseLayers:function(a){var b=[],c=null;dojo.forEach(a,function(a){a.includeInLayerList&&!a.processed&&
(c=new geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.LayerViewModel(a,this),this._recursLayers(c,null),b.push(c))},this);this.layerList.addItems(b)},loadLayers:function(){this.subscribeEvents();if(this.mapService){var a=this.mapService;this.initialVisibility=this.mapService.configuredVisible;this.visible.set(this.mapService.configuredVisible);this.expanded.set(this.mapService.isExpanded&&!!this.mapService.layers);a.iconUri&&this.iconUri.set(a.iconUri);a.mapServiceFunction!=="Base"&&
a.mapServiceType!==geocortex.essentials.MapServiceType.GEORSS&&(this._traverseLayers(a.layers),this.enableVisibleLayersWithinScale())}else this.app.trace.error("Error processing MapServiceViewModel.loadLayers - map service is not provided.")},updateServiceIcons:function(){this.mapService.initializationFailure?(this.iconUri.set("Resources/Images/Icons/error-24.png"),this.iconTooltip.set(this.getResource("language-layerlist-map-service-unavailable"))):this.mapService.iconUri&&this.iconUri.set(this.mapService.iconUri);
for(var a=0;a<this.layerList.length();a++)this.layerList.getAt(a).updateLayerIcons()},updateLayerIcons:function(){this.mapService.initializationFailure?(this.iconUri.set("Resources/Images/Icons/error-24.png"),this.iconTooltip.set(this.getResource("language-layerlist-map-service-unavailable"))):this.mapService.iconUri&&(this.iconUri.set(this.mapService.iconUri),this.iconTooltip.set(""))},_getModelLayerById:function(a){var b=dojo.filter(this.mapService.layers||[],function(b){return b.id===a});return b.length>
0?b[0]:null},getLayerById:function(a){return this._getLayerRecursivelyById(a,this.layerList.get())},_getLayerRecursivelyById:function(a,b){for(var c=null,d=null,c=0;c<b.length;c++)if(d=b[c],d.layerId===a)return d;else if(d.layerList.getLength()>0&&(d=this._getLayerRecursivelyById(a,d.layerList.get())))return d},_enableLayers:function(a,b){dojo.forEach(a,function(a){var d=a.layerModel.withinScaleRange(b);a.setAccessability(d);a.layerList&&a.layerList.getLength()>0&&this._enableLayers(a.layerList.get(),
b)},this)},enableVisibleLayersWithinScale:function(){if(this.mapService){var a=this.mapService.essentialsMap.site.essentialsMap.calculateScale();this._enableLayers(this.layerList.get(),a)}}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.SimpleLayerListModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.SimpleLayerListModule",geocortex.framework.application.ModuleBase,{constructor:function(){},initialize:function(a){new geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.EventMapper(this.app,a)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.SimpleLayerListView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.SimpleLayerListView",geocortex.framework.ui.ViewBase,{initialized:false,title:null,_longPressTimer:null,_pressLengthMs:2E3,constructor:function(){this.title=new Observable;this.registerCommands()},registerCommands:function(){this.app.commandRegistry.command("ShowLayerList").register(this,function(){this.app.commandRegistry.command("ActivateView").execute(this.id)})},activated:function(){this.inherited(arguments);this.initialized||
this.initialize()},deactivated:function(){this.inherited(arguments)},attach:function(a){this.inherited(arguments);this.viewModel&&(this.initialized||this.initialize())},initialize:function(){if(!this.initialized&&this.viewModel&&this.root)this.title.set(this.app.getResource(this.libraryId,"language-layerlist-title")),this.app.eventRegistry.event("MapExtentChangeEvent").subscribe(this,function(){this.viewModel.filterInvisibleLayers()}),this.app.eventRegistry.event("SimpleLayerListLoadedEvent").subscribe(this,
function(){this.app.viewManager.notifyDimensionsChanged(this)}),this.initialized=true},toggleLayerVisibility:function(a,b,c){if(c)return this.app.eventRegistry.event("LayerClickedEvent").publish(c),this.app.eventRegistry.event("LayerPressedEvent").publish(c),this.viewModel.toggleLayerVisibility(c),true},toggleServiceVisibility:function(a,b,c){if(c)return this.app.eventRegistry.event("MapServiceClickedEvent").publish(c),this.app.eventRegistry.event("LayerPressedEvent").publish(c),this.viewModel.toggleServiceVisibility(c),
true},handleLayerActions:function(a,b,c){c&&c.layerModel&&this.app.commandRegistry.command("ShowLayerActions").execute(c.layerModel)},handleClickEvent:function(a,b){b.blur();try{b.focus()}catch(c){}return true},handleClickShowLegend:function(){this.app.commandRegistry.command("ActivateView").execute("LegendView")},handleTouchStart:function(){this._beginLongPress();return true},handleMouseDown:function(){this._beginLongPress();return true},handleTouchEnd:function(){this._cancelLongPress();return true},
handleMouseUp:function(){this._cancelLongPress();return true},_beginLongPress:function(){this._longPressTimer&&clearTimeout(this._longPressTimer);var a=this;this._longPressTimer=setTimeout(function(){a.app.eventRegistry.event("LayerLongPressedEvent").publish()},a._pressLengthMs)},_cancelLongPress:function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),this._longPressTimer=null},handleClickClose:function(){this.app.viewManager.deactivateView(this)},handleSlideToggleClick:function(a,b,
c){c.expanded.set(!c.expanded.get())}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.SimpleLayerListViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.SimpleLayerListViewModel",geocortex.framework.ui.ViewModelBase,{mapServices:null,hideServiceName:null,enableServiceIfHidden:null,hideOperationalMapServices:null,hideBaseMapServices:null,hideOperationalMapServiceNames:null,enableOperationalMapServicesIfNamesHidden:null,allowMultipleVisibleBaseMaps:null,_baseMaps:null,constructor:function(){this.mapServices=new ObservableCollection},initialize:function(a){this.inherited(arguments);
this.hideOperationalMapServices=a.hideOperationalMapServices||false;this.hideBaseMapServices=a.hideBaseMapServices||false;this.hideOperationalMapServiceNames=a.hideOperationalMapServiceNames||false;this.enableOperationalMapServicesIfNamesHidden=a.enableOperationalMapServicesIfNamesHidden||false;this.allowMultipleVisibleBaseMaps=a.allowMultipleVisibleBaseMaps||false;this._baseMaps=[];this.app.site&&this.app.site.isInitialized?this._onSiteInitialized(this.app.site):this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
function(a){this._onSiteInitialized(a)});this.app.eventRegistry.event("SiteServiceLayersLoadedEvent").subscribe(this,this._onServiceLayersLoaded)},_onSiteInitialized:function(a){var b=null;!a||!a.isInitialized?this.app.trace.error("Error processing SimpleLayerListModule._onSiteInitialized. - site was not initialized."):a.essentialsMap&&(b=a.essentialsMap.mapServices||[],b.length<=0||(this._loadServiceLayers(b),this.app.eventRegistry.event("SimpleLayerListLoadedEvent").publish()))},_onServiceLayersLoaded:function(){for(var a=
0;a<this.mapServices.length();a++)this.mapServices.getAt(a).updateServiceIcons()},_getMapServiceById:function(a){var b=this.mapServices.get()||[],b=dojo.filter(b,function(b){return b.serviceId.get()===a});return b.length>0?b[0]:null},_loadServiceLayers:function(a){if(!a||a.length==0)this.app.trace.error("Error processing SimpleLayerListViewModel.loadServiceLayers. - map services are not provided.");else{for(var b=[],c=0;c<a.length;c++){var d=a[c];this.hideServiceName=false;if(d.mapServiceFunction===
"Operational"){if(this.hideOperationalMapServices)continue;this.hideServiceName=this.hideOperationalMapServiceNames}if(!(d.mapServiceFunction==="Base"&&this.hideBaseMapServices)){if(!d.includeInLayerList)this.hideServiceName=true;var e=new geocortex.essentialsHtmlViewer.mapping.modules.simplelayerlist.MapServiceViewModel(d,this);b.push(e);d.mapServiceFunction==="Base"&&this._baseMaps.push(e)}}if(!this.allowMultipleVisibleBaseMaps&&this._baseMaps.length>1){a=false;for(c=0;c<this._baseMaps.length;c++)this._baseMaps[c].visible.get()&&
(a?this._baseMaps[c].setVisibility(false):a=true)}this.mapServices.addItems(b)}},filterInvisibleLayers:function(){var a=this.mapServices.get()||[];dojo.forEach(a,function(a){a.enableVisibleLayersWithinScale()})},findLayerById:function(a){for(var b=null,c=0;c<this.mapServices.getLength();c++)if(b=this.mapServices.getAt(c),b=this._findLayerInLayerList(a,b.layerList))break;return b},_findLayerInLayerList:function(a,b){for(var c=null,d=0;d<b.getLength();d++){if(c)break;var e=b.getAt(d);e.layerModel.id===
a&&(c=e);!c&&e.layerList&&e.layerList.getLength()>0&&(c=this._findLayerInLayerList(a,e.layerList))}return c},toggleServiceVisibility:function(a){if(a){var b=!a.visible.get();a.setVisibility(b)}},toggleLayerVisibility:function(a){if(a){var b=this._getMapServiceById(a.layerModel.mapService.id),c=!a.visible.get();(a=b.getLayerById(a.layerId))&&(a.canNotAssignVisibility.get()||a.setVisibility(c))}}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.site.ServiceLayersFailureView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.site.ServiceLayersFailureView",geocortex.framework.ui.ViewBase,{constructor:function(a){a.eventRegistry.event("SiteServiceLayersFailedEvent").subscribe(this,this._serviceLayersFailed)},_serviceLayersFailed:function(a){this.viewModel.failedServices.clear();this.viewModel.hasError.set(false);for(var b=0;b<a.length;b++)if(ms=a[b],ms.failureAction===geocortex.essentials.FailureAction.WARN||ms.failureAction===geocortex.essentials.FailureAction.ERROR)ms.failureAction===
geocortex.essentials.FailureAction.ERROR&&this.viewModel.hasError.set(true),this.viewModel.failedServices.addItem({name:a[b].displayName});this.viewModel.failedServices.length()>0&&(this.title.set(this.app.getResource(this.libraryId,"language-site-service-layers-failure-view-title")),this.app.viewManager.activateView(this))},handleClickOk:function(){this.app.viewManager.deactivateView(this)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.site.ServiceLayersFailureViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.site.ServiceLayersFailureViewModel",geocortex.framework.ui.ViewModelBase,{failedServices:null,hasError:null,constructor:function(){this.failedServices=new ObservableCollection;this.hasError=new Observable(false)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.site.SignInErrorView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.site.SignInErrorView",geocortex.framework.ui.ViewBase,{tryAgainAction:null,constructor:function(a){a.eventRegistry.event("UserSignInCancelledEvent").subscribe(this,this._signInCancelled)},_signInCancelled:function(a){this.title.set(this.app.getResource(this.libraryId,"language-site-log-on-required-title"));this.tryAgainAction=a.tryAgainAction;this.app.viewManager.activateView(this)},handleClickTryAgain:function(){this.tryAgainAction&&this.tryAgainAction()}});
dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.site.SiteModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.site.SiteModule",geocortex.framework.application.ModuleBase,{siteUri:"",proxyUri:"",essentialsSite:null,app:null,constructor:function(a){this.app=a},initialize:function(a){this.inherited(arguments);this.siteUri=a.siteUri;this.proxyUri=this.app.configuration.proxyUri||null;this.registerCommands()},registerCommands:function(){var a=this;this.app.commandRegistry.command("InitializeSite").register(this,function(b){var c=this.app.makeAbsolute(a.siteUri);
this.app.site=new geocortex.essentials.Site(c,b);if(a.proxyUri)esri.config.defaults.io.proxyUrl=a.proxyUri;var d=this;dojo.connect(this.app.site,"onInitializationFailed",function(a){if(a&&a.code===403){d.app.eventRegistry.event("SiteAuthorizationFailedEvent").publish(a);var b=d.app.getResource(d.libraryId,"language-site-initialization-failure"),a=b.format(a.message);d.app.trace.error(a)}else d.app.eventRegistry.event("SiteInitializationFailedEvent").publish(a),b=d.app.getResource(d.libraryId,"language-site-initialization-failure"),
a=b.format(a.message),d.app.trace.error(a),d.app.commandRegistry.command("Alert").execute(a)});dojo.connect(this.app.site,"onInitialized",function(){d.app.eventRegistry.event("SiteInitializedEvent").publish(d.app.site)});dojo.connect(this.app.site,"onLayerLoad",function(a){d.app.eventRegistry.event("SiteLayerLoad").publish(a);d.app.eventRegistry.event("SiteLayerLoadedEvent").publish(a)});dojo.connect(this.app.site,"onLayerLoadError",function(a){d.app.eventRegistry.event("SiteLayerLoadError").publish(a);
d.app.eventRegistry.event("SiteLayerLoadFailedEvent").publish(a)});dojo.connect(this.app.site,"onServiceLayersLoaded",function(a){d.app.eventRegistry.event("SiteServiceLayersLoaded").publish(a);d.app.eventRegistry.event("SiteServiceLayersLoadedEvent").publish(a);d._checkForFailedServices(a)});dojo.connect(this.app.site,"onUserSignInCancelled",function(a){d.app.eventRegistry.event("UserSignInCancelledEvent").publish(a)});this.app.site.deepInitialize=true;this.app.site.initialize()});this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,
this._handleSiteInitializedEvent)},_handleSiteInitializedEvent:function(){for(i=0;i<this.app.site.essentialsMap.mapServices.length;i++)if(this.app.site.essentialsMap.mapServices[i]._needsProxy){this.app.trace.info("Essentials security detected. The proxy page will be used.");break}},_checkForFailedServices:function(a){if(a.essentialsMap&&a.essentialsMap.mapServices){for(var b=[],c=0;c<a.essentialsMap.mapServices.length;c++)ms=a.essentialsMap.mapServices[c],ms.initializationFailure&&b.push(ms);b.length>
0&&this.app.eventRegistry.event("SiteServiceLayersFailedEvent").publish(b)}}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.status.StatusIndicatorView",geocortex.framework.ui.ViewBase,{constructor:function(){}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.status.StatusMessageView",geocortex.framework.ui.ViewBase,{constructor:function(){},handleClickClose:function(a,b,c){this.app.viewManager.destroyView(this);c&&c.userClosedCallback&&c.userClosedCallback.call(this,this)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.status.StatusMessageViewModel",geocortex.framework.ui.ViewModelBase,{text:null,imageUri:null,imageClass:null,timer:null,userClosedCallback:null,constructor:function(){this.text=new Observable;this.imageUri=new Observable;this.imageClass=new Observable},initialize:function(){}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.status.StatusModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.status.StatusModule",geocortex.framework.application.ModuleBase,{messageRegionName:"StatusIndicatorMessageRegion",statusViewName:"StatusIndicatorView",lastTestAddArgs:null,config:null,constructor:function(){this.app.commandRegistry.command("AddStatus").register(this,this.addStatus);this.app.commandRegistry.command("PulseStatus").register(this,this.pulseStatus);this.app.commandRegistry.command("RemoveStatus").register(this,this.removeStatus);
this.app.eventRegistry.event("ViewUnhostedEvent").subscribe(this,this.viewUnhostedHandler)},initialize:function(a){this.inherited(arguments);a||(a={});this.config=a;if(!a.busyIcon)a.busyIcon="Resources/Images/loader-small.gif"},viewInstanceCounter:0,addStatus:function(a){a=typeof a==="string"||a instanceof String?new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a):a;this.app.commandRegistry.command("ActivateView").execute(this.statusViewName);var b=a.id?a.id:"StatusMessageView"+
this.viewInstanceCounter++,c=this.app.viewManager.getViewById(b),d=c?c.viewModel:null;c||(c=this.createView("StatusMessageView",b,this.messageRegionName));a.id=b;d||(d=new geocortex.essentialsHtmlViewer.mapping.modules.status.StatusMessageViewModel(this.app,this.libraryId),c.attach(d));d.text.set(a.text);d.imageUri.set(a.imageUri);d.imageClass.set(a.imageClass);d.userClosedCallback=a.userClosedCallback;a.showBusyIcon&&d.imageUri.set(this.config.busyIcon);if(d.timer)d.timer.reset();else if(a.timeoutMS&&
a.timeoutMS>0)d.timer=new geocortex.framework.utils.TimeDelayedAction(a.timeoutMS,function(){this.removeStatus(b)},this),d.timer.start()},pulseStatus:function(a){if(a&&(a=this.app.viewManager.getViewById(a)))(a=a.viewModel)&&a.timer&&a.timer.reset()},removeStatus:function(a){a?(a=this.app.viewManager.getViewById(a))&&this.app.viewManager.destroyView(a):(a=this.app.viewManager.getExistingRegionByName(this.messageRegionName),a.views.length>=1&&(a=a.views[a.views.length-1],this.app.viewManager.destroyView(a)))},
createView:function(a,b,c){return this.app.viewManager.createView({id:b,type:"geocortex.essentialsHtmlViewer.mapping.modules.status."+a,markup:this.libraryId+"/modules/Status/"+a+".html",visible:true,libraryId:this.libraryId,regionName:c})},viewUnhostedHandler:function(a){var b=a.region,a=a.view;b.name==this.messageRegionName&&(a&&a.viewModel&&a.viewModel.timer&&a.viewModel.timer.stop(),b.views.length==0&&this.app.commandRegistry.command("DeactivateView").execute(this.statusViewName))}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.temp.TempModule",geocortex.framework.application.ModuleBase,{constructor:function(){this.inherited(arguments)}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.temp.TempView",geocortex.framework.ui.ViewBase,{constructor:function(){this.inherited(arguments)}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.temp.TempViewModel",geocortex.framework.ui.ViewModelBase,{constructor:function(){this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarButtonView",geocortex.framework.ui.ViewBase,{handleClickToggleToolbar:function(){this.app.commandRegistry.command("ToggleToolbar").execute()}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsView",geocortex.framework.ui.ViewBase,{tileElements:null,constructor:function(){this.tileElements=[];this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(a){if(this.root&&a.id){if(this.viewModel&&this.viewModel.hostedViews&&!this.viewModel.hostedViews.contains(a))return false;this.handleViewActivated(a)}});this.app.eventRegistry.event("ViewDeactivatedEvent").subscribe(this,function(a){if(this.root&&
a.id){if(this.viewModel&&this.viewModel.hostedViews&&!this.viewModel.hostedViews.contains(a))return false;this.handleViewDeactivated(a)}})},handleViewActivated:function(a){for(var b=0;b<this.tileElements.length;++b)dojo.removeClass(this.tileElements[b],"tb-view-active");a=".{0}".format(a.id);(a=dojo.query(a,this.root)[0])&&dojo.addClass(a,"tb-view-active")},handleViewDeactivated:function(a){a=".{0}".format(a.id);(a=dojo.query(a,this.root)[0])&&dojo.removeClass(a,"tb-view-active")},handleViewTileClick:function(a,
b,c){this.app.commandRegistry.command("ActivateView").execute(c.id);this.app.eventRegistry.event("ToolbarViewTilePressedEvent").publish(c.id);return false}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsViewModel",geocortex.framework.ui.ViewModelBase,{hostedViews:null,ordering:null,constructor:function(){this.hostedViews=new ObservableCollection([]);this.app.eventRegistry.event("ViewHostedEvent").subscribe(this,function(a){(a=a.view)&&a.isManaged&&this._addOrderedView(a)});var a=this.app.eventRegistry.event("ViewActivatedEvent").subscribe(this,function(b){if(b&&b.declaredClass==="geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarManagedViewsView"){if(this.app.eventRegistry.event("ViewActivatedEvent").unsubscribe(a),
this.lastActivatedManagedView)var c=this,d=dojo.connect(b,"attach",function(){dojo.disconnect(d);b.handleViewActivated(c.lastActivatedManagedView)})}else if(b&&b.isManaged)this.lastActivatedManagedView=b});this.app.eventRegistry.event("ViewUnhostedEvent").subscribe(this,function(a){(a=a.view)&&a.isManaged&&this.hostedViews.removeItem(a)})},_addOrderedView:function(a){if(this.ordering){var b=a.id;if(b)if(b=this.ordering.hasOwnProperty(b)?parseInt(this.ordering[b]):null,b===null||b===void 0)this.hostedViews.addItem(a);
else{for(var c=false,d=0;d<this.hostedViews.getLength();++d){var e=this.hostedViews.getAt(d),e=this.ordering.hasOwnProperty(e.id)?parseInt(this.ordering[e.id]):null;if(e===null||b<=e){c=true;this.hostedViews.insertItem(d,a);break}}c||this.hostedViews.addItem(a)}else this.hostedViews.addItem(a)}else this.hostedViews.addItem(a)},initialize:function(a){if(a.hasOwnProperty("ordering"))this.ordering=a.ordering}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarModule",geocortex.framework.application.ModuleBase,{constructor:function(){this.inherited(arguments)},initialize:function(a){a&&a.toolbarGroups&&this.app.toolbarGroupRegistry.registerToolbarGroups(a.toolbarGroups)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarTabViewModel",geocortex.framework.ui.ViewModelBase,{title:null,tooltip:null,group:null,isVisible:null,isActive:null,cssClass:null,constructor:function(){this.title=new Observable("");this.tooltip=new Observable("");this.group=new Observable(null);this.isVisible=new Observable(false);this.isActive=new Observable(false);this.cssClass=new Observable("toolbar-tab");this.auto(this.isActive,this,function(a){a===true?this.cssClass.set("toolbar-tab tb-tab-active"):
this.cssClass.set("toolbar-tab")})}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarView",geocortex.framework.ui.ViewBase,{_longPressTimer:null,_pressLengthMs:2E3,_firstEvent:null,previousActiveToolElement:null,constructor:function(){this.inherited(arguments)},manageToolVisuals:function(a,b){if(b&&a)for(var c=b.isActive?"toolbar-item button highlight":"toolbar-item button",d=0;d<a.length;d++){var e=a[d];e&&(e.type==="tool"&&!e.disabled.get()?e.tool.drawMode===b.drawMode&&e.tool.command===b.command&&e.cssClass.set(c):
e.type==="toolbarGroup"&&e.items.getLength()&&this.manageToolVisuals(e.items.get(),b))}},attach:function(a){this.inherited(arguments);a.currToolbarGrp&&a.currToolbarGrp.get()&&a.currToolbarGrp.get().items&&a.currToolbarGrp.get();if(a&&a.toolbarGroups&&!a.toolbarGroups.isEmpty()){var b=this;this.app.eventRegistry.event("ActiveToolChangedEvent").subscribe(this,function(a){a=a.tool?a.tool:a.previousTool;b.manageToolVisuals(b.viewModel.toolbarGroups.get(),a)})}},handleClickToggleToolbar:function(){this.viewModel.toolbarGroups&&
this.viewModel.toolbarGroups.getLength()>0&&(this.app.commandRegistry.command("ActivateView").execute("MainToolbarView"),this.app.eventRegistry.event("ApplicationResizedEvent").publish())},handleClick:function(a,b,c){c.type==="tool"&&(c.cssClass.get()==="toolbar-item button highlight"||c.tool.isActive)?this.app.commandRegistry.command("ClearActiveTool").execute():c.execute()},handleTabClick:function(a,b,c){for(a=0;a<this.viewModel.toolbarTabs.getLength();a++)b=this.viewModel.toolbarTabs.getAt(a),
b!==c&&b.isActive.get()&&b.isActive.set(false);c.isActive.set(true);this.viewModel.currToolbarGrp.set(c.group.get());this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute();this.app.eventRegistry.event("ApplicationResizedEvent").publish()},closeToolbar:function(){this.app.viewManager.deactivateView(this);this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute();this.app.eventRegistry.event("ApplicationResizedEvent").publish()},toggleToolbar:function(){this.app.commandRegistry.command("ToggleToolbar").execute()},
resolveWidget:function(a,b){this.inherited(arguments);if(a==="RegionWidget"&&b.regionName){var c=this.app.viewManager.createView({markupResource:"Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html"});c.app=this.app;c.libraryId=this.libraryId;c.attach(b);this.app.viewManager.discoverRegions(c.root,c);return c}return null},toggleVisibleGroup:function(a,b,c){c.isActive.set(!c.isActive.get())},handleTouchStart:function(){if(!this._firstEvent)this._firstEvent="touch start",this._beginLongPress();
return true},handleMouseDown:function(){if(!this._firstEvent)this._firstEvent="mouse down",this._beginLongPress();return true},handleTouchEnd:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},handleMouseUp:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleMouseOut:function(){if(this._firstEvent==="mouse down")this._firstEvent=null,this._cancelLongPress();return true},handleTouchCancel:function(){if(this._firstEvent===
"touch start")this._firstEvent=null,this._cancelLongPress();return true},handleTouchMove:function(){if(this._firstEvent==="touch start")this._firstEvent=null,this._cancelLongPress();return true},_beginLongPress:function(){this._longPressTimer&&clearTimeout(this._longPressTimer);var a=this;this._longPressTimer=setTimeout(function(){a.app.commandRegistry.command("ActivateView").execute("LogView")},a._pressLengthMs)},_cancelLongPress:function(){if(this._longPressTimer)clearTimeout(this._longPressTimer),
this._longPressTimer=null}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarViewModel",geocortex.framework.ui.ViewModelBase,{toolbarVisible:null,toolbarGroups:null,toolbarTabs:null,currToolbarGrp:null,constructor:function(a){this.toolbarVisible=new Observable(false);this.toolbarGroups=new ObservableCollection;this.toolbarTabs=new ObservableCollection;this.currToolbarGrp=new Observable(null);this.registerCommands();this.app.site!=null&&this.app.site.isInitialized?this.toolbarVisible.set(true):a.eventRegistry.event("SiteInitializedEvent").subscribe(this,
function(){this.toolbarVisible.set(false)});var b=this;this.currToolbarGrp.bind(this,function(){b.currToolbarGrp.get().cssClass.set(b.currToolbarGrp.get().disabled.get()?"toolbar-item toolbar-group hidden":"toolbar-item toolbar-group")})},registerCommands:function(){this.app.commandRegistry.command("ToggleToolbar").register(this,this._toggleToolbar,this._isToolbarPresent)},initialize:function(a){if(a&&a.toolbarGroupRefs){for(var a=a.toolbarGroupRefs,b=0;b<a.length;b++){var c=this.app.toolbarGroupRegistry.getToolbarGroupById(a[b]);
if(c){this.toolbarGroups.addItem(c);c.selected=new Observable(false);var d=new geocortex.essentialsHtmlViewer.mapping.modules.toolbar.ToolbarTabViewModel(this.app,this.libraryId);d.group.set(c);d.title.set(c.name);d.tooltip.set(c.tooltip);c.isActive.sync(d.isActive);this.toolbarTabs.addItem(d)}}this.toolbarTabs.getLength()>0&&(d=this.toolbarTabs.getAt(0),d.isActive.set(true),this.currToolbarGrp.set(d.group.get()));this.handleDisabledItems(this.toolbarGroups.get())}},handleDisabledItems:function(a,
b){var c;try{for(var d=0;d<a.length;d++)c=a[d],c.items&&c.items.getLength()>0&&this.handleDisabledItems(c.items.get(),c),this.bindToDisabled(c,b)}catch(e){console.log("Error occured while setting CSS class for toolbar items: "+e)}},bindToDisabled:function(a,b){if(a){this.setCssClass(a,b);var c=this;a.disabled.bind(a,function(){c.setCssClass(a,b)})}},setCssClass:function(a,b){if(a.disabled&&a.disabled.get()===true)switch(a.type){case "toolbarGroup":a.cssClass.set("toolbar-item toolbar-group hidden");
break;case "tool":a.cssClass.set(a.hideOnDisable?"toolbar-item button hidden":"toolbar-item button disabled");break;case "button":a.cssClass.set(a.hideOnDisable?"toolbar-item button hidden":"toolbar-item button disabled")}else switch(a.type){case "toolbarGroup":a.cssClass.set(a.isActive.get()?"toolbar-item toolbar-group":"toolbar-item toolbar-group hidden");break;case "tool":a.cssClass.set(a.tool.isActive?"toolbar-item button highlight":"toolbar-item button");break;case "button":a.cssClass.set("toolbar-item button")}b&&
b.areAllHidden&&(b.disabled.set(b.areAllHidden(b.items)),b.disabled.get()?b.cssClass.set("toolbar-item toolbar-group hidden"):b.cssClass.set("toolbar-item toolbar-group"))},_toggleToolbar:function(){this.app.commandRegistry.command("ToggleView").execute("MainToolbarView");this.app.commandRegistry.command("RecenterMapOnNextMapResize").execute();this.app.eventRegistry.event("ApplicationResizedEvent").publish()},_isToolbarPresent:function(){return this.toolbarGroups&&this.toolbarGroups.getLength()>0?
true:false}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.tools.ToolsModule");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.tools.ToolsModule",geocortex.framework.application.ModuleBase,{config:null,toolChangedHandlerToken:null,constructor:function(){this.toolChangedHandlerToken=this.app.eventRegistry.event("ActiveToolChangedEvent").subscribe(this,this.activeToolChanged)},initialize:function(a){this.inherited(arguments);a||(a={});(this.config=a)&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,true);if(!a.hasOwnProperty("showStatusMessages"))a.showStatusMessages=
true;this.config.showStatusMessages||this.app.eventRegistry.event("ActiveToolChangedEvent").unsubscribe(this.toolChangedHandlerToken)},activeToolChanged:function(a){if(this.config.showStatusMessages)if(!a||!a.tool)a=a.previousTool.name+"StatusMessageView",this.app.commandRegistry.command("RemoveStatus").execute(a);else{var b=a.tool;if(b.statusText){var a=b.name+"StatusMessageView",c=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(b.statusText);c.id=a;c.imageUri=
b.iconUri;c.timeoutMS=0;c.userClosedCallback=dojo.hitch(this,function(){b.setActive(false)});this.app.commandRegistry.command("AddStatus").execute(c)}}}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryView",geocortex.framework.ui.ViewBase,{activityContext:null,workflowFormContent:null,attach:function(a){this.inherited(arguments);this.title.set(this.viewModel.title.get());this.app.eventRegistry.event("ViewActivatedEvent").publish(this);this.app.viewManager.notifyDimensionsChanged(this)},deactivated:function(){this.inherited(arguments);this._deactivated()},handleClickButton:function(a,b,c){this.viewModel.clearGraphics();
this.finishFormWithButton(c)},handleCaptureTypeSelection:function(a,b,c){this.viewModel.clearGraphics();this.viewModel.setDrawMode(this.app.map,c,b&&b.id==="CurrentExtent",this.id)},finishFormWithButton:function(a){this._processForm(this.activityContext,a)&&(this.workflowContainer&&this.workflowContainer.view&&(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)),this.app.viewManager.destroyView(this))},_processForm:function(a,b){var c=
null,d=null;if(b&&b.causesValidation&&b.causesValidation.get()){for(var c=this.viewModel.validate(),d=[],e=0;e<c.length;++e)c[e].isValid==false&&d.push(c[e]);if(d&&d.length>0)return this.viewModel.validationResults.set(d),false;else this.viewModel.validationResults.clear()}a.setValue("ButtonResultValue",b.value.get());a.completeActivity();return true},_deactivated:function(){this.viewModel.clearGraphics()}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryViewModel");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryViewModel",geocortex.framework.ui.ViewModelBase,{activityContext:null,validationResults:null,workflowFormContent:null,title:null,showTitleInFormBody:null,buttons:null,graphicsLayer:null,geometryTypeCssDictionary:null,showRequiredValidationMessage:null,showCapturedMessage:null,showCapturedGeometry:null,showCurrentExtentOption:null,geometryRequired:null,captureTypes:null,requiredMessage:null,currentExtentLabel:null,
currentExtentImage:null,inputGeometry:null,instructionMessage:null,formHeight:null,formWidth:null,defaultFormWidth:800,defaultFormHeight:600,defaultButton:null,app:null,drawType:null,toolbar:null,statusMessageID:"DisplayCaptureGeometryMessage",showCaptureStatusMessages:true,constructor:function(a){this.inherited(arguments);this.app=a;this.workflowFormContent=new Observable(null);this.title=new Observable(null);this.showTitleInFormBody=new Observable(false);this.buttons=new ObservableCollection([]);
this.formWidth=new Observable(this.defaultFormWidth);this.formHeight=new Observable(this.defaultFormHeight);this.showRequiredValidationMessage=new Observable(true);this.capturedMessageVisible=new Observable(false);this.showCapturedGeometry=new Observable(false);this.showCurrentExtentOption=new Observable(false);this.geometryRequired=new Observable(false);this.requiredMessage=new Observable(null);this.currentExtentLabel=new Observable(null);this.inputGeometry=new Observable(null);this.instructionMessage=
new Observable(null);this.captureTypes=new ObservableCollection;this.validationResults=new ObservableCollection;this.app.eventRegistry.event("ViewUnhostedEvent").subscribe(this,this.viewUnhostedHandler);this.app.trace.debug("DisplayCaptureGeometryViewModel: object constructed.")},initialize:function(a){var b=[],c=null,d=null,e=this.activityContext.getValue("CaptureTypes");a&&a.hasOwnProperty("showTitleInFormBody")&&this.showTitleInFormBody.set(a.showTitleInFormBody||false);for(a=0;a<e.length;a++){c=
e[a];if(c==="CurrentExtent")this.showCurrentExtentOption=new Observable(true);d={};d.typeName=c;d.selected=false;if(this.geometryTypeCssDictionary)d.className=this.geometryTypeCssDictionary[c];b.push(d)}this.captureTypes.addItems(b);this.inputGeometry=this.activityContext.getValue("InputGeometry");this.instructionMessage=this.activityContext.getValue("Message");this.requiredMessage=this.activityContext.getValue("RequiredMessage");this.currentExtentLabel=this.activityContext.getValue("CurrentExtentLabel")||
this.app.getResource(this.libraryId,"language-current_extent");this.showCapturedGeometry=this.activityContext.getValue("ShowCapturedGeometry");this.geometryRequired=this.activityContext.getValue("GeometryRequired");if(this.showCapturedGeometry)this.graphicsLayer=this.app.map.graphics;this.inputGeometry&&(this.addGraphic(this.inputGeometry,null,this.app.map),this.setCaptureResult(this.inputGeometry));c=this.activityContext.getValue("Buttons");b=[];if(c)for(a=0;a<c.length;a++){d=new geocortex.forms.FormButton(c[a].Label,
c[a].Value,c[a].CausesValidation,c[a].IsDefault);if(c[a].IsDefault)this.defaultButton=d;b.push(d)}else a=this.defaultButton=new geocortex.forms.FormButton("OK","OK",true,true),b.push(a),b.push(new geocortex.forms.FormButton("Cancel","Cancel",false,false));this.buttons=new ObservableCollection(b);this.app.trace.debug("DisplayCaptureGeometryViewModel: object initialized.");this.app.eventRegistry.event("MapMouseDownEvent").subscribe(this,function(a){a.which===3&&this.toolbar&&this.cleanUp()})},clearGraphics:function(){this.graphicsLayer&&
this.graphicsLayer.clear()},addGraphic:function(a,b,c){var d=null,d=null;if(this.showCapturedGeometry&&a&&c)b||(b=this._getDrawTool(c)),d=a.type,d=d==="point"||d==="multipoint"?b.markerSymbol:d==="line"||d==="polyline"?b.lineSymbol:b.fillSymbol,this.graphicsLayer.add(new esri.Graphic(a,d))},setCaptureResult:function(a){!a&&this.geometryRequired?this.showRequiredValidationMessage.set(true):(this.capturedMessageVisible.set(this.activityContext.getValue("ShowCapturedMessage")),this.showRequiredValidationMessage.set(false),
a.type==="extent"&&(a=geocortex.essentials.GeometryUtilities.envelopeToPolygon(a)),this.activityContext.setValue("Result",a))},_getDrawTool:function(a){if(this.toolbar==null)this.toolbar=new esri.toolbars.Draw(a,{showTooltips:false}),dojo.connect(this.toolbar,"onDrawEnd",dojo.hitch(this,this.drawEnd));return this.toolbar},_statusMessageID:"CaptureGeometryStatusMessage",setDrawMode:function(a,b,c){if(a)if(c)this.addGraphic(a.extent,null,a),this.setCaptureResult(a.extent);else if(esri.toolbars&&esri.toolbars.Draw)this.app.commandRegistry.command("ShowMap").execute(),
a=this._getDrawTool(a),this.drawType=geocortex.essentialsHtmlViewer.mapping.infrastructure.GeometryUtils.getEsriGeometryType(b.typeName),this.app.trace.debug("DisplayCaptureGeometryViewModel: setDrawMode :: Draw mode set."),a.deactivate(),a.activate(this.drawType),this.app.trace.debug("DisplayCaptureGeometryViewModel: setDrawMode :: Toolbar activated."),this.showCaptureStatusMessages&&(a=geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowModule.getCaptureGeometryStatusMessage(this.app,
this.libraryId,this.drawType,true),b=new geocortex.essentialsHtmlViewer.mapping.infrastructure.commandArgs.AddStatusArgs(a,null,dojo.hitch(this,this.userCancelled),b.className,this.statusMessageID),this.app.commandRegistry.command("AddStatus").execute(b),this.app.trace.debug("DisplayCaptureGeometryViewModel: setDrawMode :: Status Message assigned and displayed."))},drawEnd:function(a){var b=this.app.map,c=this._getDrawTool(b);if(a.type!="multipoint"||a.points.length>0)this.setCaptureResult(a),this.addGraphic(a,
c,b);this.app.commandRegistry.command("ActivateContainersForWorkflow").execute(this.activityContext.workflow().id);this.cleanUp();this.app.trace.debug("DisplayCaptureGeometryViewModel: drawEnd :: draw ended.")},cleanUp:function(){this.showCaptureStatusMessages&&this.app.commandRegistry.command("RemoveStatus").execute(this.statusMessageID);if(this.toolbar)this.toolbar.deactivate(),this.toolbar=null;this.app.trace.debug("DisplayCaptureGeometryViewModel: cleanUp :: clean up finished.")},userCancelled:function(){this._getDrawTool(this.app.map).finishDrawing();
this.cleanUp()},validate:function(){var a=[];this.geometryRequired&&this.showRequiredValidationMessage&&this.showRequiredValidationMessage.get()&&a.push(new geocortex.forms.items.validation.ValidationResult(false,this.requiredMessage));return a},viewUnhostedHandler:function(a){a.view.viewModel==this&&this.cleanUp()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayHyperlinkView",geocortex.framework.ui.ViewBase,{activityContext:null,attach:function(){this.inherited(arguments);this.title.set(this.viewModel.title.get());this.workflowContainer&&this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)},handleClickButton:function(a,b,c){this.activityContext&&(this.activityContext.setValue("ButtonResultValue",c.value.get()),this.activityContext.completeActivity());this.workflowContainer&&
(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view));this.app.viewManager.destroyView(this)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayHyperlinkViewModel",geocortex.framework.ui.ViewModelBase,{activityContext:null,workflowContainer:null,buttons:null,message:null,uri:null,hyperlinkText:null,target:null,title:null,showTitleInFormBody:null,constructor:function(){this.inherited(arguments);this.title=new Observable;this.showTitleInFormBody=new Observable(false)},initialize:function(a){if(this.activityContext&&a){var b=this.activityContext.getValue("Buttons"),
c=[];if(!b||b.length===0)b=[{Label:this.app.getResource(this.libraryId,"language-common-close"),Value:"Close",CausesValidation:false,IsDefault:false}];for(var d=0;d<b.length;d++){var e=new geocortex.forms.FormButton(b[d].Label,b[d].Value,b[d].CausesValidation,b[d].IsDefault);if(b[d].IsDefault)this.defaultButton=e;c.push(e)}this.buttons=Observable.makeBindableProxy(c);this.message=new Observable(this.activityContext.getValue("Message"));this.uri=new Observable(this.activityContext.getValue("Uri"));
this.hyperlinkText=new Observable(this.activityContext.getValue("HyperlinkText"));this.hyperlinkText.get()==null&&this.hyperlinkText.set(this.uri.get());this.target=new Observable(this.activityContext.getValue("Target"));a&&a.hasOwnProperty("showTitleInFormBody")&&this.showTitleInFormBody.set(a.showTitleInFormBody||false)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayReportUrlView",geocortex.framework.ui.ViewBase,{activityContext:null,activityContextCompleteActivity:null,handleClickButton:function(){this.app.viewManager.destroyView(this)},destroy:function(){this.inherited(arguments);this._completeActivity()},_completeActivity:function(){if(this.activityContext&&this.activityContextCompleteActivity){var a=this.activityContext;this.activityContext=null;this.activityContextCompleteActivity.apply(a)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayReportUrlViewModel",geocortex.framework.ui.ViewModelBase,{workflowContainer:null,buttons:null,url:null,target:"_blank",constructor:function(){this.inherited(arguments)},initialize:function(a){if(a)this.defaultButton=new geocortex.forms.FormButton(this.app.getResource(this.libraryId,"language-common-close"),"Close",false,true),this.buttons=Observable.makeBindableProxy([this.defaultButton]),this.url=new Observable(a)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerConfig");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerConfig",null,{name:null,regionName:null,internalRegionName:null,resourceName:null,view:null,isManaged:false,activityContext:null,hideForMapInteraction:false,showOverlay:null,displayHeader:null,busy:null,hasContent:null,message:null,iconUri:null,title:null,visible:null,constructor:function(a){dojo.safeMixin(this,a);this.showOverlay=new Observable(false);this.displayHeader=new Observable(a.displayHeader||false);this.busy=
new Observable(false);this.hasContent=new Observable(false);this.message=new Observable;this.iconUri=new Observable;this.title=new Observable;this.visible=new Observable(true)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerView",geocortex.framework.ui.ViewBase,{hasSubscribed:false,constructor:function(a){var b=this;if(a&&!this.hasSubscribed)this.hasSubscribed=true,a.eventRegistry.event("ViewContainerViewClosedEvent").subscribe(this,function(a){if(a&&(a.xButtonClicked||a.backButtonClicked)&&a.viewId===this.id&&b.viewModel&&b.viewModel.activityContext&&b.viewModel.activityContext.workflow)b.app.eventRegistry.event("WorkflowAbort").publish(b.viewModel.activityContext.workflow()),
b.app.eventRegistry.event("WorkflowAbortedEvent").publish(b.viewModel.activityContext.workflow())})},attach:function(a){this.inherited(arguments);this.title.sync(a.title);this.iconUri.sync(a.iconUri)}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",geocortex.framework.ui.ViewBase,{activityContext:null,workflowContainer:null,formDefinition:null,workflowFormContent:null,attach:function(a){this.workflowFormContent=a.workflowFormContent;this.workflowFormContent.bind(this,function(){this.app.viewManager.notifyDimensionsChanged(this)});this.activityContext=this.configuration.activityContext;this.workflowContainer=this.configuration.workflowContainer;this.inherited(arguments);
Modernizr&&!Modernizr.touch&&this._focusFirstItem();a.title.bind(this,function(a){this.title.set(a)});a.title.pulse();this.app.viewManager.notifyDimensionsChanged(this)},_focusFirstItem:function(){var a=dojo.query("input, textarea, select",this.root);if(a&&a.length>0)try{a[0].focus()}catch(b){}},handleSubmit:function(a){if(geocortex.essentialsHtmlViewer.___userInAutoComplete===true)return a.preventDefault(),false;var b=this.viewModel.getDefaultButton();if(b)this.finishFormWithButton(b);else return a.preventDefault(),
false},handleClickButton:function(a,b,c){this.finishFormWithButton(c)},finishFormWithButton:function(a){this._processForm(this.viewModel.formDefinition,this.activityContext,a)==true&&(this.workflowContainer!=null&&this.workflowContainer.view!=null&&(this.workflowContainer.hasContent.set(false),this.app.viewManager.notifyDimensionsChanged(this.workflowContainer.view)),this.app.viewManager.destroyView(this))},_processForm:function(a,b,c){if(a!=null&&c!=null&&c.causesValidation&&c.causesValidation.get()){for(var d=
a.validate(),e=[],f=0;f<d.length;++f)d[f].isValid==false&&e.push(d[f]);if(e!=null&&e.length>0)return this.viewModel.validationResults.set(e),false;else this.viewModel.validationResults.clear()}d=a.getResults();for(e=0;e<d.length;e++)(f=d[e])&&f.argumentName&&dojo.trim(f.argumentName)!=""&&b.setValue(f.argumentName,f.value,true);b.setValue("ButtonResultValue",c.value.get());a.destroy();b.completeActivity();return true},deactivated:function(){this.formDefinition!=null&&this.formDefinition.destroy();
this.formDefinition=null}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel",geocortex.framework.ui.ViewModelBase,{activityContext:null,formDefinition:null,validationResults:null,workflowFormContent:null,buttons:null,title:null,showTitleInFormBody:null,formHeight:null,formWidth:null,defaultFormWidth:800,defaultFormHeight:600,constructor:function(a){this.inherited(arguments);this.workflowFormContent=new Observable(null);this.buttons=new ObservableCollection([]);this.title=new Observable("Workflow form");
this.formWidth=new Observable(this.defaultFormWidth);this.formHeight=new Observable(this.defaultFormHeight);this.showTitleInFormBody=new Observable(false);this.validationResults=new ObservableCollection},initialize:function(a){a&&a.hasOwnProperty("showTitleInFormBody")&&this.showTitleInFormBody.set(a.showTitleInFormBody||false);this.buttons=a&&a.hasOwnProperty("buttons")?new ObservableCollection(a.buttons):new ObservableCollection;if(a&&a.hasOwnProperty("formDefinition"))this.formDefinition=a.formDefinition;
if(this.formDefinition!=null)this.formDefinition.attached_application=this.app,this.formWidth.set(this.formDefinition.maxWidth.get()),this.formHeight.set(this.formDefinition.maxHeight.get()),this.formWidth.get()<1&&this.formWidth.set(this.defaultFormWidth),this.title.set(this.formDefinition.title.get()),this.workflowFormContent.set(geocortex.forms.renderFormItem(this.formDefinition.containerFormItem,this.app))},getDefaultButton:function(){for(var a=null,b=null,c=0;c<this.buttons.getLength();c++)if(b=
this.buttons.getAt(c),b.isDefault.get()){a=b;break}return a}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowListView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowListView",geocortex.framework.ui.ViewBase,{_hideViewOnClickWorkflow:null,handleButtonClick:function(){},handleClickWorkflow:function(a,b,c){this.configuration.hideOnClickWorkflow&&this.app.commandRegistry.command("DeactivateView").execute(this.id);this.app.commandRegistry.command("RunWorkflowById").execute(c.id);return false},attach:function(a){this.inherited(arguments);this.title.set(this.app.getResource(this.libraryId,
"language-workflow-available-workflows"))}});geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers={};
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowModule",geocortex.framework.application.ModuleBase,{dispatcher:null,configuration:null,_eventListenersResults:null,_eventListenersToken:null,_containerConfigs:null,_workflowContainers:null,_iconMap:null,_defaultContainerTitle:null,_defaultContainerRegionName:null,_defaultContainerIconUri:null,_defaultFeatureSetCollectionId:null,defaultContainerName:null,_startupWorkflowIds:null,initialize:function(a){this._eventListenersResults=
{};this._eventListenersToken=[];this.configuration=a;this.inherited(arguments);this.defaultContainerName="Default";if(!a.showCaptureStatusMessages)a.showCaptureStatusMessages=true;if(!this._defaultFeatureSetCollectionId){var b=new FeatureSetCollection;this._defaultFeatureSetCollectionId=b.id;b.sourceName="Workflow";b.displayName.set("Workflow");this.app.featureSetManager.addCollection(b)}this._iconMap=a.icons?a.icons:{};this._workflowContainers={};this._defaultContainerTitle=a.defaultContainerTitle||
"Workflow";this._defaultContainerRegionName=a.defaultContainerRegionName||"ModalWindowRegion";this._defaultContainerIconUri=a.defaultContainerIconUri||"Resources/Images/workflow-24.png";this._containerConfigs=[];for(b=0;b<a.containers.length;++b){var c=a.containers[b],d=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerConfig(c);d.iconUri.set(c.iconUri||this._defaultContainerIconUri);d.title.set(c.title);this._containerConfigs[d.name]=d}this._startupWorkflowIds=[];if(a.startupWorkflows&&
a.startupWorkflows.length)for(b=0;b<a.startupWorkflows.length;b++)(c=a.startupWorkflows[b])&&(c.id?this._startupWorkflowIds.push(c.id):this._startupWorkflowIds.push(c));if(this.app.urlParameters&&(this.app.urlParameters.run||this.app.urlParameters.runWorkflow)){b=this.app.urlParameters.run?this.app.urlParameters.run.split(","):this.app.urlParameters.runWorkflow.split(",");for(c=0;c<b.length;c++)d=b[c],dojo.indexOf(this._startupWorkflowIds,d)<0&&this._startupWorkflowIds.push(d)}var e=this;this.dispatcher=
new geocortex.workflow.DefaultActivityDispatcher(function(a,b){e.app.eventRegistry.event("WorkflowActivityDispatchError").publish({error:a,context:b});e.app.eventRegistry.event("WorkflowActivityDispatchErrorEvent").publish({error:a,context:b})},function(a){e.app.eventRegistry.event("WorkflowActivityBegin").publish(a.workflow());e.app.eventRegistry.event("WorkflowActivityStartedEvent").publish(a.workflow())},function(a){e.app.eventRegistry.event("WorkflowActivityComplete").publish(a.workflow());e.app.eventRegistry.event("WorkflowActivityCompletedEvent").publish(a.workflow())},
function(a,b){e.app.eventRegistry.event("WorkflowCompletedEvent").publish(b,a);e.app.eventRegistry.event("WorkflowComplete").publish(b,a)});this.dispatcher.handleUnhandledActivityErrorFunction=function(a){e.app.trace.error(a.toString())};this.dispatcher._showDebugHandler=function(a,b){e._showDebugHandler(e,a,b)};this.dispatcher.handleOpenReportUrlFunction=function(a,b){e._handleOpenReportUrl(e,a,b)};this.app.eventRegistry.event("WorkflowCompletedEvent").subscribe(this,function(a){this.cleanupViewsForWorkflow(a)});
this.app.eventRegistry.event("WorkflowAbortedEvent").subscribe(this,function(a){this.cleanupViewsForWorkflow(a)});this.app.eventRegistry.event("WorkflowActivityDispatchErrorEvent").subscribe(this,function(a){var b=a.error,a=a.context,b=this.app.getResource(this.libraryId,"language-workflow-error").format(b.message);this.app.commandRegistry.command("Alert").execute(b);this.app.trace.error(b);a&&a.workflow&&this.cleanupViewsForWorkflow(a.workflow())});geocortex.forms.renderFormItem=function(a){var b=
null;e.configuration&&e.configuration.hasOwnProperty("formItems")&&(b=e.configuration.formItems);var c=null;a&&a.formDefinition&&(c=a.formDefinition.attached_application);return geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.FormRenderer.getItemView(c,a,b).root};this.registerActivityHandlers();this.registerCommands();this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(a){this._onSiteInitialized(a)});a&&a.tools&&this.app&&this.app.toolRegistry&&this.app.toolRegistry.createTools(a.tools,
true)},remapWorkflowContainerIconUri:function(a){var b=null;return b=!this._iconMap||!this._iconMap[a]?String.isNullOrEmpty(a)?this._defaultContainerIconUri:a:this._iconMap[a]},shutdown:function(){if(this._eventListenersToken)for(var a=0;a<this._eventListenersToken.length;a++)this._eventListenersToken[a]()},_showDebugHandler:function(a,b,c){var d=this,e={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",markupResource:"Mapping/modules/Workflow/WorkflowFormView.html",
isVisible:true,regionName:a._defaultContainerRegionName,libraryId:a.libraryId,iconUri:a.configuration.defaultContainerIconUri,configuration:{}},f=new geocortex.workflow.ActivityContext(this.dispatcher,0,null,null);e.configuration.activityContext=f;var g=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel(a.app);g.activityContext=f;g.initialize({showTitleInFormBody:a.configuration==null?false:a.configuration.showTitleInFormBody||false,formDefinition:b,buttons:[new geocortex.forms.FormButton("OK",
"OK",false,true)]});var h=a.app.viewManager.createView(e);h.attach(g);h.configuration={};f.completeActivity=function(){d.app.viewManager.destroyView(h);dojo.isFunction(c)&&c()};a.app.viewManager.activateView(h)},_handleOpenReportUrl:function(a,b,c){var d=a.app.viewManager.createView({markup:"Mapping/modules/Workflow/DisplayReportUrlView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayReportUrlView",visible:true,libraryId:a.libraryId,iconUri:a._defaultContainerIconUri}),
e=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayReportUrlViewModel;e.app=a.app;e.libraryId=a.libraryId;e.initialize(b);d.attach(e);d.activityContext=c;d.activityContextCompleteActivity=c.completeActivity;c.completeActivity=function(){a.app.trace.debug("activityContext.completeActivity ignored because the report url view is open")};b=new Observable(this.app.getResource(this.libraryId,"language-workflow-report-url-title"));e=a.getOrCreateContainer("Default");a.displayContainerContent(d,
e,b,c)},getOrCreateContainer:function(a){var b=this._containerConfigs[a];b==null&&(b=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerConfig({name:a,regionName:this._defaultContainerRegionName,view:null}),b.iconUri.set(this._defaultContainerIconUri),b.title.set(this._defaultContainerTitle));return b},cleanupViewsForWorkflow:function(a){var b=this._workflowContainers[a.id];b==null&&(b=this._workflowContainers[a.id]=[]);for(var c=0;c<b.length;++c){var d=b[c];geocortex.resourceManager.remove(this.libraryId,
d.resourceName,"inv");this.app.viewManager.destroyView(d.view);d.view=null}this._workflowContainers[a.id]=[]},createContainerView:function(a,b){var c=b.workflow(),d=geocortex.resourceManager.fetch("Mapping/modules/Workflow/WorkflowContainerView.html",this.libraryId,"inv");if(d==null)return this.app.trace.warning("Could not create container '{0}' - markup resource '{1}' could not be found.".format(a.name,viewConfig.markupResource)),false;var e="WorkflowContainerRegion-{0}".format(geocortex.framework.utils.alphaNumericToken()),
d=d.replace("!region-name-placeholder!",e),f="DynamicView-{0}-{1}".format(e,c.id);geocortex.resourceManager.register(this.libraryId,"inv",f,"html",geocortex.framework.utils.base64Encode(d));d={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowContainerView",isVisible:true,regionName:a.regionName,configuration:{internalRegionName:e},libraryId:this.libraryId};d.isManaged=a.isManaged;d.iconUri=a&&a.iconUri?a.iconUri.get():workflowModule._defaultContainerIconUri;d.markupResource=
f;a.view=this.app.viewManager.createView(d);a.view.activityContext=b;a.internalRegionName=e;a.activityContext=b;a.resourceName=f;a.view.attach(a);e=this._workflowContainers[c.id];e==null&&(e=this._workflowContainers[c.id]=[]);Array.contains(e,a)||e.push(a)},displayContainerContent:function(a,b,c,d){var e=d.workflow();b.view==null&&this.createContainerView(b,d);a.regionName=b.internalRegionName;c!=null&&b.view.viewModel.title.set(c.get());b.showOverlay.set(false);b.hasContent.set(true);b.view.activityContext=
d;this.app.viewManager.activateView(b.view);this.app.viewManager.activateView(a);this.app.viewManager.notifyDimensionsChanged(b.view);a=this._workflowContainers[e.id];a==null&&(a=this._workflowContainers[e.id]=[]);Array.contains(a,b)||a.push(b)},prepFeatureSetInCollection:function(a,b,c,d){var e=null,f=null;b?((f=this.app.featureSetManager.getCollectionById(b))?c&&f.clear():(f=new FeatureSetCollection,f.id=b,f.sourceName="Workflow",f.layer=d,this.app.featureSetManager.addCollection(f)),f.displayName.set(b)):
(f=this.app.featureSetManager.getCollectionById(this._defaultFeatureSetCollectionId),c&&f.clear(),f.layer=d);String.isNullOrEmpty(a.displayName.get())&&d&&a.displayName.set(d.displayName?d.displayName:d.name);this.app.featureSetManager.openCollection(f.id);f.featureSets.getLength()>0&&(e=f.getFeatureSetById(a.id));e?(e.displayName.set(a.id),e.append(a)):f.featureSets.addItem(a);this.app.featureSetManager.closeCollection(f.id)},registerActivityHandlers:function(){var a=this;this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.ListenForExternalEvent",
function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleListenForExternalEvent(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.CollectExternalEventArgs",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleCollectExternalEventArgs(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Alert",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleAlert(a,
b)});this.dispatcher.registerExternalIdHandler("IntersectLayers",function(a){geocortex.workflow.DefaultActivityHandlers.handleIntersectLayers(a)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.ConfigureWorkflowContainer",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleConfigureWorkflowContainer(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Confirm",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleConfirm(a,
b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayForm",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayForm(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayHyperlink",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayHyperlink(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.DisplayCaptureGeometry",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayCaptureGeometry(a,
b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.Prompt",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handlePrompt(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.RunExternalCommand",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleRunExternalCommand(a,b)});this.dispatcher.registerActivityHandler("Geocortex.Workflow.Activities.SelectFeatures",function(b){geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleSelectFeatures(a,
b)});this.app.setWorkflowActivityDispatcher(this.dispatcher)},_getContainersForWorkflowId:function(a){return this._workflowContainers&&this._workflowContainers.hasOwnProperty(a)?this._workflowContainers[a]:null},_activateContainersForWorkflow:function(a){if((a=this._getContainersForWorkflowId(a))&&a.length>0)for(var b=0;b<a.length;++b)this.app.commandRegistry.command("ActivateView").execute(a[b].view.id)},_deactivateContainersForWorkflow:function(a){if((a=this._getContainersForWorkflowId(a))&&a.length>
0)for(var b=0;b<a.length;++b)this.app.commandRegistry.command("DeactivateView").execute(a[b].view.id)},registerCommands:function(){this.app.commandRegistry.command("RunWorkflowById").register(this,function(a){if(!this.app.site||!this.app.site.isInitialized)this.app.trace.error("Error running workflow '{0}' - Site was not initialized.".format(a));else if(this.app&&this.app.isOffline&&this.app.isOffline.get())this.app.commandRegistry.command("Alert").execute(this.app.getResource(this.libraryId,"language-workflow-offline"),
this.app.getResource(this.libraryId,"language-workflow-offline-title")),this.app.trace.error("Error running workflow '{0}' - Unable to run workflows in an offline state".format(a));else{var b=this.app.site.findWorkflowById(a);b?geocortex.workflow.WorkflowControllerProxy.startWorkflow(b,this.dispatcher,null):this.app.trace.error("Error running workflow '{0}' - workflow not found in site.".format(a))}},function(a){return!this.app||!this.app.site||!this.app.site.isInitialized||this.app.isOffline&&this.app.isOffline.get()?
false:!this.app.site.findWorkflowById(a)?false:true});this.app.commandRegistry.command("RunWorkflowWithGeometry").register(this,function(a){if(!this.app.site||!this.app.site.isInitialized)this.app.trace.error("Error running workflow '{0}' - Site was not initialized.".format(a.workflowId));else if(this.app&&this.app.isOffline&&this.app.isOffline.get())this.app.commandRegistry.command("Alert").execute(this.app.getResource(this.libraryId,"language-workflow-offline"),this.app.getResource(this.libraryId,
"language-workflow-offline-title")),this.app.trace.error("Error running workflow '{0}' - Unable to run workflows in an offline state".format(a.workflowId));else{var b=this.app.site.findWorkflowById(a.workflowId);if(b){var c=b.getInputs();if(a.geometry&&c)for(var d=0;d<c.length;d++){var e=c[d];if(e!=null&&e.typeName!=null&&(e.typeName=="ESRI.ArcGIS.Client.Geometry.Geometry, ESRI.ArcGIS.Client"||a.geometry.type=="point"&&e.typeName=="ESRI.ArcGIS.Client.Geometry.Point, ESRI.ArcGIS.Client"||a.geometry.type==
"multipoint"&&e.typeName=="ESRI.ArcGIS.Client.Geometry.MultiPoint, ESRI.ArcGIS.Client"||a.geometry.type=="polyline"&&e.typeName=="ESRI.ArcGIS.Client.Geometry.Polyline, ESRI.ArcGIS.Client"||a.geometry.type=="polygon"&&e.typeName=="ESRI.ArcGIS.Client.Geometry.Polygon, ESRI.ArcGIS.Client"||a.geometry.type=="extent"&&e.typeName=="ESRI.ArcGIS.Client.Geometry.Envelope, ESRI.ArcGIS.Client"))e.value=a.geometry}geocortex.workflow.WorkflowControllerProxy.startWorkflow(b,this.dispatcher,c)}else this.app.trace.error("Error running workflow '{0}' - workflow not found in site.".format(a.workflowId))}},
function(a){return a&&a.workflowId&&this.app.site&&this.app.site.isInitialized?true:false});this.app.commandRegistry.command("RunWorkflowWithArguments").register(this,function(a){if(!this.app.site||!this.app.site.isInitialized)this.app.trace.error("Error running workflow '{0}' - Site was not initialized.".format(a.workflowId));else if(this.app&&this.app.isOffline&&this.app.isOffline.get())this.app.commandRegistry.command("Alert").execute(this.app.getResource(this.libraryId,"language-workflow-offline"),
this.app.getResource(this.libraryId,"language-workflow-offline-title")),this.app.trace.error("Error running workflow '{0}' - Unable to run workflows in an offline state".format(a.workflowId));else{var b=this.app.site.findWorkflowById(a.workflowId);if(b){var c=b.getInputs();if(c)for(var d=0;d<c.length;d++)c[d].value=a[c[d].name];geocortex.workflow.WorkflowControllerProxy.startWorkflow(b,this.dispatcher,c)}else this.app.trace.error("Error running workflow '{0}' - workflow not found in site.".format(a.workflowId))}},
function(a){return a&&a.workflowId&&this.app.site&&this.app.site.isInitialized?true:false});this.app.commandRegistry.command("DisplayWorkflowContainerContent").register(this,function(a){var b=a.containerName,c=a.view,a=a.activityContext;if(b!=null)container=this.getOrCreateContainer(b),regionName=container.internalRegionName;else throw Error("Missing container name in DisplayWorkflowContainerContent.");this.displayContainerContent(c,container,container.title,a)});this.app.commandRegistry.command("ActivateContainersForWorkflow").register(this,
this._activateContainersForWorkflow);this.app.commandRegistry.command("DeactivateContainersForWorkflow").register(this,this._deactivateContainersForWorkflow)},_onSiteInitialized:function(a){if(!a||!a.isInitialized)this.app.trace.error("Error processing startup workflows. - site was not initialized.");else{for(var b=this.app.site.workflows,c=0;c<b.length;c++)this.app.commandRegistry.command("RunWorkflowById").raiseCanExecuteChanged(b[c].id);if(!(this._startupWorkflowIds==null||this._startupWorkflowIds.length==
0))for(c=0;c<this._startupWorkflowIds.length;c++){var d=this._startupWorkflowIds[c];if(d!=null)if(b=a.findWorkflowById(d)){d=b.getInputs();if(d!=null&&this.app.urlParameters)for(var e=0;e<d.length;e++){var f=d[e];if(f!=null&&f.name!=null&&this.app.urlParameters[f.name])f.value=this.app.urlParameters[f.name]}geocortex.workflow.WorkflowControllerProxy.startWorkflow(b,this.dispatcher,d)}else this.app.trace.error("Error running startup workflow '{0}' - workflow not found in site.".format(d))}}}});
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowModule.getCaptureGeometryStatusMessage=function(a,b,c,d){switch(c){case esri.toolbars.Draw.POINT:return a.getResource(b,"language-capture-geometry-point");case esri.toolbars.Draw.MULTI_POINT:return d?a.getResource(b,"language-capture-geometry-multi-point"):a.getResource(b,"language-capture-geometry-point");case esri.toolbars.Draw.POLYLINE:return a.getResource(b,"language-capture-geometry-polyline");case esri.toolbars.Draw.POLYGON:return a.getResource(b,
"language-capture-geometry-polygon");case esri.toolbars.Draw.FREEHAND_POLYLINE:return a.getResource(b,"language-capture-geometry-freehand-polyline");case esri.toolbars.Draw.FREEHAND_POLYGON:return a.getResource(b,"language-capture-geometry-freehand-polygon");case esri.toolbars.Draw.EXTENT:return a.getResource(b,"language-capture-geometry-rectangle")}return a.getResource(b,"language-capture-geometry-default")};
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowTool",geocortex.essentialsHtmlViewer.mapping.infrastructure.tools.MapTool,{constructor:function(){this.command=null},workflowId:null,onDrawEnd:function(a){if(this.workflowId){var b={geometry:a,workflowId:this.workflowId};this.app.commandRegistry.command("RunWorkflowWithGeometry").execute(b)}this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowViewModel",geocortex.framework.ui.ViewModelBase,{isActive:null,workflows:null,initialize:function(){this.isActive=new Observable(false);this.workflows=new ObservableCollection;this.app.site!=null&&this.app.site.isInitialized?this.getWorkflows():this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,function(){this.getWorkflows()})},getWorkflows:function(){this.workflows.set(this.app.site.workflows)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.FormRenderer",null,{itemTypeViewMap:{},render:function(a,b){a.attached_application=b;var c={};c.activityContext=activityContext;c.workflowContainer=container;var c=workflowModule.app.viewManager.createView({type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",markup:"Mapping/modules/Workflow/WorkflowFormView.html",visible:true,region:null,configuration:c,libraryId:this.libraryId}),d=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel(b);
d.activityContext=activityContext;d.initialize();c.attach(d);c.title.set(title);c.configuration={};return c}});
geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.FormRenderer.getItemView=function(a,b,c){function d(c,d){var g=a.viewManager.createView({type:d,markup:c,visible:true,region:null,libraryId:"Mapping"});g.attach(b);return g}if(c&&c.hasOwnProperty(b.declaredClass))return c=c[b.declaredClass],d(c.markup,c.codebehind,b);else switch(b.formItemType){case "TextBoxFormItem":return d("Mapping/modules/Workflow/Forms/Items/TextBoxFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase",
b);case "ImageFormItem":return d("Mapping/modules/Workflow/Forms/Items/ImageFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase",b);case "TextAreaFormItem":return d("Mapping/modules/Workflow/Forms/Items/TextAreaFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase",b);case "CheckBoxFormItem":return d("Mapping/modules/Workflow/Forms/Items/CheckBoxFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.CheckBoxFormItemView",
b);case "ContainerFormItem":return d("Mapping/modules/Workflow/Forms/Items/ContainerFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ContainerFormItemView",b);case "RadioButtonFormItem":return d("Mapping/modules/Workflow/Forms/Items/RadioButtonFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.RadioButtonFormItemView",b);case "HyperlinkFormItem":return d("Mapping/modules/Workflow/Forms/Items/HyperlinkFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.HyperlinkFormItemView",
b);case "GroupBoxFormItem":return d("Mapping/modules/Workflow/Forms/Items/GroupBoxFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ContainerFormItemView",b);case "ComboBoxFormItem":return d("Mapping/modules/Workflow/Forms/Items/ComboBoxFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ListBoxFormItemView",b);case "DatePickerFormItem":return d("Mapping/modules/Workflow/Forms/Items/DatePickerFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.DatePickerFormItemView",
b);case "FilePickerFormItem":return d("Mapping/modules/Workflow/Forms/Items/FilePickerFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FilePickerFormItemView",b);case "TimePickerFormItem":return d("Mapping/modules/Workflow/Forms/Items/TimePickerFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.TimePickerFormItemView",b);case "ListBoxFormItem":return d("Mapping/modules/Workflow/Forms/Items/ListBoxFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ListBoxFormItemView",
b);case "AutoCompleteBoxFormItem":return d("Mapping/modules/Workflow/Forms/Items/AutoCompleteBoxFormItemView.html","geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.AutoCompleteBoxFormItemView",b);default:return a.trace.warning("Could not render FormItem of type '{0}'.".format(b.formItemType)),null}};
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.AutoCompleteBoxFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{textElement:null,dropDownContainerElement:null,dropDownListElement:null,timer:null,positionIndex:null,lastKeyEvent:null,keyTraverseInterval:null,closeTimer:null,_queryCancelled:false,_searchFocus:false,constructor:function(){this.isBusy=new Observable(false);this.positionIndex=0;this.keyTraverseInterval=
25},attach:function(a){a.isDropDownOpen=new Observable(false);this.inherited(arguments);this.lastKeyEvent=(new Date).getTime();this.addDisposableBinding(this.viewModel.dataItems,this.viewModel.dataItems.bind(this,function(){this.isBusy.set(false);this.viewModel.dataItems.getLength()>0?(this.positionIndex=0,this._queryCancelled||this.openDropDown()):this.closeDropDown()}))},handleInputBlurEvent:function(a,b,c){var d=this;this.isBusy.set(false);this._searchFocus=false;this.closeTimer=setTimeout(function(){if(!d._searchFocus)d._queryCancelled=
true,d.viewModel.queryTaskRunner.triggerCascading(c.text.get()),d.closeDropDown()},750)},handleInputFocusEvent:function(){this._queryCancelled=false;this._searchFocus=true},handleDropdownFocusEvent:function(){var a=this;setTimeout(function(){a._searchFocus=true},100);if(this.closeTimer!=null)clearTimeout(this.closeTimer),this.closeTimer=null;return true},handleDropdownBlurEvent:function(){this.closeDropDown();return true},handleClickItem:function(a,b,c){this.viewModel.text.set(c.display);this.viewModel.queryTaskRunner.triggerCascading(c.display);
this.closeDropDown()},openDropDown:function(){geocortex.essentialsHtmlViewer.___userInAutoComplete=true;this.viewModel.isDropDownOpen.set(true);this.positionIndex=-1;$(this.dropDownContainerElement).removeClass("inactive").addClass("active")},closeDropDown:function(){geocortex.essentialsHtmlViewer.___userInAutoComplete=false;this.viewModel.isDropDownOpen.set(false);$(this.dropDownContainerElement).removeClass("active").addClass("inactive")},setDropDownPosition:function(a){a=Math.min(a,this.viewModel.dataItems.getLength()-
1);dojo.removeClass(dropDownListElement,"autocomplete-highlight");this.positionIndex=Math.max(0,a);li=$("li",this.dropDownListElement).eq(this.positionIndex);$(li).addClass("autocomplete-highlight");(a=this.viewModel.dataItems.getAt(this.positionIndex))&&this.viewModel.text.set(a.display);li.length>0&&$(this.dropDownContainerElement).scrollTop($(this.dropDownContainerElement).scrollTop()+$(li).position().top-$(this.dropDownContainerElement).height()/2+$(li).height()/2)},handleDropdownKeyDown:function(a,
b,c){return a.which===13?handleKeyEvent(a,b,c):true},handleKeyEvent:function(a,b,c){b=(new Date).getTime();if(b-this.lastKeyEvent>this.keyTraverseInterval)if(this.lastKeyEvent=b,a.which===38||a.which===40)this.viewModel.isDropDownOpen.get()&&(a.which===40?this.setDropDownPosition(this.positionIndex+1):a.which===38&&this.setDropDownPosition(this.positionIndex-1));else if(this.viewModel.isDropDownOpen.get()&&a.which===13){if(a=this.viewModel.dataItems.getAt(this.positionIndex))this.viewModel.text.set(a.display),
this.viewModel.queryTaskRunner.triggerCascading(a.display);this.closeDropDown();this.timer!=null&&clearInterval(this.timer);return false}else if(this.viewModel.isDropDownOpen.get()&&a.which===8)return this.closeDropDown(),this.viewModel.queryTaskRunner.triggerCascading(null),a.which==8&&this.trigger(),false;else if(!(a.which===9||a.which===37||a.which===39))if(a.which===13)return this.viewModel.queryTaskRunner.triggerCascading(c.display),false;else this.trigger();return true},trigger:function(){this.timer!=
null&&clearInterval(this.timer);if(this.textElement.value.length>=this.viewModel.minimumPrefixLength.get()){var a=this;this.timer=setTimeout(function(){a.filter(false)},this.viewModel.minimumPopulateDelay.get())}},filter:function(a){if(this.timer!=null)clearInterval(this.timer),this.timer=null;this.closeDropDown();this.viewModel.queryTaskRunner.performQuery(this.textElement.value,a)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.CheckBoxFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{attach:function(a){a.attached_textOnLeft=new Observable(false);this.addDisposableBinding(a.textLocation,a.textLocation.bind(this,function(b){a.attached_textOnLeft.set(b.toLowerCase()==="left")}));a.textLocation.pulse();a.attached_controlId=new Observable("checkbox-{0}".format(geocortex.framework.utils.alphaNumericToken()));
a.attached_labelText=a.text!=null?new Observable(a.text.get()):"";this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ContainerFormItemView",geocortex.framework.ui.ViewBase,{attached_cssClass:null,constructor:function(){this.attached_cssClass=new Observable("form label-left vert")},attach:function(a){a.attached_cssClass=this.attached_cssClass;this.auto(a.orientation,this,function(){this.attached_cssClass.set("form label-left {0}".format(a.orientation.get()==="Horizontal"?"horiz":"vert"))});a.orientation.pulse();this.inherited(arguments)}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.DatePickerFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.TimePickerFormItemView,{attached_pickerType:null,attached_isNull:null,attached_days:null,attached_months:null,attached_years:null,attached_day:null,attached_month:null,attached_year:null,selectElementCount:11,_lastClearedDate:null,_syncComboBoxes:function(){for(var a=[this.attached_day,this.attached_month,this.attached_year],
b=0;b<a.length;++b)a[b].bind(this,dojo.hitch(this,this._calcTime))},_daysPerMonth:{0:31,1:28,2:31,3:30,4:31,5:30,6:31,7:31,8:30,9:31,10:30,11:31},_isLeapYear:function(a){return a%400===0?true:a%100===0?false:a%4===0?true:false},_calcTime:function(){var a=this.attached_month.get();if(a!=null){var b=this._daysPerMonth[a];a===2&&(b=29);if(this.attached_days.getLength()<b)for(a=this.attached_days.getLength();a<b;++a)this.attached_days.addItem(a+1);else this.attached_days.removeRange(b)}},setPickerDateTime:function(a){this.inherited(arguments);
if(a!=null)this.attached_day.set(a.getDate()),this.attached_month.set(a.getMonth()),this.attached_year.set(a.getFullYear());else{this.attached_day.set(null);this.attached_month.set(null);this.attached_year.set(null);for(var b=0;b<=this.selectElementCount;b++)if(this["select"+b])this["select"+b].selectedIndex=-1}if(this.native_datetime_element)this.native_datetime_element.valueAsDate=a;if(this.native_date_element)this.native_datetime_element.valueAsDate=a;this.attached_pickerType.get()==="jQuery"&&
$(this.jQueryPicker,this.root).datetimepicker("setDate",a)},handleChange:function(a){this.inherited(arguments);var b;try{b=new Date(a)}catch(c){b=new Date}isNaN(b.getTime())&&(b=new Date);this.viewModel.date.set(b);this.setPickerDateTime(b);this.handleChangeComboBoxTime()},handleChangeComboBoxTime:function(){var a=this.viewModel.date.get();this.attached_year.get()!=null||this.attached_month.get()!=null||this.attached_day.get()!=null||this.viewModel.includeTimePicker.get()&&(this.attached_hour.get()!=
null||this.attached_minute.get()!=null||this.attached_second.get()!=null)?(a||(a=new Date,this.viewModel.includeTimePicker.get()||(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0))),this.attached_year.get()==null&&this.attached_year.set(a.getFullYear()),this.attached_month.get()==null&&this.attached_month.set(a.getMonth()),this.attached_day.get()==null&&this.attached_day.set(a.getDate()),a.setFullYear(this.attached_year.get()),a.setMonth(this.attached_month.get()),a.setDate(this.attached_day.get()),
this.viewModel.includeTimePicker.get()&&(this.attached_hour.get()==null&&this.attached_hour.set(a.getHours()),this.attached_minute.get()==null&&this.attached_minute.set(a.getMinutes()),this.attached_second.get()==null&&this.attached_second.set(a.getSeconds()),a.setHours(this.attached_hour.get()),a.setMinutes(this.attached_minute.get()),a.setSeconds(this.attached_second.get()))):a=null;this.viewModel.date.set(a)},attach:function(a){this.attached_pickerType=new Observable("combos");a.attached_isNull=
new Observable;a.attached_isNull.syncTransform(a.date,function(a){return a==null});var b=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Mobile Safari")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1),c=navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Firefox")>-1;Modernizr&&Modernizr.inputtypes.date&&!(navigator.userAgent.indexOf("Chrome")>-1)&&!b&&!c?(this.attached_pickerType.set("native"),a.includeTimePicker.get()===true&&(Modernizr.inputtypes.datetime?
this.attached_pickerType.set("native_datetime"):this.attached_pickerType.set("native_date_combo_time"))):Modernizr.touch?(this.attached_pickerType.set("combos"),a.includeTimePicker.get()===true&&this.attached_pickerType.set("combos_datetime")):this.attached_pickerType.set("jQuery");a.attached_pickerType=this.attached_pickerType;this.viewModel=a;this.attached_days=new ObservableCollection;this.attached_months=new ObservableCollection;this.attached_years=new ObservableCollection;this.attached_day=new Observable(1);
this.attached_month=new Observable(1);this.attached_year=new Observable(2E3);a.attached_days=this.attached_days;a.attached_months=this.attached_months;a.attached_years=this.attached_years;a.attached_day=this.attached_day;a.attached_month=this.attached_month;a.attached_year=this.attached_year;this._buildComboBoxes(a);var d=this;setTimeout(function(){d.viewModel.date?d.setPickerDateTime(d.viewModel.date.get()):d.viewModel.time&&d.setPickerDateTime(d.viewModel.time.get())},1);this._syncComboBoxes();
this.inherited(arguments);this._createjQueryPicker()},_createjQueryPicker:function(){var a=this;$(this.jQueryPicker,this.root).blur();var b={dateFormat:this.viewModel._dateFormatStr.get(),showOn:"button",changeYear:true,yearRange:"c-50:c+50",onClose:function(){a.disabled=true;a.readOnly=true},beforeShow:function(){a.disabled=true;a.readOnly=true},onSelect:function(b){a.handleChange(b)}};if(this.attached_pickerType.get()==="jQuery")this.viewModel.includeTimePicker.get()?(b.timeFormat=a.viewModel.timePickerItem._timeFormatStr.get(),
b.showSecond=this.viewModel.timePickerItem.timeFormat.get()==="LongTime"):(b.hourMin=0,b.hourMax=0,b.minuteMin=0,b.minuteMax=0,b.showHour=false,b.showMinute=false,b.showTime=false,b.timeFormat=""),$(this.jQueryPicker,this.root).datetimepicker(b),$(this.jQueryPicker,this.root).datetimepicker("setDate",this.viewModel.date.get());else if(this.attached_pickerType.get()==="native_date_jQuery_time")b.timeFormat=a.viewModel.timePickerItem._timeFormatStr.get(),b.showSecond=a.viewModel.timePickerItem.timeFormat.get()===
"LongTime",$(this.jQueryPicker,this.root).timepicker(b)},_buildComboBoxes:function(a){this.inherited(arguments);for(var b=[],c=1900;c<=2100;++c)b.push(c);this.attached_years.set(b);b=[];for(c=0;c<12;++c){var d="language-months-{0}".format(c);b.push({value:c,name:this.app.getResource(this.libraryId,d)})}this.attached_months.set(b);b=[];for(c=1;c<32;++c)b.push(c);this.attached_days.set(b)},handleClickSetNull:function(){if(this.viewModel.date.get())this._lastClearedDate=this.viewModel.date.get();this.viewModel.date.set(null);
this.setPickerDateTime(null)},handleClickSetNotNull:function(){if(this._lastClearedDate!=null)this.viewModel.date.set(this._lastClearedDate),this.setPickerDateTime(this._lastClearedDate),this._lastClearedDate=null;else{var a=new Date;this.viewModel.date.set(a);this.setPickerDateTime(a)}}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FilePickerFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{attach:function(a){this.inherited(arguments)},handleChange:function(a){this.viewModel.files.clear();for(var b=this,c=function(a){var c=a.name,d=a.size,h=a.type,j=new FileReader;j.onload=function(a){var e=new geocortex.forms.FileItem;e.fileName=c;e.fileSize=d;e.fileType=h;e.fileDataBase64=unescape(a.target.result.substring(a.target.result.indexOf("base64,")+
7));b.viewModel.files.addItem(e)};j.readAsDataURL(a)},d=0;d<a.currentTarget.files.length;d++)c(a.currentTarget.files[d])},handleClearClick:function(){this.viewModel.clear()},handleTest:function(){alert("Click. FileInput: "+typeof $(".fileInput",this.root));$(".fileInput",this.root).show();$(".fileInput",this.root).focus();$(".fileInput",this.root).click()}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.GroupBoxFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ContainerFormItemView,{});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.HyperlinkFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{attach:function(a){this.inherited(arguments)},handleClick:function(){this.viewModel.wasClicked.set(true);return true}});
(function(a){function b(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone",isRTL:false};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showMillisec:false,showTimezone:false,showTime:true,stepHour:1,stepMinute:1,
stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:false,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,
timezoneIso8601:false,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"};a.extend(this._defaults,this.regional[""])}a.ui.timepicker=a.ui.timepicker||{};if(!a.ui.timepicker.version){a.extend(a.ui,{timepicker:{version:"1.1.1"}});a.extend(b.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,
defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec"],control:null,setDefaults:function(a){c(this._defaults,a||{});return this},_newInst:function(c,d){var e=new b,f={},g={},q,n;for(q in this._defaults)if(this._defaults.hasOwnProperty(q)){var m=
c.attr("time:"+q);if(m)try{f[q]=eval(m)}catch(r){f[q]=m}}q={beforeShow:function(b,d){if(a.isFunction(e._defaults.evnts.beforeShow))return e._defaults.evnts.beforeShow.call(c[0],b,d,e)},onChangeMonthYear:function(b,d,j){e._updateDateTime(j);a.isFunction(e._defaults.evnts.onChangeMonthYear)&&e._defaults.evnts.onChangeMonthYear.call(c[0],b,d,j,e)},onClose:function(b,d){e.timeDefined===true&&c.val()!==""&&e._updateDateTime(d);a.isFunction(e._defaults.evnts.onClose)&&e._defaults.evnts.onClose.call(c[0],
b,d,e)}};for(n in q)q.hasOwnProperty(n)&&(g[n]=d[n]||null);e._defaults=a.extend({},this._defaults,f,d,q,{evnts:g,timepicker:e});e.amNames=a.map(e._defaults.amNames,function(a){return a.toUpperCase()});e.pmNames=a.map(e._defaults.pmNames,function(a){return a.toUpperCase()});if(typeof e._defaults.controlType==="string"){if(a.fn[e._defaults.controlType]===void 0)e._defaults.controlType="select";e.control=e._controls[e._defaults.controlType]}else e.control=e._defaults.controlType;if(e._defaults.timezoneList===
null)f="-1200,-1100,-1000,-0930,-0900,-0800,-0700,-0600,-0500,-0430,-0400,-0330,-0300,-0200,-0100,+0000,+0100,+0200,+0300,+0330,+0400,+0430,+0500,+0530,+0545,+0600,+0630,+0700,+0800,+0845,+0900,+0930,+1000,+1030,+1100,+1130,+1200,+1245,+1300,+1400".split(","),e._defaults.timezoneIso8601&&(f=a.map(f,function(a){return a=="+0000"?"Z":a.substring(0,3)+":"+a.substring(3)})),e._defaults.timezoneList=f;e.timezone=e._defaults.timezone;e.hour=e._defaults.hour;e.minute=e._defaults.minute;e.second=e._defaults.second;
e.millisec=e._defaults.millisec;e.ampm="";e.$input=c;if(d.altField)e.$altInput=a(d.altField).css({cursor:"pointer"}).focus(function(){c.trigger("focus")});if(e._defaults.minDate===0||e._defaults.minDateTime===0)e._defaults.minDate=new Date;if(e._defaults.maxDate===0||e._defaults.maxDateTime===0)e._defaults.maxDate=new Date;if(e._defaults.minDate!==void 0&&e._defaults.minDate instanceof Date)e._defaults.minDateTime=new Date(e._defaults.minDate.getTime());if(e._defaults.minDateTime!==void 0&&e._defaults.minDateTime instanceof
Date)e._defaults.minDate=new Date(e._defaults.minDateTime.getTime());if(e._defaults.maxDate!==void 0&&e._defaults.maxDate instanceof Date)e._defaults.maxDateTime=new Date(e._defaults.maxDate.getTime());if(e._defaults.maxDateTime!==void 0&&e._defaults.maxDateTime instanceof Date)e._defaults.maxDate=new Date(e._defaults.maxDateTime.getTime());e.$input.bind("focus",function(){e._onFocus()});return e},_addTimePicker:function(a){this.timeDefined=this._parseTime(this.$altInput&&this._defaults.altFieldTimeOnly?
this.$input.val()+" "+this.$altInput.val():this.$input.val());this._limitMinMaxDateTime(a,false);this._injectTimePicker()},_parseTime:function(b,c){if(!this.inst)this.inst=a.datepicker._getInst(this.$input[0]);if(c||!this._defaults.timeOnly){var d=a.datepicker._get(this.inst,"dateFormat");try{var e=f(d,this._defaults.timeFormat,b,a.datepicker._getFormatConfig(this.inst),this._defaults);if(!e.timeObj)return false;a.extend(this,e.timeObj)}catch(g){return a.datepicker.log("Error parsing the date/time string: "+
g+"\ndate/time string = "+b+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+d),false}}else{d=a.datepicker.parseTime(this._defaults.timeFormat,b,this._defaults);if(!d)return false;a.extend(this,d)}return true},_injectTimePicker:function(){var b=this.inst.dpDiv,c=this.inst.settings,e=this,f="",o="",q={},n={},m=null;if(b.find("div.ui-timepicker-div").length===0&&c.showTimepicker){for(var m='<div class="ui-timepicker-div'+(c.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+
(c.showTime?"":' style="display:none;"')+">"+c.timeText+'</dt><dd class="ui_tpicker_time"'+(c.showTime?"":' style="display:none;"')+"></dd>",r=0,s=this.units.length;r<s;r++){f=this.units[r];o=f.substr(0,1).toUpperCase()+f.substr(1);q[f]=parseInt(c[f+"Max"]-(c[f+"Max"]-c[f+"Min"])%c["step"+o],10);n[f]=0;m+='<dt class="ui_tpicker_'+f+'_label"'+(c["show"+o]?"":' style="display:none;"')+">"+c[f+"Text"]+'</dt><dd class="ui_tpicker_'+f+'"><div class="ui_tpicker_'+f+'_slider"'+(c["show"+o]?"":' style="display:none;"')+
"></div>";if(c["show"+o]&&c[f+"Grid"]>0){m+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(f=="hour")for(o=c[f+"Min"];o<=q[f];o+=parseInt(c[f+"Grid"],10)){n[f]++;var t=a.datepicker.formatTime(d(c.pickerTimeFormat||c.timeFormat)?"hht":"HH",{hour:o},c);m+='<td data-for="'+f+'">'+t+"</td>"}else for(o=c[f+"Min"];o<=q[f];o+=parseInt(c[f+"Grid"],10))n[f]++,m+='<td data-for="'+f+'">'+(o<10?"0":"")+o+"</td>";m+="</tr></table></div>"}m+="</dd>"}m+='<dt class="ui_tpicker_timezone_label"'+
(c.showTimezone?"":' style="display:none;"')+">"+c.timezoneText+"</dt>";m+='<dd class="ui_tpicker_timezone" '+(c.showTimezone?"":' style="display:none;"')+"></dd>";m+="</dl></div>";var v=a(m);c.timeOnly===true&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+c.timeOnlyTitle+"</div></div>"),b.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());r=0;for(s=e.units.length;r<s;r++)f=e.units[r],o=f.substr(0,1).toUpperCase()+f.substr(1),
e[f+"_slider"]=e.control.create(e,v.find(".ui_tpicker_"+f+"_slider"),f,e[f],c[f+"Min"],q[f],c["step"+o]),c["show"+o]&&c[f+"Grid"]>0&&(m=100*n[f]*c[f+"Grid"]/(q[f]-c[f+"Min"]),v.find(".ui_tpicker_"+f+" table").css({width:m+"%",marginLeft:c.isRTL?"0":m/(-2*n[f])+"%",marginRight:c.isRTL?m/(-2*n[f])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var b=a(this),c=b.html(),d=parseInt(c.replace(/[^0-9]/g),10),c=c.replace(/[^apm]/ig),b=b.data("for");b=="hour"&&(c.indexOf("p")!==-1&&d<12?d+=
12:c.indexOf("a")!==-1&&d===12&&(d=0));e.control.value(e,e[b+"_slider"],f,d);e._onTimeChange();e._onSelectHandler()}).css({cursor:"pointer",width:100/n[f]+"%",textAlign:"center",overflow:"hidden"}));this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,a.map(c.timezoneList,function(b){return a("<option />").val(typeof b=="object"?b.value:b).text(typeof b=="object"?b.label:b)}));typeof this.timezone!="undefined"&&this.timezone!==
null&&this.timezone!==""?a.timepicker.timeZoneOffsetString(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12))==this.timezone?g(e):this.timezone_select.val(this.timezone):typeof this.hour!="undefined"&&this.hour!==null&&this.hour!==""?this.timezone_select.val(c.defaultTimezone):g(e);this.timezone_select.change(function(){e._defaults.useLocalTimezone=false;e._onTimeChange()});c=b.find(".ui-datepicker-buttonpane");c.length?c.before(v):b.append(v);this.$timeObj=v.find(".ui_tpicker_time");
if(this.inst!==null)b=this.timeDefined,this._onTimeChange(),this.timeDefined=b;if(this._defaults.addSliderAccess){var y=this._defaults.sliderAccessArgs,w=this._defaults.isRTL;y.isRTL=w;setTimeout(function(){if(v.find(".ui-slider-access").length===0){v.find(".ui-slider:visible").sliderAccess(y);var b=v.find(".ui-slider-access:eq(0)").outerWidth(true);b&&v.find("table:visible").each(function(){var c=a(this),d=c.outerWidth(),e=c.css(w?"marginRight":"marginLeft").toString().replace("%",""),h=d-b,f={width:h,
marginRight:0,marginLeft:0};f[w?"marginRight":"marginLeft"]=e*h/d+"%";c.css(f)})}},10)}}},_limitMinMaxDateTime:function(b,c){var d=this._defaults,e=new Date(b.selectedYear,b.selectedMonth,b.selectedDay);if(this._defaults.showTimepicker){if(a.datepicker._get(b,"minDateTime")!==null&&a.datepicker._get(b,"minDateTime")!==void 0&&e){var f=a.datepicker._get(b,"minDateTime"),g=new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===
null||this.millisecMinOriginal===null)this.hourMinOriginal=d.hourMin,this.minuteMinOriginal=d.minuteMin,this.secondMinOriginal=d.secondMin,this.millisecMinOriginal=d.millisecMin;if(b.settings.timeOnly||g.getTime()==e.getTime())if(this._defaults.hourMin=f.getHours(),this.hour<=this._defaults.hourMin)if(this.hour=this._defaults.hourMin,this._defaults.minuteMin=f.getMinutes(),this.minute<=this._defaults.minuteMin)if(this.minute=this._defaults.minuteMin,this._defaults.secondMin=f.getSeconds(),this.second<=
this._defaults.secondMin)this.second=this._defaults.secondMin,this._defaults.millisecMin=f.getMilliseconds();else{if(this.millisec<this._defaults.millisecMin)this.millisec=this._defaults.millisecMin;this._defaults.millisecMin=this.millisecMinOriginal}else this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal;else this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal;
else this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal}if(a.datepicker._get(b,"maxDateTime")!==null&&a.datepicker._get(b,"maxDateTime")!==void 0&&e){f=a.datepicker._get(b,"maxDateTime");g=new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null)this.hourMaxOriginal=
d.hourMax,this.minuteMaxOriginal=d.minuteMax,this.secondMaxOriginal=d.secondMax,this.millisecMaxOriginal=d.millisecMax;if(b.settings.timeOnly||g.getTime()==e.getTime())if(this._defaults.hourMax=f.getHours(),this.hour>=this._defaults.hourMax)if(this.hour=this._defaults.hourMax,this._defaults.minuteMax=f.getMinutes(),this.minute>=this._defaults.minuteMax)this.minute=this._defaults.minuteMax,this._defaults.secondMax=f.getSeconds();else if(this.second>=this._defaults.secondMax)this.second=this._defaults.secondMax,
this._defaults.millisecMax=f.getMilliseconds();else{if(this.millisec>this._defaults.millisecMax)this.millisec=this._defaults.millisecMax;this._defaults.millisecMax=this.millisecMaxOriginal}else this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal;else this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=
this.millisecMaxOriginal}c!==void 0&&c===true&&(d=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),e=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),f=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),g=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,
10),this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:d}),this.control.value(this,this.hour_slider,"hour",this.hour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:e}),this.control.value(this,this.minute_slider,"minute",this.minute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:f}),this.control.value(this,this.second_slider,
"second",this.second)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:g}),this.control.value(this,this.millisec_slider,"millisec",this.millisec)))}},_onTimeChange:function(){var b=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):false,c=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):false,e=this.second_slider?this.control.value(this,this.second_slider,"second"):false,f=this.millisec_slider?
this.control.value(this,this.millisec_slider,"millisec"):false,g=this.timezone_select?this.timezone_select.val():false,q=this._defaults,n=q.pickerTimeFormat||q.timeFormat,m=q.pickerTimeSuffix||q.timeSuffix;typeof b=="object"&&(b=false);typeof c=="object"&&(c=false);typeof e=="object"&&(e=false);typeof f=="object"&&(f=false);typeof g=="object"&&(g=false);b!==false&&(b=parseInt(b,10));c!==false&&(c=parseInt(c,10));e!==false&&(e=parseInt(e,10));f!==false&&(f=parseInt(f,10));var r=q[b<12?"amNames":"pmNames"][0],
s=b!=this.hour||c!=this.minute||e!=this.second||f!=this.millisec||this.ampm.length>0&&b<12!=(a.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone===null&&g!=this.defaultTimezone||this.timezone!==null&&g!=this.timezone;if(s){if(b!==false)this.hour=b;if(c!==false)this.minute=c;if(e!==false)this.second=e;if(f!==false)this.millisec=f;if(g!==false)this.timezone=g;if(!this.inst)this.inst=a.datepicker._getInst(this.$input[0]);this._limitMinMaxDateTime(this.inst,true)}if(d(q.timeFormat))this.ampm=
r;this.formattedTime=a.datepicker.formatTime(q.timeFormat,this,q);this.$timeObj&&(n===q.timeFormat?this.$timeObj.text(this.formattedTime+m):this.$timeObj.text(a.datepicker.formatTime(n,this,q)+m));this.timeDefined=true;s&&this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults.onSelect||this.inst.settings.onSelect,b=this.$input?this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_updateDateTime:function(b){var b=this.inst||b,c=a.datepicker._daylightSavingAdjust(new Date(b.selectedYear,
b.selectedMonth,b.selectedDay)),d=a.datepicker._get(b,"dateFormat"),b=a.datepicker._getFormatConfig(b),e=c!==null&&this.timeDefined,d=this.formattedDate=a.datepicker.formatDate(d,c===null?new Date:c,b);if(this._defaults.timeOnly===true)d=this.formattedTime;else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||e))d+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;this.formattedDateTime=d;if(this._defaults.showTimepicker)if(this.$altInput&&this._defaults.altFieldTimeOnly===
true)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(d);var d="",e=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,f=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;(d=this._defaults.altFormat?a.datepicker.formatDate(this._defaults.altFormat,c===null?new Date:c,b):this.formattedDate)&&(d+=e);d+=this._defaults.altTimeFormat?a.datepicker.formatTime(this._defaults.altTimeFormat,
this,this._defaults)+f:this.formattedTime+f;this.$altInput.val(d)}else this.$input.val(d);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var b=a.datepicker._getInst(this.$input.get(0)),c=a.datepicker._get(b,"timepicker");if(c&&c._defaults.timeOnly&&b.input.val()!=b.lastVal)try{a.datepicker._updateDatepicker(b)}catch(d){a.datepicker.log(d)}}},_controls:{slider:{create:function(b,
c,d,e,f,g,n){var m=b._defaults.isRTL;return c.prop("slide",null).slider({orientation:"horizontal",value:m?e*-1:e,min:m?g*-1:f,max:m?f*-1:g,step:n,slide:function(c,e){b.control.value(b,a(this),d,m?e.value*-1:e.value);b._onTimeChange()},stop:function(){b._onSelectHandler()}})},options:function(a,b,c,d,e){if(a._defaults.isRTL){if(typeof d=="string")return d=="min"||d=="max"?e!==void 0?b.slider(d,e*-1):Math.abs(b.slider(d)):b.slider(d);a=d.min;c=d.max;d.min=d.max=null;if(a!==void 0)d.max=a*-1;if(c!==
void 0)d.min=c*-1;return b.slider(d)}return typeof d=="string"&&e!==void 0?b.slider(d,e):b.slider(d)},value:function(a,b,c,d){return a._defaults.isRTL?d!==void 0?b.slider("value",d*-1):Math.abs(b.slider("value")):d!==void 0?b.slider("value",d):b.slider("value")}},select:{create:function(b,c,e,f,g,q,n){var m='<select class="ui-timepicker-select" data-unit="'+e+'" data-min="'+g+'" data-max="'+q+'" data-step="'+n+'">';for(b._defaults.timeFormat.indexOf("t");g<=q;g+=n)m+='<option value="'+g+'"'+(g==f?
" selected":"")+">",m+=e=="hour"&&d(b._defaults.pickerTimeFormat||b._defaults.timeFormat)?a.datepicker.formatTime("hh TT",{hour:g},b._defaults):e=="millisec"||g>=10?g:"0"+g.toString(),m+="</option>";m+="</select>";c.children("select").remove();a(m).appendTo(c).change(function(){b._onTimeChange();b._onSelectHandler()});return c},options:function(a,b,c,d,e){var c={},f=b.children("select");if(typeof d=="string"){if(e===void 0)return f.data(d);c[d]=e}else c=d;return a.control.create(a,b,f.data("unit"),
f.val(),c.min||f.data("min"),c.max||f.data("max"),c.step||f.data("step"))},value:function(a,b,c,d){a=b.children("select");return d!==void 0?a.val(d):a.val()}}}});a.fn.extend({timepicker:function(b){var b=b||{},c=Array.prototype.slice.call(arguments);typeof b=="object"&&(c[0]=a.extend(b,{timeOnly:true}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),c)})},datetimepicker:function(b){var b=b||{},c=arguments;return typeof b=="string"?b=="getDate"?a.fn.datepicker.apply(a(this[0]),c):
this.each(function(){var b=a(this);b.datepicker.apply(b,c)}):this.each(function(){var c=a(this);c.datepicker(a.timepicker._newInst(c,b)._defaults)})}});a.datepicker.parseDateTime=function(a,b,c,d,e){a=f(a,b,c,d,e);if(a.timeObj)b=a.timeObj,a.date.setHours(b.hour,b.minute,b.second,b.millisec);return a.date};a.datepicker.parseTime=function(b,d,e){var e=c(c({},a.timepicker._defaults),e||{}),f=function(b,c,d){var e=function(b,c){var d=[];b&&a.merge(d,b);c&&a.merge(d,c);d=a.map(d,function(a){return a.replace(/[.*+?|()\[\]{}\\]/g,
"\\$&")});return"("+d.join("|")+")?"},f="^"+b.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(a){switch(a.charAt(0).toLowerCase()){case "h":return"(\\d?\\d)";case "m":return"(\\d?\\d)";case "s":return"(\\d?\\d)";case "l":return"(\\d?\\d?\\d)";case "z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case "t":return e(d.amNames,d.pmNames);default:return"("+a.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(a){return"\\"+a})+")?"}}).replace(/\s/g,"\\s?")+d.timeSuffix+
"$",b=function(a){var a=a.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),b={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(a)for(var c=0;c<a.length;c++)b[a[c].toString().charAt(0)]==-1&&(b[a[c].toString().charAt(0)]=c+1);return b}(b),h="",f=c.match(RegExp(f,"i")),c={hour:0,minute:0,second:0,millisec:0};if(f){if(b.t!==-1)f[b.t]===void 0||f[b.t].length===0?(h="",c.ampm=""):(h=a.inArray(f[b.t].toUpperCase(),d.amNames)!==-1?"AM":"PM",c.ampm=d[h=="AM"?"amNames":"pmNames"][0]);if(b.h!==-1)c.hour=
h=="AM"&&f[b.h]=="12"?0:h=="PM"&&f[b.h]!="12"?parseInt(f[b.h],10)+12:Number(f[b.h]);if(b.m!==-1)c.minute=Number(f[b.m]);if(b.s!==-1)c.second=Number(f[b.s]);if(b.l!==-1)c.millisec=Number(f[b.l]);if(b.z!==-1&&f[b.z]!==void 0){b=f[b.z].toUpperCase();switch(b.length){case 1:b=d.timezoneIso8601?"Z":"+0000";break;case 5:d.timezoneIso8601&&(b=b.substring(1)=="0000"?"Z":b.substring(0,3)+":"+b.substring(3));break;case 6:d.timezoneIso8601?b.substring(1)=="00:00"&&(b="Z"):b=b=="Z"||b.substring(1)=="00:00"?"+0000":
b.replace(/:/,"")}c.timezone=b}return c}return false},g=function(b,c,d){try{var e=new Date("2012-01-01 "+c);return{hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),millisec:e.getMilliseconds(),timezone:a.timepicker.timeZoneOffsetString(e)}}catch(h){try{return f(b,c,d)}catch(j){a.datepicker.log("Unable to parse \ntimeString: "+c+"\ntimeFormat: "+b)}}return false};return typeof e.parse==="function"?e.parse(b,d,e):e.parse==="loose"?g(b,d,e):f(b,d,e)};a.datepicker.formatTime=function(b,
c,d){var d=d||{},d=a.extend({},a.timepicker._defaults,d),c=a.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},c),f=d.amNames[0],g=parseInt(c.hour,10);g>11&&(f=d.pmNames[0]);b=b.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g,function(a){switch(a){case "HH":return("0"+g).slice(-2);case "H":return g;case "hh":return("0"+e(g)).slice(-2);case "h":return e(g);case "mm":return("0"+c.minute).slice(-2);case "m":return c.minute;case "ss":return("0"+c.second).slice(-2);case "s":return c.second;
case "l":return("00"+c.millisec).slice(-3);case "z":return c.timezone===null?d.defaultTimezone:c.timezone;case "T":return f.charAt(0).toUpperCase();case "TT":return f.toUpperCase();case "t":return f.charAt(0).toLowerCase();case "tt":return f.toLowerCase();default:return a.replace(/\'/g,"")||"'"}});return b=a.trim(b)};a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(b,c){var d=this._getInst(a(b)[0]),e=this._get(d,"timepicker");e?(e._limitMinMaxDateTime(d,true),
d.inline=d.stay_open=true,this._base_selectDate(b,c),d.inline=d.stay_open=false,this._notifyChange(d),this._updateDatepicker(d)):this._base_selectDate(b,c)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(b){var c=b.input[0];if(!a.datepicker._curInst||!(a.datepicker._curInst!=b&&a.datepicker._datepickerShowing&&a.datepicker._lastInput!=c))if(typeof b.stay_open!=="boolean"||b.stay_open===false)if(this._base_updateDatepicker(b),c=this._get(b,
"timepicker"))c._addTimePicker(b),c._defaults.useLocalTimezone&&(g(c,new Date(b.selectedYear,b.selectedMonth,b.selectedDay,12)),c._onTimeChange())};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(b){var c=a.datepicker._getInst(b.target),e=a.datepicker._get(c,"timepicker");if(e&&a.datepicker._get(c,"constrainInput")){var f=d(e._defaults.timeFormat),c=a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat")),e=e._defaults.timeFormat.toString().replace(/[hms]/g,
"").replace(/TT/g,f?"APM":"").replace(/Tt/g,f?"AaPpMm":"").replace(/tT/g,f?"AaPpMm":"").replace(/T/g,f?"AP":"").replace(/tt/g,f?"apm":"").replace(/t/g,f?"ap":"")+" "+e._defaults.separator+e._defaults.timeSuffix+(e._defaults.showTimezone?e._defaults.timezoneList.join(""):"")+e._defaults.amNames.join("")+e._defaults.pmNames.join("")+c,f=String.fromCharCode(b.charCode===void 0?b.keyCode:b.charCode);return b.ctrlKey||f<" "||!c||e.indexOf(f)>-1}return a.datepicker._base_doKeyPress(b)};a.datepicker._base_updateAlternate=
a.datepicker._updateAlternate;a.datepicker._updateAlternate=function(b){var c=this._get(b,"timepicker");if(c){var d=c._defaults.altField;if(d){var e=this._getDate(b),b=a.datepicker._getFormatConfig(b),f="",g=c._defaults.altSeparator?c._defaults.altSeparator:c._defaults.separator,n=c._defaults.altTimeSuffix?c._defaults.altTimeSuffix:c._defaults.timeSuffix;f+=a.datepicker.formatTime(c._defaults.altTimeFormat!==null?c._defaults.altTimeFormat:c._defaults.timeFormat,c,c._defaults)+n;!c._defaults.timeOnly&&
!c._defaults.altFieldTimeOnly&&(f=c._defaults.altFormat?a.datepicker.formatDate(c._defaults.altFormat,e===null?new Date:e,b)+g+f:c.formattedDate+g+f);a(d).val(f)}}else a.datepicker._base_updateAlternate(b)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;a.datepicker._doKeyUp=function(b){var c=a.datepicker._getInst(b.target),d=a.datepicker._get(c,"timepicker");if(d&&d._defaults.timeOnly&&c.input.val()!=c.lastVal)try{a.datepicker._updateDatepicker(c)}catch(e){a.datepicker.log(e)}return a.datepicker._base_doKeyUp(b)};
a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(b){var c=this._getInst(a(b)[0]),d=c.dpDiv;this._base_gotoToday(b);b=this._get(c,"timepicker");g(b);this._setTime(c,new Date);a(".ui-datepicker-today",d).click()};a.datepicker._disableTimepickerDatepicker=function(b){var c=this._getInst(b);if(c){var d=this._get(c,"timepicker");a(b).datepicker("getDate");if(d)d._defaults.showTimepicker=false,d._updateDateTime(c)}};a.datepicker._enableTimepickerDatepicker=function(b){var c=
this._getInst(b);if(c){var d=this._get(c,"timepicker");a(b).datepicker("getDate");if(d)d._defaults.showTimepicker=true,d._addTimePicker(c),d._updateDateTime(c)}};a.datepicker._setTime=function(a,b){var c=this._get(a,"timepicker");if(c){var d=c._defaults;c.hour=b?b.getHours():d.hour;c.minute=b?b.getMinutes():d.minute;c.second=b?b.getSeconds():d.second;c.millisec=b?b.getMilliseconds():d.millisec;c._limitMinMaxDateTime(a,true);c._onTimeChange();c._updateDateTime(a)}};a.datepicker._setTimeDatepicker=
function(a,b,c){if(a=this._getInst(a)){var d=this._get(a,"timepicker");d&&(this._setDateFromField(a),b&&(typeof b=="string"?(d._parseTime(b,c),b=new Date,b.setHours(d.hour,d.minute,d.second,d.millisec)):b=new Date(b.getTime()),b.toString()=="Invalid Date"&&(b=void 0),this._setTime(a,b)))}};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(a,b){var c=this._getInst(a);if(c){var d=b instanceof Date?new Date(b.getTime()):b;this._updateDatepicker(c);
this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,d,true)}};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(b,c){var d=this._getInst(b);if(d){var e=this._get(d,"timepicker");return e?(d.lastVal===void 0&&this._setDateFromField(d,c),(d=this._getDate(d))&&e._parseTime(a(b).val(),e.timeOnly)&&d.setHours(e.hour,e.minute,e.second,e.millisec),d):this._base_getDateDatepicker(b,c)}};a.datepicker._base_parseDate=a.datepicker.parseDate;
a.datepicker.parseDate=function(b,c,d){var e;try{e=this._base_parseDate(b,c,d)}catch(f){e=this._base_parseDate(b,c.substring(0,c.length-(f.length-f.indexOf(":")-2)),d),a.datepicker.log("Error parsing the date string: "+f+"\ndate string = "+c+"\ndate format = "+b)}return e};a.datepicker._base_formatDate=a.datepicker._formatDate;a.datepicker._formatDate=function(a){var b=this._get(a,"timepicker");return b?(b._updateDateTime(a),b.$input.val()):this._base_formatDate(a)};a.datepicker._base_optionDatepicker=
a.datepicker._optionDatepicker;a.datepicker._optionDatepicker=function(b,c,d){var e=this._getInst(b),f;if(!e)return null;if(e=this._get(e,"timepicker")){var g=null,n=null,m=null,r=e._defaults.evnts,s={},t;if(typeof c=="string")if(c==="minDate"||c==="minDateTime")g=d;else if(c==="maxDate"||c==="maxDateTime")n=d;else if(c==="onSelect")m=d;else{if(r.hasOwnProperty(c)){if(typeof d==="undefined")return r[c];s[c]=d;f={}}}else if(typeof c=="object"){if(c.minDate)g=c.minDate;else if(c.minDateTime)g=c.minDateTime;
else if(c.maxDate)n=c.maxDate;else if(c.maxDateTime)n=c.maxDateTime;for(t in r)r.hasOwnProperty(t)&&c[t]&&(s[t]=c[t])}for(t in s)s.hasOwnProperty(t)&&(r[t]=s[t],f||(f=a.extend({},c)),delete f[t]);if(t=f)a:{t=f;for(var v in t)if(t.hasOwnProperty(t)){t=false;break a}t=true}if(t)return;if(g)g=g===0?new Date:new Date(g),e._defaults.minDate=g,e._defaults.minDateTime=g;else if(n)n=n===0?new Date:new Date(n),e._defaults.maxDate=n,e._defaults.maxDateTime=n;else if(m)e._defaults.onSelect=m}return d===void 0?
this._base_optionDatepicker.call(a.datepicker,b,c):this._base_optionDatepicker.call(a.datepicker,b,f||c,d)};var c=function(b,c){a.extend(b,c);for(var d in c)if(c[d]===null||c[d]===void 0)b[d]=c[d];return b},d=function(a){return a.indexOf("t")!==-1&&a.indexOf("h")!==-1},e=function(a){a>12&&(a-=12);a==0&&(a=12);return String(a)},f=function(b,c,d,e,f){var g;a:{try{var n=f&&f.separator?f.separator:a.timepicker._defaults.separator,m=(f&&f.timeFormat?f.timeFormat:a.timepicker._defaults.timeFormat).split(n).length,
r=d.split(n),s=r.length;if(s>1){g=[r.splice(0,s-m).join(n),r.splice(0,m).join(n)];break a}}catch(t){if(a.datepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+t+"\ndateTimeString"+d+"\ndateFormat = "+b+"\nseparator = "+f.separator+"\ntimeFormat = "+f.timeFormat),t.indexOf(":")>=0){g=d.length-(t.length-t.indexOf(":")-2);d.substring(g);g=[a.trim(d.substring(0,g)),a.trim(d.substring(g))];break a}else throw t;}g=[d,""]}b=a.datepicker._base_parseDate(b,
g[0],e);if(g[1]!==""){c=a.datepicker.parseTime(c,g[1],f);if(c===null)throw"Wrong time format";return{date:b,timeObj:c}}else return{date:b}},g=function(b,c){if(b&&b.timezone_select){b._defaults.useLocalTimezone=true;var d=a.timepicker.timeZoneOffsetString(typeof c!=="undefined"?c:new Date);b._defaults.timezoneIso8601&&(d=d.substring(0,3)+":"+d.substring(3));b.timezone_select.val(d)}};a.timepicker=new b;a.timepicker.timeZoneOffsetString=function(a){var a=a.getTimezoneOffset()*-1,b=a%60;return(a>=0?
"+":"-")+("0"+((a-b)/60*101).toString()).substr(-2)+("0"+(b*101).toString()).substr(-2)};a.timepicker.timeRange=function(b,c,d){return a.timepicker.handleRange("timepicker",b,c,d)};a.timepicker.dateTimeRange=function(b,c,d){a.timepicker.dateRange(b,c,d,"datetimepicker")};a.timepicker.dateRange=function(b,c,d,e){a.timepicker.handleRange(e||"datepicker",b,c,d)};a.timepicker.handleRange=function(b,c,d,e){function f(a,b,e){b.val()&&new Date(c.val())>new Date(d.val())&&b.val(e)}function g(c,d,e){a(c).val()&&
(c=a(c)[b].call(a(c),"getDate"),c.getTime&&a(d)[b].call(a(d),"option",e,c))}a.fn[b].call(c,a.extend({onClose:function(a){f(this,d,a)},onSelect:function(){g(this,d,"minDate")}},e,e.start));a.fn[b].call(d,a.extend({onClose:function(a){f(this,c,a)},onSelect:function(){g(this,c,"maxDate")}},e,e.end));b!="timepicker"&&e.reformat&&a([c,d]).each(function(){var c=a(this)[b].call(a(this),"option","dateFormat"),d=new Date(a(this).val());a(this).val()&&d&&a(this).val(a.datepicker.formatDate(c,d))});f(c,d,c.val());
g(c,d,"minDate");g(d,c,"maxDate");return a([c.get(0),d.get(0)])};a.timepicker.version="1.1.1"}})(jQuery||window.JQ);
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.ListBoxFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{selectionChangedTimer:null,selectedBindingToken:null,selectionBindingToken:null,attach:function(a){if(a.selectionMode){var b=a.selectionMode.get().toLowerCase();a.attached_isMultiple=new Observable(b.toLowerCase()==="multiple"||b.toLowerCase()=="extended")}if(a.selected&&!this.selectedBindingToken)this.selectedBindingToken=
a.selected.bind(this,function(){a.selected.get()>=0&&this.handleSelectionChanged()});else if(a.selection&&!this.selectionBindingToken)this.selectionBindingToken=a.selection.bind(this,function(){a.selection.length()>0&&this.handleSelectionChanged()});this.inherited(arguments)},handleSelectionChanged:function(){if(this.selectionChangedTimer!=null)clearInterval(this.selectionChangedTimer),this.selectionChangedTimer=null;var a=this;this.selectionChangedTimer=setTimeout(function(){if(a.viewModel.queryTaskRunner.isBusy.get()===
false)a.viewModel.triggerCascading(),a.selectionChangedTimer=null},450);return true}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.RadioButtonFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{attach:function(a){a.attached_textOnLeft=new Observable(false);this.addDisposableBinding(a.textLocation,a.textLocation.bind(this,function(b){a.attached_textOnLeft.set(b.toLowerCase()==="left")}));a.textLocation.pulse();a.attached_controlId=new Observable("radio-{0}".format(geocortex.framework.utils.alphaNumericToken()));
a.attached_labelText=a.text!=null?new Observable(a.text.get()):"";this.inherited(arguments);if(this.radioElement)this.radioElement.checked=a.checked.get();var b=this;this.viewModel.__getRadioValueClosure=function(){var a=b.radioElement;return a?a.checked:false};return true}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.TextEntryFormItemView",geocortex.essentialsHtmlViewer.mapping.modules.workflow.forms.items.FormItemViewBase,{handleBlurControl:function(){this.app.eventRegistry.event("WorkflowFormTextInputBlurredEvent").publish(this)}});
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleAlert=function(a,b){var c=b.getValue("Title"),d=b.getValue("Text");a.app.commandRegistry.command("Alert").execute(d,c,function(){b.completeActivity()})};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleCollectExternalEventArgs=function(a,b){var c=b.getValue("EventName"),d=b.getValue("WaitForEvent"),e=b.getValue("WaitTimeout");if(a._eventListenersResults.hasOwnProperty([c]))if(a._eventListenersResults[c])b.setValue("EventArgs",a._eventListenersResults[c]),b.completeActivity();else if(d)if(e>0)window.setTimeout(function(){b.setValue("EventArgs",a._eventListenersResults[c]);b.completeActivity()},e);else{var f=function(){a._eventListenersResults[c]?
(b.setValue("EventArgs",a._eventListenersResults[c]),b.completeActivity()):window.setTimeout(f,2E3)};f()}else b.completeActivity();else b.completeActivity()};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleConfigureWorkflowContainer=function(a,b){var c=b.getValue("WorkflowContainerName"),d=b.getValue("ShowContainer"),e=b.getValue("IsBusy"),f=b.getValue("Message"),g=b.getValue("Title"),h=b.getValue("IconUri");h&&h.indexOf("/")==0&&(h=h.substring(1));var j=a.getOrCreateContainer(c);a._containerConfigs[c]=j;g!=null&&j.title.set(g);e!=null&&j.busy.set(e);f!=null&&(j.message.set(f),j.hasContent.set(false),j.view&&a.app.viewManager.notifyDimensionsChanged(j.view));
h&&j.iconUri.set(a.remapWorkflowContainerIconUri(h));j.view||a.createContainerView(j,b);d?a.app.viewManager.activateView(j.view):d===false&&a.app.viewManager.deactivateView(j.view);b.completeActivity()};geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleConfirm=function(a,b){var c=b.getValue("Title"),d=b.getValue("Text");a.app.commandRegistry.command("Confirm").execute(d,c,function(a){b.setValue("Result",a||false);b.completeActivity()})};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayCaptureGeometry=function(a,b){var c=null,d=null,e=null,f=null;b.workflow();var f=b.getValue("Title"),c=b.getValue("WorkflowContainerName"),g=new Observable(a._defaultContainerTitle);if(c){c=a.getOrCreateContainer(c);f?g.set(f):c.title&&g.set(c.title.get());e="MapPoint,MultiPoint,FreehandPolyline,Polygon,Polyline,Extent,CurrentExtent".split(",");f={};for(d=0;d<e.length;d++){var h=e[d];f[h]="geometry-type-"+h.toLowerCase()}d=
{typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryView",markupResource:"Mapping/modules/Workflow/DisplayCaptureGeometryView.html",isVisible:true,regionName:null,libraryId:a.libraryId,iconUri:a._defaultContainerIconUri};h=a.configuration&&a.configuration.showTitleInFormBody;e=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayCaptureGeometryViewModel(a.app);e.activityContext=b;e.libraryId=a.libraryId;e.hideShowContainer=c.hideForMapInteraction||
false;e.geometryTypeCssDictionary=f;e.title.set(g.get());e.initialize({showTitleInFormBody:h});e.showCaptureStatusMessages=a.configuration.showCaptureStatusMessages;f=a.app.viewManager.createView(d);f.activityContext=b;f.workflowContainer=c;f.viewModel=e;a.displayContainerContent(f,c,g,b)}else a.app.trace.error("Error parsing activity context. WorkflowContainerName is a required value and is not supplied.")};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayForm=function(a,b){var c=b.workflow(),d=b.getValue("RegionName"),e=b.getValue("WorkflowContainerName"),f=a._defaultContainerTitle,g=null,h=b.getInputNamesByType("System.Collections.Generic.IEnumerable`1[[Geocortex.Forms.Client.DataItem"),j={};if(h!=null&&h.length>0)for(var k=0;k<h.length;++k){var l=b.getValue(h[k]);if(l!=null){for(var o=[],q=0;q<l.length;++q)o.push(new geocortex.forms.DataItem(l[q].Display,l[q].Value,
l[q].TypeName));j[h[k]]=o}}k=b.getValue("InputGeometry");h=b.getValue("FormDefinition");j=new geocortex.forms.FormDefinition(h,j,k);l=b.getValue("Buttons");h=[];if(l!=null)for(k=0;k<l.length;k++)h.push(new geocortex.forms.FormButton(l[k].Label,l[k].Value,l[k].CausesValidation,l[k].IsDefault));else String.isNullOrEmpty(d)&&String.isNullOrEmpty(e)&&(h.push(new geocortex.forms.FormButton("OK","OK",true,true)),h.push(new geocortex.forms.FormButton("Cancel","Cancel",false,false)));if(e!=null)g=a.getOrCreateContainer(e),
d=g.internalRegionName,f=g.title;else if(!d||!a.app.viewManager.getExistingRegionByName(d))d="ModalWindowRegion";k={typeName:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormView",markupResource:"Mapping/modules/Workflow/WorkflowFormView.html",isVisible:true,regionName:null,libraryId:a.libraryId,iconUri:g&&g.iconUri?g.iconUri.get():a._defaultContainerIconUri,configuration:{}};k.configuration.activityContext=b;k.configuration.workflowContainer=g;e=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowFormViewModel(a.app);
e.activityContext=b;e.initialize({showTitleInFormBody:a.configuration==null?false:a.configuration.showTitleInFormBody||false,formDefinition:j,buttons:h});g?(c=a.app.viewManager.createView(k),c.viewModel=e,f=e.title&&!String.isNullOrEmpty(e.title.get())?e.title:f,a.displayContainerContent(c,g,f,b)):(a.cleanupViewsForWorkflow(c),k.regionName=d,c=a.app.viewManager.createView(k),c.attach(e),c.configuration={},a.app.viewManager.activateView(c))};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleDisplayHyperlink=function(a,b){b.workflow();var c=b.getValue("WorkflowContainerName"),d=b.getValue("Buttons"),e=b.getValue("Title"),f=new Observable(a._defaultContainerTitle),g=null;if(!c&&a)c=a.defaultContainerName;c!=null&&(g=a.getOrCreateContainer(c));e?f.set(e):g.title&&f.set(g.title.get());c=a.app.viewManager.createView({markup:"Mapping/modules/Workflow/DisplayHyperlinkView.html",type:"geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayHyperlinkView",
isVisible:true,libraryId:a.libraryId,iconUri:a._defaultContainerIconUri});c.activityContext=b;c.workflowContainer=g;e=new geocortex.essentialsHtmlViewer.mapping.modules.workflow.DisplayHyperlinkViewModel;e.activityContext=b;e.app=a.app;e.libraryId=a.libraryId;var h=a.configuration&&a.configuration.showTitleInFormBody;e.title.set(f.get());e.initialize({buttons:d,showTitleInBody:h});c.viewModel=e;a.displayContainerContent(c,g,f,b)};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleIntersectLayers=function(){};geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleListenForExternalEvent=function(a,b){var c=b.getValue("EventName");if(a._eventListenersResults.hasOwnProperty([c]))a._eventListenersResults[c]=null;else{a._eventListenersResults[c]=null;var d=a.app.eventRegistry.event(c).subscribe(a,function(){a._eventListenersResults[c]=arguments});a._eventListenersToken.push(function(){a.app.eventRegistry.event(c).unsubscribe(d)})}b.completeActivity()};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handlePrompt=function(a,b){var c=b.getValue("Title"),d=b.getValue("Description"),e=b.getValue("DefaultText");a.app.commandRegistry.command("Prompt").execute(c,d,e,function(a){b.setValue("Result",a);b.completeActivity()})};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleRunExternalCommand=function(a,b){var c=b.getValue("CommandName"),d=b.getValue("CommandParameter");a.app.commandRegistry.command(c).execute(d);b.completeActivity()};
geocortex.essentialsHtmlViewer.mapping.modules.workflow.WorkflowHandlers.handleSelectFeatures=function(a,b){var c=b.getValue("FeatureSet"),d=b.getValue("MapServiceId"),e=b.getValue("LayerId"),f=b.getValue("LayerName"),g=b.getValue("CollectionName"),h=b.getValue("ClearCollectionFirst"),j=null;h||(h=false);d&&(d=b.getSite().essentialsMap.findMapServiceById(d))&&(e?j=d.findLayerById(e):f&&(j=d.findLayerByName(f)));if(c&&c.fields)for(e=0;e<c.fields.length;e++)if(f=c.fields[e],f.type==="esriFieldTypeDate")for(d=
0;d<c.features.length;d++){var k=c.features[d];k.attributes[f.alias]?k.attributes[f.alias]=new Date(k.attributes[f.alias]):k.attributes[f.name]&&(k.attributes[f.name]=new Date(k.attributes[f.name]))}var l=new FeatureSet({esriFeatureSet:c,layer:j});l!=null&&l.features!=null&&l.features.length()>0&&j!=null&&!l.features.getAt(0).hasGeometry.get()?l.loadGeometries(null).then(function(){a.prepFeatureSetInCollection(l,g,h,j);b.completeActivity()},function(){a.prepFeatureSetInCollection(l,g,h,j);b.completeActivity()}):
(a.prepFeatureSetInCollection(l,g,h,j),b.completeActivity())};dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.GeolocateView");dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.GeolocateView",geocortex.framework.ui.ViewBase,{handleClickGeolocate:function(){this.app.commandRegistry.command("Geolocate").execute();return false}});
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.GeolocateViewModel",geocortex.framework.ui.ViewModelBase,{visible:null,initialize:function(a){this.inherited(arguments);this.visible=new Observable(true);navigator.geolocation?(this.app.eventRegistry.event("SiteInitializedEvent").subscribe(this,this.handleGeolocateStateChanged),this.app.eventRegistry.event("ApplicationOnlineEvent").subscribe(this,this.handleGeolocateStateChanged),this.app.eventRegistry.event("ApplicationOfflineEvent").subscribe(this,
this.handleGeolocateStateChanged),this.app.eventRegistry.event("NativeApplicationReady").subscribe(this,this.handleGeolocateStateChanged)):this.visible.set(false)},handleGeolocateStateChanged:function(){var a=this.app.map;this.app.isOffline.get()?a&&a.spatialReference&&(a.spatialReference.wkid===102100||a.spatialReference.wkid===4326)?this.visible.set(true):this.app.isNative.get()?this.app.commandRegistry.command("NativeHasCapability").execute("project",dojo.hitch(this,function(a){a?this.visible.set(true):
this.visible.set(false)})):this.visible.set(false):this.visible.set(true)}});dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.ZoomControlModule",geocortex.framework.application.ModuleBase,{});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.ZoomInView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.ZoomInView",geocortex.framework.ui.ViewBase,{handleClickZoomIn:function(){this.app.commandRegistry.command("StepZoomIn").execute();return false}});dojo.provide("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.ZoomOutView");
dojo.declare("geocortex.essentialsHtmlViewer.mapping.modules.zoomcontrol.ZoomOutView",geocortex.framework.ui.ViewBase,{handleClickZoomOut:function(){this.app.commandRegistry.command("StepZoomOut").execute();return false}});geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Alert/AlertView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIG5vdGlmaWNhdGlvbiBhbGVydCI+IDxwIGNsYXNzPSJkZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogYWxlcnRCb2R5fSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B2YXI6IG9rQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrT2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW9rfSIvPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Authentication/AuthenticationView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGF1dGhlbnRpY2F0aW9uLWRpYWxvZyI+IDxkaXYgY2xhc3M9ImZvcm0tdmFsaWRhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGVycm9yfXtAdGV4dDplcnJvck1lc3NhZ2V9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9ImxvYWRpbmctY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXV0aGVudGljYXRpbmd9Ij4gPGRpdiBjbGFzcz0ibG9hZGluZy1pbWciIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBidXN5fSI+PC9kaXY+IDxkaXYgY2xhc3M9ImxvYWRpbmctbXNnIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWF1dGgtYXV0aGVudGljYXRpbmd9Ij48L2Rpdj4gPC9kaXY+IDxmb3JtIGNsYXNzPSJmb3JtLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYXV0aGVudGljYXRpbmd9Ij4gPGRpdiBjbGFzcz0iZm9ybS1pdGVtIj4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWF1dGgtdXNlcm5hbWV9Ij48L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8aW5wdXQgdHlwZT0idGV4dCIgYXV0b2NvcnJlY3Q9Im9mZiIgYXV0b2NhcGl0YWxpemU9Im9mZiIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiB1c2VybmFtZX0iIC8+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1pdGVtIj4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWF1dGgtcGFzc3dvcmR9Ij48L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogcGFzc3dvcmR9IiAvPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrTG9naW59e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWxvZ2lufSI+PC9idXR0b24+IDwvZGl2PiA8L2Zvcm0+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Banner/BannerView.html","html","PGRpdiBjbGFzcz0iYmFubmVyIg0KICAgIGRhdGEtYmluZGluZz0ie0BzdHlsZS1iYWNrZ3JvdW5kSW1hZ2U6IGJhY2tncm91bmRJbWFnZX0NCiAgICAgICAgICAgICAgICAgIHtAc3R5bGUtYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kQ29sb3J9DQogICAgICAgICAgICAgICAgICB7QHN0eWxlLWhlaWdodDogaGVpZ2h0fQ0KICAgICAgICAgICAgICAgICAge0BldmVudC1tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn0NCiAgICAgICAgICAgICAgICAgIHtAZXZlbnQtbW91c2V1cDogaGFuZGxlTW91c2VVcH0NCiAgICAgICAgICAgICAgICAgIHtAZXZlbnQtbW91c2VvdXQ6IGhhbmRsZU1vdXNlT3V0fQ0KICAgICAgICAgICAgICAgICAge0BldmVudC1kYmxjbGljazogaGFuZGxlRG91YmxlQ2xpY2t9DQogICAgICAgICAgICAgICAgICB7QGV2ZW50LXRvdWNoY2FuY2VsOiBoYW5kbGVUb3VjaENhbmNlbH0NCiAgICAgICAgICAgICAgICAgIHtAZXZlbnQtdG91Y2hzdGFydDogaGFuZGxlVG91Y2hTdGFydH0NCiAgICAgICAgICAgICAgICAgIHtAZXZlbnQtdG91Y2hlbmQ6IGhhbmRsZVRvdWNoRW5kfSI+ICA8ZGl2IGNsYXNzPSJiYW5uZXItbGVmdC1pbWciIGRhdGEtYmluZGluZz0ie0BzdHlsZS1iYWNrZ3JvdW5kSW1hZ2U6IGxlZnRJbWFnZX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJiYW5uZXItcmlnaHQtaW1nIiBkYXRhLWJpbmRpbmc9IntAc3R5bGUtYmFja2dyb3VuZEltYWdlOiByaWdodEltYWdlfSI+PC9kaXY+IDx0YWJsZSBjbGFzcz0iYmFubmVyLXRleHQiPiA8dHI+IDx0ZD4gPGgxIGNsYXNzPSJiYW5uZXItdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBhcHBsaWNhdGlvblRpdGxlfSI+PC9oMT4gPGgyIGNsYXNzPSJiYW5uZXItc3VidGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBhcHBsaWNhdGlvblN1YnRpdGxlfSI+PC9oMj4gPC90ZD4gPC90cj4gPC90YWJsZT4gPGRpdiBjbGFzcz0iYmFubmVyLWNvbnRlbnQtcmVnaW9uIiBkYXRhLXJlZ2lvbi1uYW1lPSJCYW5uZXJDb250ZW50UmVnaW9uIj48L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Confirm/ConfirmView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgbm90aWZpY2F0aW9uIGNvbmZpcm0iPiA8cCBjbGFzcz0iZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGNvbmZpcm1Cb2R5fSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja09rfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1va30iIC8+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QHZhcjogY2FuY2VsQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2FuY2VsfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1jYW5jZWx9IiAvPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/Editor/EditorView.html","html","PGRpdiBjbGFzcz0iZWRpdG9yIj4gIDxkaXYgY2xhc3M9ImxvYWRpbmctY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNCdXN5fSI+IDxkaXYgY2xhc3M9ImxvYWRpbmctaW1nIj48L2Rpdj4gPGRpdiBjbGFzcz0ibG9hZGluZy1tc2ciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWFwcGx5aW5nfSI+PC9kaXY+IDwvZGl2PiAgPGRpdiBjbGFzcz0iYWRkLW9yLWVkaXQtZmVhdHVyZSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaXNCdXN5fSI+IDxkaXYgY2xhc3M9InBhbmVsLWNvbnRlbnQiPiAgPGRpdiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmb3JtfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZm9ybX0iPiAgPGRpdiBjbGFzcz0icGFuZWwtbm90aWZpY2F0aW9uIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBmaWVsZHN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1sYXllcn0iPjwvc3Bhbj4gPC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmllbGRzfSI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1mZWF0dXJlLWF0dHJpYnV0ZXN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cC1jb250ZW50cyI+IDxkaXYgY2xhc3M9ImZvcm0gbGFiZWwtbGVmdCI+IDxkaXYgY2xhc3M9ImZvcm0tY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmaWVsZHN9e0B0ZW1wbGF0ZS1zZWxlY3RvcjogcmVuZGVyVHlwZX0iPiAgPGRpdiBjbGFzcz0iZm9ybS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBlc3JpRmllbGRUeXBlRGF0ZX17QHZpc2libGU6IGVkaXRhYmxlfSI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9sYWJlbD4gPGRpdiBjbGFzcz0iZm9ybS1jb250cm9sLWRhdGUtcGlja2VyIiBkYXRhLWJpbmRpbmc9IntAd2lkZ2V0OiBEYXRlUGlja2VyRm9ybUl0ZW19e0B3aWRnZXQtY29udGV4dDogZGF0ZVBpY2tlclZpZXdNb2RlbH0iPiA8L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGNvZGVkRG9tYWluVmFsdWV9e0B2aXNpYmxlOiBlZGl0YWJsZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZhbHVlT3B0aW9uc317QHZhbHVlOiB2YWx1ZX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbHVlT3B0aW9uc317QHRleHQ6IG5hbWV9e3ZhbHVlOiBjb2RlfSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZm9ybS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0eXBlRmllbGR9e0B2aXNpYmxlOiBlZGl0YWJsZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZhbHVlT3B0aW9uc317QHZhbHVlOiB2YWx1ZX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVUeXBlRmllbGRDaGFuZ2V9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiB2YWx1ZU9wdGlvbnN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogaWR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZpZWxkc317QHZpc2libGU6IGVkaXRhYmxlfSI+IDxkaXYgY2xhc3M9InRleHRib3giPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJpbmRpY2F0b3IiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93SW5kaWNhdG9yfSI+Kjwvc3Bhbj4gPC9sYWJlbD4gPGRpdiBjbGFzcz0iZm9ybS1jb250cm9sIj4gPGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogdmFsdWV9IiAvPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDx1bCBjbGFzcz0iZm9ybS12YWxpZGF0aW9uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB2YWxpZGF0aW9uTWVzc2FnZXN9e0B2aXNpYmxlOiB2YWxpZGF0aW9uTWVzc2FnZXN9Ij4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbGlkYXRpb25NZXNzYWdlc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGNvbnRleHR9Ij48L3NwYW4+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwLWNvbnRlbnRzIGZvcm0tYnRucyI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrRWRpdEdlb21ldHJ5fXtAdmlzaWJsZTogc2hvd0VkaXRHZW9tZXRyeUJ1dHRvbn17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZWRpdC1nZW9tZXRyeS1jYXB0aW9ufSI+PC9idXR0b24+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrRWRpdEdlb21ldHJ5fXtAdmlzaWJsZTogc2hvd1N0b3BFZGl0aW5nR2VvbWV0cnlCdXR0b259e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXN0b3AtZWRpdGluZy1nZW9tZXRyeS1jYXB0aW9ufSI+PC9idXR0b24+IDxkaXYgY2xhc3M9InNwYWNlci12ZXJ0aWNhbCBzbWFsbCI+PC9kaXY+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrRGVsZXRlRmVhdHVyZX17QHZpc2libGU6IGNhbkRlbGV0ZUZlYXR1cmV9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWRlbGV0ZX0iPjwvYnV0dG9uPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1NhdmV9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLXNhdmV9Ij48L2J1dHRvbj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNhbmNlbH0iPjwvYnV0dG9uPiA8L2Rpdj4gIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dSZWxhdGVkTGF5ZXJzfSI+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBlZGl0aW5nTmV3RmVhdHVyZX0iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRlZC1mZWF0dXJlc30iPjwvaDM+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogY3VycmVudEZlYXR1cmVSZWxhdGlvbnNoaXBzfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBjdXJyZW50RmVhdHVyZVJlbGF0aW9uc2hpcHN9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0FkZFJlbGF0ZWRSZWNvcmR9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9hZGQtMjQucG5nIiAvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRleHR9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/TemplatePicker/FeatureTemplate.html","html","DQo8ZGl2IGNsYXNzPSJmZWF0dXJlLXRlbXBsYXRlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlRmVhdHVyZVRlbXBsYXRlQ2xpY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzeW1ib2xVcml9e3NyYzogc3ltYm9sVXJpfSIvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogc3ltYm9sVXJpfXtpbm5lckhUTUw6IHN3YXRjaEVsZW1lbnR9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkZXNjcmlwdGlvbn17QHZpc2libGU6IGRlc2NyaXB0aW9ufSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Editing/TemplatePicker/TemplatePickerView.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS10ZW1wbGF0ZS1waWNrZXIiPiAgPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAgbm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogbGF5ZXJUZW1wbGF0ZXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW5vLXRlbXBsYXRlc30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGF5ZXJUZW1wbGF0ZXN9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYXllclRlbXBsYXRlc317QHZpc2libGU6IGxheWVySXNFZGl0YWJsZX0iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9oMz4gPGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogdGVtcGxhdGVzfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW5vLXRlbXBsYXRlc30iPjwvc3Bhbj4gPGRpdiBjbGFzcz0iZm9ybS1idXR0b24tY29udGFpbmVyIj4gPGRpdiBjbGFzcz0iZm9ybS1idXR0b24tYWxpZ24iPiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0gZm9ybS1idG5zIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1hZGQtZmVhdHVyZS1idXR0b259e0BldmVudC1vbmNsaWNrOiBoYW5kbGVGZWF0dXJlVGVtcGxhdGVDbGlja30iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPHVsIGNsYXNzPSJsaXN0LW1lbnUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0ZW1wbGF0ZXN9e0Bzb3VyY2U6IHRlbXBsYXRlc317QHRlbXBsYXRlLXNlbGVjdG9yOiBmb299Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogQG51bGx9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL0VkaXRpbmcvVGVtcGxhdGVQaWNrZXIvRmVhdHVyZVRlbXBsYXRlLmh0bWx9Ij48L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsView.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS1kZXRhaWxzIj4gPGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogY3VycmVudEZlYXR1cmV9Ij4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWRldGFpbHMtbm8tZmVhdHVyZX0iPjwvcD4gPC9kaXY+IDxkaXYgY2xhc3M9InByb3ZpZGVycyIgZGF0YS1yZWdpb24tbmFtZT0iRmVhdHVyZVJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/LargeFeatureDetailsView.html","html","PGRpdiBjbGFzcz0ibGFyZ2UtZmVhdHVyZS1kZXRhaWwiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoZWFkZXJUZXh0fSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdGV4dDogaGVhZGVyVGV4dH0iPjwvaDI+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogRmVhdHVyZUFjdGlvbnN9Ij4gPHVsIGNsYXNzPSJhY3Rpb25zLW1lbnUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IEZlYXR1cmVBY3Rpb25zfSI+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBGZWF0dXJlQWN0aW9uc30iPiA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH17QGV2ZW50LW9ubW91c2VvdmVyOiBnZXREZXNjcmlwdGlvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij48L2E+IDwvbGk+IDwvdWw+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1yZWdpb24tbmFtZT0iRmVhdHVyZVJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/AttachmentsView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0F0dGFjaG1lbnRzfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHN9Ij48L2gzPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNBdHRhY2htZW50c30iPiA8ZGl2IGNsYXNzPSJuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc0F0dGFjaG1lbnRJbmZvc0luaXRpYWxpemVkfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtY2hlY2tpbmd9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG5vQXR0YWNobWVudHN9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1hdHRhY2htZW50cy1uby1hdHRhY2htZW50c30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNPZmZsaW5lfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtbm8tYXR0YWNobWVudHMtb2ZmbGluZX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2htZW50SW5mb3N9Ij4gPGEgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2htZW50SW5mb3N9e2hyZWY6IHVybH0iIHRhcmdldD0iX2JsYW5rIj4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9wYXBlcmNsaXAtMjQucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzfSIgLz4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDwvc3Bhbj4gPC9zcGFuPiA8L2E+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/AttributesView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtYXR0cmlidXRlc30iPjwvaDM+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhdHRyaWIgc3RhdGljIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRyaWJ1dGVzfXtAdmlzaWJsZTogY3VycmVudEZlYXR1cmV9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dHJpYnV0ZXN9e0B2aXNpYmxlOiB2aXNpYmxlfSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGVzYyI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGRpc3BsYXlBc1VybH17QHRleHQ6IHByZXNlbnRhYmxlVmFsdWV9Ij48L3NwYW4+IDxhIGRhdGEtYmluZGluZz0ie2hyZWY6IHZhbHVlfXtAdmlzaWJsZTogZGlzcGxheUFzVXJsfXtAdGV4dDogcHJlc2VudGFibGVWYWx1ZX0iIHRhcmdldD0iX2JsYW5rIj48L2E+IDxzcGFuIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHByZXNlbnRhYmxlVmFsdWV9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1ub3QtYXZhaWxhYmxlfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinksView.html","html","DQo8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNEYXRhTGlua3N9e0Bzb3VyY2U6IGRhdGFMaW5rc0xpc3R9Ij4gPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGRhdGFMaW5rc0xpc3R9Ij4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvaDM+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGRhdGFMaW5rc30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZGF0YUxpbmtzfXtAZXZlbnQtY2xpY2s6IGhhbmRsZVZpZXdDbGlja30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/DataLinkView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCBkYXRhLWxpbmsiPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWF0dHJpYnV0ZXN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJkYXRhbGlua3MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjdXJyZW50RGF0YUxpbmt9e0Bzb3VyY2U6IGN1cnJlbnREYXRhTGlua30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYXR0cmliIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBjdXJyZW50RGF0YUxpbmt9e0Bzb3VyY2U6IGF0dHJpYnV0ZXN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dHJpYnV0ZXN9Ij4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdmFsdWV9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/FeatureActionsView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG1lbnVJdGVtc30iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWFjdGlvbnN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBtZW51SXRlbXN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG1lbnVJdGVtc317QGV2ZW50LW9ubW91c2VvdmVyOiBnZXREZXNjcmlwdGlvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9e2FsdDogdGV4dH0iIC8+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/HyperlinksView.html","html","DQo8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGh5cGVybGlua3N9Ij4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1oeXBlcmxpbmtzfSI+PC9oMz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGh5cGVybGlua3MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoeXBlcmxpbmtzfXtAc291cmNlOiBoeXBlcmxpbmtzfSI+IDxhIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogaHlwZXJsaW5rc317aHJlZjogdXJpfXt0YXJnZXQ6IHRhcmdldH0iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie3RpdGxlOiB0b29sVGlwfSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRleHR9Ij48L3NwYW4+IDwvc3Bhbj4gPC9hPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/RelatedFeaturesView.html","html","DQo8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNSZWxhdGlvbnNoaXBzfXtAc291cmNlOiByZWxhdGlvbkxpc3R9Ij4gPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJlbGF0aW9uTGlzdH0iPiA8aDM+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1yZWxhdGVkLWZlYXR1cmVzfSI+PC9zcGFuPiA8c3Bhbj4gPHNwYW4+Jm5ic3A7Jmd0OyZuYnNwOzwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8L3NwYW4+IDwvaDM+IDxkaXYgY2xhc3M9Im5vLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBub1JlbGF0ZWRGZWF0dXJlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtbm8tZGF0YX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBoYXNSZXRyaWV2ZWREYXRhfXtAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtcmVsYXRlZC1jaGVja2luZ30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaGFzUmV0cmlldmVkRGF0YX17QHNvdXJjZTogcmVsYXRlZEVzcmlGZWF0dXJlc30iID4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJlbGF0ZWRFc3JpRmVhdHVyZXN9e0BldmVudC1jbGljazogaGFuZGxlVmlld0NsaWNrfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureDetails/FeatureDetailsProviders/RelatedFeatureView.html","html","PGRpdiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBjdXJyZW50UmVsYXRlZEZlYXR1cmV9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBjdXJyZW50UmVsYXRlZEZlYXR1cmV9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGF0dHJpYiBzdGF0aWMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dHJpYnV0ZXN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dHJpYnV0ZXN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB2YWx1ZX0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBkaXNwbGF5QXNVcmx9e0B0ZXh0OiB2YWx1ZX0iPjwvc3Bhbj4gPGEgZGF0YS1iaW5kaW5nPSJ7aHJlZjogdmFsdWV9e0B2aXNpYmxlOiBkaXNwbGF5QXNVcmx9e0B0ZXh0OiB2YWx1ZX0iIHRhcmdldD0iX2JsYW5rIj48L2E+IDwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB2YWx1ZX17QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLW5vdC1hdmFpbGFibGV9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNobWVudEluZm9zfXtAdmlzaWJsZTogaGFzQXR0YWNobWVudHN9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gYXR0YWNobWVudCIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNobWVudEluZm9zfSI+IDxhIGRhdGEtYmluZGluZz0ie2hyZWY6IHVybH0iIHRhcmdldD0iX2JsYW5rIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1hdHRhY2htZW50cy1maWxlLXNpemV9Ij48L3NwYW4+IDwvc3Bhbj4gPC9hPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureEditing/TemplatePickerView.html","html","DQo8ZGl2IGNsYXNzPSJmZWF0dXJlLXRlbXBsYXRlLXBpY2tlciI+ICA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCBuby1pdGVtIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBsYXllclRlbXBsYXRlc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbm8tdGVtcGxhdGVzfSI+PC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYXllclRlbXBsYXRlc30iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxheWVyVGVtcGxhdGVzfSI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L2gzPiA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB0ZW1wbGF0ZXN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbm8tdGVtcGxhdGVzfSI+PC9zcGFuPiA8ZGl2IGNsYXNzPSJmb3JtLWJ1dHRvbi1jb250YWluZXIiPiA8ZGl2IGNsYXNzPSJmb3JtLWJ1dHRvbi1hbGlnbiI+IDxkaXYgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWJ0bnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWFkZC1mZWF0dXJlLWJ1dHRvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUZlYXR1cmVUZW1wbGF0ZUNsaWNrfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8dWwgY2xhc3M9Imxpc3QtbWVudSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRlbXBsYXRlc317QHNvdXJjZTogdGVtcGxhdGVzfXtAdGVtcGxhdGUtc2VsZWN0b3I6IGZvb30iPiA8bGkgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBAbnVsbH17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvRmVhdHVyZUVkaXRpbmcvVGVtcGxhdGVzL0ZlYXR1cmVUZW1wbGF0ZS5odG1sfSI+PC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureEditing/Editor/AttributeEditorView.html","html","DQo8ZGl2IGNsYXNzPSJlZGl0b3IiPiAgPGRpdiBjbGFzcz0ibG9hZGluZy1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc0FwcGx5aW5nRWRpdHN9Ij4gPGRpdiBjbGFzcz0ibG9hZGluZy1pbWciPjwvZGl2PiA8ZGl2IGNsYXNzPSJsb2FkaW5nLW1zZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctYXBwbHlpbmd9Ij48L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJhZGQtb3ItZWRpdC1mZWF0dXJlIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpc0FwcGx5aW5nRWRpdHN9Ij4gPGRpdiBjbGFzcz0icGFuZWwtY29udGVudCI+IDxkaXYgY2xhc3M9InBhbmVsLW5vdGlmaWNhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0dlb21ldHJ5fSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWhhcy1nZW9tZXRyeX0iPjwvc3Bhbj4gPC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLW5vdGlmaWNhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZmllbGRzfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWludmFsaWQtbGF5ZXJ9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGZpZWxkc30iPiA8aDMgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZmVhdHVyZS1hdHRyaWJ1dGVzfSI+PC9oMz4gPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAtY29udGVudHMiPiA8ZGl2IGNsYXNzPSJmb3JtIGxhYmVsLWxlZnQiPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZmllbGRzfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHJlbmRlclR5cGV9Ij4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogZXNyaUZpZWxkVHlwZURhdGV9Ij4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGFsaWFzfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbC1kYXRlLXBpY2tlciIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogRGF0ZVBpY2tlckZvcm1JdGVtfXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fSI+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogY29kZWREb21haW5WYWx1ZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCIgPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogYWxpYXN9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJpbmRpY2F0b3IiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF9zaG93SW5kaWNhdG9yfSI+Kjwvc3Bhbj4gPC9sYWJlbD4gPGRpdiBjbGFzcz0iZm9ybS1jb250cm9sIj4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBjb2RlZERvbWFpblZhbHVlc317QHZhbHVlOiB2YWx1ZX17ZGlzYWJsZWQ6IGNhbnRFZGl0fSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY29kZWREb21haW5WYWx1ZXN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogY29kZX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogc3ViVHlwZX0iPiA8ZGl2IGNsYXNzPSJjb21ib2JveCI+IDxsYWJlbCBjbGFzcz0iZm9ybS1sYWJlbCI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBhbGlhc30iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX3Nob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHN1YlR5cGVzfXtAdmFsdWU6IHZhbHVlfXtkaXNhYmxlZDogY2FudEVkaXR9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlVHlwZUZpZWxkQ2hhbmdlfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogc3ViVHlwZXN9e0B0ZXh0OiBuYW1lfXt2YWx1ZTogaWR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZpZWxkc30iPiA8ZGl2IGNsYXNzPSJ0ZXh0Ym94Ij4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGFsaWFzfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHZhbHVlfXtkaXNhYmxlZDogY2FudEVkaXR9IiAvPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDx1bCBjbGFzcz0iZm9ybS12YWxpZGF0aW9uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB2YWxpZGF0aW9uTWVzc2FnZXN9e0B2aXNpYmxlOiB2YWxpZGF0aW9uTWVzc2FnZXN9Ij4gPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHZhbGlkYXRpb25NZXNzYWdlc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGNvbnRleHR9Ij48L3NwYW4+IDwvbGk+IDwvdWw+ICA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0gZm9ybS1idG5zIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBidXR0b25zfSI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYnV0dG9uc317QHZpc2libGU6IHZpc2liaWxpdHl9e0B0ZXh0OiBsYWJlbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUJ1dHRvbkNsaWNrfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaGFzUmVsYXRlZExheWVyc30iPiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZWRpdGluZ05ld0ZlYXR1cmV9Ij4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXJlbGF0ZWQtZmVhdHVyZXN9Ij48L2gzPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgaGFzLWljb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGN1cnJlbnRGZWF0dXJlUmVsYXRpb25zaGlwc30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY3VycmVudEZlYXR1cmVSZWxhdGlvbnNoaXBzfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tBZGRSZWxhdGVkUmVjb3JkfSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvYWRkLTI0LnBuZyIgYWx0PSJOb3RpZmljYXRpb24iLz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureEditing/Templates/FeatureTemplate.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS10ZW1wbGF0ZSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUZlYXR1cmVUZW1wbGF0ZUNsaWNrfSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc3ltYm9sVXJpfXtzcmM6IHN5bWJvbFVyaX0iIC8+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBzeW1ib2xVcml9e3N0eWxlOiBzeW1ib2xTdHlsZX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRlc2NyaXB0aW9ufXtAdmlzaWJsZTogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/EditLogView.html","html","PGRpdiBjbGFzcz0idmlldy1lZGl0LWxvZyI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudSBoYXMtaWNvbiBzdGF0aWMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc09mZmxpbmV9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2Vycm9yLTI0LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci15b3UtYXJlLW9mZmxpbmV9IiAvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXlvdS1hcmUtb2ZmbGluZX0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2Fubm90LXN5bmMtZWRpdHMtb2ZmbGluZX0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IHN0YXRpYyBzeW5jLW5vdyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaXNPZmZsaW5lfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jfSI+PC9zcGFuPiA8L2Rpdj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtY2xpY2s6IGhhbmRsZVN5bmNocm9uaXplQ2xpY2t9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0cy1hbmQtc3luYy1zeW5jLWJ1dHRvbn0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGl0bGU6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jLXN5bmMtYnV0dG9ufSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIGVkaXRzIj4gPGgzIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0cy1hbmQtc3luYy1wZW5kaW5nLWVkaXRzfSI+PC9oMz4gPGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZWRpdExvZ0VudHJpZXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0cy1hbmQtc3luYy1lbXB0eX0iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgaGFzLWljb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGVkaXRMb2dFbnRyaWVzfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBlZGl0TG9nRW50cmllc30iPiA8dGFibGUgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBoaWdobGlnaHRDbGFzc317QGV2ZW50LW9ubW91c2Vkb3duOiBoYW5kbGVNb3VzZURvd259Ij4gPHRyPiA8dGQ+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pY29uIj4gPGRpdiBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IHR5cGVDbGFzc30iPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkZXBlbmRzT259e0Bzb3VyY2U6IGRlcGVuZHNPbn0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBkZXBlbmRzT259Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRlcGVuZHMtb259Ij48L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvdGQ+IDx0ZCBjbGFzcz0iZWRpdC1idG5zIj4gPGJ1dHRvbiBjbGFzcz0iZWRpdC1lZGl0LWxvZy1lbnRyeSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGNhbkJlQ2hhbmdlZH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQ2hhbmdlfXt0aXRsZTogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItdmlldy1lZGl0fSI+IDxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2ZpbGUtZWRpdC0xNi5wbmciIGRhdGEtYmluZGluZz0ie2FsdDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItdmlldy1lZGl0fSIgLz4gPC9idXR0b24+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrRGVsZXRlfXt0aXRsZTogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZGVsZXRlLWVkaXR9Ij4gPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvdHJhc2hjYW4tMTYucG5nIiBkYXRhLWJpbmRpbmc9InthbHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRlbGV0ZS1lZGl0fSIgLz4gPC9idXR0b24+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/FeatureLayerDetailsView.html","html","DQo8ZGl2IGNsYXNzPSJmZWF0dXJlLWxheWVyLWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGN1cnJlbnRGZWF0dXJlTGF5ZXJ9Ij4gPGRpdiBjbGFzcz0iY3VycmVudC1mZWF0dXJlLWxheWVyLXRlbXBsYXRlIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBjdXJyZW50RmVhdHVyZUxheWVyfSI+ICA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogZnV0dXJlQ2FjaGVkRGF0YUluZm99Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmdXR1cmVDYWNoZWREYXRhSW5mb30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgaGFzLWljb24gc3RhdGljIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzU2V0fSI+IDxpbnB1dCBjbGFzcz0ibGlzdC1tZW51LWljb24iIHR5cGU9ImNoZWNrYm94IiBkYXRhLWJpbmRpbmc9IntjaGVja2VkOiBpc1NldH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGVja0NhY2hlQ2hlY2tib3h9IiAvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hlLW9uLXN5bmN9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXdvbnQtY2FjaGUtZGVzY30iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1NldH0iPiA8aW5wdXQgY2xhc3M9Imxpc3QtbWVudS1pY29uIiB0eXBlPSJjaGVja2JveCIgZGF0YS1iaW5kaW5nPSJ7Y2hlY2tlZDogaXNTZXR9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hlY2tDYWNoZUNoZWNrYm94fSIgLz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoZS1vbi1zeW5jfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci13aWxsLWNhY2hlLWRlc2N9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyBzeW5jLWV4dGVudCI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWV4dGVudH0iPjwvc3Bhbj4gPGEgY2xhc3M9ImxpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVpvb21DbGlja317QHRleHQ6IGdlb21ldHJ5U3RyaW5nfSI+PC9hPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9InN5bmMtZm9ybS1idG5zIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNTZXR9e0BldmVudC1jbGljazogaGFuZGxlQ2FjaGVDbGlja317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNhdmUtc3luYy1zZXR0aW5nc30iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYXR0cmliIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gbGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93V2hlcmVDbGF1c2V9Ij4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2hlcmUtY2xhdXNlfSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0iZm9ybS1pbnB1dCI+PGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogd2hlcmVDbGF1c2V9Ii8+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0NhY2hlZERhdGFJbmZvfXtAc291cmNlOiBjYWNoZWREYXRhSW5mb30iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGNhY2hlZERhdGFJbmZvfSI+IDxkaXYgY2xhc3M9InBhbmVsLWdyb3VwIj4gPGgzIGNsYXNzPSJleHBhbmRlciI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jdXJyZW50bHktY2FjaGVkfSI+PC9zcGFuPiA8L2gzPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYXR0cmliIHN0YXRpYyIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY3VycmVudGx5Q2FjaGVkRGF0YUNvbnRlbnR9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gbGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1leHRlbnR9Ij48L3NwYW4+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXNjIj4gPGEgY2xhc3M9ImxpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGdlb21ldHJ5U3RyaW5nfXtAZXZlbnQtY2xpY2s6IGhhbmRsZVpvb21DbGlja30iPjwvYT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW51bWJlci1vZi1mZWF0dXJlc30iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY291bnR9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNpemV9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hlZC1vbn0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogc3RvcmVkT259Ij48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSBsaXN0LW1lbnUtZGV0YWlscyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dXaGVyZUNsYXVzZX0iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci13aGVyZS1jbGF1c2V9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHdoZXJlQ2xhdXNlfSI+PC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0gbGlzdC1tZW51LWRldGFpbHMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBoYXNSZWxhdGVkVGFibGVzfSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXJlbGF0ZWQtZmVhdHVyZXN9Ij48L3NwYW4+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiByZWxhdGlvbnNoaXBzfSI+IDxkaXYgY2xhc3M9InJlbGF0ZWQtZGF0YSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcmVsYXRpb25zaGlwc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW51bWJlci1vZi1mZWF0dXJlc30iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGNvdW50fSI+PC9zcGFuPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc2l6ZX0iPjwvc3Bhbj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHNpemV9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/FeatureLayerListView.html","html","PGRpdiBjbGFzcz0iZmVhdHVyZS1sYXllciI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHN5bmNOZWVkZWR9Ij4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGhhcy1pY29uIj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWl0ZW0iIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlU3luY2hyb25pemVDbGlja30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2Vycm9yLTI0LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLXJlcXVpcmVkfSIgLz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1wZW5kaW5nLWVkaXRzLW11bHRpcGxlLWxheWVyc30iID48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWdvLXRvLXN5bmMtcGFuZWx9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYW5lbC1ncm91cCI+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc2VsZWN0LWxheWVyfSI+PC9oMz4gPGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZmVhdHVyZUxheWVyc317QHRleHQ6IEBsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW5vLWxheWVyc30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBmZWF0dXJlTGF5ZXJzfXtAc291cmNlOiBmZWF0dXJlTGF5ZXJzfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmZWF0dXJlTGF5ZXJzfXtAZXZlbnQtY2xpY2s6IGhhbmRsZUZlYXR1cmVMYXllckNsaWNrfSI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogY2FjaGVkRGF0YUluZm99Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY2FjaGVkRGF0YUluZm99Ij4gPHNwYW4gY2xhc3M9ImNhY2hlZCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzU2V0fSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibm90LWNhY2hlZCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaXNTZXR9Ij48L3NwYW4+IDwvc3Bhbj4gPC9zcGFuPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/FeatureLayer/ModalMessageView.html","html","DQo8ZGl2IGNsYXNzPSJzeW5jLWxvZyI+ICA8ZGl2IGNsYXNzPSJzY3JvbGwiIGRhdGEtYmluZGluZz0ie0B2YXI6IHNjcm9sbEVsZW1lbnR9Ij4gPHRhYmxlPiA8dGJvZHkgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbWVzc2FnZXN9Ij4gPHRyIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG1lc3NhZ2VzfXtjbGFzc05hbWU6IGNzc0NsYXNzfSI+IDx0ZCBjbGFzcz0ibXNnIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG1lc3NhZ2V9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGJvZHk+IDwvdGFibGU+ICA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgaGFzLWljb24gc3RhdGljIHN5bmMtc3RhdHVzLW1zZyI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc3VtbWFyeUNsYXNzfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IHN1bW1hcnlDbGFzc30iPjwvZGl2PiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBzdW1tYXJ5fSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xvc2V9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNsb3NlfSIgLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Info/InfoView.html","html","PGRpdiBjbGFzcz0iaG9tZS1wYW5lbCIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0SFRNTENvbnRlbnR9e0B3aWRnZXQtY29udGV4dDogY29udGVudH0iPjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/IWantToMenu/IWantToMenuButtonView.html","html","DQo8YSBjbGFzcz0id3RtLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiB0YWJpbmRleD0iMCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG1lbnVUaXRsZX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUJ1dHRvbkNsaWNrfSI+PC9hPiA8ZGl2IGNsYXNzPSJ3dG0tbGlzdC1jb250YWluZXIiIGRhdGEtcmVnaW9uLW5hbWU9IklXYW50VG9NZW51UmVnaW9uIj48L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/IWantToMenu/IWantToMenuView.html","html","PGRpdiBjbGFzcz0id3RtLWxpc3QiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBtZW51SXRlbXN9Ij4gPGRpdiBjbGFzcz0id2FudHRvbWVudS1uby1pdGVtcyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogbWVudUl0ZW1zfXtAdGV4dDogQGxhbmd1YWdlLW1lbnUtbm8taXRlbXN9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGFjdGl2ZSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG1lbnVJdGVtc317QHNvdXJjZTogbWVudUl0ZW1zfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBtZW51SXRlbXN9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVNZW51SXRlbUNsaWNrfSI+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9IntzcmM6IGljb25Vcml9e2FsdDogdGV4dH0iIC8+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZGVzY3JpcHRpb259e0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/LegendView.html","html","PGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGFzVmlzaWJsZUl0ZW1zfSI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbGVnZW5kLW5vLWl0ZW1zfSI+PC9wPiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGF5ZXJsaXN0IGxlZ2VuZCIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc1Zpc2libGVJdGVtc317QHNvdXJjZTogcm9vdE5vZGV9Ij4gPGRpdiBjbGFzcz0ibGVnZW5kLWxpc3QiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJvb3ROb2RlfSI+IDx1bCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBjaGlsZHJlbn17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGVnZW5kL1RlbXBsYXRlcy9MZWdlbmRJdGVtTm9kZS5odG1sfSI+IDwvdWw+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGF5ZXJsaXN0LWZvb3RlciI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1sZWdlbmQtc2hvdy1sYXllci1saXN0fXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tTaG93TGF5ZXJMaXN0fSI+PC9idXR0b24+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/Templates/LegendItem.html","html","PGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0gbGVhZiBjbGVhciI+IDxkaXYgY2xhc3M9ImxlZ2VuZC1zd2F0Y2giIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogc3dhdGNoRWxlbWVudH17dGl0bGU6IGxhYmVsfSI+PC9kaXY+IDxzcGFuIGNsYXNzPSJsZWdlbmQtaXRlbS1sYWJlbCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhYmVsfXt0aXRsZTogbGFiZWx9Ij48L3NwYW4+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/Templates/LegendItemGroup.html","html","PGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0gZ3JvdXAgY2xlYXIiPiA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbS1wYXJlbnQiPiA8ZGl2IGRhdGEtYmluZGluZz0ie2NsYXNzOiBleHBhbmRlckNsYXNzfXtAdmlzaWJsZTogY2hpbGRyZW59e0BldmVudC1vbmNsaWNrOiBoYW5kbGVTbGlkZVRvZ2dsZUNsaWNrfXt0aXRsZTogbGFiZWx9Ij48L2Rpdj4gPHNwYW4gY2xhc3M9ImxlZ2VuZC1pdGVtLWxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogbGFiZWx9e3RpdGxlOiBsYWJlbH0iPjwvc3Bhbj4gPC9kaXY+IDx1bCBjbGFzcz0ibGVnZW5kLWl0ZW0gY2hpbGRyZW4iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGNoaWxkcmVufXtAdmlzaWJsZTogZXhwYW5kZWR9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL0xlZ2VuZC9UZW1wbGF0ZXMvTGVnZW5kSXRlbU5vZGUuaHRtbH0iPiA8L3VsPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Legend/Templates/LegendItemNode.html","html","PGxpIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IEBjb250ZXh0fXtAdmlzaWJsZTogaXNWaXNpYmxlfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHRlbXBsYXRlVHlwZX0iPiA8ZGl2IGNsYXNzPSJ0ZW1wbC1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBzaW5nbGUtaXRlbX17QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvTGVnZW5kL1RlbXBsYXRlcy9MZWdlbmRJdGVtLmh0bWx9Ij48L2Rpdj4gPGRpdiBjbGFzcz0idGVtcGwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGdyb3VwfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9MZWdlbmQvVGVtcGxhdGVzL0xlZ2VuZEl0ZW1Hcm91cC5odG1sfSI+PC9kaXY+IDwvbGk+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Log/LogStatusView.html","html","PGRpdiBjbGFzcz0ibG9nLXN0YXR1cyI+IDxkaXYgY2xhc3M9ImJ1dHRvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxvZ0VudHJpZXN9Ij4gPGEgY2xhc3M9ImxvZy12aWV3LWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2t9Ij48L2E+IDwvZGl2PiA8L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Log/LogView.html","html","PGRpdiBjbGFzcz0ibG9ndmlldyI+IDxkaXYgY2xhc3M9ImxvZ3ZpZXctaGVhZGVyIj4gPGgyIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogQGxhbmd1YWdlLWxvZy10aXRsZX0iPjwvaDI+IDxkaXYgY2xhc3M9ImxvZ3ZpZXctaGVhZGVyLWJ1dHRvbnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NsZWFyfXtAdmlzaWJsZTogbG9nRW50cmllc317aW5uZXJIVE1MOiBAbGFuZ3VhZ2UtbG9nLWNsZWFyfSI+PC9idXR0b24+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrSGlkZX17aW5uZXJIVE1MOiBAbGFuZ3VhZ2UtbG9nLWhpZGV9Ij48L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsb2d2aWV3LWlubmVyIj4gIDxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGxvZ0VudHJpZXN9e2lubmVySFRNTDogQGxhbmd1YWdlLWxvZy1uby1lbnRyaWVzfSI+PC9kaXY+ICA8dGFibGUgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGxvZ0VudHJpZXN9Ij4gPHRoZWFkPiA8dHI+IDx0aCBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IEBsYW5ndWFnZS1sb2ctbGV2ZWx9Ij48L3RoPiA8dGggZGF0YS1iaW5kaW5nPSJ7aW5uZXJIVE1MOiBAbGFuZ3VhZ2UtbG9nLXRpbWVzdGFtcH0iPjwvdGg+IDx0aCBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IEBsYW5ndWFnZS1sb2ctbWVzc2FnZX0iPjwvdGg+IDwvdHI+IDwvdGhlYWQ+IDx0Ym9keSBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsb2dFbnRyaWVzfSI+IDx0ciBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsb2dFbnRyaWVzfSI+IDx0ZCBkYXRhLWJpbmRpbmc9Intpbm5lckhUTUw6IGxldmVsfXtjbGFzc05hbWU6IGNzc0NsYXNzfSI+PC90ZD4gPHRkIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogdGltZXN0YW1wfXtjbGFzc05hbWU6IGNzc0NsYXNzfSI+PC90ZD4gPHRkIGRhdGEtYmluZGluZz0ie2lubmVySFRNTDogbWVzc2FnZX17Y2xhc3NOYW1lOiBjc3NDbGFzc30iPjwvdGQ+IDwvdHI+IDwvdGJvZHk+IDwvdGFibGU+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Map/MapHostView.html","html","PGRpdiBjbGFzcz0icmVnaW9uIG1hcC1yZWdpb24iIGRhdGEtcmVnaW9uLW5hbWU9Ik1hcFJlZ2lvbiI+PC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Map/MapView.html","html","DQo8ZGl2IGNsYXNzPSJtYXAtZXJyb3IiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHNob3dNYXB9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0Vycm9yfSI+IDxoMiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1hcC1zaXRlLWluaXRpYWxpemF0aW9uLWZhaWxlZH0iPjwvaDI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWRlYnVnLWxvZy1rZXlzfSI+PC9wPiA8L2Rpdj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogc2hvd0F1dGhFcnJvcn0iPiA8aDIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tYXAtc2l0ZS1hdXRob3JpemF0aW9uLWZhaWxlZH0iPjwvaDI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbWFwLXNpdGUtYXV0aG9yaXphdGlvbi1mYWlsZWQtbWVzc2FnZX0iPjwvcD4gPC9kaXY+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dDcml0aWNhbFNlcnZpY2VzRXJyb3J9Ij4gPGgyIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbWFwLXNpdGUtY3JpdGljYWwtc2VydmljZXMtZmFpbGVkfSI+PC9oMj4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tYXAtc2l0ZS1jcml0aWNhbC1zZXJ2aWNlcy1mYWlsZWQtbWVzc2FnZX0iPjwvcD4gPC9kaXY+IDwvZGl2PiA8ZGl2IGlkPSJtYXAtY29udGFpbmVyIiBzdHlsZT0iaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHNob3dNYXB9Ij4gIDxkaXYgaWQ9Im1hcCIgY2xhc3M9Im1hcCBuZWVkc2NsaWNrIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBtYXBEaXZ9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtY2VudGVyLXJlZ2lvbiIgZGF0YS1yZWdpb24tbmFtZT0iQ2VudGVyUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtdG9wLWxlZnQiIGRhdGEtcmVnaW9uLW5hbWU9IlRvcExlZnRNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBjbGFzcz0icmVnaW9uIG1hcC1uYXZpZ2F0aW9uLXJlZ2lvbiIgZGF0YS1yZWdpb24tbmFtZT0iTmF2aWdhdGlvbk1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLXRvcC1jZW50ZXIiIGRhdGEtcmVnaW9uLW5hbWU9IlRvcENlbnRlck1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLXRvcC1yaWdodCIgZGF0YS1yZWdpb24tbmFtZT0iVG9wUmlnaHRNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBjbGFzcz0icmVnaW9uIG1hcC1taWRkbGUtcmlnaHQiIGRhdGEtcmVnaW9uLW5hbWU9Ik1pZGRsZVJpZ2h0TWFwUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtYm90dG9tLXJpZ2h0IiBkYXRhLXJlZ2lvbi1uYW1lPSJCb3R0b21SaWdodE1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLWJvdHRvbS1jZW50ZXIiIGRhdGEtcmVnaW9uLW5hbWU9IkJvdHRvbUNlbnRlck1hcFJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5EaXZTdGFja1JlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGNsYXNzPSJyZWdpb24gbWFwLWJvdHRvbS1sZWZ0IiBkYXRhLXJlZ2lvbi1uYW1lPSJCb3R0b21MZWZ0TWFwUmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLkRpdlN0YWNrUmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgY2xhc3M9InJlZ2lvbiBtYXAtbWlkZGxlLWxlZnQiIGRhdGEtcmVnaW9uLW5hbWU9Ik1pZGRsZWxlZnRNYXBSZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuRGl2U3RhY2tSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/MapTips/MapCalloutView.html","html","DQo8ZGl2IGNsYXNzPSJtYXAtY2FsbG91dCI+IDxkaXYgY2xhc3M9Im1hcC1jYWxsb3V0LWhlYWRlciI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9InBhbmVsLWhlYWRlci1idXR0b24gcmlnaHQgY2xvc2UtMTYiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbG9zZX0iPjwvYT4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7aW5uZXJIVE1MOiB0aXRsZX0iPjwvc3Bhbj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1hcC1jYWxsb3V0LWNvbnRlbnRzIj4gPGRpdiBkYXRhLWJpbmRpbmc9IntAZG9tOiBpbm5lckNvbnRlbnR9Ij48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJtYXAtY2FsbG91dC1wb2ludGVyIj4gPGRpdiBjbGFzcz0ibWFwLWNhbGxvdXQtcG9pbnRlci1pbWFnZSI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/MapTips/MapTipContent.html","html","PGRpdiBjbGFzcz0ibWFwLXRpcC1jb250ZW50cyI+IDxkaXYgY2xhc3M9IndpZGdldCIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0RGVzY3JpcHRpb259e0B3aWRnZXQtY29udGV4dDogY3VycmVudEZlYXR1cmV9e0B3aWRnZXQtcmVxdWlyZWQ6IGZhbHNlfXtAaGlkZGVuOiBzaG93Tm9SZXN1bHRzfSI+PC9kaXY+IDxkaXYgY2xhc3M9Im5vbmUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHMtc2hvcnR9e0B2aXNpYmxlOiBzaG93Tm9SZXN1bHRzfSI+PC9kaXY+IDxkaXYgY2xhc3M9ImJ1c3kiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWxvYWRpbmd9e0B2aXNpYmxlOiBzaG93TG9hZGluZ30iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Native/AttachFileView.html","html","PGRpdiBjbGFzcz0iYXR0YWNoLXBob3RvIj4gPGRpdiBjbGFzcz0icGFuZWwtY29udGVudCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYnJvd3NlckZpbGVBUElTdXBwb3J0ZWR9Ij4gPHAgY2xhc3M9ImhlYWRpbmciPjxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbmF0aXZlLWltYWdlLXNlbGVjdC1oZWFkaW5nfSI+PC9zcGFuPjwvcD4gPHA+PGJ1dHRvbiBjbGFzcz0iYnRuIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVUYWtlTmF0aXZlUGhvdG9DYW1lcmF9e0B0ZXh0OiBAbGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tY2FtZXJhfSI+PC9idXR0b24+PC9wPiA8cD48YnV0dG9uIGNsYXNzPSJidG4iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVRha2VOYXRpdmVQaG90b0dhbGxlcnl9e0B0ZXh0OiBAbGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tZ2FsbGVyeX0iPjwvYnV0dG9uPjwvcD4gPC9kaXY+IDxkaXYgY2xhc3M9InBhbmVsLWNvbnRlbnQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBicm93c2VyRmlsZUFQSVN1cHBvcnRlZH0iPiA8cCBjbGFzcz0iaGVhZGluZyI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1uYXRpdmUtZmlsZS1zZWxlY3QtaGVhZGluZ30iPjwvc3Bhbj48L3A+IDxmb3JtIGRhdGEtYmluZGluZz0ie0B2YXI6IHVwbG9hZEZvcm1FbGVtZW50fSI+IDxpbnB1dCB0eXBlPSJmaWxlIiBjbGFzcz0iaW5wIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZVNlbGVjdGVkRmlsZUlucHV0fSIgLz4gPC9mb3JtPiA8cCBjbGFzcz0ibG9hZGluZyI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzVXBsb2FkaW5nfXtAdGV4dDogQGxhbmd1YWdlLW5hdGl2ZS1maWxlLXVwbG9hZGluZ30iPjwvc3Bhbj48L3A+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Offline/ClearDataView/ClearDataView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIG5vdGlmaWNhdGlvbiBhbGVydCI+IDxwIGNsYXNzPSJkZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy1kZXNjcmlwdGlvbn0iPjwvcD4gPGRpdiBjbGFzcz0iY29tYm9ib3giPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IG9wdGlvbnN9e0B2YWx1ZTogb3B0aW9ufSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogb3B0aW9uc317QHRleHQ6IHRleHR9e3ZhbHVlOiBjb21tYW5kfSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAdmFyOiBva0J1dHRvbkVsZW1lbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NsZWFyfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1jbGVhcn0iLz4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAdmFyOiBva0J1dHRvbkVsZW1lbnR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0NhbmNlbH17QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tZG9uZX0iLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Offline/ConnectionStatusIndicator/ConnectionStatusIndicatorView.html","html","PGRpdiBjbGFzcz0iY29ubmVjdGlvbi1zdGF0dXMtaW5kaWNhdG9yIj4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tUb2dnbGVDb25uZWN0aXZpdHl9Ij4gPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY29ubmVjdGlvbi1vZmYtMjQucG5nIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNPZmZsaW5lfSIgLz4gPGltZyBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvY29ubmVjdGlvbi0yNC5wbmciIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzT2ZmbGluZX0iIC8+IDwvYnV0dG9uPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Printing/PrintingView.html","html","PGRpdiBjbGFzcz0icHJpbnRpbmciPiA8ZGl2IGNsYXNzPSJwcmludC1zdGF0dXMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1ByaW50aW5nfSI+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtaXMtcHJpbnRpbmd9Ij4uLi48L3A+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwcmludC1zdGF0dXMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHNlbGVjdGVkVGVtcGxhdGV9Ij4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1uby1wcmludC10ZW1wbGF0ZX0iPjwvcD4gPC9kaXY+IDxkaXYgIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzUHJpbnRpbmd9e0B2aXNpYmxlOiBzZWxlY3RlZFRlbXBsYXRlfSI+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNlbGVjdC1sYXlvdXR9Ij48L2xhYmVsPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHByaW50VGVtcGxhdGVzfXtAdmFsdWU6IHNlbGVjdGVkVGVtcGxhdGV9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlVGVtcGxhdGVTZWxlY3Rpb25DaGFuZ2VkfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcHJpbnRUZW1wbGF0ZXN9e0B0ZXh0OiBkaXNwbGF5TmFtZX17QGF0dGFjaDogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxsYWJlbCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW91dHB1dC1mb3JtYXR9Ij48L2xhYmVsPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IG91dHB1dEZvcm1hdHN9e0B2YWx1ZTogc2VsZWN0ZWRGb3JtYXR9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBvdXRwdXRGb3JtYXRzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2g6IEBjb250ZXh0fSI+IDwvb3B0aW9uPiA8L3NlbGVjdD4gPGxhYmVsIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzb2x1dGlvbn0iPjwvbGFiZWw+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogcmVzb2x1dGlvbnN9e0B2YWx1ZTogc2VsZWN0ZWRSZXNvbHV0aW9ufSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcmVzb2x1dGlvbnN9e0B0ZXh0OiBkaXNwbGF5TmFtZX17QGF0dGFjaDogQGNvbnRleHR9Ij4gPC9vcHRpb24+IDwvc2VsZWN0PiA8bGFiZWwgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tYXAtc2NhbGV9Ij48L2xhYmVsPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHNjYWxlc317QHZhbHVlOiBzZWxlY3RlZFNjYWxlfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogc2NhbGVzfXtAdGV4dDogZGlzcGxheU5hbWV9e0BhdHRhY2g6IEBjb250ZXh0fSI+IDwvb3B0aW9uPiA8L3NlbGVjdD4gPGRpdiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB0ZXh0RmllbGRzfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdGV4dEZpZWxkc30iPiA8bGFiZWwgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9sYWJlbD4gPGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogdmFsdWV9e0BoaWRkZW46IG11bHRpbGluZX0iIC8+IDx0ZXh0YXJlYSBjb2xzPSIyMCIgcm93cz0iNCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHZhbHVlfXtAdmFsdWU6IHZhbHVlfXtAdmlzaWJsZTogbXVsdGlsaW5lfSI+PC90ZXh0YXJlYT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlUHJpbnRDbGlja317QHRleHQ6IEBsYW5ndWFnZS1wcmludH0iIGNsYXNzPSJwcmludC1idXR0b24iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Prompt/PromptView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgbm90aWZpY2F0aW9uIHByb21wdCI+IDxwIGNsYXNzPSJkZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3A+IDxmb3JtIGRhdGEtYmluZGluZz0ie0BldmVudC1vbnN1Ym1pdDogaGFuZGxlQ2xpY2tPa30iPiA8ZGl2IGNsYXNzPSJmb3JtLWl0ZW0iPiA8aW5wdXQgdHlwZT0idGV4dCIgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBwcm9tcHRUZXh0fSIgLz4gPC9kaXY+IDxpbnB1dCB0eXBlPSJzdWJtaXQiIGNsYXNzPSJib3VuZC1pbnZpc2libGUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja09rfSIgLz4gPC9mb3JtPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B2YXI6IG9rQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrT2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW9rfSIgLz4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDYW5jZWx9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLWNhbmNlbH0iLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Results/FeatureSetManagerView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cyI+IDxkaXYgY2xhc3M9InJlc3VsdHMtY29udGFpbmVyIj4gPHVsIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGZlYXR1cmVTZXRDb2xsZWN0aW9uc30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZVNldENvbGxlY3Rpb25zfSI+IDxkaXYgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgYmxhY2s7Ij4gPGRpdj5OYW1lOiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9Ij48L3NwYW4+PC9kaXY+IDxkaXY+U291cmNlOiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogc291cmNlTmFtZX0iPjwvc3Bhbj48L2Rpdj4gPGRpdj5GZWF0dXJlIFNldHM6PC9kaXY+IDx1bCBzdHlsZT0icGFkZGluZy1sZWZ0OjEwcHg7IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmZWF0dXJlU2V0c30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZVNldHN9Ij4gPGRpdj48c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGlzcGxheU5hbWV9e0Bzb3VyY2U6IGZlYXR1cmVzfSI+PC9zcGFuPjxwIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGZlYXR1cmVzfSI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZXN9Ij4uIDwvc3Bhbj48L3A+PC9kaXY+IDwvbGk+IDwvdWw+IDwvZGl2PiA8L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Results/ResultsFeatureActionsView.html","html","DQo8ZGl2IGNsYXNzPSJsaXN0LW1lbnUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGZlYXR1cmVBY3Rpb25zfSI+IDxkaXYgY2xhc3M9Imxpc3QtbWVudS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmZWF0dXJlQWN0aW9uc317QGV2ZW50LW9ubW91c2VvdmVyOiBoYW5kbGVHZXREZXNjcmlwdGlvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZU1lbnVJdGVtQ2xpY2t9Ij4gIDxkaXYgY2xhc3M9Imxpc3QtbWVudS1kZXRhaWxzIj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1uYW1lIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Imxpc3QtbWVudS1kZXNjIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Results/ResultsListView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cyI+ICA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBmZWF0dXJlU2V0Q29sbGVjdGlvbn0iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzfSI+PC9wPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzLWRlc2N9Ij48L3A+IDwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGZlYXR1cmVTZXRDb2xsZWN0aW9ufSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmVhdHVyZVNldENvbGxlY3Rpb259Ij4gPGRpdiBjbGFzcz0ibm8tcmVzdWx0cyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZmVhdHVyZVNldHN9Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzfSI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+ICAgPGRpdiBjbGFzcz0icmVzdWx0cy1saXN0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBzY3JvbGxDb250YWluZXJFbGVtZW50fXtAZXZlbnQtb25zY3JvbGw6IGhhbmRsZVNjcm9sbENoYW5nZX0iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUgYWN0aXZlIGhhcy1pY29uIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiByZXN1bHRzUGFnZX17QHZpc2libGU6IHJlc3VsdHNQYWdlfXtAdmFyOiByZXN1bHRzTGlzdH0iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcmVzdWx0c1BhZ2V9e0BldmVudC1tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn17QGV2ZW50LWNsaWNrOiBoYW5kbGVDbGlja317QGV2ZW50LW1vdXNlb3V0OiBoYW5kbGVNb3VzZU91dH17QGV2ZW50LW1vdXNldXA6IGhhbmRsZU1vdXNlVXB9e0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVUb3VjaFN0YXJ0fXtAZXZlbnQtdG91Y2htb3ZlOiBoYW5kbGVUb3VjaE1vdmV9e0BldmVudC10b3VjaGNhbmNlbDogaGFuZGxlVG91Y2hDYW5jZWx9e0BldmVudC10b3VjaGVuZDogaGFuZGxlVG91Y2hFbmR9Ij4gPGltZyBjbGFzcz0ibGlzdC1tZW51LWljb24iIGRhdGEtYmluZGluZz0ie3NyYzogaWNvblVyaX17YWx0OiBsYWJlbH17QHZpc2libGU6IGljb25Vcml9Ii8+IDxpbWcgY2xhc3M9Imxpc3QtbWVudS1pY29uIiBkYXRhLWJpbmRpbmc9InthbHQ6IGxhYmVsfXtAaGlkZGVuOiBpY29uVXJpfSIgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2dsb2JlLTMyLnBuZyIvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhYmVsfXtAdmlzaWJsZTogbGFiZWx9IiA+PC9zcGFuPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHdpZGdldDogR2V0RGVzY3JpcHRpb259e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9Ij48L2Rpdj4gIDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgIDxkaXYgY2xhc3M9InBhZ2luZy1jb250cm9sIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBwcmVzZW50YWJsZVJlc3VsdHN9e2NsYXNzTmFtZTogcGFnaW5nQ29udHJvbENsYXNzTmFtZX0iPiA8ZGl2IGNsYXNzPSJwYWdpbmctY29udHJvbC1pbm5lciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcHJlc2VudGFibGVSZXN1bHRzfSI+IDxkaXYgY2xhc3M9InBhZ2luZy1yZXN1bHQtaW5mbyI+IDxhIGNsYXNzPSJ0YWJsZSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlU2hvd1RhYmxlVmlld317dGl0bGU6IEBsYW5ndWFnZS1yZXN1bHRzLXRvZ2dsZS10YWJsZS12aWV3fSI+PC9hPiA8c3BhbiBjbGFzcz0icGFnaW5nLXJlc3VsdHMtdG90YWwiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IG51bWJlck9mSXRlbXN9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHN9Ij48L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBudW1iZXJPZkl0ZW1zfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzdWx0cy1kaXNwbGF5aW5nfSI+PC9zcGFuPiZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjdXJySW5kZXhTdGFydEZyb21PbmV9Ij48L3NwYW4+Jm5ic3A7LSZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBjdXJySW5kZXhFbmR9Ij48L3NwYW4+Jm5ic3A7KDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzdWx0cy10b3RhbH0iPjwvc3Bhbj46Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG51bWJlck9mSXRlbXN9Ij48L3NwYW4+KSA8L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwYWdpbmctYnV0dG9ucyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG51bWJlck9mSXRlbXN9Ij4gPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBjbGFzcz0iZmlyc3QiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlRmlyc3R9e3RpdGxlOiBAbGFuZ3VhZ2UtcGFnZS1maXJzdH0iPjwvYT4gPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBjbGFzcz0icHJldiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZVBhZ2VQcmV2fXt0aXRsZTogQGxhbmd1YWdlLXBhZ2UtcHJldn0iPjwvYT4gPHNwYW4gY2xhc3M9InBhZ2luZy1idXR0b25zLWluZm8iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJlc3VsdHMtcGFnZX0iPjwvc3Bhbj4mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY3VyclBhZ2VOdW1iZXJ9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1yZXN1bHRzLXBhZ2Utb2Z9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGxhc3RQYWdlTnVtYmVyfSI+PC9zcGFuPiA8L3NwYW4+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9Im5leHQiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlTmV4dH17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLW5leHR9Ij48L2E+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9Imxhc3QiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlTGFzdH17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLWxhc3R9Ij48L2E+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+ICA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Results/ResultsTableView.html","html","PGRpdiBjbGFzcz0icmVzdWx0cyI+ICA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBmZWF0dXJlU2V0Q29sbGVjdGlvbn0iPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzfSI+PC9wPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzLWRlc2N9Ij48L3A+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ0YWItY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmZWF0dXJlU2V0Q29sbGVjdGlvbn0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGZlYXR1cmVTZXRDb2xsZWN0aW9ufSI+IDxkaXYgY2xhc3M9Im5vLXJlc3VsdHMiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGZlYXR1cmVTZXRzfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6QGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzfSI+PC9kaXY+IDwvZGl2PiA8dWwgY2xhc3M9InRhYi1jb250cm9sIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmVhdHVyZVNldHN9e0Bzb3VyY2U6IGZlYXR1cmVTZXRzfSI+IDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmZWF0dXJlU2V0c30iPiA8YSBjbGFzcz0idGFiIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlVGFiQ2xpY2t9e0BoaWRkZW46IGlzU2VsZWN0ZWRJbkNvbGxlY3Rpb259Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfXt0aXRsZTogZGlzcGxheU5hbWV9Ij48L3NwYW4+IDwvYT4gPGEgY2xhc3M9InRhYi1hY3RpdmUiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVUYWJDbGlja317QHZpc2libGU6IGlzU2VsZWN0ZWRJbkNvbGxlY3Rpb259Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfXt0aXRsZTogZGlzcGxheU5hbWV9Ij48L3NwYW4+IDwvYT4gPC9saT4gPC91bD4gPC9kaXY+IDwvZGl2PiAgIDxkaXYgY2xhc3M9InJlc3VsdHMtdGFibGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBmZWF0dXJlU2V0Q29sbGVjdGlvbn17QHZhcjogc2Nyb2xsQ29udGFpbmVyRWxlbWVudH0iPiA8dGFibGU+IDx0aGVhZD4gPHRyIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGNvbHVtbkhlYWRlcnN9Ij4gPHRoIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGNvbHVtbkhlYWRlcnN9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDb2x1bW5IZWFkQ2xpY2t9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7Y2xhc3M6IHNvcnRDbGFzc317dGl0bGU6IEBsYW5ndWFnZS1yZXN1bHRzLXNvcnR9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJyZXN1bHQtaGVhZGluZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8L3RoPiA8L3RyPiA8L3RoZWFkPiA8dGJvZHkgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogcmVzdWx0c1BhZ2V9Ij4gPHRyIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IHJlc3VsdHNQYWdlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAc291cmNlOiBhdHRyaWJ1dGVzfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAZXZlbnQtbW91c2Vkb3duOiBoYW5kbGVNb3VzZURvd259DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BldmVudC1tb3VzZXVwOiBoYW5kbGVNb3VzZVVwfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAZXZlbnQtdG91Y2hzdGFydDogaGFuZGxlVG91Y2hTdGFydH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGV2ZW50LXRvdWNobW92ZTogaGFuZGxlVG91Y2hNb3ZlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAZXZlbnQtdG91Y2hlbmQ6IGhhbmRsZVRvdWNoRW5kfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAZXZlbnQtY2xpY2s6IGhhbmRsZUNsaWNrfSI+IDx0ZCBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRyaWJ1dGVzfXtAdmlzaWJsZTogdmlzaWJsZX0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogcHJlc2VudGFibGVWYWx1ZX0iPjwvc3Bhbj4gPC90ZD4gPC90cj4gPC90Ym9keT4gPC90YWJsZT4gPC9kaXY+ICAgPGRpdiBjbGFzcz0icGFnaW5nLWNvbnRyb2wiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHByZXNlbnRhYmxlUmVzdWx0c30iPiA8ZGl2IGNsYXNzPSJwYWdpbmctY29udHJvbC1pbm5lciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogcHJlc2VudGFibGVSZXN1bHRzfSI+IDxkaXYgY2xhc3M9InBhZ2luZy1yZXN1bHQtaW5mbyI+IDxhIGNsYXNzPSJsaXN0IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVTaG93TGlzdFZpZXd9e3RpdGxlOiBAbGFuZ3VhZ2UtcmVzdWx0cy10b2dnbGUtbGlzdC12aWV3fSI+PC9hPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBudW1iZXJPZkl0ZW1zfXtAdGV4dDogQGxhbmd1YWdlLWNvbW1vbi1uby1yZXN1bHRzfSI+PC9zcGFuPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogbnVtYmVyT2ZJdGVtc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJlc3VsdHMtZGlzcGxheWluZ30iPjwvc3Bhbj4mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY3VyckluZGV4U3RhcnRGcm9tT25lfSI+PC9zcGFuPiZuYnNwOy0mbmJzcDs8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogY3VyckluZGV4RW5kfSI+PC9zcGFuPiZuYnNwOyg8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXJlc3VsdHMtdG90YWx9Ij48L3NwYW4+OiZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBudW1iZXJPZkl0ZW1zfSI+PC9zcGFuPikgPC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0icGFnaW5nLWJ1dHRvbnMiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBudW1iZXJPZkl0ZW1zfSI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9ImZpcnN0IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlUGFnZUZpcnN0fXt0aXRsZTogQGxhbmd1YWdlLXBhZ2UtZmlyc3R9Ij48L2E+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9InByZXYiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVQYWdlUHJldn17dGl0bGU6IEBsYW5ndWFnZS1wYWdlLXByZXZ9Ij48L2E+IDxzcGFuIGNsYXNzPSJwYWdpbmctYnV0dG9ucy1pbmZvIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1yZXN1bHRzLXBhZ2V9Ij48L3NwYW4+Jm5ic3A7PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGN1cnJQYWdlTnVtYmVyfSI+PC9zcGFuPiZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtcmVzdWx0cy1wYWdlLW9mfSI+PC9zcGFuPiZuYnNwOzxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBsYXN0UGFnZU51bWJlcn0iPjwvc3Bhbj4gPC9zcGFuPiA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGNsYXNzPSJuZXh0IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlUGFnZU5leHR9e3RpdGxlOiBAbGFuZ3VhZ2UtcGFnZS1uZXh0fSI+PC9hPiA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGNsYXNzPSJsYXN0IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlUGFnZUxhc3R9e3RpdGxlOiBAbGFuZ3VhZ2UtcGFnZS1sYXN0fSI+PC9hPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Search/SearchView.html","html","DQo8ZGl2IGNsYXNzPSJnbG9iYWwtc2VhcmNoIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZW5hYmxlVUl9Ij4gPGlucHV0IHR5cGU9InRleHQiIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogc2VhcmNoVGV4dH17QGV2ZW50LWtleWRvd246IGhhbmRsZUtleURvd259e0BldmVudC1kYmxjbGljazogaGFuZGxlRG91YmxlQ2xpY2t9e3BsYWNlaG9sZGVyOiBAbGFuZ3VhZ2Utc2VhcmNoLXBsYWNlaG9sZGVyfSIvPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1jbGljazogaGFuZGxlU2VhcmNoQ2xpY2t9Ij48c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNlYXJjaC1nb30iPjwvc3Bhbj48L2J1dHRvbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DataFrameTabView.html","html","PGRpdiBjbGFzcz0iY29sbGFwc2UtdGFiIj4gPGEgY2xhc3M9InRhYi1jbG9zZWQiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogZGF0YUZyYW1lSXNPcGVufXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tUYWJ9Ij48L2E+IDxhIGNsYXNzPSJ0YWItb3BlbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZGF0YUZyYW1lSXNPcGVufXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tUYWJ9Ij48L2E+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DebugView.html","html","PGRpdiBjbGFzcz0iZGVidWctdmlldyI+IDxkaXYgY2xhc3M9ImRlYnVnLXZpZXctaW5uZXIiPiA8Yj5EZWJ1ZyB2aWV3PC9iPiA8L2Rpdj4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/DesktopShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyLWlubmVyIj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJMb2dSZWdpb24iIGNsYXNzPSJyZWdpb24gbG9nLXJlZ2lvbiI+PC9kaXY+IDxkaXYgY2xhc3M9ImxhcmdlLXNoZWxsLWhlYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogaGVhZGVyQ29udGFpbmVyRWxlbWVudH0iPiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IkhlYWRlclJlZ2lvbiIgIGNsYXNzPSJyZWdpb24gaGVhZGVyLXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9IlRvb2xiYXJSZWdpb24iIGNsYXNzPSJyZWdpb24gdG9vbGJhci1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIiA+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsYXJnZS1zaGVsbC1tYWluIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBtYWluRWxlbWVudH0iPiA8ZGl2IGNsYXNzPSJsYXJnZS1zaGVsbC1sZWZ0IHBhbmVsLWNsb3NlZCIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogbGVmdEVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJMZWZ0UGFuZWxSZWdpb24iIGNsYXNzPSJyZWdpb24gZGF0YS1yZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImxhcmdlLXNoZWxsLWNlbnRlciIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogY2VudGVyRWxlbWVudH0iPiA8ZGl2IGRhdGEtcmVnaW9uLW5hbWU9Ik1hcFJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2NyZWVuUmVnaW9uRWxlbWVudH0iIGNsYXNzPSJyZWdpb24gbWFwLXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGFyZ2Utc2hlbGwtYm90dG9tIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBib3R0b21FbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iQm90dG9tUGFuZWxSZWdpb24iIGNsYXNzPSJyZWdpb24iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImxhcmdlLXNoZWxsLXJpZ2h0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiByaWdodEVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJSaWdodFBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIGRhdGEtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgIDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTW9kYWxXaW5kb3dQbGFjZWhvbGRlclJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBtb2RhbCIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5Qb3B1cE1vZGFsUmVnaW9uQWRhcHRlciI+IDxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiPjwvZGl2PiA8ZGl2IGNsYXNzPSJtb2RhbC1jb250YWluZXIiPiA8ZGl2IGNsYXNzPSJtb2RhbC1jb250YWluZXItaW5uZXIiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvb3QiPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/HandheldShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyLWlubmVyIj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJUb29sUmVnaW9uIiBjbGFzcz0icmVnaW9uIHRvb2wtcmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBiYW5uZXJDb250YWluZXJFbGVtZW50fSI+PC9kaXY+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iU2NyZWVuUmVnaW9uIiBjbGFzcz0icmVnaW9uIHNjcmVlbi1yZWdpb24iDQogICAgICAgICAgICAgZGF0YS1iaW5kaW5nPSJ7QHZhcjogc2NyZWVuUmVnaW9uRWxlbWVudH0iIGRhdGEtcmVnaW9uLWFkYXB0ZXI9Imdlb2NvcnRleC5mcmFtZXdvcmsudWkuTXVsdGlEaXZSZWdpb25BZGFwdGVyIj48L2Rpdj4gPGRpdiBjbGFzcz0iY2xlYXIiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Shells/TabletShellView.html","html","PGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyIj4gPGRpdiBjbGFzcz0ic2hlbGwtY29udGFpbmVyLWlubmVyIj4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJMb2dSZWdpb24iIGNsYXNzPSJyZWdpb24gbG9nLXJlZ2lvbiI+PC9kaXY+IDxkaXYgY2xhc3M9Im1lZGl1bS1zaGVsbC1oZWFkZXIiICBkYXRhLWJpbmRpbmc9IntAdmFyOiBoZWFkZXJDb250YWluZXJFbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iSGVhZGVyUmVnaW9uIiAgY2xhc3M9InJlZ2lvbiBoZWFkZXItcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iVG9vbGJhclJlZ2lvbiIgY2xhc3M9InJlZ2lvbiB0b29sYmFyLXJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiID48L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1lZGl1bS1zaGVsbC1tYWluIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBtYWluRWxlbWVudH0iPiA8ZGl2IGNsYXNzPSJtZWRpdW0tc2hlbGwtbGVmdCBwYW5lbC1jbG9zZWQiIGRhdGEtYmluZGluZz0ie0B2YXI6IGxlZnRFbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTGVmdFBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIGRhdGEtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJtZWRpdW0tc2hlbGwtY2VudGVyIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBjZW50ZXJFbGVtZW50fSI+IDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTWFwUmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBzY3JlZW5SZWdpb25FbGVtZW50fSIgY2xhc3M9InJlZ2lvbiBtYXAtcmVnaW9uIj48L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Im1lZGl1bS1zaGVsbC1ib3R0b20iIGRhdGEtYmluZGluZz0ie0B2YXI6IGJvdHRvbUVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJCb3R0b21QYW5lbFJlZ2lvbiIgY2xhc3M9InJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ibWVkaXVtLXNoZWxsLXJpZ2h0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiByaWdodEVsZW1lbnR9Ij4gPGRpdiBkYXRhLXJlZ2lvbi1uYW1lPSJSaWdodFBhbmVsUmVnaW9uIiBjbGFzcz0icmVnaW9uIGRhdGEtcmVnaW9uIiBkYXRhLXJlZ2lvbi1hZGFwdGVyPSJnZW9jb3J0ZXguZnJhbWV3b3JrLnVpLk11bHRpRGl2UmVnaW9uQWRhcHRlciI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiAgIDxkaXYgZGF0YS1yZWdpb24tbmFtZT0iTW9kYWxXaW5kb3dQbGFjZWhvbGRlclJlZ2lvbiIgY2xhc3M9InJlZ2lvbiBtb2RhbCIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5Qb3B1cE1vZGFsUmVnaW9uQWRhcHRlciI+IDxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiPjwvZGl2PiA8ZGl2IGNsYXNzPSJtb2RhbC1jb250YWluZXIiPiA8ZGl2IGNsYXNzPSJtb2RhbC1jb250YWluZXItaW5uZXIiPjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9ImZvb3QiPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/SimpleLayerList/LayerActionsView.html","html","PGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAgbm8taXRlbSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogbWVudUl0ZW1zfXtAdGV4dDogQGxhbmd1YWdlLWxheWVybGlzdC1uby1mZWF0dXJlLWFjdGlvbnN9Ij48L2Rpdj4gPGRpdiBjbGFzcz0icGFuZWwtZ3JvdXAiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBtZW51SXRlbXN9Ij4gIDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUgaGFzLWljb24iIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IG1lbnVJdGVtc30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogbWVudUl0ZW1zfXtAZXZlbnQtb25tb3VzZW92ZXI6IGdldERlc2NyaXB0aW9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlTWVudUl0ZW1DbGlja30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX17YWx0OiB0ZXh0fSIgLz4gPGRpdiBjbGFzcz0ibGlzdC1tZW51LWRldGFpbHMiPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0ZXh0fSI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkZXNjcmlwdGlvbn0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/SimpleLayerList/SimpleLayerListView.html","html","DQo8ZGl2IGNsYXNzPSJsYXllcmxpc3QiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IG1hcFNlcnZpY2VzfXtAdmlzaWJsZTogbWFwU2VydmljZXN9Ij4gPHVsIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IG1hcFNlcnZpY2VzfSI+IDxsaSBjbGFzcz0ibGF5ZXIiIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGhpZGVTZXJ2aWNlTmFtZX0iPiA8ZGl2IGNsYXNzPSJsYXllci1pbmZvIHBhcmVudC1sYXllciI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7Y2xhc3M6IGV4cGFuZGVyQ2xhc3N9e0B2aXNpYmxlOiBsYXllckxpc3R9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVTbGlkZVRvZ2dsZUNsaWNrfSI+PC9kaXY+IDxpbnB1dCB0eXBlPSJjaGVja2JveCIgZGF0YS1iaW5kaW5nPSJ7Y2hlY2tlZDogdmlzaWJsZX17QGV2ZW50LW9uY2hhbmdlOiB0b2dnbGVTZXJ2aWNlVmlzaWJpbGl0eX17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrRXZlbnR9IiAvPiA8ZGl2IGNsYXNzPSJjb250ZW50cyIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IHRvZ2dsZVNlcnZpY2VWaXNpYmlsaXR5fSI+IDxpbWcgY2xhc3M9Im1hcHNlcnZpY2UtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3RpdGxlOiBpY29uVG9vbHRpcH17c3JjOiBpY29uVXJpfSIgc3R5bGU9IndpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7Ii8+IDxzcGFuIGNsYXNzPSJkaXNwbGF5LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX17dGl0bGU6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDwvbGk+IDxsaSBjbGFzcz0ibGF5ZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBleHBhbmRlZH0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie2NsYXNzOiBzZXJ2aWNlTGF5ZXJzQ3NzfXtAc291cmNlOiBsYXllckxpc3R9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1NpbXBsZUxheWVyTGlzdC9UZW1wbGF0ZXMvU2ltcGxlTGF5ZXJJdGVtVGVtcGxhdGUuaHRtbH0iPjwvZGl2PiA8L2xpPiA8L3VsPiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGF5ZXJsaXN0LWZvb3RlciI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1sYXllcmxpc3Qtc2hvdy1sZWdlbmR9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1Nob3dMZWdlbmR9Ij48L2J1dHRvbj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/SimpleLayerList/Templates/SimpleLayerItemTemplate.html","html","DQo8dWwgY2xhc3M9ImxheWVycyI+IDxsaSBjbGFzcz0ibGF5ZXIiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxheWVyTGlzdH0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie2Rpc2FibGVkOiBjYW5Ob3RBc3NpZ25WaXNpYmlsaXR5fXtjbGFzczogZW5hYmxlZENzc30iPiA8ZGl2IGRhdGEtYmluZGluZz0ie2NsYXNzOiBleHBhbmRlckNsYXNzfXtAdmlzaWJsZTogbGF5ZXJMaXN0fXtAZXZlbnQtb25jbGljazogaGFuZGxlU2xpZGVUb2dnbGVDbGlja30iPjwvZGl2PiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie2NoZWNrZWQ6IHZpc2libGV9e2NsYXNzOiBlbmFibGVkQ2hlY2tib3hDc3N9e2Rpc2FibGVkOiBjYW5Ob3RBc3NpZ25WaXNpYmlsaXR5fXt0aXRsZTogdG9vbFRpcH17QGV2ZW50LW9uY2hhbmdlOiB0b2dnbGVMYXllclZpc2liaWxpdHl9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0V2ZW50fSIgLz4gPGRpdiBjbGFzcz0iY29udGVudHMgY2xlYXIiIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiB0b2dnbGVMYXllclZpc2liaWxpdHl9e0BldmVudC1tb3VzZWRvd246IGhhbmRsZU1vdXNlRG93bn17QGV2ZW50LW1vdXNldXA6IGhhbmRsZU1vdXNlVXB9e0BldmVudC10b3VjaHN0YXJ0OiBoYW5kbGVUb3VjaFN0YXJ0fXtAZXZlbnQtdG91Y2hlbmQ6IGhhbmRsZVRvdWNoRW5kfSI+IDxpbWcgY2xhc3M9ImxheWVyLWljb24iIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXt0aXRsZTogdG9vbFRpcH17c3JjOiBpY29uVXJpfSIgc3R5bGU9IndpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7Ii8+IDxzcGFuIGNsYXNzPSJkaXNwbGF5LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX17dGl0bGU6IGRpc3BsYXlOYW1lfSI+PC9zcGFuPiA8L2Rpdj4gPGRpdiBjbGFzcz0ibGF5ZXItYWN0aW9ucyBjaGV2cm9uLXJpZ2h0LTE2IiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlTGF5ZXJBY3Rpb25zfXt0aXRsZTogbGF5ZXJBY3Rpb25Ub29sdGlwfSI+PC9kaXY+IDwvZGl2PiA8dWwgY2xhc3M9ImxheWVycyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGV4cGFuZGVkfXtAc291cmNlOiBsYXllckxpc3R9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1NpbXBsZUxheWVyTGlzdC9UZW1wbGF0ZXMvU2ltcGxlTGF5ZXJJdGVtVGVtcGxhdGUuaHRtbH0iPjwvdWw+IDwvbGk+IDwvdWw+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Site/ServiceLayersFailureView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIHNlcnZpY2UtbGF5ZXJzLWZhaWx1cmUiPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNpdGUtc2VydmljZS1sYXllcnMtZmFpbHVyZS12aWV3LXdhcm5pbmd9e0BoaWRkZW46IGhhc0Vycm9yfSI+PC9wPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNpdGUtc2VydmljZS1sYXllcnMtZmFpbHVyZS12aWV3LWVycm9yfXtAdmlzaWJsZTogaGFzRXJyb3J9Ij48L3A+IDx1bCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmYWlsZWRTZXJ2aWNlc30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZmFpbGVkU2VydmljZXN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9e3RpdGxlOiBlcnJvcn0iPjwvc3Bhbj4gPC9saT4gPC91bD4gPGRpdiBjbGFzcz0iZm9ybS1idG5zIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBoYXNFcnJvcn0iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B2YXI6IG9rQnV0dG9uRWxlbWVudH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrT2t9e0B0ZXh0OiBAbGFuZ3VhZ2UtY29tbW9uLW9rfSIvPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Site/SignInErrorView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIHNpZ24tb24tZXJyb3IiPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLXNpdGUtbG9nLW9uLXJlcXVpcmVkLWVycm9yfSI+PC9wPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja1RyeUFnYWlufXtAdGV4dDogQGxhbmd1YWdlLXNpdGUtdHJ5LWxvZy1vbi1hZ2Fpbn0iLz4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Status/StatusIndicatorView.html","html","DQo8ZGl2IGNsYXNzPSJzdGF0dXMtaW5kaWNhdG9yIGFuaW0tem9vbS1pbiIgZGF0YS1yZWdpb24tbmFtZT0iU3RhdHVzSW5kaWNhdG9yTWVzc2FnZVJlZ2lvbiIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Status/StatusMessageView.html","html","DQo8ZGl2IGNsYXNzPSJzdGF0dXMtd2luZG93Ij4gPHRhYmxlPiA8dHI+IDx0ZD4gPGltZyBjbGFzcz0ic3RhdHVzLWltZyIgZGF0YS1iaW5kaW5nPSJ7c3JjOiBpbWFnZVVyaX17QHZpc2libGU6IGltYWdlVXJpfSIvPiA8L3RkPiA8dGQ+IDxzcGFuIGNsYXNzPSJzdGF0dXMtbXNnIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC90ZD4gPHRkIGNsYXNzPSJzdGF0dXMtY2xvc2UiPiA8YnV0dG9uIGNsYXNzPSJzdGF0dXMtYnRuIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tDbG9zZX17dGl0bGU6IEBsYW5ndWFnZS1jb21tb24tY2xvc2V9Ij4gPHNwYW4+Jm5ic3A7PC9zcGFuPiA8L2J1dHRvbj4gPC90ZD4gPC90cj4gPC90YWJsZT4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Temp/TempView.html","html","PGRpdiBjbGFzcz0iVGVtcENsYXNzIj4gPGgxPlRoaXMgaXMgVGVtcCBWaWV3PC9oMT4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/LargeToolbarView.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1jb250YWluZXIgdW5zZWxlY3RhYmxlIj4gPGRpdiBjbGFzcz0idG9vbGJhci10YWItY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdG9vbGJhclRhYnN9Ij4gPHVsIGNsYXNzPSJ0b29sYmFyLXRhYi1jb250cm9sIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiB0b29sYmFyVGFic30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdG9vbGJhclRhYnN9e2NsYXNzTmFtZTogY3NzQ2xhc3N9Ij4gPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogdGl0bGV9e3RpdGxlOiB0b29sdGlwfXtAZXZlbnQtb25jbGljazogaGFuZGxlVGFiQ2xpY2t9Ij48L2E+IDwvbGk+IDwvdWw+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ0b29sYmFyLWJvZHkgbGFyZ2UiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHRvb2xiYXJHcm91cHN9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1RhYmJlZFRvb2xiYXJHcm91cFRlbXBsYXRlLmh0bWx9Ij48L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/LargeTransientToolbarView.html","html","PGRpdiBjbGFzcz0ibGFyZ2UtdHJhbnNpZW50LXRvb2xiYXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB0b29sYmFyR3JvdXBzfXtAc291cmNlOiB0b29sYmFyR3JvdXBzfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9Ub29sYmFyR3JvdXBUZW1wbGF0ZS5odG1sfSI+IDxhIGNsYXNzPSJ0b29sYmFyLWNsb3NlLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiAgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGNsb3NlVG9vbGJhcn0iPjwvYT4gDQo8L2Rpdj4gPGRpdiAgY2xhc3M9ImxhcmdlLXRyYW5zaWVudC10b29sYmFyIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB0b29sYmFyR3JvdXBzfXtAdGV4dDogQGxhbmd1YWdlLXRvb2xiYXItbm90LWF2YWlsYWJsZX0iPiA8aW1nIGNsYXNzPSJ0b29sYmFyLWNsb3NlLWJ1dHRvbiIgIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9wYW5lbC1jbG9zZS5wbmciIGRhdGEtYmluZGluZz0ie0BldmVudC1vbmNsaWNrOiBjbG9zZVRvb2xiYXJ9IiAvPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/SmallToolbarView.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1ib2R5IHNtYWxsIHVuc2VsZWN0YWJsZSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHRvb2xiYXJHcm91cHN9e0Bzb3VyY2U6IHRvb2xiYXJHcm91cHN9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1Rvb2xiYXJHcm91cFRlbXBsYXRlLmh0bWx9Ij48L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/SmallTransientToolbarView.html","html","PGRpdiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdG9vbGJhckdyb3Vwc317QHNvdXJjZTogdG9vbGJhckdyb3Vwc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvVG9vbGJhci9UZW1wbGF0ZXMvVG9vbGJhckdyb3VwVGVtcGxhdGUuaHRtbH0iPjwvZGl2PiA8ZGl2IGRhdGEtYmluZGluZz0ie0BoaWRkZW46IHRvb2xiYXJHcm91cHN9e0B0ZXh0OiBAbGFuZ3VhZ2UtdG9vbGJhci1ub3QtYXZhaWxhYmxlfSI+PC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/ToolbarButtonView.html","html","PGRpdiBjbGFzcz0idG9vbGJhci10b2dnbGUtYnV0dG9uIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogdG9vbGJhckdyb3Vwc317QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrVG9nZ2xlVG9vbGJhcn0iPjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/ToolbarManagedViewsView.html","html","PHRhYmxlIGNsYXNzPSJ0YWItY29udGFpbmVyIj4gPHRyIGNsYXNzPSJ0YWItY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBob3N0ZWRWaWV3c30iPiA8dGQgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogaG9zdGVkVmlld3N9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVWaWV3VGlsZUNsaWNrfXtjbGFzc05hbWU6IGlkfXtAdmFyOiB0aWxlRWxlbWVudHN9Ij4gPGltZyBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaWNvblVyaX17c3JjOiBpY29uVXJpfXthbHQ6IGRlc2NyaXB0aW9ufSIvPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiBpY29uVXJpfXtAdGV4dDogdGl0bGV9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/ToolbarView.html","html","DQo8ZGl2IGNsYXNzPSJ0b29sYmFyIiBkYXRhLXJlZ2lvbi1uYW1lPSJUb29sYmFyVGFiQ29udGVudFJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW1vdXNlZG93bjogaGFuZGxlTW91c2VEb3dufSB7QGV2ZW50LW1vdXNldXA6IGhhbmRsZU1vdXNlVXB9IHtAZXZlbnQtdG91Y2hzdGFydDogaGFuZGxlVG91Y2hTdGFydH0ge0BldmVudC10b3VjaGVuZDogaGFuZGxlVG91Y2hFbmR9IHtAZXZlbnQtbW91c2VvdXQ6IGhhbmRsZU1vdXNlT3V0fSB7QGV2ZW50LXRvdWNoY2FuY2VsOiBoYW5kbGVUb3VjaENhbmNlbH0ge0BldmVudC10b3VjaG1vdmU6IGhhbmRsZVRvdWNoTW92ZX0iPjwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/TabbedToolbarGroupTemplate.html","html","PGRpdiBkYXRhLWJpbmRpbmc9IntjbGFzc05hbWU6IGNzc0NsYXNzfXtAdmlzaWJsZTogaXNBY3RpdmV9Ij4gPHVsIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGl0ZW1zfXtAdGVtcGxhdGUtc2VsZWN0b3I6IHR5cGV9Ij4gIDxsaSAgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBjc3NDbGFzc317QHRlbXBsYXRlLXNlbGVjdDogdG9vbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvSWNvblBsYWNlaG9sZGVyMjR4MjQucG5nIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9saT4gICA8bGkgIGRhdGEtYmluZGluZz0ie2NsYXNzTmFtZTogY3NzQ2xhc3N9e0B0ZW1wbGF0ZS1zZWxlY3Q6IGJ1dHRvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiAgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL0ljb25QbGFjZWhvbGRlcjI0eDI0LnBuZyIgIC8+IDxwIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfSI+PC9wPiAgPC9saT4gIDxsaSBjbGFzcz0idG9vbGJhci1yZWdpb24iIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHJlZ2lvbn0iPiA8ZGl2IGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHJlZ2lvbn17QHdpZGdldDogUmVnaW9uV2lkZ2V0fXtAd2lkZ2V0LWNvbnRleHQ6IEBjb250ZXh0fXt0aXRsZTogdG9vbHRpcH0iPjwvZGl2PiA8L2xpPiAgIDxsaSBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiB0b29sYmFyR3JvdXB9e0B0ZW1wbGF0ZTogTWFwcGluZy9tb2R1bGVzL1Rvb2xiYXIvVGVtcGxhdGVzL1RhYmJlZFRvb2xiYXJHcm91cFRlbXBsYXRlLmh0bWx9Ij4gPC9saT4gPC91bD4gPGg0IGRhdGEtYmluZGluZz0ie0B0ZXh0OiBuYW1lfXtAdmlzaWJsZTogbmFtZX0iPjwvaDQ+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarGroupTemplate.html","html","PGRpdiBjbGFzcz0idG9vbGJhci1pdGVtIHRvb2xiYXItZ3JvdXAiPiA8aDIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L2gyPiA8dWwgY2xhc3M9InRvb2xiYXItcGFyZW50IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBpdGVtc317QHRlbXBsYXRlLXNlbGVjdG9yOiB0eXBlfSI+ICA8bGkgY2xhc3M9InRvb2xiYXItaXRlbSBidXR0b24gdG9vbCIgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBjc3NDbGFzc317QHRlbXBsYXRlLXNlbGVjdDogdG9vbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvSWNvblBsYWNlaG9sZGVyMjR4MjQucG5nIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9saT4gICA8bGkgY2xhc3M9InRvb2xiYXItaXRlbSBidXR0b24iIGRhdGEtYmluZGluZz0ie2NsYXNzTmFtZTogY3NzQ2xhc3N9e0B0ZW1wbGF0ZS1zZWxlY3Q6IGJ1dHRvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrfXt0aXRsZTogdG9vbHRpcH0iPiA8aW1nIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpY29uVXJpfXtzcmM6IGljb25Vcml9e2FsdDogbmFtZX0iIHNyYz0iUmVzb3VyY2VzL0ltYWdlcy9JY29ucy9JY29uUGxhY2Vob2xkZXIyNHgyNC5wbmciLz4gPHAgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG5hbWV9Ij48L3A+IDwvbGk+ICAgPGxpIGNsYXNzPSJ0b29sYmFyLXJlZ2lvbiIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogcmVnaW9ufSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogcmVnaW9ufXtAd2lkZ2V0OiBSZWdpb25XaWRnZXR9e0B3aWRnZXQtY29udGV4dDogQGNvbnRleHR9e3RpdGxlOiB0b29sdGlwfSI+PC9kaXY+IDwvbGk+ICAgPGxpIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IHRvb2xiYXJHcm91cH17Y2xhc3NOYW1lOiBjc3NDbGFzc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvVG9vbGJhci9UZW1wbGF0ZXMvVG9vbGJhckl0ZW1zVGVtcGxhdGUuaHRtbH0iPjwvbGk+IDwvdWw+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarItemsTemplate.html","html","PGRpdiA+IDxoMyBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvaDM+ICA8dWwgY2xhc3M9InRvb2xiYXItbmVzdGVkIiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBpdGVtc317QHRlbXBsYXRlLXNlbGVjdG9yOiB0eXBlfSI+ICA8bGkgY2xhc3M9InRvb2xiYXItaXRlbSBidXR0b24gdG9vbCIgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBjc3NDbGFzc317QHRlbXBsYXRlLXNlbGVjdDogdG9vbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX17dGl0bGU6IHRvb2x0aXB9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvSWNvblBsYWNlaG9sZGVyMjR4MjQucG5nIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9saT4gICA8bGkgY2xhc3M9InRvb2xiYXItaXRlbSBidXR0b24iIGRhdGEtYmluZGluZz0ie2NsYXNzTmFtZTogY3NzQ2xhc3N9e0B0ZW1wbGF0ZS1zZWxlY3Q6IGJ1dHRvbn17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrfSI+IDxpbWcgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGljb25Vcml9e3NyYzogaWNvblVyaX17dGl0bGU6IHRvb2x0aXB9IiBzcmM9IlJlc291cmNlcy9JbWFnZXMvSWNvbnMvSWNvblBsYWNlaG9sZGVyMjR4MjQucG5nIiAvPiA8cCBkYXRhLWJpbmRpbmc9IntAdGV4dDogbmFtZX0iPjwvcD4gPC9saT4gICA8bGkgY2xhc3M9InRvb2xiYXItcmVnaW9uIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiByZWdpb259Ij4gPGRpdiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiByZWdpb259e0B3aWRnZXQ6IFJlZ2lvbldpZGdldH17QHdpZGdldC1jb250ZXh0OiBAY29udGV4dH17dGl0bGU6IHRvb2x0aXB9Ij48L2Rpdj4gPC9saT4gICA8bGkgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBjc3NDbGFzc317QHRlbXBsYXRlLXNlbGVjdDogdG9vbGJhckdyb3VwfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Ub29sYmFyL1RlbXBsYXRlcy9Ub29sYmFySXRlbXNUZW1wbGF0ZS5odG1sfSI+PC9saT4gPC91bD4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Toolbar/Templates/ToolbarRegionTemplate.html","html","PGRpdiBkYXRhLWJpbmRpbmc9IntkYXRhLXJlZ2lvbi1uYW1lOiByZWdpb25OYW1lfSIgZGF0YS1yZWdpb24tYWRhcHRlcj0iZ2VvY29ydGV4LmZyYW1ld29yay51aS5NdWx0aURpdlJlZ2lvbkFkYXB0ZXIiPjwvZGl2PiA8ZGl2PjwvZGl2PiA=");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayCaptureGeometryView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGRpc3BsYXktY2FwdHVyZS1nZW9tZXRyeSI+IDxkaXYgY2xhc3M9ImZvcm0tdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX17QHZpc2libGU6IHNob3dUaXRsZUluRm9ybUJvZHl9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9IndvcmtmbG93LWluc3RydWN0aW9uLW1zZyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IGluc3RydWN0aW9uTWVzc2FnZX0iPjwvZGl2PiAgPHNwYW4gY2xhc3M9IndvcmtmbG93LWZvcm0tZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1nZW9tZXRyeS10b29sYmFyLWluc3RydWN0aW9uc30iPjwvc3Bhbj4gIDxkaXYgY2xhc3M9ImZvcm0tYnRucyBnZW9tZXRyeSIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogY2FwdHVyZVR5cGVzfSI+IDxidXR0b24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogY2FwdHVyZVR5cGVzfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2FwdHVyZVR5cGVTZWxlY3Rpb259e2lkOiB0eXBlTmFtZX0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntjbGFzczogY2xhc3NOYW1lfSI+PC9zcGFuPiA8L2J1dHRvbj4gPC9kaXY+ICA8ZGl2IGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBzaG93UmVxdWlyZWRWYWxpZGF0aW9uTWVzc2FnZX0iPiA8ZGl2IGNsYXNzPSJ3b3JrZmxvdy1zdGF0dXMtbXNnIGludmFsaWQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB2YWxpZGF0aW9uUmVzdWx0c30iPiA8dGFibGU+IDx0cj4gPHRkPjxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2Vycm9yLXdoaXRlLTI0LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtZ2VvbWV0cnktY2FwdHVyZWR9Ii8+PC90ZD4gPHRkIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHZhbGlkYXRpb25SZXN1bHRzfSI+PHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdmFsaWRhdGlvblJlc3VsdHN9e0B0ZXh0OiBlcnJvck1lc3NhZ2V9IiAvPjwvdGQ+IDwvdHI+IDwvdGFibGU+IDwvZGl2PiA8L2Rpdj4gIDxkaXYgY2xhc3M9IndvcmtmbG93LXN0YXR1cy1tc2ciIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBjYXB0dXJlZE1lc3NhZ2VWaXNpYmxlfSIgPiA8dGFibGU+IDx0cj4gPHRkPjxpbWcgc3JjPSJSZXNvdXJjZXMvSW1hZ2VzL0ljb25zL2NoZWNrLTI0LnBuZyIgZGF0YS1iaW5kaW5nPSJ7YWx0OiBAbGFuZ3VhZ2UtZ2VvbWV0cnktY2FwdHVyZWR9Ii8+PC90ZD4gPHRkIHZhbGlnbj0ibWlkZGxlIj48c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLWdlb21ldHJ5LWNhcHR1cmVkfSIgLz48L3RkPiA8L3RyPiA8L3RhYmxlPiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImZvcm0tYnRucyIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYnV0dG9uc30iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGJ1dHRvbnN9e0B0ZXh0OiBsYWJlbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQnV0dG9ufSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayHyperlinkView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgZGlzcGxheS1oeXBlcmxpbmsiPiA8aDIgY2xhc3M9ImZvcm0tdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX17QHZpc2libGU6IHNob3dUaXRsZUluRm9ybUJvZHl9Ij48L2gyPiA8cCBjbGFzcz0iZm9ybS1pdGVtIGZvcm0tZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IG1lc3NhZ2V9Ij48L3A+IDxhIGNsYXNzPSJmb3JtLWl0ZW0iIGRhdGEtYmluZGluZz0ie2hyZWY6IHVyaX17dGFyZ2V0OiB0YXJnZXR9e0B0ZXh0OiBoeXBlcmxpbmtUZXh0fSI+PC9hPiA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGJ1dHRvbnN9Ij4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBidXR0b25zfXtAdGV4dDogbGFiZWx9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0J1dHRvbn0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/DisplayReportUrlView.html","html","PGRpdiBjbGFzcz0ibW9kdWxlIGRpc3BsYXktaHlwZXJsaW5rIj4gPHAgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWRlc2MiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2Utd29ya2Zsb3ctcmVwb3J0LXVybH0iPjwvcD4gPGEgY2xhc3M9ImZvcm0taXRlbSIgZGF0YS1iaW5kaW5nPSJ7aHJlZjogdXJsfXt0YXJnZXQ6IHRhcmdldH17QHRleHQ6IEBsYW5ndWFnZS13b3JrZmxvdy1yZXBvcnQtdXJsLXRleHR9Ij48L2E+IDxkaXYgY2xhc3M9ImZvcm0tYnRucyIgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYnV0dG9uc30iPiA8YnV0dG9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGJ1dHRvbnN9e0B0ZXh0OiBsYWJlbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrQnV0dG9ufSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/WorkflowContainerView.html","html","DQo8ZGl2IGNsYXNzPSJ3b3JrZmxvdy1jb250YWluZXIiPiA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkaXNwbGF5SGVhZGVyfSI+IDxoMiBjbGFzcz0icGFuZWwtdGl0bGUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiB0aXRsZX0iPjwvaDI+IDwvZGl2PiA8ZGl2IGNsYXNzPSJsb2FkaW5nLWNvbnRhaW5lciIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogaGFzQ29udGVudH0iPiA8ZGl2IGNsYXNzPSJsb2FkaW5nLWltZyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGJ1c3l9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibG9hZGluZy1tc2ciIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBtZXNzYWdlfSI+PC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJ3b3JrZmxvdy1jb250YWluZXItcmVnaW9uLWhvbGRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGhhc0NvbnRlbnR9Ij4gIDxkaXYgY2xhc3M9InJlZ2lvbiIgZGF0YS1yZWdpb24tbmFtZT0iIXJlZ2lvbi1uYW1lLXBsYWNlaG9sZGVyISI+PC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/WorkflowFormView.html","html","DQo8ZGl2IGNsYXNzPSJtb2R1bGUgd29ya2Zsb3ctZm9ybSI+IDxoMiBjbGFzcz0iZm9ybS10aXRsZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRpdGxlfXtAdmlzaWJsZTogc2hvd1RpdGxlSW5Gb3JtQm9keX0iPjwvaDI+IDxmb3JtIGRhdGEtYmluZGluZz0ie0BldmVudC1vbnN1Ym1pdDogaGFuZGxlU3VibWl0fSI+ICA8ZGl2IGNsYXNzPSJ3b3JrZmxvdy1mb3JtLWlubmVyIiBkYXRhLWJpbmRpbmc9IntAZG9tOiB3b3JrZmxvd0Zvcm1Db250ZW50fSI+PC9kaXY+ICA8dWwgY2xhc3M9ImZvcm0tdmFsaWRhdGlvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IHZhbGlkYXRpb25SZXN1bHRzfXtAc291cmNlOiB2YWxpZGF0aW9uUmVzdWx0c30iPiA8bGkgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogdmFsaWRhdGlvblJlc3VsdHN9Ij4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1jb21tb24tdmFsaWRhdGlvbi1zeW1ib2x9Ij48L3NwYW4+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBlcnJvck1lc3NhZ2V9Ij48L3NwYW4+IDwvbGk+IDwvdWw+ICA8ZGl2IGNsYXNzPSJmb3JtLWJ0bnMiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGJ1dHRvbnN9Ij4gPGJ1dHRvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBidXR0b25zfXtAdGV4dDogbGFiZWx9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0J1dHRvbn0iPjwvYnV0dG9uPiA8L2Rpdj4gPC9mb3JtPiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/WorkflowListView.html","html","PGRpdiBjbGFzcz0id29ya2Zsb3ctbGlzdCI+ICA8ZGl2IGNsYXNzPSJuby1yZXN1bHRzIiBkYXRhLWJpbmRpbmc9IntAaGlkZGVuOiB3b3JrZmxvd3N9e0B0ZXh0OiBAbGFuZ3VhZ2Utd29ya2Zsb3ctbm9uZS1hdmFpbGFibGV9Ij48L2Rpdj4gIDxkaXYgY2xhc3M9Imxpc3QtbWVudSBhY3RpdmUiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IHdvcmtmbG93c317QHZpc2libGU6IHdvcmtmbG93c30iPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogd29ya2Zsb3dzfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tXb3JrZmxvd30iPiA8c3BhbiBjbGFzcz0ibGlzdC1tZW51LW5hbWUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBkaXNwbGF5TmFtZX0iPjwvc3Bhbj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/AutoCompleteBoxFormItemView.html","html","PGRpdiBjbGFzcz0iYXV0b2NvbXBsZXRlLWlubmVyIj4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGFiZWx9e0B2aXNpYmxlOiBsYWJlbH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYWJlbH17QHRleHQ6IHRleHR9Ij48L3NwYW4+IDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX3Nob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJmb3JtLWNvbnRyb2wiPiAgPGRpdiBjbGFzcz0iYXV0b2NvbXBsZXRlLWlucHV0Ij4gPGRpdiBjbGFzcz0ibG9hZGVyIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNCdXN5fSI+PC9kaXY+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFyOiB0ZXh0RWxlbWVudH17QGV2ZW50LW9ua2V5dXA6IGhhbmRsZUtleUV2ZW50fXtAZXZlbnQtb25ibHVyOiBoYW5kbGVJbnB1dEJsdXJFdmVudH17QGV2ZW50LW9uZm9jdXM6IGhhbmRsZUlucHV0Rm9jdXNFdmVudH17QHZhbHVlOiB0ZXh0fXtAc3R5bGUtd2lkdGg6IHRleHRib3hXaWR0aH17dGl0bGU6IHRvb2xUaXB9IiAvPiA8L2Rpdj4gIDxkaXYgY2xhc3M9ImF1dG9jb21wbGV0ZS1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBkcm9wRG93bkNvbnRhaW5lckVsZW1lbnR9e0B2aXNpYmxlOiBpc0Ryb3BEb3duT3Blbn17QHN0eWxlLW1pbldpZHRoOiB0ZXh0Ym94V2lkdGh9e0BldmVudC1vbmtleWRvd246IGhhbmRsZURyb3Bkb3duS2V5RG93bn17QGV2ZW50LW9ubW91c2Vkb3duOiBoYW5kbGVEcm9wZG93bkZvY3VzRXZlbnR9e0BldmVudC1vbmZvY3VzOiBoYW5kbGVEcm9wZG93bkZvY3VzRXZlbnR9e0BldmVudC1vbmJsdXI6IGhhbmRsZURyb3Bkb3duQmx1ckV2ZW50fSI+IDx1bCBjbGFzcz0ibGlzdC1tZW51IiBkYXRhLWJpbmRpbmc9IntAdmFyOiBkcm9wRG93bkxpc3RFbGVtZW50fXtAdmlzaWJsZTogZGF0YUl0ZW1zfXtAc291cmNlOiBkYXRhSXRlbXN9Ij4gPGxpIGNsYXNzPSJsaXN0LW1lbnUtaXRlbSIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZGF0YUl0ZW1zfXtAdGV4dDogdmFsdWV9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja0l0ZW19Ij48L2xpPiA8L3VsPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/CheckBoxFormItemView.html","html","PGRpdiBjbGFzcz0iY2hlY2tib3gtaW5uZXIiPiA8dGFibGU+IDx0cj4gPHRkIGNsYXNzPSJmb3JtLWxhYmVsIGxlZnQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF90ZXh0T25MZWZ0fSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie2ZvcjogYXR0YWNoZWRfY29udHJvbElkfXtAdGV4dDogYXR0YWNoZWRfbGFiZWxUZXh0fXt0aXRsZTogdG9vbFRpcH0iPjwvc3Bhbj4gPC90ZD4gPHRkPiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogY2hlY2tlZH17aWQ6IGF0dGFjaGVkX2NvbnRyb2xJZH17dGl0bGU6IHRvb2xUaXB9IiAvPiA8L3RkPiA8dGQgY2xhc3M9ImZvcm0tbGFiZWwgbGVmdCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYXR0YWNoZWRfdGV4dE9uTGVmdH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9Intmb3I6IGF0dGFjaGVkX2NvbnRyb2xJZH17QHRleHQ6IGF0dGFjaGVkX2xhYmVsVGV4dH17dGl0bGU6IHRvb2xUaXB9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ComboBoxFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxkaXYgY2xhc3M9ImxvYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzQnVzeX0iPjwvZGl2PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGRhdGFJdGVtc317QHZhbHVlOiBzZWxlY3RlZH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VkfXtkaXNhYmxlZDogaXNCdXN5fXt0aXRsZTogdG9vbFRpcH0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGRhdGFJdGVtc317QHRleHQ6IGRpc3BsYXl9e0BhdHRhY2g6IEBjb250ZXh0fSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ContainerFormItemView.html","html","PGRpdiBjbGFzcz0iZm9ybS1jb250YWluZXIiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBpc1Zpc2libGV9Ij4gPHAgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWRlc2MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkZXNjcmlwdGlvbn17QHRleHQ6IGRlc2NyaXB0aW9ufSI+PC9wPiA8ZGl2IGRhdGEtYmluZGluZz0ie2NsYXNzTmFtZTogYXR0YWNoZWRfY3NzQ2xhc3N9e0Bzb3VyY2U6IGZvcm1JdGVtc317QHRlbXBsYXRlOiBNYXBwaW5nL21vZHVsZXMvV29ya2Zsb3cvRm9ybXMvSXRlbXMvRm9ybUl0ZW1WaWV3Lmh0bWx9Ij48L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/DatePickerFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+ICA8ZGl2IGNsYXNzPSJpbmxpbmUtYmxvY2siIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IEBjb250ZXh0fXtAdGVtcGxhdGUtc2VsZWN0b3I6IGF0dGFjaGVkX3BpY2tlclR5cGV9Ij4gIDxpbnB1dCBjbGFzcz0iZGF0ZS10aW1lIiBkYXRhLWJpbmRpbmc9IntAdmFyOiBuYXRpdmVfZGF0ZXRpbWVfZWxlbWVudH17QHRlbXBsYXRlLXNlbGVjdDogbmF0aXZlX2RhdGV0aW1lfXt0aXRsZTogdG9vbFRpcH17QHZhbHVlOiBkYXRlfSIgdHlwZT0iZGF0ZXRpbWUiIC8+ICA8aW5wdXQgZGF0YS1iaW5kaW5nPSJ7QHZhcjogalF1ZXJ5UGlja2VyfXtAdGVtcGxhdGUtc2VsZWN0OiBqUXVlcnl9e3RpdGxlOiB0b29sVGlwfSIgLz4gIDxpbnB1dCBkYXRhLWJpbmRpbmc9IntAdmFyOiBuYXRpdmVfZGF0ZXRpbWVfZWxlbWVudH17QHRlbXBsYXRlLXNlbGVjdDogbmF0aXZlfXt0aXRsZTogdG9vbFRpcH17QHZhbHVlOiBkYXRlfSIgdHlwZT0iZGF0ZSIgLz4gIDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogbmF0aXZlX2RhdGVfalF1ZXJ5X3RpbWV9e3RpdGxlOiB0b29sVGlwfSI+IDxpbnB1dCBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IGRhdGV9IiB0eXBlPSJkYXRlIi8+IDxpbnB1dCBkYXRhLWJpbmRpbmc9IntAdmFyOiBqUXVlcnlQaWNrZXJ9IiB0eXBlPSJ0ZXh0Ii8+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZGF0ZXRpbWUtc2VsZWN0IiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBuYXRpdmVfZGF0ZV9jb21ib190aW1lfXt0aXRsZTogdG9vbFRpcH0iPiA8aW5wdXQgZGF0YS1iaW5kaW5nPSJ7QHZhcjogbmF0aXZlX2RhdGV0aW1lX2VsZW1lbnR9e0B2YWx1ZTogZGF0ZX0iIHR5cGU9ImRhdGUiLz4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9ob3Vyc317QHZhbHVlOiBhdHRhY2hlZF9ob3VyfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZVdpdGhOYXRpdmVEYXRlfXtAdmFyOiBzZWxlY3QwfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfaG91cnN9e0BhdHRhY2hlZC12YWx1ZTogdmFsfXtAdGV4dDogZGVzY30iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9taW51dGVzfXtAdmFsdWU6IGF0dGFjaGVkX21pbnV0ZX17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWVXaXRoTmF0aXZlRGF0ZX17QHZhcjogc2VsZWN0MX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX21pbnV0ZXN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9zZWNvbmRzfXtAdmFsdWU6IGF0dGFjaGVkX3NlY29uZH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWVXaXRoTmF0aXZlRGF0ZX17QHZhcjogc2VsZWN0Mn0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX3NlY29uZHN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJkYXRldGltZS1zZWxlY3QiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGNvbWJvc317dGl0bGU6IHRvb2xUaXB9Ij4gPHNlbGVjdCBjbGFzcz0iZHAteXkiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX3llYXJzfXtAdmFsdWU6IGF0dGFjaGVkX3llYXJ9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfXtAdmFyOiBzZWxlY3QzfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfeWVhcnN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBjbGFzcz0iZHAtbW0iIGRhdGEtYmluZGluZz0ie0B2YWx1ZTogYXR0YWNoZWRfbW9udGh9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfXtAdmFyOiBzZWxlY3Q0fSI+IDxvcHRpb24gdmFsdWU9IjAiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTB9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtMX0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSIyIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0yfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjMiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTN9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iNCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtNH0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI1IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy01fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjYiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTZ9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iNyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtN30iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI4IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy04fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjkiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTl9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMTAiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTEwfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjExIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0xMX0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBjbGFzcz0iZHAtZGQiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX2RheXN9e0B2YWx1ZTogYXR0YWNoZWRfZGF5fXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0NX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX2RheXN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+ICA8ZGl2IGNsYXNzPSJkcC10cC1zZWxlY3QiIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IGNvbWJvc19kYXRldGltZX17dGl0bGU6IHRvb2xUaXB9Ij4gPGRpdiBjbGFzcz0iZGF0ZXRpbWUtc2VsZWN0Ij4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF95ZWFyc317QHZhbHVlOiBhdHRhY2hlZF95ZWFyfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0Nn0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX3llYXJzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHZhbHVlOiBhdHRhY2hlZF9tb250aH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9e0B2YXI6IHNlbGVjdDd9Ij4gPG9wdGlvbiB2YWx1ZT0iMCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtMH0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSIxIiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy0xfSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjIiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTJ9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMyIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtM30iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI0IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy00fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjUiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTV9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iNiIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtNn0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSI3IiBkYXRhLWJpbmRpbmc9IntAdGV4dDogQGxhbmd1YWdlLW1vbnRocy03fSI+PC9vcHRpb24+IDxvcHRpb24gdmFsdWU9IjgiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTh9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iOSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtOX0iPjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSIxMCIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IEBsYW5ndWFnZS1tb250aHMtMTB9Ij48L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT0iMTEiIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBAbGFuZ3VhZ2UtbW9udGhzLTExfSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX2RheXN9e0B2YWx1ZTogYXR0YWNoZWRfZGF5fXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0OH0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX2RheXN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPC9kaXY+IDxkaXYgY2xhc3M9ImRhdGV0aW1lLXNlbGVjdCB0aW1lIj4gPGxhYmVsPkg8L2xhYmVsPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX2hvdXJzfXtAdmFsdWU6IGF0dGFjaGVkX2hvdXJ9e0BldmVudC1vbmNoYW5nZTogaGFuZGxlQ2hhbmdlQ29tYm9Cb3hUaW1lfXtAdmFyOiBzZWxlY3Q5fSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfaG91cnN9e0BhdHRhY2hlZC12YWx1ZTogdmFsfXtAdGV4dDogZGVzY30iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPGxhYmVsPk08L2xhYmVsPiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX21pbnV0ZXN9e0B2YWx1ZTogYXR0YWNoZWRfbWludXRlfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX17QHZhcjogc2VsZWN0MTB9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9taW51dGVzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDxsYWJlbD5TPC9sYWJlbD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9zZWNvbmRzfXtAdmFsdWU6IGF0dGFjaGVkX3NlY29uZH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9e0B2YXI6IHNlbGVjdDExfSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogYXR0YWNoZWRfc2Vjb25kc317QHRleHQ6IEBjb250ZXh0fXtAYXR0YWNoZWQtdmFsdWU6IEBjb250ZXh0fSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJpbmxpbmUtYmxvY2siIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBudWxsYWJsZX0iPiA8YnV0dG9uIGNsYXNzPSJkYXRldGltZS1idG4gdW4tbnVsbGlmeSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX2lzTnVsbH17QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrU2V0Tm90TnVsbH0iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJkYXRldGltZS1idG4gbnVsbGlmeSIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYXR0YWNoZWRfaXNOdWxsfXtAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tTZXROdWxsfSI+PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/FilePickerFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzU3VwcG9ydGVkfSI+IDxkaXYgY2xhc3M9ImZpbGUtaW5wdXQiPiA8ZGl2IGNsYXNzPSJmaWxlLWlucHV0LWJyb3dzZXIiPiA8ZGl2IGNsYXNzPSJmaWxlLWlucHV0LWVsZW1lbnRzIj4gPGJ1dHRvbiBjbGFzcz0iZmlsZS1pbnB1dC1idG4iPi4uLjwvYnV0dG9uPiA8c3BhbiBjbGFzcz0iZmlsZS1pbnB1dC10ZXh0IiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBmaWxlc30iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBmaWxlc317QHRleHQ6IGZpbGVOYW1lfSIgc3R5bGU9InBhZGRpbmctcmlnaHQ6NXB4OyI+PC9zcGFuPiA8L3NwYW4+IDwvZGl2PiA8aW5wdXQgdHlwZT0iZmlsZSIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzU3VwcG9ydGVkfXt0aXRsZTogdG9vbFRpcH17bXVsdGlwbGU6IGFsbG93TXVsdGlwbGV9e2FjY2VwdDogYWNjZXB0RmlsZVR5cGVzfXtAZXZlbnQtY2hhbmdlOiBoYW5kbGVDaGFuZ2V9IiBjYXB0dXJlIC8+IDwvZGl2PiA8L2Rpdj4gPGlucHV0IGNsYXNzPSJmaWxlLWlucHV0LWNsZWFyIiB0eXBlPSJidXR0b24iIHZhbHVlPSJYIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogZmlsZXN9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGVhckNsaWNrfSIgLz4gPC9kaXY+IDxzcGFuIGRhdGEtYmluZGluZz0ie0BoaWRkZW46IGlzU3VwcG9ydGVkfXtAdGV4dDogQGxhbmd1YWdlLWZpbGUtcGlja2VyLW5vdC1zdXBwb3J0ZWR9Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/FormItemView.html","html","PGRpdiBjbGFzcz0iZm9ybS1pdGVtIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogaXNWaXNpYmxlfXtjbGFzc05hbWU6IGF0dGFjaGVkX2luZGljYXRvckNsYXNzfXtAc291cmNlOiBAY29udGV4dH17QHRlbXBsYXRlLXNlbGVjdG9yOiBmb3JtSXRlbVR5cGV9Ij4gPGRpdiBjbGFzcz0iYXV0b2NvbXBsZXRlIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBBdXRvQ29tcGxldGVCb3hGb3JtSXRlbX17QHdpZGdldDogQXV0b0NvbXBsZXRlQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY2hlY2tib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IENoZWNrQm94Rm9ybUl0ZW19e0B3aWRnZXQ6IENoZWNrQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY29tYm9ib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IENvbWJvQm94Rm9ybUl0ZW19e0B3aWRnZXQ6IENvbWJvQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iY29udGFpbmVyIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBDb250YWluZXJGb3JtSXRlbX17QHdpZGdldDogQ29udGFpbmVyRm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iZGF0ZXBpY2tlciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogRGF0ZVBpY2tlckZvcm1JdGVtfXtAd2lkZ2V0OiBEYXRlUGlja2VyRm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iZmlsZXBpY2tlciIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogRmlsZVBpY2tlckZvcm1JdGVtfXtAd2lkZ2V0OiBGaWxlUGlja2VyRm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0iZ3JvdXBib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IEdyb3VwQm94Rm9ybUl0ZW19e0B3aWRnZXQ6IEdyb3VwQm94Rm9ybUl0ZW19e0B2aXNpYmxlOiBpc1Zpc2libGV9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGluayIgZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLXNlbGVjdDogSHlwZXJsaW5rRm9ybUl0ZW19e0B3aWRnZXQ6IEh5cGVybGlua0Zvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9ImltYWdlIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBJbWFnZUZvcm1JdGVtfXtAd2lkZ2V0OiBJbWFnZUZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9ImxhYmVsIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBMYWJlbEZvcm1JdGVtfXtAd2lkZ2V0OiBMYWJlbEZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9Imxpc3Rib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IExpc3RCb3hGb3JtSXRlbX17QHdpZGdldDogTGlzdEJveEZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InJhZGlvYnRuIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBSYWRpb0J1dHRvbkZvcm1JdGVtfXtAd2lkZ2V0OiBSYWRpb0J1dHRvbkZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InRleHRhcmVhIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBUZXh0QXJlYUZvcm1JdGVtfXtAd2lkZ2V0OiBUZXh0QXJlYUZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InRleHRib3giIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1zZWxlY3Q6IFRleHRCb3hGb3JtSXRlbX17QHdpZGdldDogVGV4dEJveEZvcm1JdGVtfXtAdmlzaWJsZTogaXNWaXNpYmxlfSI+PC9kaXY+IDxkaXYgY2xhc3M9InRleHRhcmVhIiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtc2VsZWN0OiBUaW1lUGlja2VyRm9ybUl0ZW19e0B3aWRnZXQ6IFRpbWVQaWNrZXJGb3JtSXRlbX17QHZpc2libGU6IGlzVmlzaWJsZX0iPjwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/GroupBoxFormItemView.html","html","PGZpZWxkc2V0PiA8bGVnZW5kIGRhdGEtYmluZGluZz0ie0B0ZXh0OiBoZWFkZXJ9Ij48L2xlZ2VuZD4gPHAgY2xhc3M9ImZvcm0taXRlbSBmb3JtLWRlc2MiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBkZXNjcmlwdGlvbn0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvcD4gIDxkaXYgY2xhc3M9ImZvcm0gbGFiZWwtbGVmdCIgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBhdHRhY2hlZF9jc3NDbGFzc317QHNvdXJjZTogZm9ybUl0ZW1zfXtAdGVtcGxhdGU6IE1hcHBpbmcvbW9kdWxlcy9Xb3JrZmxvdy9Gb3Jtcy9JdGVtcy9Gb3JtSXRlbVZpZXcuaHRtbH0iPjwvZGl2PiA8L2ZpZWxkc2V0PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/HyperlinkFormItemView.html","html","PGRpdiBjbGFzcz0iaHlwZXJsaW5rIj4gPGEgZGF0YS1iaW5kaW5nPSJ7aHJlZjogdXJpfXtAdGV4dDogaHlwZXJsaW5rVGV4dH17dGFyZ2V0OnRhcmdldH17dGl0bGU6IHRvb2xUaXB9e0BldmVudC1vbmNsaWNrOiBoYW5kbGVDbGlja30iPjwvYT4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ImageFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8aW1nIGRhdGEtYmluZGluZz0ie3NyYzogc291cmNlfXtAc3R5bGUtd2lkdGg6IHdpZHRofXtAc3R5bGUtaGVpZ2h0OiBoZWlnaHR9e3RpdGxlOiB0b29sVGlwfSIgLz4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/ListBoxFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxkaXYgY2xhc3M9ImxvYWRlciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGlzQnVzeX0iPjwvZGl2PiA8c2VsZWN0IHNpemU9IjYiIGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGRhdGFJdGVtc317bXVsdGlwbGU6IGF0dGFjaGVkX2lzTXVsdGlwbGV9e0B2YWx1ZTogc2VsZWN0aW9ufXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZVNlbGVjdGlvbkNoYW5nZWR9e3RpdGxlOiB0b29sVGlwfXtkaXNhYmxlZDogaXNCdXN5fSI+IDxvcHRpb24gZGF0YS1iaW5kaW5nPSJ7QHRlbXBsYXRlLWZvcjogZGF0YUl0ZW1zfXtAdGV4dDogZGlzcGxheX17QGF0dGFjaDogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/RadioButtonFormItemView.html","html","PGRpdiBjbGFzcz0icmFkaW9idG4taW5uZXIiPiA8dGFibGU+IDx0cj4gPHRkIGNsYXNzPSJmb3JtLWxhYmVsIGxlZnQiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiBhdHRhY2hlZF90ZXh0T25MZWZ0fSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie2ZvcjogYXR0YWNoZWRfY29udHJvbElkfXtAdGV4dDogYXR0YWNoZWRfbGFiZWxUZXh0fXt0aXRsZTogdG9vbFRpcH0iPjwvc3Bhbj4gPC90ZD4gPHRkPiA8aW5wdXQgdHlwZT0icmFkaW8iIGRhdGEtYmluZGluZz0ie0B2YXI6IHJhZGlvRWxlbWVudH17aWQ6IGF0dGFjaGVkX2NvbnRyb2xJZH17bmFtZTogZ3JvdXBOYW1lfXt0aXRsZTogdG9vbFRpcH0iIC8+IDwvdGQ+IDx0ZCBjbGFzcz0iZm9ybS1sYWJlbCByaWdodCIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogYXR0YWNoZWRfdGV4dE9uTGVmdH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9Intmb3I6IGF0dGFjaGVkX2NvbnRyb2xJZH17QHRleHQ6IGF0dGFjaGVkX2xhYmVsVGV4dH17dGl0bGU6IHRvb2xUaXB9Ij48L3NwYW4+IDwvdGQ+IDwvdHI+IDwvdGFibGU+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/TextAreaFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDx0ZXh0YXJlYSBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHRleHR9e0BzdHlsZS13aWR0aDogdGV4dGJveFdpZHRofXtAc3R5bGUtaGVpZ2h0OiB0ZXh0Ym94SGVpZ2h0fXt0aXRsZTogdG9vbFRpcH17QGV2ZW50LW9uYmx1cjogaGFuZGxlQmx1ckNvbnRyb2x9Ij48L3RleHRhcmVhPiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/TextBoxFormItemView.html","html","PGRpdiBjbGFzcz0iaW5uZXIiPiA8bGFiZWwgY2xhc3M9ImZvcm0tbGFiZWwiPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBsYWJlbH17QHZpc2libGU6IGxhYmVsfSI+IDxzcGFuIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGxhYmVsfXtAdGV4dDogdGV4dH0iPjwvc3Bhbj4gPC9zcGFuPiA8c3BhbiBjbGFzcz0iaW5kaWNhdG9yIiBkYXRhLWJpbmRpbmc9IntAdmlzaWJsZTogYXR0YWNoZWRfc2hvd0luZGljYXRvcn0iPio8L3NwYW4+IDwvbGFiZWw+IDxkaXYgY2xhc3M9ImZvcm0tY29udHJvbCI+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBkYXRhLWJpbmRpbmc9IntAdmFsdWU6IHRleHR9e0BzdHlsZS13aWR0aDogdGV4dGJveFdpZHRofXt0aXRsZTogdG9vbFRpcH0iIC8+IDwvZGl2PiA8L2Rpdj4g");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/Workflow/Forms/Items/TimePickerFormItemView.html","html","PGRpdiBjbGFzcz0iZm9ybS1pdGVtIHRpbWUtcGlja2VyIj4gPGxhYmVsIGNsYXNzPSJmb3JtLWxhYmVsIj4gPHNwYW4gZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogbGFiZWx9e0B2aXNpYmxlOiBsYWJlbH0iPiA8c3BhbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBsYWJlbH17QHRleHQ6IHRleHR9Ij48L3NwYW4+IDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImluZGljYXRvciIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGF0dGFjaGVkX3Nob3dJbmRpY2F0b3J9Ij4qPC9zcGFuPiA8L2xhYmVsPiA8ZGl2IGNsYXNzPSJkYXRldGltZS1zZWxlY3QiIGRhdGEtYmluZGluZz0ie3RpdGxlOiB0b29sVGlwfSI+IDxzZWxlY3QgZGF0YS1iaW5kaW5nPSJ7QHNvdXJjZTogYXR0YWNoZWRfaG91cnN9e0B2YWx1ZTogYXR0YWNoZWRfaG91cn17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9ob3Vyc317QGF0dGFjaGVkLXZhbHVlOiB2YWx9e0B0ZXh0OiBkZXNjfSI+PC9vcHRpb24+IDwvc2VsZWN0PiA8c2VsZWN0IGRhdGEtYmluZGluZz0ie0Bzb3VyY2U6IGF0dGFjaGVkX21pbnV0ZXN9e0B2YWx1ZTogYXR0YWNoZWRfbWludXRlfXtAZXZlbnQtb25jaGFuZ2U6IGhhbmRsZUNoYW5nZUNvbWJvQm94VGltZX0iPiA8b3B0aW9uIGRhdGEtYmluZGluZz0ie0B0ZW1wbGF0ZS1mb3I6IGF0dGFjaGVkX21pbnV0ZXN9e0B0ZXh0OiBAY29udGV4dH17QGF0dGFjaGVkLXZhbHVlOiBAY29udGV4dH0iPjwvb3B0aW9uPiA8L3NlbGVjdD4gPHNlbGVjdCBkYXRhLWJpbmRpbmc9IntAc291cmNlOiBhdHRhY2hlZF9zZWNvbmRzfXtAdmFsdWU6IGF0dGFjaGVkX3NlY29uZH17QGV2ZW50LW9uY2hhbmdlOiBoYW5kbGVDaGFuZ2VDb21ib0JveFRpbWV9Ij4gPG9wdGlvbiBkYXRhLWJpbmRpbmc9IntAdGVtcGxhdGUtZm9yOiBhdHRhY2hlZF9zZWNvbmRzfXtAdGV4dDogQGNvbnRleHR9e0BhdHRhY2hlZC12YWx1ZTogQGNvbnRleHR9Ij48L29wdGlvbj4gPC9zZWxlY3Q+IDwvZGl2PiA8ZGl2IGNsYXNzPSJjbGVhciI+PC9kaXY+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ZoomControl/GeolocateView.html","html","PGRpdiBjbGFzcz0iem9vbS1jb250cm9sLWJ0biBnZW9sb2NhdGUiIGRhdGEtYmluZGluZz0ie0B2aXNpYmxlOiB2aXNpYmxlfSI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrR2VvbG9jYXRlfSI+PC9hPiA8L2Rpdj4g");geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ZoomControl/ZoomInView.html","html","PGRpdiBjbGFzcz0iem9vbS1jb250cm9sLWJ0biB6b29tLWluIj4gPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWJpbmRpbmc9IntAZXZlbnQtb25jbGljazogaGFuZGxlQ2xpY2tab29tSW59Ij48L2E+IDwvZGl2PiA=");
geocortex.resourceManager.register("Mapping","inv","Mapping/modules/ZoomControl/ZoomOutView.html","html","PGRpdiBjbGFzcz0iem9vbS1jb250cm9sLWJ0biB6b29tLW91dCI+IDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgZGF0YS1iaW5kaW5nPSJ7QGV2ZW50LW9uY2xpY2s6IGhhbmRsZUNsaWNrWm9vbU91dH0iPjwvYT4gPC9kaXY+IA==");geocortex.resourceManager.register("Mapping","inv","Mapping/infrastructure/menus/MenuView.html","html","PGRpdiBjbGFzcz0id2FudHRvbWVudS1uby1pdGVtcyIgZGF0YS1iaW5kaW5nPSJ7QGhpZGRlbjogbWVudUl0ZW1zfXtAdGV4dDogQGxhbmd1YWdlLW1lbnUtbm8taXRlbXN9Ij48L2Rpdj4gPGRpdiBjbGFzcz0ibGlzdC1tZW51IGFjdGl2ZSBoYXMtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IG1lbnVJdGVtc317QHNvdXJjZTogbWVudUl0ZW1zfSI+IDxkaXYgZGF0YS1iaW5kaW5nPSJ7Y2xhc3NOYW1lOiBjc3NDbGFzc317QHRlbXBsYXRlLWZvcjogbWVudUl0ZW1zfXtAZXZlbnQtb25tb3VzZW92ZXI6IGdldERlc2NyaXB0aW9ufXtAZXZlbnQtb25jbGljazogaGFuZGxlTWVudUl0ZW1DbGlja30iPiA8aW1nIGNsYXNzPSJsaXN0LW1lbnUtaWNvbiIgZGF0YS1iaW5kaW5nPSJ7c3JjOiBpY29uVXJpfXthbHQ6IHRleHR9IiAvPiA8ZGl2IGNsYXNzPSJsaXN0LW1lbnUtZGV0YWlscyI+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtbmFtZSIgZGF0YS1iaW5kaW5nPSJ7QHRleHQ6IHRleHR9Ij48L3NwYW4+IDxzcGFuIGNsYXNzPSJsaXN0LW1lbnUtZGVzYyIgZGF0YS1iaW5kaW5nPSJ7QHZpc2libGU6IGRlc2NyaXB0aW9ufXtAdGV4dDogZGVzY3JpcHRpb259Ij48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+IA==");
geocortex.resourceManager.register("Mapping","inv","Invariant","json","eyJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWxheWVyLWRldGFpbHMiOiJNYW5hZ2UgRmVhdHVyZSBMYXllciIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2hlcmUtY2xhdXNlIjoiV2hlcmUgQ2xhdXNlIiwibGFuZ3VhZ2UtbWFwLXNpdGUtY3JpdGljYWwtc2VydmljZXMtZmFpbGVkIjoiQ3JpdGljYWwgc2VydmljZXMgZmFpbGVkLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1yZWxhdGVkLWZlYXR1cmVzIjoiQ3JlYXRlL0VkaXQgUmVsYXRlZCBGZWF0dXJlcyIsImxhbmd1YWdlLW5hdGl2ZS1hZGQtdG8tZmF2b3JpdGVzLXN1Y2Nlc3MiOiJUaGlzIGFwcGxpY2F0aW9uIGhhcyBiZWVuIGFkZGVkIHRvIHlvdXIgZmF2b3JpdGVzLiIsImxhbmd1YWdlLWxvZy1oaWRlIjoiSGlkZSIsImxhbmd1YWdlLXRvb2xiYXItdGFiLWVkaXRpbmciOiJFZGl0aW5nIiwibGFuZ3VhZ2Utc2l0ZS1sb2ctb24tcmVxdWlyZWQtZXJyb3IiOiJZb3UgbXVzdCBsb2cgb24gdG8gYWNjZXNzIHRoaXMgYXBwbGljYXRpb24uIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LW5vLWZlYXR1cmUtYWN0aW9ucyI6Ik5vIGFjdGlvbnMgYXZhaWxhYmxlLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtZGF0YS1mcmFtZSI6IkNsb3NlcyB0aGUgRGF0YVJlZ2lvbiwgaWYgaXQgaXMgcHJlc2VudCBpbiB0aGUgY3VycmVudCBzaGVsbC4iLCJsYW5ndWFnZS13b3JrZmxvdy1vZmZsaW5lLXRpdGxlIjoiV29ya2Zsb3cgTm90IEF2YWlsYWJsZSIsImxhbmd1YWdlLW1ibC1tYXAtY2VudGVyIjoiVGFwIHRvIGNlbnRlciB0aGUgbWFwIGF0IHRoYXQgcG9pbnQuIiwibGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tY2FtZXJhIjoiQXR0YWNoIHBob3RvIGZyb20gdGhlIGNhbWVyYSIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWVkaXRsb2ciOiJWaWV3IEVkaXQgTG9nIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9pbnQiOiJQb2ludCIsImxhbmd1YWdlLWZlYXR1cmUtcmVsYXRlZC1ub3QtcmVsYXRpb24iOiJUaGVyZSBhcmUgbm8gZmVhdHVyZXMgcmVsYXRlZCB0byB0aGlzIGZlYXR1cmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LXJlc3VsdHMtZmVhdHVyZS1hY3Rpb24iOiJDcmVhdGVzIFJlc3VsdHNMaXN0RmVhdHVyZUFjdGlvbnNWaWV3IGFuZCBkaXNwbGF5cyB0aGUgRmVhdHVyZSBBY3Rpb25zLiIsImxhbmd1YWdlLW1lbnUtZW50ZXItb2ZmbGluZSI6IkdvIHRvIG9mZmxpbmUgbW9kZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZ2xvYmFsLXNlYXJjaCI6IlBlcmZvcm1zIGEgc2VhcmNoIG9uIGFsbCBhY3RpdmUgcHJvdmlkZXJzLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWVkaXRvci1mZWF0dXJlLWdlb21ldHJ5IjoiU2V0cyB0aGUgZ2VvbWV0cnkgb2YgdGhlIGZlYXR1cmUgdGhhdCBpcyBjdXJyZW50bHkgYmVpbmcgZWRpdGVkIGluIHRoZSBBdHRyaWJ1dGUgRWRpdG9yLCBhbmQgYWN0aXZhdGVzIHRoZSBBdHRyaWJ1dGVFZGl0b3IgVmlldy4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRpcmVjdC1kZXBlbmRlbnRzIjoiRGlyZWN0IGRlcGVuZGVudHM6IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1mcmVlaGFuZC1kZXNjIjoiRHJhdyBhIGZyZWVoYW5kIGxpbmUgb24gdGhlIG1hcCB0byBzZWUgd2hhdCdzIHRoZXJlIiwibGFuZ3VhZ2UtbWVudS1ydW4td29ya2Zsb3ctZGVzYyI6IlNlbGVjdCBmcm9tIGEgbGlzdCBvZiBhdmFpbGFibGUgdGFza3MuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1zeW5jLWNvbmZpcm0iOiJUaGlzIGNhbiB0YWtlIHNldmVyYWwgbWludXRlcy4gRG8geW91IHdhbnQgdG8gY29udGludWU/IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1kZWxldGluZy1lZGl0IjoiVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHRoZSBlZGl0OiB7MH0iLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcy1uYW1lLWludmFsaWQiOiJUaGUgbmFtZSBwcm92aWRlZCB3YXMgaW52YWxpZC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtZmVhdHVyZSI6IkVkaXQgRmVhdHVyZXMiLCJsYW5ndWFnZS1tZW51LW1hcC1sYXllcnMtZGVzYyI6IlR1cm4gbGF5ZXJzIG9uIGFuZCBvZmYsIGFuZCBwZXJmb3JtIGFjdGlvbnMgb24gdGhlbS4iLCJsYW5ndWFnZS1jb21tb24tcGFuLWRlc2NyaXB0aW9uIjoiUGFuIHRoZSBtYXAgdG8gY2VudGVyIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXlvdS1hcmUtb25saW5lIjoiWW91IGFyZSBpbiBvbmxpbmUgbW9kZS4iLCJsYW5ndWFnZS1jb21tb24tbm8tcmVzdWx0cyI6Ik5vIHJlc3VsdHMgdG8gZGlzcGxheSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1oYXMtZ2VvbWV0cnkiOiJUaGlzIGZlYXR1cmUgaGFzIGdlb21ldHJ5LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tZm9ybWF0IjoiezB9IGZlYXR1cmUgezF9ezJ9IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtY2lyY2xlIjoiQ2lyY2xlIiwibGFuZ3VhZ2UtY29tbW9uLWRvbmUiOiJEb25lIiwibGFuZ3VhZ2UtbWVudS1wcm92aXNpb24tZm9yLW9mZmxpbmUtZGVzYyI6IlByZXBhcmUgbXkgZGV2aWNlIGZvciBvZmZsaW5lIHVzZSBieSBkb3dubG9hZGluZyB0aGUgcmVxdWlyZWQgZmlsZXMuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi10b2dnbGUtZGF0YS1mcmFtZSI6IkFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBkYXRhIGZyYW1lLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc3RhcnQtZWRpdGluZy1uZXctZmVhdHVyZSI6IkJlZ2lucyBlZGl0aW5nIGEgbmV3IGZlYXR1cmUuIiwibGFuZ3VhZ2UtdG9vbGJhci10YWItbmF2aWdhdGlvbiI6IkdldHRpbmcgQXJvdW5kIiwibGFuZ3VhZ2UtbmF0aXZlLWludGVybmFsLXNlcnZlci1lcnJvciI6IkludGVybmFsIFNlcnZlciBFcnJvciIsImxhbmd1YWdlLW5hdGl2ZS1hdHRhY2gtcGhvdG8iOiJBdHRhY2ggYSBwaG90byBmcm9tIHRoZSBjYW1lcmEgb3IgZ2FsbGVyeSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1zZWxlY3RlZC1sYXllciI6IlNlbGVjdGVkIEZlYXR1cmUgTGF5ZXIiLCJsYW5ndWFnZS1lbnRlci1vZmZsaW5lIjoiR28gdG8gT2ZmbGluZSBNb2RlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtbWFya3VwIjoiQWRkcyB0aGUgZ2l2ZW4gZ2VvbWV0cnkgdG8gdGhlIG1hcmt1cCBsYXllci4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1udW1lcmljLXJhbmdlIjoiVGhlIHZhbHVlIGZvciB7MH0gaXMgb3V0IG9mIHJhbmdlLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXJlY3RhbmdsZSI6IlJlY3RhbmdsZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtbW9kYWwtcmVnaW9uIjoiQ2xvc2VzIHRoZSBNb2RhbFdpbmRvd1JlZ2lvbi4iLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LWZyZWVoYW5kLXBvbHlnb24iOiJEcmF3IGEgZnJlZWhhbmQgcG9seWdvbiBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWdlb21ldHJ5LXRvb2xiYXItaW5zdHJ1Y3Rpb25zIjoiU2VsZWN0IGFuIGFyZWEgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hpbmctbm90LWFsbG93ZWQiOiJZb3UgY2Fubm90IGNhY2hlIGRhdGEgaW4gb2ZmbGluZSBtb2RlLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWhpZ2hsaWdodC1maWxsLWNvbG9yIjoiU2V0cyB0aGUgZmlsbCBjb2xvciB1c2VkIGZvciBuZXcgaGlnaGxpZ2h0cywgc3BlY2lmaWVkIGluIDYgb3IgOCBkaWdpdCBoZXggaW4gUkdCIG9yIEFSR0IgZm9ybS4iLCJsYW5ndWFnZS10b29sYmFyLWFuYWx5c2lzLWxvY2F0aW9uLWluZm9ybWF0aW9uIjoiTG9jYXRpb24gSW5mb3JtYXRpb24iLCJsYW5ndWFnZS1jb21tb24tbm8tcmVzdWx0cy1zaG9ydCI6Ik5vIHJlc3VsdHMiLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcy12aWV3ZXItbmFtZSI6IlBsZWFzZSBlbnRlciBhIG5hbWUgZm9yIHRoaXMgYXBwbGljYXRpb24uIiwibGFuZ3VhZ2UtY2FwdHVyZS1nZW9tZXRyeS1wb2ludCI6IlNlbGVjdCBhIHBvaW50IG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtbWVudS12aWV3LWVkaXQtbG9nIjoiU3luYyBvZmZsaW5lIGRhdGEiLCJsYW5ndWFnZS1wYWdlLW5leHQiOiJOZXh0IiwibGFuZ3VhZ2Utb2ZmbGluZS12aWV3ZXItcHJvdmlzaW9uLW9ubGluZS1vbmx5LXRpdGxlIjoiWW91IGFyZSBvZmZsaW5lLiIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy1lbnRpcmUtZG9tYWluIjoiQWxsIGFwcGxpY2F0aW9ucyBvbiB0aGlzIHdlYnNpdGUiLCJsYW5ndWFnZS1jb21tb24tZGVsZXRlIjoiRGVsZXRlIiwibGFuZ3VhZ2UtYXBwLWdvbmUtb2ZmbGluZSI6IllvdSBhcmUgb2ZmbGluZS4iLCJsYW5ndWFnZS1leHRyYWN0LWRhdGEiOiJFeHRyYWN0IGRhdGEiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLWRlbGV0ZWQtYXR0YWNobWVudCI6IkRlbGV0ZWQgYXR0YWNobWVudCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcHJvamVjdCI6IkNhbGxzIGEgZ2VvbWV0cnkgc2VydmljZSB0byBwcm9qZWN0IGdlb21ldHJpZXMgYmV0d2VlbiBkaWZmZXJlbnQgY29vcmRpbmF0ZSBzeXN0ZW1zLiIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1jcmVhdGUtbmV3LWZlYXR1cmUiOiJDcmVhdGUgTmV3IEZlYXR1cmUiLCJsYW5ndWFnZS1jbGVhci1zdG9yYWdlLWRvbWFpbi1kZXNjIjoiQ2xlYXJzIGFsbCBkYXRhIHN0b3JlZCBieSB0aGUgZW50aXJlIGRvbWFpbi4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvaW50LXRvb2x0aXAiOiJJZGVudGlmeSB0aGluZ3Mgb24gdGhlIG1hcCBieSBjbGlja2luZyBvciB0YXBwaW5nIiwibGFuZ3VhZ2UtcGFnZS1wcmV2IjoiUHJldmlvdXMiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1kcmF3aW5nLXRvb2xzIjoiRHJhd2luZyBUb29scyIsImxhbmd1YWdlLW1lbnUtem9vbS10by12aXNpYmxlLXNjYWxlLWRlc2MiOiJab29tIHRoZSBtYXAgdG8gYSBzY2FsZSB3aGVyZSB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZ2VvbWV0cnktcG9seWxpbmUiOiJNb3ZlIHRoZSBzaGFwZSBieSBkcmFnZ2luZyBpdCwgb3IgYnkgZWRpdGluZyBpbmRpdmlkdWFsIHZlcnRpY2VzLiBSaWdodC1jbGljayBvbiB2ZXJ0aWNlcyB0byBkZWxldGUgdGhlbSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItaGFzLWdlb21ldHJ5IjoiVGhpcyBmZWF0dXJlIGhhcyBnZW9tZXRyeS4iLCJsYW5ndWFnZS1nZW9sb2NhdGlvbi1lcnJvciI6IlRoZXJlIHdhcyBhbiBlcnJvciBpbiBnZW9sb2NhdGlvbjogIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20tb3V0LWRlc2MiOiJEcmFnIGEgcmVjdGFuZ2xlIG9uIHRoZSBtYXAgdG8gem9vbSBvdXQgd2hpbGUga2VlcGluZyB0aGF0IGFyZWEgY2VudGVyZWQiLCJsYW5ndWFnZS1zZWFyY2gtYXJjZ2lzLXNjb3JlIjoiU2NvcmUiLCJsYW5ndWFnZS1yZXN1bHRzLXBhZ2UiOiJQYWdlIiwibGFuZ3VhZ2UtbGVnZW5kLXRpdGxlIjoiTWFwIExlZ2VuZCIsImxhbmd1YWdlLW1lbnUtaWRlbnRpZnktcmVjdGFuZ2xlLWRlc2MiOiJEcmF3IGEgcmVjdGFuZ2xlIHRvIHZpZXcgaW5mb3JtYXRpb24gYWJvdXQgdGhhdCBhcmVhLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcmVjdGFuZ2xlLXRvb2x0aXAiOiJJZGVudGlmeSB0aGluZ3Mgb24gdGhlIG1hcCBieSBkcmF3aW5nIGEgcmVjdGFuZ2xlIiwibGFuZ3VhZ2UtY29tbW9uLXN5bmMtY29tcGxldGUiOiJTeW5jaHJvbml6YXRpb24gY29tcGxldGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tdG8tZmVhdHVyZSI6Ilpvb21zIHRvIGEgZmVhdHVyZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctZmVhdHVyZS10ZW1wbGF0ZS1waWNrZXIiOiJTaG93cyB0aGUgZmVhdHVyZSB0ZW1wbGF0ZSBwaWNrZXIgdXNlZCB0byBjcmVhdGUgbmV3IGZlYXR1cmVzLiBJZiBhIGxheWVyIGlzIHN1cHBsaWVkLCBzaG93cyB0aGUgdGVtcGxhdGVzIGZvciB0aGUgbGF5ZXIuIiwibGFuZ3VhZ2UtY29tbW9uLXZhbGlkYXRpb24tc3ltYm9sIjoiKiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taGlnaGxpZ2h0LWZlYXR1cmUtZGVmYXVsdCI6IkhpZ2hsaWdodHMgdGhlIGZlYXR1cmUgaW4gdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IGxheWVyLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1tYXAtdGlwIjoiQ3JlYXRlcyBhIE1hcCBUaXAgVmlldyBhbmQgZGlzcGxheXMgdGhlIGZlYXR1cmUgaW4gaXQuIiwibGFuZ3VhZ2UtYXV0aC1hdXRoZW50aWNhdGluZyI6IkF1dGhlbnRpY2F0aW5nLi4uIiwibGFuZ3VhZ2Utbm8tcHJpbnQtdGVtcGxhdGUiOiJObyBwcmludCB0ZW1wbGF0ZXMgYXJlIGNvbmZpZ3VyZWQgZm9yIHRoaXMgc2l0ZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctcmVzdWx0cy1saXN0IjoiRGlzcGxheXMgdGhlIGxpc3Qgb2YgZmVhdHVyZXMgaW4gdGhlIGdpdmVuIGZlYXR1cmUgc2V0IGNvbGxlY3Rpb24gYXMgYSBsaXN0LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItdmlldy1lZGl0IjoiQ2hhbmdlIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1wb2x5bGluZS10b29sIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gYWRkIHR3byBvciBtb3JlIGxpbmUgcG9pbnRzLiBEb3VibGUgY2xpY2svdGFwIHRvIHN0b3AiLCJsYW5ndWFnZS1mZWF0dXJlLWRldGFpbHMtZm9yIjoiRGV0YWlscyBGb3IiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWZlYXR1cmUtbGF5ZXItY2xlYXItY2FjaGUtc3BlYyI6IlNwZWNpZnkgdGhpcyBsYXllciBhcyBub3QgdG8gYmUgY2FjaGVkIG9uIG5leHQgc3luYy4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRpb25zaGlwcy1rZXktZmllbGQtbWlzc2luZyI6IkVkaXRpbmcgdGhlIHJlbGF0aW9uc2hpcCBmYWlsZWQgYmVjYXVzZSBhIGtleSBmaWVsZCBpcyBub3QgaWRlbnRpZmllZC4iLCJsYW5ndWFnZS1sb2ctdGltZXN0YW1wIjoiVGltZXN0YW1wIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20taW4tdG9vbHRpcCI6IkRyYXcgYW4gYXJlYSBvZiBpbnRlcmVzdCBvbiB0aGUgbWFwIGFuZCB6b29tIGluIHRvIGl0IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYW5ub3Qtc3luYy1lZGl0cy1vZmZsaW5lIjoiWW91IGNhbm5vdCBzeW5jIGRhdGEgd2hpbGUgb2ZmbGluZS4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1yZWN0YW5nbGUtdG9vbHRpcCI6IkRyYXcgYSByZWN0YW5nbGUgb24gdGhlIG1hcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcmVtb3ZlLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24iOiJSZW1vdmVzIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbiBmcm9tIHRoZSBmZWF0dXJlIHNldCBtYW5hZ2VyLiIsImxhbmd1YWdlLW5hdGl2ZS1vZmZsaW5lLWZpbGUtdXBsb2FkLWVycm9yIjoiRXJyb3Igc3RvcmluZyBhdHRhY2htZW50cyBpbiBvZmZsaW5lIG1vZGUiLCJsYW5ndWFnZS1sYXllci1hY3Rpb25zLWRlc2MiOiJEaXNwbGF5IGEgbGlzdCBvZiBsYXllciBhY3Rpb25zIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi11cGRhdGUtYXR0YWNobWVudCI6IlVwZGF0ZXMgYSBmZWF0dXJlIGF0dGFjaG1lbnQuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci10YXAtdG8tZWRpdC1mZWF0dXJlIjoiVGFwIHRvIGVkaXQgYSBmZWF0dXJlLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1pbnZhbGlkLW51bWJlciI6InswfSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyIGJldHdlZW4gezF9IGFuZCB7Mn0uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWFjdGlvbi11cGRhdGVkIjoiVXBkYXRlZCIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tZGVsZXRlZC1yZWxhdGVkIjoiRGVsZXRlZCByZWxhdGVkIiwibGFuZ3VhZ2UtbWVudS1jbGVhci1vZmZsaW5lLWRhdGEtZGVzYyI6IkNsZWFyIGFsbCBvZmZsaW5lIGRhdGEgZm9yIHRoaXMgdmlld2VyIGFuZC9vciByZWxhdGVkIGFwcGxpY2F0aW9ucy4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZGVsZXRlLWNvbmZpcm1hdGlvbiI6IkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBwZXJtYW5lbnRseSBkZWxldGUgdGhpcyBmZWF0dXJlIG9uIHRoZSBzZXJ2ZXI/IiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcmVjdGFuZ2xlLWRlc2MiOiJEcmFnIGEgcmVjdGFuZ2xlIG9uIHRvIHRoZSBtYXAiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtZW5kLWVkaXRzLWVycm9ycyI6IlRoZSBzeW5jIGRpZCBub3QgY29tcGxldGUgYmVjYXVzZSB0aGUgc2VydmVyIHJlZnVzZWQgezB9IG9mIHRoZSBlZGl0cy4gIFBsZWFzZSByZXZpZXcgdGhlIG1lc3NhZ2VzLCBmaXggdGhlIGVkaXRzIGluIHRoZSB7MX0gcGFuZWwsIGFuZCB0aGVuIHRyeSBhZ2Fpbi4iLCJsYW5ndWFnZS1jdXJyZW50X2V4dGVudCI6IkN1cnJlbnQgRXh0ZW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LWZlYXR1cmUtbGF5ZXItbW9kYWwtbWVzc2FnZSI6IkNyZWF0ZXMgYSBNb2RlbE1lc3NhZ2VWaWV3IHZpZXcgYW5kIGRpc3BsYXlzIHRoZSBnaXZlbiBtZXNzYWdlLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1nZW9tZXRyeS1wb2ludCI6Ik1vdmUgdGhlIHNlbGVjdGVkIHBvaW50IGJ5IGhvbGRpbmcgZG93biBvbiBpdCBhbmQgZHJhZ2dpbmcuIFJlbGVhc2UgdG8gc3RvcCIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLWFkZHJlc3MiOiJBZGRyZXNzIiwibGFuZ3VhZ2Utd29ya2Zsb3ctbm9uZS1hdmFpbGFibGUiOiJObyB0YXNrcyBhdmFpbGFibGUuIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtc3VjY2Vzcy10aXRsZSI6IkZhdm9yaXRlIEFkZGVkIiwibGFuZ3VhZ2UtZmVhdHVyZS1hdHRhY2htZW50cy1jaGVja2luZyI6IkNoZWNraW5nIGZvciBhdHRhY2htZW50cy4uLiIsImxhbmd1YWdlLXNpdGUtaW5pdGlhbGl6YXRpb24tZmFpbHVyZSI6IkZhaWxlZCB0byBpbml0aWFsaXplIHNpdGUuIFRoZSBlcnJvciB3YXM6IHswfSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNsZWFyIjoiQ2xlYXIgQWxsIERyYXdpbmdzIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1mcmVlaGFuZC1wb2x5Z29uLXRvb2x0aXAiOiJJZGVudGlmeSB0aGluZ3Mgb24gdGhlIG1hcCBieSBkcmF3aW5nIGEgZnJlZWhhbmQgcG9seWdvbiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1nZW9tZXRyeS1tdWx0aS1wb2ludCI6Ik1vdmUgdGhlIHNlbGVjdGVkIHBvaW50cyBieSBob2xkaW5nIGRvd24gYW5kIGRyYWdnaW5nLiBSZWxlYXNlIHRvIHN0b3AiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctbWFwLXRpcC1yZXN1bHRzIjoiU2hvd3MgbWFwIHRpcCByZXN1bHRzIGZvciBhIEZlYXR1cmVTZXRDb2xsZWN0aW9uIHByZXZpb3VzbHkgYWRkZWQgdG8gdGhlIEZlYXR1cmVTZXRNYW5hZ2VyLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItd2lsbC1jYWNoZSI6IlRoaXMgbGF5ZXIgd2lsbCBiZSBjYWNoZWQgb24gc3luYy4iLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXBvaW50LWRlc2MiOiJEcmF3IGEgcG9pbnQgb24gdGhlIG1hcCB0byB2aWV3IGluZm9ybWF0aW9uIGF0IHRoYXQgcG9pbnQgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFkZC1zdGF0dXMiOiJBZGRzIGEgc3RhdHVzIGluZGljYXRvciB0byB0aGUgc2NyZWVuLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZGVsZXRlLWVkaXQiOiJVbmRvIiwibGFuZ3VhZ2UtZmVhdHVyZS1hY3Rpb25zIjoiQWN0aW9ucyIsImxhbmd1YWdlLWNvbW1vbi1leHRyYWN0LWRhdGEiOiJFeHRyYWN0IERhdGEiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLW9wZW4tcmVzdWx0cy1mcmFtZSI6IkFjdGl2YXRlcyB0aGUgUmVzdWx0c1JlZ2lvbi4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1jbGVhci10b29sdGlwIjoiQ2xlYXIgYWxsIGRyYXdpbmdzIGZyb20gdGhlIG1hcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taGlkZS1tYXAtZWxlbWVudCI6IlJlbW92ZXMgYW4gZWxlbWVudCBwcmV2aW91c2x5IGFuY2hvcmVkIHRvIHRoZSBtYXAgdXNpbmcgU2hvd01hcEVsZW1lbnQuIiwibGFuZ3VhZ2UtYXBwLWdvbmUtb25saW5lIjoiWW91IGFyZSBvbmxpbmUuIiwibGFuZ3VhZ2UtbWVudS16b29tLWluaXRpYWwtZXh0ZW50LWRlc2MiOiJHbyBiYWNrIHRvIHRoZSBpbml0aWFsIG1hcCBwb3NpdGlvbiBhbmQgem9vbSBsZXZlbC4iLCJsYW5ndWFnZS1tYXAtb3BlcmF0aW9uLXByb2plY3QtZmFpbGVkIjoiVGhpcyBvcGVyYXRpb24gZmFpbGVkIGJlY2F1c2Ugb2YgYSBwcm9qZWN0aW9uIGVycm9yLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZmVhdHVyZS1sYXllci1tb2R1bGUtc3RhcnQtc3luYyI6IlN0YXJ0cyBzeW5jaHJvbml6ZXMgdGhlIGZlYXR1cmUgZWRpdHMgdG8gdGhlIHNlcnZlci4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtZ2VvbWV0cnktY2FwdGlvbiI6IkVkaXQgR2VvbWV0cnkiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hlLW9uLXN5bmMiOiJDYWNoZSB0aGlzIGxheWVyIG9uIHN5bmMiLCJsYW5ndWFnZS1uYXRpdmUtZmlsZS1mcm9tLWJyb3dzZXIiOiJBdHRhY2ggZmlsZSBvciBwaG90byB0byBmZWF0dXJlLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tY3JlYXRlZC1yZWxhdGVkIjoiQ3JlYXRlZCByZWxhdGVkIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20tb3V0IjoiWm9vbSBPdXQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1kZWNpbWFsIjoiezB9IG11c3QgYmUgYSB2YWxpZCBkZWNpbWFsIG51bWJlci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tdG8tZXNyaS1mZWF0dXJlLXNldCI6Ilpvb21zIHRvIHRoZSBleHRlbnQgb2YgYWxsIHRoZSBmZWF0dXJlcyBpbiB0aGUgZmVhdHVyZSBzZXQuIiwibGFuZ3VhZ2UtZ2VvbG9jYXRpb24tZXJyb3ItcHJvamVjdGlvbiI6IlRoZXJlIHdhcyBhbiBlcnJvciBwcm9qZWN0aW5nIGdlb2xvY2F0aW9uOiB7MH0iLCJsYW5ndWFnZS1sb2ctbWVzc2FnZSI6Ik1lc3NhZ2UiLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LW11bHRpLXBvaW50IjoiU2VsZWN0IHNldmVyYWwgcG9pbnRzIG9uIHRoZSBtYXAuIERvdWJsZS1jbGljayBvciB0YXAgdG8gZmluaXNoLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc3RhcnQtZWRpdGluZy1lZGl0LWxvZy1lbnRyeSI6IkNyZWF0ZXMgYSBhdmlldyB0byBjaGFuZ2UgYW4gZXhpc3RpbmcgZWRpdC4iLCJsYW5ndWFnZS1kb3dubG9hZC1idW5kbGUiOiJEb3dubG9hZCBmb3Igb2ZmbGluZSB1c2UiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJ1bi13b3JrZmxvdy13aXRoLWFyZ3VtZW50cyI6IlJ1bnMgYSB3b3JrZmxvdyB3aXRoIGEgc2V0IG9mIGlucHV0IGFyZ3VtZW50cy4iLCJsYW5ndWFnZS1tYXAtc2NhbGUiOiJNYXAgU2NhbGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWhpZ2hsaWdodC1mZWF0dXJlLXNldCI6IkhpZ2hsaWdodHMgYWxsIG9mIHRoZSBmZWF0dXJlcyBpbiB0aGUgc3BlY2lmaWVkIGZlYXR1cmUgc2V0IGluIHRoZSBhY3RpdmUgaGlnaGxpZ2h0IGxheWVyLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlnb24iOiJQb2x5Z29uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWFjdGlvbi11cGRhdGVkLWF0dGFjaG1lbnQiOiJVcGRhdGVkIGF0dGFjaG1lbnQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZmVhdHVyZS1hdHRyaWJ1dGVzIjoiVmlldy9FZGl0IEF0dHJpYnV0ZXMiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbWJsLWZyZWVoYW5kLXBvbHlnb24tdG9vbCI6IkRyYXcgYSBwb2x5Z29uIHNoYXBlIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXJlcXVpcmVzLXZhbHVlIjoiezB9IHJlcXVpcmVzIGEgdmFsdWUiLCJsYW5ndWFnZS13b3JrZmxvdy13b3JrZmxvd3MiOiJXb3JrZmxvd3MiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5Z29uLXRvb2x0aXAiOiJEcmF3IGEgcG9seWdvbiBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWxsaXBzZSI6IkVsbGlwc2UiLCJsYW5ndWFnZS1tZW51LXpvb20tb3V0IjoiWm9vbSBvdXQiLCJsYW5ndWFnZS1kc2staWRlbnRpZnktcG9pbnQtdG9vbCI6IkNsaWNrIHRvIGZpbmQgZmVhdHVyZXMgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW1hbmFnZS1sYXllci1vbmxpbmUiOiJPbmxpbmUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNlbGVjdC1sYXllciI6IlNlbGVjdCBhIEZlYXR1cmUgTGF5ZXIiLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tcGFuIjoiUGFuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jdXJyZW50bHktY2FjaGVkIjoiUHJldmlvdXNseSBDYWNoZWQgRGF0YSIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktcmVjdGFuZ2xlIjoiRHJhdyBhIHJlY3Rhbmd1bGFyIG9uIHRoZSBtYXAuIiwibGFuZ3VhZ2UtbWVudS1nbG9iYWwtc2VhcmNoIjoiU2VhcmNoIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtY2lyY2xlLXRvb2x0aXAiOiJEcmF3IGEgY2lyY2xlIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY3JlYXRlLXJlbGF0ZWQtZmVhdHVyZSI6IkNyZWF0ZSBhIG5ldyByZWxhdGVkIHswfSByZWNvcmQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXBhbi10by1mZWF0dXJlIjoiUGFucyB0byB0aGUgR2VvY29ydGV4IGZlYXR1cmUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1mZWF0dXJlLWVkaXRzIjoiVGhlcmUgd2FzIGFuIGVycm9yIGFwcGx5aW5nIGZlYXR1cmUgZWRpdHM6IHswfSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taGlnaGxpZ2h0LWVzcmktZmVhdHVyZS1zZXQiOiJIaWdobGlnaHRzIGFsbCBvZiB0aGUgZmVhdHVyZXMgaW4gdGhlIHNwZWNpZmllZCBmZWF0dXJlIHNldCBpbiB0aGUgYWN0aXZlIGhpZ2hsaWdodCBsYXllci4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXdvbnQtY2FjaGUtZGVzYyI6IlRvIGNhY2hlIHRoaXMgbGF5ZXIgb24gc3luYywgbW92ZSB0aGUgbWFwIHRvIHRoZSBhcmVhIHlvdSB3aXNoIHRvIGNhY2hlLCBhbmQgdGhlbiBlbmFibGUgY2FjaGluZyB3aXRoIHRoZSBjaGVja2JveC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jIjoiU3luYyBPZmZsaW5lIERhdGEiLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcy1lcnJvci10aXRsZSI6IkVycm9yIEFkZGluZyBGYXZvcml0ZSIsImxhbmd1YWdlLXBhZ2UtZmlyc3QiOiJGaXJzdCIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy1kZXNjcmlwdGlvbiI6IkNsZWFyIGFsbCBvZmZsaW5lIGRhdGEgZm9yOiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZGVhY3RpdmF0ZS12aWV3IjoiRGVhY3RpdmF0ZXMgYSB2aWV3LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZ2VvbG9jYXRlIjoiWm9vbXMgdG8gdGhlIGN1cnJlbnQgbG9jYXRpb24gb2YgdGhlIGRldmljZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbWJsLWZyZWVoYW5kLXBvbHlsaW5lLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIGZyZWVoYW5kIGxpbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi10b2dnbGUtbG9nLXZpZXciOiJBY3RpdmF0ZXMgb3IgZGVhY3RpdmF0ZXMgbG9nIHZpZXcuIiwibGFuZ3VhZ2UtY29tbW9uLXBhbiI6IlBhbiIsImxhbmd1YWdlLWNhcHR1cmUtZ2VvbWV0cnktZGVmYXVsdCI6IkRyYXcgYW4gYXJlYSBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLW1hcmt1cC1jbGVhci1hbGwtcHJvbXB0LXRpdGxlIjoiQ2xlYXIgYWxsIERyYXdpbmdzIiwibGFuZ3VhZ2UtZ2VvbG9jYXRpb24tZXJyb3ItcG9zaXRpb24tdW5hdmFpbGFibGUiOiJZb3VyIGN1cnJlbnQgbG9jYXRpb24gaXMgbm90IGF2YWlsYWJsZS4iLCJsYW5ndWFnZS1jb21tb24tbGF5ZXItZGF0YSI6IkxheWVyIERhdGEiLCJsYW5ndWFnZS1hdXRoLXRpdGxlIjoiQXV0aGVudGljYXRpb24gUmVxdWlyZWQiLCJsYW5ndWFnZS1tYXJrdXAtYWRkLXRleHQtdGl0bGUiOiJFbnRlciBUZXh0IiwibGFuZ3VhZ2UtbWFwLXNpdGUtaW5pdGlhbGl6YXRpb24tZmFpbGVkIjoiVGhlIHNpdGUgZmFpbGVkIHRvIGluaXRpYWxpemUuIiwibGFuZ3VhZ2UtbWVudS1pZGVudGlmeS1mcmVlaGFuZCI6IklkZW50aWZ5IGJ5IGZyZWVoYW5kIHNoYXBlIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLXN5bmMiOiJTeW5jIiwibGFuZ3VhZ2UtY2xlYXItc3RvcmFnZS1kZXNjIjoiQ2xlYXJzIGFsbCBkYXRhIHN0b3JlZCBieSB0aGlzIHZpZXdlci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNyZWF0ZS1hdHRhY2htZW50IjoiQ3JlYXRlcyBhIGZlYXR1cmUgYXR0YWNobWVudC4iLCJsYW5ndWFnZS1zaXRlLXNlcnZpY2UtbGF5ZXJzLWZhaWx1cmUtdmlldy10aXRsZSI6IkVycm9yIExvYWRpbmcgTWFwIFNlcnZpY2VzIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWdlb21ldHJ5LWRlZmF1bHQiOiJFZGl0IHRoZSBzZWxlY3RlZCBnZW9tZXRyeS4iLCJsYW5ndWFnZS1jb21tb24td29ya2Zsb3ciOiJXb3JrZmxvdyIsImxhbmd1YWdlLW9mZmxpbmUtdmlld2VyLXByb3Zpc2lvbmluZy1mYWlsZWQiOiJUaGUgZG93bmxvYWQgb2YgcmVzb3VyY2VzIGZvciBvZmZsaW5lIHVzZSBmYWlsZWQuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXJlY3RhbmdsZS10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSByZWN0YW5nbGUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi11cGRhdGUtZmVhdHVyZS1sYXllci1tb2RhbC1tZXNzYWdlIjoiVXBkYXRlIHRoZSB2aXNpYmxlIE1vZGVsTWVzc2FnZVZpZXcgdG8gYWxzbyBpbmNsdWRlIHRoZSBnaXZlbiBtZXNzYWdlLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3Itb2NjdXJyZWQtd2hpbGUtc3luY2hpbmciOiJUaGVyZSB3YXMgYW4gZXJyb3Igc3luY2hyb25pemluZy4iLCJsYW5ndWFnZS1tYXAtb3BlcmF0aW9uLXVuYXZhaWxhYmxlLW9mZmxpbmUiOiJZb3UgY2Fubm90IHBlcmZvcm0gdGhpcyBvcGVyYXRpb24gb2ZmbGluZS4iLCJsYW5ndWFnZS1tYmwtaWRlbnRpZnktcG9seWxpbmUtdG9vbCI6IkNsaWNrIG9yIHRhcCBvbmNlIHRvIGFkZCBwb2ludHMsIHR3aWNlIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1hY3RpdmUtaGlnaGxpZ2h0LWxheWVyIjoiU2V0cyB0aGUgbGF5ZXIgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUgYXMgYWN0aXZlLCBpZiB0aGVyZSBpcyBvbmUuIiwibGFuZ3VhZ2UtbmF0aXZlLWRvd25sb2FkLWNvbXBsZXRlIjoiRG93bmxvYWQgQ29tcGxldGU6IHswfS4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tcGFuLXRvb2x0aXAiOiJDYW5jZWwgYW55IGFjdGl2ZSB0b29scyBhbmQgcHV0IHRoZSBtYXAgaW50byBwYW4gbW9kZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2xvc2UtZmVhdHVyZS1zZXQtY29sbGVjdGlvbiI6IkNsb3NlcyB0aGUgZmVhdHVyZSBzZXQgY29sbGVjdGlvbi4iLCJsYW5ndWFnZS1vZmZsaW5lLWRhdGEtY2FudC1jbGVhciI6Ik5vIGRhdGEgdG8gY2xlYXIuIiwibGFuZ3VhZ2Utb2ZmbGluZS1lcnJvci1jbGVhcmluZy1kYXRhIjoiRXJyb3IgY2xlYXJpbmcgb2ZmbGluZSBkYXRhOiB7MH0iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXJlY3RhbmdsZSI6IlJlY3RhbmdsZSBJZGVudGlmeSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24taW52b2tlLW1hcC10aXAiOiJFeGVjdXRlcyBhbiBJZGVudGlmeSBvcGVyYXRpb24gb24gdGhlIGdpdmVuIGdlb21ldHJ5IGFuZCBcIk1hcFRpcFwiIGFzIGl0cyBzb3VyY2UgdGFnLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc3RlcC16b29tLW91dCI6Inpvb21zIG91dCBhIHN0ZXAuIiwibGFuZ3VhZ2UtZmVhdHVyZS1yZWxhdGVkLWNoZWNraW5nIjoiQ2hlY2tpbmcgZm9yIHJlbGF0ZWQgZmVhdHVyZXMuLi4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY2FjaGUtbGF5ZXItY2FwdGlvbiI6IkNhY2hlIExheWVyIiwibGFuZ3VhZ2UtY2xlYXItc3RvcmFnZS1jb25maXJtIjoiV2FybmluZzogQ2xlYXJpbmcgZGF0YSBmb3IgdGhpcyB2aWV3ZXIgcmVtb3ZlcyBhbGwgc3RvcmVkIG1hcCBkYXRhLCBpbmNsdWRpbmcgYW55IGVkaXRzIG1hZGUgd2hpbGUgb2ZmbGluZS4gSWYgeW91IGNsZWFyIG9mZmxpbmUgZGF0YSwgeW91IHdpbGwgbmVlZCB0byByZWNhY2hlIG1hcCBkYXRhIHdoaWxlIG9ubGluZSBiZWZvcmUgeW91IGNhbiBjb250aW51ZSB3b3JraW5nIG9mZmxpbmUuIiwibGFuZ3VhZ2UtbWFwLXNpdGUtY3JpdGljYWwtc2VydmljZXMtZmFpbGVkLW1lc3NhZ2UiOiJUaGUgYXBwbGljYXRpb24gY2Fubm90IGJlIHVzZWQgYXQgdGhpcyB0aW1lLiIsImxhbmd1YWdlLW1lbnUtdGl0bGUiOiJJIHdhbnQgdG8uLi4iLCJsYW5ndWFnZS1hdXRoLXBhc3N3b3JkIjoiUGFzc3dvcmQ6IiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWVkaXQtZ2VvbWV0cnktY2FwdGlvbiI6IkVkaXQgR2VvbWV0cnkiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmNpbmciOiJTeW5jIHdpdGggU2VydmVyIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1kZWZhdWx0LWhpZ2hsaWdodHMiOiJSZW1vdmVzIHRoZSBoaWdobGlnaHRzIGZyb20gdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IGxheWVyLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tZGVsZXRlZCI6IkRlbGV0ZWQiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5bGluZS1kZXNjIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gYWRkIHBvaW50cyB0byBhIGxpbmUuIENsaWNrIG9yIHRhcCB0d2ljZSB0byBzdG9wLiIsImxhbmd1YWdlLWxheWVybGlzdC1sYXllci11bmF2YWlsYWJsZSI6IlRoaXMgbGF5ZXIgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiIsImxhbmd1YWdlLW1lbnUtem9vbS1pbml0aWFsLWV4dGVudCI6IlJldHVybiB0byBpbml0aWFsIG1hcCBleHRlbnQiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hpbmctcmVwbGFjZS1kYXRhLWNvbnRpbnVlIjoiQ2FjaGluZyByZXBsYWNlcyBleGlzdGluZyBvZmZsaW5lIGRhdGEuIENvbnRpbnVlPyIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWVkaXRpbmciOiJGZWF0dXJlIEF0dHJpYnV0ZXMiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlnb24tZGVzYyI6IkNsaWNrIG9yIHRhcCBvbiB0aGUgbWFwIHRvIGFkZCBwb2ludHMgdG8gYSBwb2x5Z29uLiBDbGljayBvciB0YXAgdHdpY2UgdG8gc3RvcC4iLCJsYW5ndWFnZS13b3JrZmxvdy1lcnJvciI6IlRoZXJlIHdhcyBhIHdvcmtmbG93IGVycm9yIHJ1bm5pbmcgYWN0aXZpdHk6IHswfSIsImxhbmd1YWdlLW1lbnUtbWFuYWdlLXN5bmMtc2V0dGluZ3MtZGVzYyI6Ik1hbmFnZSB3aGF0IGRhdGEgYXJlIGNvcGllZCB0byBteSBkZXZpY2Ugb24gc3luYy4iLCJsYW5ndWFnZS1wcm9tcHQtZGVmYXVsdC10aXRsZSI6IlByb21wdCIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tYmwtbGluZS10b29sIjoiVGFwIG9uIHRoZSBtYXAgdG8gYWRkIHR3byBsaW5lIHBvaW50cy4iLCJsYW5ndWFnZS1jb21tb24tZWRpdGluZyI6IkVkaXRpbmciLCJsYW5ndWFnZS1yZXN1bHRzIjoiUmVzdWx0cyIsImxhbmd1YWdlLXRha2UtYXBwLW9ubGluZSI6IkdvIE9ubGluZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY29uZmlybSI6IkRpc3BsYXlzIGEgY29uZmlybS4iLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1lZGl0aW5nLWRlc2MiOiJFZGl0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBmZWF0dXJlIGFuZCBzYXZlIHRoZW0uIiwibGFuZ3VhZ2UtbWVudS16b29tLWluIjoiWm9vbSBpbiIsImxhbmd1YWdlLXRvb2xiYXItdGFza3MtcHJpbnQtbWFwIjoiUHJpbnQgTWFwIiwibGFuZ3VhZ2UtbmF0aXZlLXBob3RvLWZyb20tZ2FsbGVyeSI6IkF0dGFjaCBhIHBob3RvIGZyb20gdGhlIGdhbGxlcnkiLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LXRpdGxlIjoiRGlzcGxheSBDYXB0dXJlIEdlb21ldHJ5IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1kZWxldGUtZWRpdC10aXRsZSI6IkRlbGV0ZSBFZGl0IiwibGFuZ3VhZ2UtbWVudS1ydW4tYS13b3JrZmxvdyI6IlBlcmZvcm0gYSB0YXNrIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5bGluZS10b29sdGlwIjoiSWRlbnRpZnkgdGhpbmdzIG9uIHRoZSBtYXAgYnkgZHJhd2luZyBhIGxpbmUiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlsaW5lLWRlc2MiOiJDbGljayBvciB0YXAgb24gdGhlIG1hcCB0byBhZGQgcG9pbnRzIHRvIGEgbGluZS4gQ2xpY2sgb3IgdGFwIHR3aWNlIHRvIHN0b3AuIiwibGFuZ3VhZ2UtZW50ZXItb25saW5lIjoiR28gdG8gT25saW5lIE1vZGUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtZW5kLXN1Y2Nlc3MiOiJFZGl0cyB3ZXJlIHN1Y2Nlc3NmdWxseSBzZW50IHRvIHRoZSBzZXJ2ZXIgYW5kIHRoZSBvZmZsaW5lIGRhdGEgd2FzIGNhY2hlZCBvbiB5b3VyIGRldmljZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNob3ctbGF5ZXItbGlzdCI6IkFjdGl2YXRlcyB0aGUgU2ltcGxlTGF5ZXJMaXN0IFZpZXcuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcCI6IkFjdGl2YXRlcyBtYXAgdmlldy4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZHNrLXBvaW50LXRvb2wiOiJDbGljayBvciB0YXAgb24gdGhlIG1hcCB0byBhZGQgdGhlIGZlYXR1cmUuIiwibGFuZ3VhZ2UtaWRlbnRpZnktcG9seWdvbi10b29sIjoiQ2xpY2sgb3IgdGFwIG9uY2UgdG8gYWRkIHBvaW50cywgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kZWxldGUtd2l0aC1yZWxhdGlvbi1mb3JiaWRkZW4iOiJUaGlzIGZlYXR1cmUgaXMgcmVsYXRlZCB0byBvdGhlcnMgYW5kIGNhbm5vdCBiZSBkZWxldGVkIHVudGlsIHRoZSByZWxhdGVkIHJlY29yZHMgYXJlIGRlbGV0ZWQuIiwibGFuZ3VhZ2UtZmVhdHVyZS1kZXRhaWxzLXRpdGxlIjoiRmVhdHVyZSBEZXRhaWxzIiwibGFuZ3VhZ2UtcHJpbnQtbWFwIjoiQ3JlYXRlIGEgcHJpbnRhYmxlIG1hcCIsImxhbmd1YWdlLW5hdGl2ZS1maWxlLXVwbG9hZC1zdWNjZXNzIjoiRmlsZSBzdWNjZXNzZnVsbHkgYXR0YWNoZWQgdG8gZmVhdHVyZSIsImxhbmd1YWdlLW1hcC10aXRsZSI6Ik1hcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tYWxlcnQiOiJEaXNwbGF5cyBhbiBhbGVydC4iLCJsYW5ndWFnZS1tZW51LW1hbmFnZS1zeW5jLXNldHRpbmdzIjoiTWFuYWdlIHN5bmMgc2V0dGluZ3MiLCJsYW5ndWFnZS1uYXRpdmUtbm8tcGhvdG8tbm8tY2FtZXJhLWRldGVjdGVkIjoiTm8gY2FtZXJhIGRldGVjdGVkLiIsImxhbmd1YWdlLXNpdGUtbG9nLW9uLXJlcXVpcmVkLXRpdGxlIjoiTG9nIE9uIFJlcXVpcmVkIiwibGFuZ3VhZ2UtbG9nLWFwcC1sb2ciOiJBcHBsaWNhdGlvbiBMb2ciLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbWJsLXBvaW50LXRvb2wiOiJUYXAgb24gdGhlIG1hcCB0byBhZGQgdGhlIGZlYXR1cmUuIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1wcmludC1tYXAtdG9vbHRpcCI6IkNyZWF0ZSBhIHByaW50YWJsZSB2ZXJzaW9uIG9mIHRoZSBtYXAiLCJsYW5ndWFnZS1zZWFyY2gtcGVyZm9ybS1nbG9iYWwtc2VhcmNoIjoiUGVyZm9ybSBhIFNlYXJjaCIsImxhbmd1YWdlLWNvbW1vbi1kZWJ1Zy1sb2cta2V5cyI6IlRvIHZpZXcgdGhlIGxvZyBvbiBhIGRlc2t0b3AgbWFjaGluZSwgcHJlc3MgQ3RybCArIFNoaWZ0ICsgfi4gT24gYSBtb2JpbGUgZGV2aWNlLCBwcmVzcyBhbmQgaG9sZCB0aGUgdG9vbGJhci4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRpc3BsYXktd29ya2Zsb3ctY29udGFpbmVyLWNvbnRlbnQiOiJEaXNwbGF5cyBhIHZpZXcgaW4gYSB3b3JrZmxvdyBjb250YWluZXIuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1nZXQtZmVhdHVyZS1kZXRhaWxzLXByb3ZpZGVycyI6IkNyZWF0ZXMgdmlldyBmb3IgYWxsIGNvbmZpZ3VyZWQgZmVhdHVyZSBkZXRhaWxzIHByb3ZpZGVycyBhbmQgZW1iZWRzIHRoZW0gaW50byBmZWF0dXJlIGRldGFpbHMgZGlhbG9nLiIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2Utdmlldy10aGlzLXZpZXdlciI6IlRoaXMgYXBwbGljYXRpb24iLCJsYW5ndWFnZS1pZGVudGlmeS1saW5lLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIGxpbmUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1tYW5hZ2UtbGF5ZXItb2ZmbGluZSI6Ik9mZmxpbmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlZ2lzdGVyLXNlYXJjaC1wcm92aWRlciI6IlJlZ2lzdGVycyBhIHNlYXJjaCBwcm92aWRlciBpZiBub3QgYWxyZWFkeSByZWdpc3RlcmVkLiIsImxhbmd1YWdlLXdvcmtmbG93LXJlcG9ydC11cmwtdGl0bGUiOiJSZXBvcnQgQ29tcGxldGUiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctYXBwbHlpbmciOiJBcHBseWluZyBlZGl0cy4uLiIsImxhbmd1YWdlLWlkZW50aWZ5LWZyZWVoYW5kLXBvbHlsaW5lLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIGxpbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1kZWxldGUtcmVsYXRlZC1yZWNvcmQiOiJEZWxldGVzIGEgcmVsYXRlZCB0YWJsZSByZWNvcmQuIiwibGFuZ3VhZ2Utb2ZmbGluZS1idW5kbGUtaW5kZXgtZXJyb3IiOiJUaGVyZSB3YXMgYW4gZXJyb3Igc2F2aW5nIHRoZSBpbmRleCBmb3Igb2ZmbGluZSBkYXRhLiBZb3UgbWF5IGJlIG91dCBvZiBzcGFjZS4gRXJyb3I6IHswfSIsImxhbmd1YWdlLW5hdGl2ZS1jbG9zZS1hcHBsaWNhdGlvbiI6IlJldHVybiB0byB0aGUgbWFpbiBtZW51IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1hdHRhY2gtcGhvdG8iOiJBdHRhY2ggYSBQaG90byIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItbm90LXN5bmNocm9uaXplZC10by1zZXJ2ZXIiOiJZb3UgY3VycmVudGx5IGhhdmUgZWRpdHMgdGhhdCBoYXZlIG5vdCBiZWVuIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuICIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1lbmQtcmVxdWVzdC10aW1lb3V0IjoiRWRpdHMgd2VyZSBzdWNjZXNzZnVsbHkgc2VudCB0byB0aGUgc2VydmVyIGJ1dCB0aGUgcmVxdWVzdCB0byB1cGRhdGUgeW91ciBkYXRhIHRpbWVkIG91dC4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluIGxhdGVyLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1pbnZhbGlkLWxheWVyIjoiVGhpcyBmZWF0dXJlIGhhcyBubyBlZGl0YWJsZSBmaWVsZHMuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1ydW4td29ya2Zsb3ctYnktaWQiOiJSdW5zIGEgd29ya2Zsb3cuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jcmVhdGUtZmVhdHVyZSI6IkNyZWF0ZXMgYSBuZXcgZmVhdHVyZS4iLCJsYW5ndWFnZS1hdXRoLXVzZXJuYW1lIjoiVXNlcm5hbWU6IiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5Z29uLXRvb2x0aXAiOiJJZGVudGlmeSB0aGluZ3Mgb24gdGhlIG1hcCBieSBkcmF3aW5nIGEgcG9seWdvbiIsImxhbmd1YWdlLXNlYXJjaC1mc2MtZGlzcGxheS1uYW1lIjoiU2VhcmNoIFJlc3VsdHM6IHswfSIsImxhbmd1YWdlLW5hdGl2ZS1hZGQtdG8tZmF2b3JpdGVzLXZpZXdlci1uYW1lLXRpdGxlIjoiVmlld2VyIE5hbWUiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LWZyZWVoYW5kLXRvb2x0aXAiOiJJZGVudGlmeSB0aGluZ3Mgb24gdGhlIG1hcCBieSBkcmF3aW5nIGEgZnJlZWhhbmQgbGluZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tem9vbS10by1leHRlbnQiOiJab29tcyB0byB0aGUgZ2l2ZW4gZXh0ZW50LiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLXBvbHlsaW5lIjoiTGluZSIsImxhbmd1YWdlLW1hcC16b29tLW91dCI6IkRyYWcgb24gdGhlIG1hcCB0byB6b29tIG91dC4gVGhlIHNtYWxsZXIgdGhlIGFyZWEsIHRoZSBmYXJ0aGVyIHlvdSB6b29tIG91dC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXJlbW92ZS1mZWF0dXJlLXNldC1jb2xsZWN0aW9uLWJ5LWlkIjoiUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb24gZnJvbSB0aGUgZmVhdHVyZSBzZXQgbWFuYWdlci4iLCJsYW5ndWFnZS1tYXJrdXAtY2xlYXItYWxsLXByb21wdCI6IlRoaXMgd2lsbCBlcmFzZSBhbGwgb2YgeW91ciBtYXAgZHJhd2luZ3MuIENvbnRpbnVlPyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2xlYXItbGF5ZXItZGF0YSI6Ildhcm5pbmc6IENsZWFyaW5nIHRoaXMgbGF5ZXIgd2lsbCByZW1vdmUgYW55IG9mZmxpbmUgbWFwIGRhdGEgYW5kIGFueSBlZGl0cyBvbiB0aGlzIGxheWVyLiIsImxhbmd1YWdlLWdlb2xvY2F0aW9uLWVycm9yLXRpbWVvdXQiOiJUaW1lb3V0IiwibGFuZ3VhZ2Utb2ZmbGluZS1kYXRhLWNsZWFyZWQiOiJPZmZsaW5lIGRhdGEgY2xlYXJlZC4iLCJsYW5ndWFnZS1kc2stbWFwLWNlbnRlciI6IkNsaWNrIHRvIGNlbnRlciB0aGUgbWFwIGF0IHRoYXQgcG9pbnQuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci13aGlsZS1jYWNoaW5nLWRhdGEtY29kZTQwMCI6IlRoZXJlIHdhcyBhbiBlcnJvciBpbiB0aGUgY2FjaGUgZGF0YSByZXF1ZXN0LiBXaGVyZSBjbGF1c2UgIFwiezB9XCIgaXMgbGlrZWx5IGludmFsaWQuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hZGQtdGV4dC1tYXJrdXAiOiJQcm9tcHRzIHRoZSB1c2VyIGZvciB0ZXh0IHRvIGFkZCBhcyBtYXJrdXAuIFdoZW4gY29tcGxldGVkLCB0ZXh0IG1hcmt1cCBpcyBhZGRlZCBhdCB0aGUgcHJvdmlkZWQgZ2VvbWV0cnkuIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtZGVzYyI6IkFkZHMgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gdG8gdGhlIGZhdm9yaXRlcyBvbiB0aGUgbWFpbiBtZW51LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tcmVtb3ZlLXN0YXR1cyI6IlJlbW92ZXMgdGhlIHN0YXR1cyBpbmRpY2F0b3IgZnJvbSB0aGUgc2NyZWVuIHdpdGggdGhlIHNwZWNpZmllZCBJRC4iLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1mcmVlaGFuZC10b29sdGlwIjoiRHJhdyBhIGZyZWVoYW5kIGxpbmUgb24gdGhlIG1hcCIsImxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtbm8tYXR0YWNobWVudHMiOiJObyBhdHRhY2htZW50cyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1lbmQtY2FjaGUtZXJyb3IiOiJFZGl0cyB3ZXJlIHN1Y2Nlc3NmdWxseSBzZW50IHRvIHRoZSBzZXJ2ZXIgYnV0IHRoZSBvZmZsaW5lIGNhY2hlIGNvdWxkIE5PVCBiZSB1cGRhdGVkLiBQbGVhc2UgY2hlY2sgeW91ciBjb25uZWN0aW9uIGFuZCB0cnkgYWdhaW4gbGF0ZXIuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jb21pdHRlZCI6IkNvbW1pdHRlZCIsImxhbmd1YWdlLW1lbnUtZGVzY3JpcHRpb24iOiJRdWljayBhY2Nlc3MgdG8gY29tbW9uIHRhc2tzIiwibGFuZ3VhZ2UtbGF5ZXItYWN0aW9ucy10aXRsZSI6IkxheWVyIEFjdGlvbnMiLCJsYW5ndWFnZS1sZWdlbmQtc2hvdy1sYXllci1saXN0IjoiU2hvdyBMYXllciBMaXN0IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1uby1tYXBzZXJ2aWNlIjoiVGhlIGZlYXR1cmUgaXMgbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkga25vd24gbWFwIHNlcnZpY2UuIiwibGFuZ3VhZ2UtbmF0aXZlLWltYWdlLXNlbGVjdC1oZWFkaW5nIjoiUGxlYXNlIHNlbGVjdCBhbiBpbWFnZSB0byB1cGxvYWQiLCJsYW5ndWFnZS1mZWF0dXJlLWFjdGlvbnMtZGVzY3JpcHRpb24iOiJGZWF0dXJlIEFjdGlvbnMiLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctbWFuYWdlLW9mZmxpbmUtZGF0YS10b29sdGlwIjoiU2VsZWN0LCBzeW5jLCBhbmQgY2xlYXIgb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtYXV0aC1lcnJvciI6IkludmFsaWQgdXNlcm5hbWUgb3IgcGFzc3dvcmQuIFBsZWFzZSB0cnkgYWdhaW4uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mZWF0dXJlLWxheWVyLWNhY2hlLWRhdGEiOiJDYWNoZXMgdGhlIGRhdGEgZm9yIGEgZ2l2ZW4gbWFwIHNlcnZpY2UgVVJMLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZWRpdC1hY3Rpb24tY3JlYXRlZCI6IkNyZWF0ZWQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRlZC1rZXktZmllbGQtbWlzc2luZyI6InswfSBpcyBhIGtleSBmaWVsZCBhbmQgcmVxdWlyZXMgYSB2YWx1ZS4gUGxlYXNlIGFzc2lnbiBhIHZhbHVlIHRvIHRoZSBmZWF0dXJlIGFuZCBzYXZlIGl0LiIsImxhbmd1YWdlLW9mZmxpbmUtcHJvdmlzaW9uaW5nLWZhaWxlZCI6IlRoZSBkb3dubG9hZCBmb3Igb2ZmbGluZSB1c2UgZmFpbGVkLiBUaGVyZSB3YXMgYW4gZXJyb3Igc2F2aW5nIGFuIG9mZmxpbmUgcmVzb3VyY2UuIFlvdSBtYXkgYmUgb3V0IG9mIHNwYWNlLiIsImxhbmd1YWdlLWdlb2xvY2F0aW9uLWVycm9yLXBlcm1pc3Npb24iOiJZb3UgY2Fubm90IGdlb2xvY2F0ZS4iLCJsYW5ndWFnZS1tZW51LWFkZC1hLWZlYXR1cmUiOiJDcmVhdGUgYSBmZWF0dXJlIiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtbGF5ZXItZGV0YWlscy1kZXNjIjoiTWFuYWdlIGNhY2hpbmcgb2YgYSBmZWF0dXJlIGxheWVyIGZvciBvZmZsaW5lIHVzZS4iLCJsYW5ndWFnZS1tZW51LWFkZC1hLWZlYXR1cmUtZGVzYyI6IkNyZWF0ZSBhIG5ldyBmZWF0dXJlIG9uIHRoaXMgbGF5ZXIuIiwibGFuZ3VhZ2UtY29tbW9uLW9rIjoiT0siLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvbHlnb24iOiJQb2x5Z29uIElkZW50aWZ5IiwibGFuZ3VhZ2Utc2VhcmNoLWJpbmctY291bnRyeSI6IkNvdW50cnkiLCJsYW5ndWFnZS1pZGVudGlmeS1lcnJvci1tZXNzYWdlIjoiVGhlIHJlcXVlc3RlZCBvcGVyYXRpb24gZmFpbGVkLiBUcnkgYWdhaW4gbGF0ZXIsIG9yIGluZm9ybSB5b3VyIGFwcGxpY2F0aW9uIGFkbWluaXN0cmF0b3Igb2YgdGhlIHByb2JsZW0uIiwibGFuZ3VhZ2UtbWVudS16b29tLXRvLXZpc2libGUtc2NhbGUiOiJab29tIHRvIHZpc2libGUgc2NhbGUiLCJsYW5ndWFnZS1maWxlLXBpY2tlci1ub3Qtc3VwcG9ydGVkIjoiVGhlIGZpbGUgcGlja2VyIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyLiIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLXBvc3RhbC10b3duIjoiUG9zdGFsIFRvd24iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVycm9yLXRpdGxlIjoiRXJyb3IiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS1yZXN1bHRzLWZyYW1lIjoiQWN0aXZhdGVzIG9yIGRlYWN0aXZhdGVzIFJlc3VsdHMgZnJhbWUuIiwibGFuZ3VhZ2UtbmF0aXZlLWZlYXR1cmUtbm8tbGF5ZXItdXJsIjoiRXJyb3I6IFRoZSBMYXllciBVcmwgZm9yIHRoaXMgbGF5ZXIgaXMgbm90IGF2YWlsYWJsZSBvciBpcyBub3QgY29uZmlndXJlZCBjb3JyZWN0bHkuIEZpbGUgdXBsb2FkIGZhaWxlZC4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctbm8tdGVtcGxhdGVzIjoiTm8gdGVtcGxhdGVzIGF2YWlsYWJsZS4iLCJsYW5ndWFnZS1zZWFyY2gtYmluZy1kaXN0cmljdCI6IkRpc3RyaWN0IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZWNlbnRlci1tYXAtb24tbmV4dC1tYXAtcmVzaXplIjoiUmVjZW50ZXJzIHRoZSBtYXAgdG8gaXRzIGV4aXN0aW5nIHBvc2l0aW9uIHRoZSBuZXh0IHRpbWUgdGhlIG1hcCBpcyByZXNpemVkLiIsImxhbmd1YWdlLXdvcmtmbG93LXJlcG9ydC11cmwiOiJZb3VyIHJlcG9ydCBpcyByZWFkeSB0byBkb3dubG9hZC4gQ2xpY2sgdGhlIGxpbmsgb3IgcmlnaHQtY2xpY2ssIGFuZCB0aGVuIHNlbGVjdCBcIlNhdmUgYXMuXCIiLCJsYW5ndWFnZS1tZW51LWVudGVyLW9ubGluZSI6IkdvIHRvIG9ubGluZSBtb2RlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci10ZW1wb3JhcnktbWFya3VwIjoiUmVtb3ZlcyB0ZW1wb3JhcnkgbWFya3VwIGNyZWF0ZWQgYnkgQWRkVGVtcG9yYXJ5TWFya3VwR2VvbWV0cnkuIiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctZmFpbGVkLXRpdGxlIjoiRXJyb3IiLCJsYW5ndWFnZS13b3JrZmxvdy1yZXBvcnQtdXJsLXRleHQiOiJDbGljayBoZXJlLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1jb25maXJtLXRpdGxlIjoiU3luYyBXaXRoIFNlcnZlciIsImxhbmd1YWdlLWZlYXR1cmUtZGF0ZS1mb3JtYXQiOiJNTU0gZGQsIHl5eXkgSEg6bW06c3MiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNraXBwaW5nLWZlYXR1cmUtZmFpbGVkIjoiU2tpcHBpbmcgZWRpdCAnezB9JyBiZWNhdXNlIGl0IGlzIHJlbGF0ZWQgdG8gYSBmYWlsZWQgZWRpdC4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tZnVsbC1leHRlbnQtdG9vbHRpcCI6IlJldHVybiB0byB0aGUgZnVsbCBleHRlbnQgb2YgdGhlIG1hcCIsImxhbmd1YWdlLXJlc3VsdHMtbWVudS1kZXNjcmlwdGlvbiI6IkZlYXR1cmUgQWN0aW9ucyBmb3IgUmVzdWx0cyBMaXN0IiwibGFuZ3VhZ2UtbmF0aXZlLWZpbGUtdXBsb2FkLWZhaWxlZCI6IkZpbGUgYXR0YWNobWVudCBmYWlsZWQuICIsImxhbmd1YWdlLW5hdGl2ZS1maWxlLXNlbGVjdC1oZWFkaW5nIjoiUGxlYXNlIHNlbGVjdCBhIGZpbGUgdG8gdXBsb2FkIiwibGFuZ3VhZ2UtZmVhdHVyZS1yZWxhdGVkLW5vLWRhdGEiOiJObyBkYXRhIiwibGFuZ3VhZ2UtZW50ZXItb2ZmbGluZS1kZXNjIjoiR28gdG8gb2ZmbGluZSBtb2RlIGFuZCB2aWV3IGNhY2hlZCBtYXAgZGF0YS4iLCJsYW5ndWFnZS1tZW51LXpvb20tdG8tbGF5ZXIiOiJab29tIHRvIGZ1bGwgZXh0ZW50IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1kZWxldGUtZWRpdC1jb25maXJtYXRpb24iOiJBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gZGVsZXRlIHRoaXMgZWRpdCBhbmQgezB9IGRlcGVuZGVudCBlZGl0cz8iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLWNyZWF0ZWQtYXR0YWNobWVudCI6IkNyZWF0ZWQgYXR0YWNobWVudCIsImxhbmd1YWdlLXJlc3VsdHMtZGlzcGxheWluZyI6IkRpc3BsYXlpbmciLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXJlY3RhbmdsZSI6IklkZW50aWZ5IGJ5IHJlY3RhbmdsZSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3Itc2V0dGluZy1lZGl0LWxvZyI6IlRoZXJlIHdhcyBhbiBlcnJvciBzZXR0aW5nIHRoZSBlcnJvciBsb2c6IHswfSIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWNpcmNsZS1kZXNjIjoiRHJhZyBhIGNpcmNsZSBvbnRvIHRoZSBtYXAiLCJsYW5ndWFnZS1tZW51LW9wZW4tb2ZmbGluZS10b29scy1tZW51LWRlc2MiOiJNYW5hZ2UgY2FjaGUgc2V0dGluZ3MsIHZpZXcgZWRpdHMsIGFuZCBzeW5jIHdpdGggdGhlIHNlcnZlci4iLCJsYW5ndWFnZS1yZXN1bHRzLXBhZ2Utb2YiOiJvZiIsImxhbmd1YWdlLWlkZW50aWZ5LXJlc3VsdHMtaGVhZGVyIjoiSWRlbnRpZnkgUmVzdWx0cyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItY2FjaGUtZXh0ZW50IjoiQ2FjaGUgRXh0ZW50IiwibGFuZ3VhZ2Utc2VhcmNoLWFyY2dpcy1hZGRyZXNzIjoiQWRkcmVzcyIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tb2R1bGUtdGl0bGUiOiJGZWF0dXJlIEVkaXRpbmciLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LWZyZWVoYW5kLXBvbHlsaW5lIjoiRHJhdyBhIGZyZWVoYW5kIGxpbmUgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hpbmctZGF0YSI6IkNhY2hpbmcgZGF0YS4uLiIsImxhbmd1YWdlLW1lbnUtb3Blbi1vZmZsaW5lLXRvb2xzLW1lbnUiOiJNYW5hZ2Ugb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1mcmVlaGFuZC1wb2x5Z29uIjoiRnJlZWhhbmQgUG9seWdvbiBJZGVudGlmeSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZmV0Y2hpbmctZGF0YSI6IkZldGNoaW5nIHByaW1hcnkgbGF5ZXIgZGF0YS4uLiIsImxhbmd1YWdlLW9mZmxpbmUtZGF0YS1jbGVhcmVkLXRpdGxlIjoiQ29tcGxldGVkIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMiOiJBZGQgYXBwbGljYXRpb24gdG8gZmF2b3JpdGVzIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1mZXRjaGluZy1yZWxhdGVkLWRhdGEiOiJGZXRjaGluZyByZWxhdGVkIGRhdGEuLi4iLCJsYW5ndWFnZS1tZW51LWlkZW50aWZ5LXBvaW50IjoiSWRlbnRpZnkgYnkgcG9pbnQiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2x5Z29uLWRlc2MiOiJDbGljayBvciB0YXAgb24gdGhlIG1hcCB0byBhZGQgcG9pbnRzIHRvIGEgcG9seWdvbi4gQ2xpY2sgb3IgdGFwIHR3aWNlIHRvIHN0b3AuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hY3RpdmF0ZS1jb250YWluZXJzLWZvci13b3JrZmxvdyI6IkFjdGl2YXRlcyBhbnkgd29ya2Zsb3cgY29udGFpbmVyIHZpZXdzIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHdvcmtmbG93LiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZmVhdHVyZS1sYXllci1jbGVhci1kYXRhIjoiQ2xlYXJzIHRoZSBkYXRhIGZvciBhIGdpdmVuIG1hcCBzZXJ2aWNlIFVSTC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlbGV0ZS1hdHRhY2htZW50IjoiRGVsZXRlcyBhIGZlYXR1cmUgYXR0YWNobWVudC4iLCJsYW5ndWFnZS1tYXAtc2l0ZS1hdXRob3JpemF0aW9uLWZhaWxlZC1tZXNzYWdlIjoiVGhpcyBzaXRlIGlzIHJlc3RyaWN0ZWQuIiwibGFuZ3VhZ2UtY29tbW9uLW5vLXJlc3VsdHMtZGVzYyI6Ikl0ZW1zIGFwcGVhciBhZnRlciB5b3UgcGVyZm9ybSBhIHZhbGlkIHNlYXJjaCBvciBvdGhlciB0YXNrIHRoYXQgcmV0dXJucyByZXN1bHRzLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1tYXAtZWxlbWVudCI6IkRpc3BsYXlzIGFuIGVsZW1lbnQgYW5jaG9yZWQgdG8gYSBzcGVjaWZpYyBwb2ludCBvbiB0aGUgbWFwLiIsImxhbmd1YWdlLWRvd25sb2FkLWJ1bmRsZS1kZXNjIjoiRG93bmxvYWQgdGhlIHJlc291cmNlcyBuZWVkZWQgdG8gb3BlcmF0ZSBvZmZsaW5lLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdGFrZS1hcHBsaWNhdGlvbi1vZmZsaW5lIjoiUHV0cyB0aGUgYXBwbGljYXRpb24gaW4gYW4gb2ZmbGluZSBzdGF0ZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLXN0b3JhZ2UtZm9yLWFwcGxpY2F0aW9uIjoiQ2xlYXJzIHRoZSBvZmZsaW5lIGRhdGEgZm9yIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tdXBkYXRlLXJlbGF0ZWQtcmVjb3JkIjoiVXBkYXRlcyBhIHJlbGF0ZWQgdGFibGUgcmVjb3JkLiIsImxhbmd1YWdlLW5hdGl2ZS1maWxlLXVwbG9hZGluZyI6IlVwbG9hZGluZyBmaWxlLiBQbGVhc2Ugd2FpdCAuLi4iLCJsYW5ndWFnZS1zaXRlLXNlcnZpY2UtbGF5ZXJzLWZhaWx1cmUtdmlldy13YXJuaW5nIjoiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIG9uZSBvciBtb3JlIG1hcCBzZXJ2aWNlcy4gVGhlIGZvbGxvd2luZyBtYXAgc2VydmljZXMgbWF5IGJlIHVuYXZhaWxhYmxlOiIsImxhbmd1YWdlLXNlYXJjaC1nbyI6IkdvIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jcmVhdGUtcmVsYXRlZC1yZWNvcmQiOiJDcmVhdGVzIGEgcmVsYXRlZCB0YWJsZSByZWNvcmQuIiwibGFuZ3VhZ2Utd29ya2Zsb3ctb2ZmbGluZSI6IllvdSBjYW5ub3QgcnVuIGEgd29ya2Zsb3cgaW4gb2ZmbGluZSBtb2RlLiIsImxhbmd1YWdlLW9mZmxpbmUtdmlld2VyLXByb3Zpc2lvbmluZy1mYWlsZWQtc3RhdHVzNDA0IjoiVGhlIGRvd25sb2FkIG9mIHJlc291cmNlcyBmb3Igb2ZmbGluZSB1c2UgZmFpbGVkOiBUaGUgb2ZmbGluZSBkYXRhIGNvdWxkIG5vdCBiZSBmb3VuZC4iLCJsYW5ndWFnZS1vZmZsaW5lLXZpZXdlci1wcm92aXNpb25pbmctZmFpbGVkLXN0YXR1czQwMyI6IlRoZSBkb3dubG9hZCBvZiByZXNvdXJjZXMgZm9yIG9mZmxpbmUgdXNlIGZhaWxlZDogUGVybWlzc2lvbiBkZW5pZWQuIiwibGFuZ3VhZ2UtdG9vbGJhci10YXNrcy1wcmludGluZyI6IlByaW50aW5nIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtcG9seWxpbmUtdG9vbHRpcCI6IkRyYXcgYSBsaW5lIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXN0ZXAtem9vbS1pbiI6Ilpvb21zIGluIGEgc3RlcC4iLCJsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzLW5vLWF0dGFjaG1lbnRzLW9mZmxpbmUiOiJBdHRhY2htZW50cyBhcmUgbm90IGF2YWlsYWJsZSB3aGVuIG9mZmxpbmUuIiwibGFuZ3VhZ2Utd29ya2Zsb3ctaXMtYnVzeSI6IlRoZSB3b3JrZmxvdyBpcyBidXN5LiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kc2stcmVjdGFuZ2xlLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIHJlY3RhbmdsZSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3RvcC1lZGl0aW5nLWdlb21ldHJ5LWNhcHRpb24iOiJTdG9wIEVkaXRpbmcgR2VvbWV0cnkiLCJsYW5ndWFnZS1tZW51LW1hcC1sYXllcnMiOiJTaG93IHRoZSBsYXllciBsaXN0IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0LWRlc2MiOiJFZGl0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBmZWF0dXJlLiIsImxhbmd1YWdlLW1lbnUtZWRpdC1mZWF0dXJlLWRlc2NyaXB0aW9uIjoiRWRpdCB0aGUgZGV0YWlscyBhYm91dCB0aGlzIGZlYXR1cmUuIiwibGFuZ3VhZ2UtbGVnZW5kLW5vLWl0ZW1zIjoiTm8gaXRlbXMgdG8gZGlzcGxheS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVycm9yLXdoaWxlLWNhY2hpbmctZGF0YSI6IlRoZXJlIHdhcyBhbiBlcnJvciBjYWNoaW5nIGRhdGE6IHswfSB7MX0iLCJsYW5ndWFnZS1lbnRlci1vbmxpbmUtZGVzYyI6IkdvIHRvIG9ubGluZSBtb2RlIGFuZCB2aWV3IGxpdmUgbWFwIGRhdGEgZnJvbSB0aGUgd2ViLiIsImxhbmd1YWdlLWNvbW1vbi12aWV3LWxvZyI6IlZpZXcgTG9nIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1vcGVuLXdlYi1wYWdlIjoiT3BlbnMgYSB3ZWIgcGFnZSBpbiBhbm90aGVyIHRhYi93aW5kb3cuIiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LW1hcC1zZXJ2aWNlLXVuYXZhaWxhYmxlIjoiVGhpcyBtYXAgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIiwibGFuZ3VhZ2UtZ2VvbG9jYXRpb24tZXJyb3ItdW5rbm93biI6IlVua25vd24gRXJyb3IiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtcmVxdWlyZWQiOiJTeW5jaHJvbml6ZSBSZXF1aXJlZCIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc2F2ZS1zeW5jLXNldHRpbmdzIjoiVXBkYXRlIENhY2hlZCBBcmVhIiwibGFuZ3VhZ2UtaWRlbnRpZnktZnJlZWhhbmQtcG9seWdvbi10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSBzaGFwZS4iLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctdG9vbHMiOiJFZGl0aW5nIFRvb2xzIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LW1hcC1jYWxsb3V0IjoiRGlzcGxheXMgYSBtYXAgY2FsbG91dCBhbmNob3JlZCB0byBhIGdpdmVuIHBvaW50LiIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLXBvc3RhbC1jb2RlIjoiUG9zdGFsIENvZGUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLW1hcmt1cCI6IlByb21wdHMgdGhlIHVzZXIgZm9yIGNvbmZpcm1hdGlvbiwgYW5kIGlmIGFwcHJvdmVkLCBjbGVhcnMgYWxsIG9mIHRoZSBtYXJrdXAgZnJvbSB0aGUgbWFya3VwIGxheWVyLiIsImxhbmd1YWdlLW5hdGl2ZS1mZWF0dXJlLW5vLWxheWVyIjoiRXJyb3I6IFRoaXMgZmVhdHVyZSBkb2VzIG5vdCBzZWVtIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCBhbnkgbGF5ZXIuIFBsZWFzZSB0cnkgaWRlbnRpZnlpbmcgdGhlIGZlYXR1cmUgYWdhaW4uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1kZWFjdGl2YXRlLWNvbnRhaW5lcnMtZm9yLXdvcmtmbG93IjoiRGVhY3RpdmF0ZXMgYW55IHdvcmtmbG93IHZpZXdzIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHdvcmtmbG93LiIsImxhbmd1YWdlLW1lbnUtaWRlbnRpZnktZnJlZWhhbmQtZGVzYyI6IkRyYXcgYSBzaGFwZSB0byB2aWV3IGluZm9ybWF0aW9uIGFib3V0IHRoYXQgYXJlYS4iLCJsYW5ndWFnZS1yZXNvbHV0aW9uIjoiUmVzb2x1dGlvbiIsImxhbmd1YWdlLW1lbnUtdmlldy1lZGl0LWxvZy1kZXNjIjoiUmV2aWV3IG15IGVkaXRzLCBzZW5kIHRoZW0gdG8gdGhlIHNlcnZlciwgYW5kIHVwZGF0ZSBteSBvZmZsaW5lIGRhdGEuIiwibGFuZ3VhZ2UtbW9udGhzLTgiOiJTZXB0ZW1iZXIiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tb3V0LXRvLWV4dGVudCI6Ilpvb21zIG91dCB0byB0aGUgZ2l2ZW4gZXh0ZW50LiIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLXN5bmMtc2V0dGluZ3MiOiJNYW5hZ2UgU3luYyBTZXR0aW5ncyIsImxhbmd1YWdlLWNvbW1vbi1yZXN1bHRzIjoiUmVzdWx0cyIsImxhbmd1YWdlLW1vbnRocy03IjoiQXVndXN0IiwibGFuZ3VhZ2UtbmF0aXZlLWxvdy1tZW1vcnkiOiJUaGUgZGV2aWNlIGlzIGN1cnJlbnRseSBsb3cgb24gbWVtb3J5LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItcGVuZGluZy1lZGl0cy1tdWx0aXBsZS1sYXllcnMtZXh0IjoiWW91IGhhdmUgdW5zeW5jZWQgZWRpdHMgb24gb25lIG9yIG1vcmUgbGF5ZXJzLiBQbGVhc2UgdXNlIHRoZSB7MH0gc2NyZWVuIHRvIHN5bmNocm9uaXplIHlvdXIgZWRpdHMgdG8gdGhlIHNlcnZlci4iLCJsYW5ndWFnZS1tb250aHMtNiI6Ikp1bHkiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXpvb20tdG8taW5pdGlhbC1leHRlbnQiOiJab29tcyB0byB0aGUgaW5pdGlhbCBleHRlbnQgb2YgdGhlIGN1cnJlbnQgU2l0ZS4iLCJsYW5ndWFnZS1tb250aHMtNSI6Ikp1bmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFsbG93LWhpZGUtZmVhdHVyZS1sYXllci1tb2RhbC1tZXNzYWdlIjoiU2hvdyB0aGUgY2xvc2UgYnV0dG9uIG9uIHRoZSBNb2RhbE1lc3NhZ2VWaWV3IGFsbG93aW5nIHRoZSB1c2VyIHRvIGNsb3NlIGl0LiIsImxhbmd1YWdlLWRzay1pZGVudGlmeS1wb2x5bGluZS10b29sIjoiQ2xpY2sgb3IgdGFwIG9uY2UgdG8gYWRkIHBvaW50cywgdHdpY2UgdG8gZmluaXNoLiIsImxhbmd1YWdlLW1lbnUtY2xlYXItb2ZmbGluZS1kYXRhIjoiQ2xlYXIgb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtbW9udGhzLTkiOiJPY3RvYmVyIiwibGFuZ3VhZ2UtbW9udGhzLTAiOiJKYW51YXJ5IiwibGFuZ3VhZ2UtbW9udGhzLTMiOiJBcHJpbCIsImxhbmd1YWdlLW1vbnRocy00IjoiTWF5IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1pbml0aWFsaXplLXNpdGUiOiJUZWxscyB0aGUgR2VvY29ydGV4IEVzc2VudGlhbHMgU2l0ZSBvYmplY3QgdG8gYmVnaW4gaW5pdGlhbGl6YXRpb24uIiwibGFuZ3VhZ2UtbWVudS1lbnRlci1vZmZsaW5lLWRlc2MiOiJHbyB0byBvZmZsaW5lIG1vZGUgYW5kIHZpZXcgY2FjaGVkIG1hcCBkYXRhLiIsImxhbmd1YWdlLW1vbnRocy0xIjoiRmVicnVhcnkiLCJsYW5ndWFnZS1tZW51LXpvb20iOiJab29tIHRvIEZlYXR1cmUiLCJsYW5ndWFnZS1tb250aHMtMiI6Ik1hcmNoIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zZWFyY2giOiJQZXJmb3JtcyBhIHNlYXJjaCBvbiBhbGwgYWN0aXZlIHByb3ZpZGVycy4iLCJsYW5ndWFnZS1tZW51LWdsb2JhbC1zZWFyY2gtZGVzYyI6IlNlYXJjaCBmb3IgZmVhdHVyZXMgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1uYXRpdmUtYWRkLXRvLWZhdm9yaXRlcy1lcnJvciI6IkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGF0dGVtcHRpbmcgdG8gYWRkIHRoZSBmYXZvcml0ZTogezB9LiIsImxhbmd1YWdlLW1hcC1zdXJmYWNlIjoiTWFwIFN1cmZhY2UiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZWRpdC1sb2ctY2FwdGlvbiI6IlZpZXcgRWRpdCBMb2ciLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24taW5pdGlhbC1leHRlbnQiOiJJbml0aWFsIEV4dGVudCIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1jcmVhdGUtbmV3LWZlYXR1cmUtdG9vbHRpcCI6IkNyZWF0ZSBhIG5ldyBmZWF0dXJlIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1zZWFyY2gtd29ybGQtcGxhY2UtbmFtZXMiOiJXb3JsZCBQbGFjZSBOYW1lcyIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktcmVjdGFuZ2xlLWRlc2MiOiJEcmFnIGEgcmVjdGFuZ2xlIG9uIHRvIHRoZSBtYXAgdG8gc2VlIHdoYXQncyB0aGVyZSIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLW9mZmxpbmUtdG9vbHMiOiJNYW5hZ2UgT2ZmbGluZSBEYXRhIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1oaWdobGlnaHRzIjoiUmVtb3ZlcyB0aGUgaGlnaGxpZ2h0cyBmcm9tIHRoZSBhY3RpdmUgaGlnaGxpZ2h0IGxheWVyLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tYmwtcG9seWxpbmUtdG9vbCI6IlRhcCBvbiB0aGUgbWFwIHRvIGFkZCBwb2ludHMgdG8gYSBsaW5lLiIsImxhbmd1YWdlLXRvb2xiYXItaWRlbnRpZnktZnJlZWhhbmQiOiJGcmVlaGFuZCBJZGVudGlmeSIsImxhbmd1YWdlLXRvb2xiYXItbm90LWF2YWlsYWJsZSI6IlRvb2xiYXIgaXMgbm90IGF2YWlsYWJsZSIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1kYXRhIjoiRGF0YSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1sb2ctd2FybmluZyI6Ildhcm5pbmciLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNsZWFyLWRhdGEiOiJDbGVhciIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2FuY2VsLXNlYXJjaCI6IkNhbmNlbCB0aGUgc2VhcmNoIG9uIGFsbCBwcm92aWRlcnMuIiwibGFuZ3VhZ2Utc2l0ZS1zZXJ2aWNlLWxheWVycy1mYWlsdXJlLXZpZXctZXJyb3IiOiJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgb25lIG9yIG1vcmUgY3JpdGljYWwgbWFwIHNlcnZpY2VzLiBUaGUgYXBwbGljYXRpb24gY2Fubm90IGJlIHVzZWQgYXQgdGhpcyB0aW1lLiBUaGUgZm9sbG93aW5nIHNlcnZpY2VzIGZhaWxlZCB0byBsb2FkOiIsImxhbmd1YWdlLW1lbnUtcHJvdmlzaW9uLWZvci1vZmZsaW5lIjoiUHJlcGFyZSBkZXZpY2UgZm9yIG9mZmxpbmUgdXNlIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZnJlZWhhbmQtZGVzYyI6IkRyYXcgYSBmcmVlaGFuZCBsaW5lIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tb24tbm90aWZpY2F0aW9uIjoiTm90aWZpY2F0aW9uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1wcm9tcHQiOiJEaXNwbGF5cyBhIHByb21wdC4iLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS10ZW1wbGF0ZS1waWNrZXIiOiJDcmVhdGUgYSBmZWF0dXJlIiwibGFuZ3VhZ2UtZmVhdHVyZS1ub3QtYXZhaWxhYmxlIjoiTi9BIiwibGFuZ3VhZ2UtbmF0aXZlLWRvd25sb2FkLWRvd25sb2FkaW5nIjoiRG93bmxvYWRpbmcgezB9OiB7MX0lIGNvbXBsZXRlLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2V0LWFjdGl2ZS10b29sIjoiU2V0cyB0aGUgYWN0aXZlIHRvb2wuIiwibGFuZ3VhZ2UtZmVhdHVyZS1oeXBlcmxpbmtzIjoiSHlwZXJsaW5rcyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1sb2ctdHJhY2UiOiJUcmFjZSIsImxhbmd1YWdlLWNvbW1vbi1zYXZlIjoiU2F2ZSIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tYmwtcmVjdGFuZ2xlLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIHJlY3RhbmdsZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1lZGl0LWxvZyI6IlNldHMgdGhlIGVkaXQgbG9nLCBwYXNzaW5nIGl0IGludG8gYSBjYWxsYmFjay4gSWYgYW4gZXJyb3Igb2NjdXJzLCB0aGUgZXJyb3IgaXMgcGFzc2VkIGludG8gdGhlIGNhbGxiYWNrLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWZyZWVoYW5kIjoiRnJlZWhhbmQiLCJsYW5ndWFnZS1vZmZsaW5lLXZpZXdlci1wcm92aXNpb25pbmctZmFpbGVkLXN0YXR1czUwMCI6IlRoZSBkb3dubG9hZCBvZiByZXNvdXJjZXMgZm9yIG9mZmxpbmUgdXNlIGZhaWxlZDogVGhlcmUgd2FzIGFuIGludGVybmFsIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4iLCJsYW5ndWFnZS1uYXRpdmUtYXR0YWNoLWZpbGUiOiJBdHRhY2ggYSBmaWxlIG9yIHBob3RvIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1ydW4td29ya2Zsb3ctd2l0aC1nZW9tZXRyeSI6IlJ1bnMgYSB3b3JrZmxvdyB3aXRoIGEgZ2VvbWV0cnkgdXNlZCBhcyBhbiBpbnB1dCBhcmd1bWVudC4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRvZ2dsZS12aWV3IjoiQWN0aXZhdGVzIG9yIGRlYWN0aXZhdGVzIGEgdmlldy4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXRzLWFuZC1zeW5jLXBlbmRpbmctZWRpdHMiOiJVbnN5bmNlZCBlZGl0cyIsImxhbmd1YWdlLXRha2UtYXBwLW9mZmxpbmUtZGVzYyI6IkdvIHRvIG9mZmxpbmUgbW9kZS4iLCJsYW5ndWFnZS1leHRyYWN0LWRhdGEtZGVzY3JpcHRpb24iOiJFeHRyYWN0IGZlYXR1cmUgZGF0YSBmcm9tIHRoZSBtYXAuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWhvbWUtdG9vbHRpcCI6Ik9wZW4gdGhlIEhvbWUgUGFuZWwiLCJsYW5ndWFnZS1jbGVhci1zdG9yYWdlIjoiQ2xlYXIgb2ZmbGluZSBkYXRhIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1uby1sYXllcnMiOiJObyBmZWF0dXJlIGxheWVycyBhdmFpbGFibGUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1kZWxldGUtZmVhdHVyZSI6IkRlbGV0ZXMgZWl0aGVyIGEgbmV3IG9yIGV4aXN0aW5nIGZlYXR1cmUuIiwibGFuZ3VhZ2UtbWFya3VwLWFkZC10ZXh0IjoiVHlwZSB0aGUgdGV4dCB0byBhZGQgdG8gdGhlIG1hcmt1cC4iLCJsYW5ndWFnZS1jb21tb24tYmFjayI6IkJhY2siLCJsYW5ndWFnZS1jb21tb24tY2xvc2UiOiJDbG9zZSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tb3Blbi1kYXRhLWZyYW1lIjoiT3BlbnMgdGhlIERhdGFSZWdpb24sIGlmIHByZXNlbnQgaW4gdGhlIGN1cnJlbnQgc2hlbGwuIiwibGFuZ3VhZ2UtbG9nLXRpdGxlIjoiRGVidWcgTG9nIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWdlb21ldHJ5LXJlY3RhbmdsZSI6Ik1vdmUgdGhlIHNoYXBlIGJ5IGRyYWdnaW5nLiBSZXNpemUgYnkgZ3JhYmJpbmcgZWRnZXMgb3IgY29ybmVycyIsImxhbmd1YWdlLWNvbW1vbi1mZWF0dXJlLWVkaXRsb2ctZGVzYyI6IkRpc3BsYXlzIGluZm9ybWF0aW9uIGFib3V0IGVkaXRpbmcgaGlzdG9yeSBvZiB0aGUgZmVhdHVyZSBsYXllci4iLCJsYW5ndWFnZS1zZWFyY2gtcGxhY2Vob2xkZXIiOiJTZWFyY2guLi4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWFkZC10ZW1wb3JhcnktbWFya3VwLWdlb21ldHJ5IjoiQWRkcyBhIHRlbXBvcmFyeSBtYXJrdXAgZ3JhcGhpYyB0byB0aGUgbWFwLiBUaGUgQ2xlYXJUZW1wb3JhcnlNYXJrdXAgY29tbWFuZCB3aWxsIGNsZWFyIHRoaXMgbWFya3VwLiIsImxhbmd1YWdlLXRvb2xiYXItbWFya3VwLWVsbGlwc2UtZGVzYyI6IkRyYWcgYW4gZWxsaXBzZSBvbnRvIHRoZSBtYXAiLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LXBvbHlnb24iOiJEcmF3IGEgcG9seWdvbiBvbiB0aGUgbWFwLiBEb3VibGUtY2xpY2sgb3IgdGFwIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXN5bmMtbG9nLWVycm9yIjoiRXJyb3IiLCJsYW5ndWFnZS1mZWF0dXJlLXJlbGF0ZWQtZmVhdHVyZXMiOiJSZWxhdGVkIEZlYXR1cmVzIiwibGFuZ3VhZ2Utc2VsZWN0LWxheW91dCI6IlNlbGVjdCBMYXlvdXQiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLXN0b3JhZ2UtZm9yLWRvbWFpbiI6IkNsZWFycyBhbGwgb2ZmbGluZSBkYXRhIGZvciB0aGUgY3VycmVudCBkb21haW4uIFRoaXMgaW5jbHVkZXMgZGF0YSBmb3IgYWxsIGFwcGxpY2F0aW9ucyBsb2FkZWQgZnJvbSB0aGUgY3VycmVudCBkb21haW4uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1yZWxhdGVkLWZlYXR1cmVzIjoiUmVsYXRlZCBGZWF0dXJlcyIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItbm8tZGF0YS13aWxsLWJlLWNhY2hlZCI6Ik5vIERhdGEgV2lsbCBCZSBDYWNoZWQiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLW1heC1yZWNvcmQtd2FybmluZyI6IkNhY2hpbmcgbGF5ZXIgezB9IGhhcyByZXR1cm5lZCB7MX0gcmVjb3Jkcy4gVGhlIGRhdGEgbWF5IGhhdmUgYmVlbiB0cnVuY2F0ZWQgYmVjYXVzZSBpdCBleGNlZWRlZCB0aGUgbWF4aW11bSBhbGxvd2VkIGJ5IEFyY0dJUyBTZXJ2ZXIuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWhvbWUiOiJIb21lIiwibGFuZ3VhZ2UtbG9nLWNsZWFyIjoiQ2xlYXIiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2ludC1kZXNjIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gZHJhdyBhIHBvaW50IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1yZW1vdmUtaGlnaGxpZ2h0LWxheWVyIjoiUmVtb3ZlcyB0aGUgaGlnaGxpZ2h0IGxheWVyIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLCBpZiB0aGVyZSBpcyBvbmUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0cy1hbmQtc3luYy1zeW5jLWJ1dHRvbiI6IlN5bmMgRGF0YSIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYy1zZXR0aW5ncyI6IkZlYXR1cmUgTGF5ZXIgU3luYyBTZXR0aW5ncyIsImxhbmd1YWdlLW1lbnUtbm8taXRlbXMiOiJObyBpdGVtcyEiLCJsYW5ndWFnZS13b3JrZmxvdy1zaXRlLXdvcmtmbG93cyI6IlNpdGUgV29ya2Zsb3dzIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLWZ1bGwtZXh0ZW50IjoiRnVsbCBFeHRlbnQiLCJsYW5ndWFnZS1jb21tb24tbG9naW4iOiJMb2cgSW4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWZlYXR1cmUtbGF5ZXItbW9kdWxlLXJlZnJlc2gtZGF0YSI6IlJlZnJlc2hlcyBsYXllciBlZGl0IHN1bW1hcmllcyBhbmQgdGhlIFwic3luYyBuZWVkZWRcIiBmbGFnLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItZXJyb3ItZGVsZXRpbmctZmVhdHVyZSI6IlRoZXJlIHdhcyBhbiBlcnJvciBkZWxldGluZyBmZWF0dXJlOiB7MH0iLCJsYW5ndWFnZS1mZWF0dXJlLWF0dHJpYnV0ZXMiOiJEZXRhaWxzIiwibGFuZ3VhZ2UtY29tbW9uLXNob3ciOiJTaG93IiwibGFuZ3VhZ2UtaWRlbnRpZnktbm8tZ2VvbWV0cnktZm9yLW1hcC10aXAtcmVzdWx0cyI6IkNhbid0IGV4ZWN1dGUgdGhlIFNob3dNYXBUaXBSZXN1bHRzIGNvbW1hbmQgd2l0aG91dCBhIGdlb21ldHJ5LiIsImxhbmd1YWdlLWxheWVyLWFjdGlvbnMiOiJQZXJmb3JtIGFuIGFjdGlvbiBvbiB7MH0iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNsZWFyLW1hcmt1cC1xdWlldCI6IkNsZWFycyBhbGwgb2YgdGhlIG1hcmt1cCBmcm9tIHRoZSBtYXJrdXAgbGF5ZXIgd2l0aG91dCBwcm9tcHRpbmcgZm9yIGNvbmZpcm1hdGlvbi4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24tem9vbS1pbiI6Ilpvb20gSW4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24taW5pdGlhbC1leHRlbnQtdG9vbHRpcCI6IlJldHVybiB0byB0aGUgaW5pdGlhbCBleHRlbnQgb2YgdGhlIG1hcCIsImxhbmd1YWdlLXRha2UtYXBwLW9mZmxpbmUiOiJHbyBvZmZsaW5lIiwibGFuZ3VhZ2UtYWxlcnQtZGVmYXVsdC10aXRsZSI6IkFsZXJ0IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci13b250LWNhY2hlIjoiVGhpcyBsYXllciB3aWxsIG5vdCBiZSBjYWNoZWQgb24gc3luYy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlc3Ryb3ktdmlldyI6IkRlc3Ryb3lzIGEgdmlldywgd2lwaW5nIG91dCBpdHMgYmluZGluZyBhbmQgRE9NIHN1YnN0cnVjdHVyZXMuIiwibGFuZ3VhZ2UtY29tbW9uLWNhbmNlbCI6IkNhbmNlbCIsImxhbmd1YWdlLW1ibC1pZGVudGlmeS1wb2ludC10b29sIjoiVGFwIHRvIGZpbmQgZmVhdHVyZXMgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS10b29sYmFyLW5hdmlnYXRpb24taG9tZS1zdWIiOiJIb21lIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lZGl0cy1hbmQtc3luYy1lbXB0eSI6Ik5vIHVuc3luY2VkIGVkaXRzLiIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tc2hvdy1mZWF0dXJlLWRldGFpbHMiOiJDcmVhdGVzIGFuZCBkaXNwbGF5cyB0aGUgRmVhdHVyZSBEZXRhaWxzIGRpYWxvZyBmb3IgdGhlIGZlYXR1cmUgb3IgZmVhdHVyZSBzZXQgY29sbGVjdGlvbiBzcGVjaWZpZWQuIiwibGFuZ3VhZ2Utd29ya2Zsb3ctdGl0bGUiOiJXb3JrZmxvdyIsImxhbmd1YWdlLWNvbmZpcm0tZGVmYXVsdC10aXRsZSI6IkNvbmZpcm0iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcGFja2FnZS1yZXF1aXJlZCI6ImVzcmkudG9vbGJhcnMuZWRpdCBuZWVkcyB0byBiZSBpbmNsdWRlZCBpbiB5b3VyIGFwcGxpY2F0aW9uIHZpYSBkb2pvLnJlcXVpcmUgc3RhdGVtZW50IGluIG9yZGVyIGZvciBmZWF0dXJlIGVkaXRpbmcgdG8gd29yayBwcm9wZXJseS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXNldC1oaWdobGlnaHQtYm9yZGVyLWNvbG9yIjoiU2V0cyB0aGUgYm9yZGVyIGNvbG9yIHVzZWQgZm9yIG5ldyBoaWdobGlnaHRzLCBzcGVjaWZpZWQgaW4gNiBvciA4IGRpZ2l0IGhleCBpbiBSR0Igb3IgQVJHQiBmb3JtLiIsImxhbmd1YWdlLXByaW50IjoiUHJpbnQiLCJsYW5ndWFnZS1tb250aHMtMTAiOiJOb3ZlbWJlciIsImxhbmd1YWdlLW1vbnRocy0xMSI6IkRlY2VtYmVyIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWdobGlnaHQtZmVhdHVyZSI6IkhpZ2hsaWdodHMgdGhlIGZlYXR1cmUgaW4gdGhlIGFjdGl2ZSBoaWdobGlnaHQgbGF5ZXIuIiwibGFuZ3VhZ2UtY29tbW9uLXNob3ctZGV0YWlscy1kZXNjcmlwdGlvbiI6IlNlZSBhZGRpdGlvbmFsIGRldGFpbHMgZm9yIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXVwZGF0ZS1mZWF0dXJlIjoiVXBkYXRlcyBlaXRoZXIgYSBuZXcgb3IgZXhpc3RpbmcgZmVhdHVyZS4iLCJsYW5ndWFnZS1hdXRoLXVzZXJuYW1lLWVtcHR5IjoiVXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWlkZW50aWZ5IjoiRXhlY3V0ZXMgYW4gaWRlbnRpZnkgb3BlcmF0aW9uIG9uIGEgZ2VvbWV0cnkuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1oaWRlLWZlYXR1cmUtbGF5ZXItbW9kYWwtbWVzc2FnZSI6IlJlbW92ZXMgYSBtb2RhbCBtZXNzYWdlLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1zZWxmLWludGVyc2VjdGluZy1wb2x5Z29uLW5lZWQtZml4aW5nIjoiVGhpcyBwb2x5Z29uIGludGVyc2VjdHMgaXRzZWxmLiBZb3UgbXVzdCBmaXggdGhlIHBvbHlnb24gYmVmb3JlIHNhdmluZy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXRha2UtYXBwbGljYXRpb24tb25saW5lIjoiQ29ubmVjdHMgdGhlIGFwcGxpY2F0aW9uIHRvIHRoZSBpbnRlcm5ldC4iLCJsYW5ndWFnZS10b29sYmFyLXRhYi10YXNrcyI6IlRhc2tzIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jbGVhcmluZy1kYXRhIjoiQ2xlYXJpbmcgZGF0YS4uLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc3luYyI6IlNlbmQgb2ZmbGluZSBlZGl0cyB0byB0aGUgc2VydmVyIGFuZCByZWZyZXNoIGNhY2hlZCBtYXAgZGF0YS4iLCJsYW5ndWFnZS1sb2ctbm8tZW50cmllcyI6Ik5vIEVudHJpZXMiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWV4dGVudCI6Ik1hcCBFeHRlbnQ6IiwibGFuZ3VhZ2Utb3V0cHV0LWZvcm1hdCI6Ik91dHB1dCBGb3JtYXQiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWFwcGx5aW5nIjoiQXBwbHlpbmcgZWRpdHMuLi4iLCJsYW5ndWFnZS1jb21tb24taGlkZSI6IkhpZGUiLCJsYW5ndWFnZS1icm93c2VyLXRpdGxlIjoiR2VvY29ydGV4IFZpZXdlciBmb3IgSFRNTDUiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRlZC1mZWF0dXJlLWZhaWxlZCI6IkNvdWxkIG5vdCBlZGl0IGEgcmVsYXRlZCBmZWF0dXJlIC0gbm8gcmVsYXRlZCBsYXllciBjb3VsZCBiZSBsb2FkZWQgZm9yIHJlbGF0aW9uc2hpcCB7MH0iLCJsYW5ndWFnZS1tYXAtem9vbS1pbiI6IkRyYWcgb24gdGhlIG1hcCB0byB6b29tIGluIHRvIHRoYXQgYXJlYS4gVGhlIHNtYWxsZXIgdGhlIGFyZWEsIHRoZSBmdXJ0aGVyIHlvdSB6b29tIGluLiIsImxhbmd1YWdlLWlzLXByaW50aW5nIjoiUHJlcGFyaW5nIEZpbGUuIFBsZWFzZSBXYWl0IiwibGFuZ3VhZ2UtbWFwLWxvYWRpbmctc3RhZ2UyIjoiU3RpbGwgbG9hZGluZyB7MH0gbWFwIGRhdGEuLi4iLCJsYW5ndWFnZS1wcmludGluZy1jdXJyZW50LXNjYWxlIjoiQ3VycmVudCBTY2FsZSIsImxhbmd1YWdlLW1hcC1sb2FkaW5nLXN0YWdlMSI6IkxvYWRpbmcgezB9IG1hcCBkYXRhLi4uIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1wYW4tdG8tcG9pbnQiOiJQYW5zIHRvIGEgcG9pbnQgb3Igb3RoZXIgdHlwZSBvZiBHZW9tZXRyeS4iLCJsYW5ndWFnZS1tYXAtbG9hZGluZy1zdGFnZTMiOiJTdGlsbCB3b3JraW5nLiAgTG9hZGluZyB7MH0gbWFwIGRhdGEuLi4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctaW52YWxpZC1pbnRlZ2VyIjoiezB9IG11c3QgYmUgYSB2YWxpZCBpbnRlZ2VyLiIsImxhbmd1YWdlLWdlb2xvY2F0aW9uLWVycm9yLW9mZmxpbmUiOiJZb3UgY2Fubm90IHpvb20gdG8gbG9jYXRpb24gd2hpbGUgb2ZmbGluZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQtYWN0aW9uLXVwZGF0ZWQtcmVsYXRlZCI6IlVwZGF0ZWQgcmVsYXRlZCIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItdmlldy1jYWNoZWQtZXh0ZW50IjoiVmlldyBFeHRlbnQiLCJsYW5ndWFnZS1tZW51LWVkaXQtZmVhdHVyZSI6IkVkaXQgdGhpcyBGZWF0dXJlIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1vcGVuLWZlYXR1cmUtc2V0LWNvbGxlY3Rpb24iOiJPcGVucyB0aGUgZmVhdHVyZSBzZXQgY29sbGVjdGlvbi4iLCJsYW5ndWFnZS1iYW5uZXItc3ViLXRpdGxlIjoiIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci1lZGl0LW5vdC1mb3VuZCI6IlRoZSBvcmlnaW5hbCBlZGl0IGNvdWxkIG5vdCBiZSBmb3VuZC4iLCJsYW5ndWFnZS1zZWFyY2gtdGl0bGUiOiJTZWFyY2giLCJsYW5ndWFnZS1yZXN1bHRzLXNvcnQiOiJTb3J0IFJlc3VsdHMiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRlbGV0ZS1lZGl0LWNvbmZpcm1hdGlvbi1zaW5ndWxhciI6IkFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBkZWxldGUgdGhpcyBlZGl0PyIsImxhbmd1YWdlLWNvbW1vbi13ZWxjb21lIjoiSG9tZSIsImxhbmd1YWdlLXRvb2xiYXItZWRpdGluZy1zeW5jLXRvb2x0aXAiOiJQdXNoIGFueSBvZmZsaW5lIGVkaXRzIHRvIHRoZSBzZXJ2ZXIgYW5kIGNoZWNrIG91dCBmcmVzaCBkYXRhIiwibGFuZ3VhZ2UtbmF0aXZlLWFkZC10by1mYXZvcml0ZXMtbmFtZS1pbnZhbGlkLXRpdGxlIjoiTmFtZSBJbnZhbGlkIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1hdHRhY2gtcGhvdG8tZGVzYyI6IlVzZSB0aGUgY2FtZXJhIHRvIGF0dGFjaCBhIHBob3RvIHRvIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVkaXQiOiJFZGl0IEZlYXR1cmUiLCJsYW5ndWFnZS1jbGVhci1zdG9yYWdlLXZpZXctdGl0bGUiOiJDbGVhciBPZmZsaW5lIERhdGEiLCJsYW5ndWFnZS10b29sYmFyLXRhYi1hbmFseXNpcyI6IkFuYWx5c2lzIiwibGFuZ3VhZ2Utb2ZmbGluZS1wcm92aXNpb25pbmctc3VjY2VlZGVkLXRpdGxlIjoiQ29tcGxldGVkIiwibGFuZ3VhZ2UtZmVhdHVyZS1hdHRhY2htZW50cyI6IkF0dGFjaG1lbnRzIiwibGFuZ3VhZ2UtY29tbW9uLWZlYXR1cmUtbGF5ZXItZGV0YWlscyI6IlN5bmMgU2V0dGluZ3MgZm9yIHswfSIsImxhbmd1YWdlLWNvbW1vbi1jbGVhciI6IkNsZWFyIiwibGFuZ3VhZ2UtbmF0aXZlLWRvd25sb2FkLWZhaWxlZCI6IkRvd25sb2FkIEZhaWxlZDogezB9LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItc2l6ZSI6IlNpemUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWxpc3QiOiJNYW5hZ2UgRmVhdHVyZSBMYXllcnMiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctcmVsYXRpb25zaGlwcy1yZXF1aXJlLWFyY2dpcy12ZXJzaW9uIjoiRWRpdGluZyByZWxhdGlvbnNoaXBzIHJlcXVpcmVzIEFyY0dJUyBzZXJ2ZXIgdmVyc2lvbiAxMC4xIG9yIGhpZ2hlci4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctdmFsdWUtdG9vLWxvbmciOiJ7MH0gbXVzdCBiZSBubyBsb25nZXIgdGhhbiB7MX0gY2hhcmFjdGVycy4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWNhY2hlLWxheWVyLWRhdGEiOiJXYXJuaW5nOiBDYWNoaW5nIHRoaXMgbGF5ZXIgd2lsbCBvdmVyd3JpdGUgYW55IG9mZmxpbmUgbWFwIGRhdGEgYW5kIGFueSBlZGl0cyBvbiB0aGlzIGxheWVyLiIsImxhbmd1YWdlLW9mZmxpbmUtcHJvdmlzaW9uaW5nLWZhaWxlZC1jb2RlMjIiOiJUaGUgZG93bmxvYWQgZm9yIG9mZmxpbmUgdXNlIGZhaWxlZC4gVGhlIGRvd25sb2FkZWQgcmVzb3VyY2VzIG1heSBiZSB0b28gbGFyZ2UgZm9yIHRoZSBvZmZsaW5lIHN0b3JhZ2Ugc3BhY2UuIiwibGFuZ3VhZ2UtbWFwLXNpdGUtYXV0aG9yaXphdGlvbi1mYWlsZWQiOiJBY2Nlc3MgRGVuaWVkLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1lbGxpcHNlLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhbiBlbGxpcHNlIiwibGFuZ3VhZ2UtY29tbW9uLXF1ZXJ5LXJlc3VsdHMiOiJRdWVyeSBSZXN1bHRzIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1mcmVlaGFuZC1wb2x5bGluZS10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSBmcmVlaGFuZCBsaW5lIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1hY3RpdmF0ZS12aWV3IjoiQWN0aXZhdGVzIGEgdmlldy4iLCJsYW5ndWFnZS10b29sYmFyLWVkaXRpbmctZWRpdCI6IkVkaXQiLCJsYW5ndWFnZS1mZWF0dXJlLWRldGFpbHMtbm8tZmVhdHVyZSI6IlRoZXJlIGFyZSBubyBmZWF0dXJlcyBzZWxlY3RlZC4iLCJsYW5ndWFnZS1yZXN1bHRzLXRvdGFsIjoiVG90YWwiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWVycm9yLXN5bmMtZmVhdHVyZSI6IlRoZXJlIHdhcyBhbiBlcnJvciBzeW5jaHJvbml6aW5nIGZlYXR1cmU6IHswfSIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tY2hhbmdlLWVkaXQtbG9nLWVudHJ5IjoiQ2hhbmdlIGFuIGV4aXN0aW5nIGVkaXQgbG9nIGVudHJ5LiIsImxhbmd1YWdlLXJlc3VsdHMtdG9nZ2xlLWxpc3QtdmlldyI6IlN3aXRjaCBUbyBMaXN0IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1lcnJvci13aGlsZS1jbGVhcmluZy1kYXRhIjoiVGhlcmUgd2FzIGFuIGVycm9yIGNsZWFyaW5nIGRhdGEuIiwibGFuZ3VhZ2UtdG9vbGJhci1hbmFseXNpcy1sb2NhdGlvbi1pbmZvIjoiTG9jYXRpb24gSW5mbyIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1nZW9tZXRyeS1wb2x5Z29uIjoiTW92ZSB0aGUgc2hhcGUgYnkgZHJhZ2dpbmcgaXQsIG9yIGJ5IGVkaXRpbmcgaW5kaXZpZHVhbCB2ZXJ0aWNlcy4gUmlnaHQtY2xpY2sgb24gdmVydGljZXMgdG8gZGVsZXRlIHRoZW0iLCJsYW5ndWFnZS1nZW9sb2NhdGlvbi1pbi1wcm9ncmVzcyI6IkZpbmRpbmcgeW91ciBsb2NhdGlvbi4uLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1pbnZhbGlkLWRhdGUiOiJ7MH0gbXVzdCBiZSBhIHZhbGlkIGRhdGUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLXN0b3AtZWRpdGluZy1nZW9tZXRyeS1jYXB0aW9uIjoiU3RvcCBFZGl0aW5nIEdlb21ldHJ5IiwibGFuZ3VhZ2UtbWVudS1tZW51cy1kZXNjcmlwdGlvbiI6IkkgV2FudCBUby4uLiBNZW51cyIsImxhbmd1YWdlLWNvbW1vbi1jcmVhdGUiOiJDcmVhdGUiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS10ZW1wbGF0ZS1waWNrZXItZGVzYyI6IlNlbGVjdCBhIGZlYXR1cmUgdHlwZS4iLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvaW50LWRlc2MiOiJDbGljayBvciB0YXAgYSBwb2ludCBvbiB0aGUgbWFwIHRvIHNlZSB3aGF0J3MgdGhlcmUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWRlcGVuZHMtb24iOiJEZXBlbmRzIG9uOiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1tYmwtcG9seWdvbi10b29sIjoiVGFwIG9uIHRoZSBtYXAgdG8gYWRkIHBvaW50cyB0byBhIHBvbHlnb24uIiwibGFuZ3VhZ2UtbmF0aXZlLW9mZmxpbmUtZmlsZS11cGxvYWQiOiJIVE1MIFZpZXdlciBpcyBpbiBvZmZsaW5lIG1vZGUuIEF0dGFjaG1lbnQgd2lsbCBiZSB1cGxvYWRlZCB3aGVuIGNvbm5lY3RlZC4iLCJsYW5ndWFnZS1vZmZsaW5lLXByb3Zpc2lvbmluZy1zdWNjZWVkZWQiOiJUaGUgdmlld2VyIGlzIHByZXBhcmVkIGZvciBvZmZsaW5lIHVzZS4gVXNlIHRoZSBNYW5hZ2UgU3luYyBTZXR0aW5ncyBvcHRpb24gdG8gY2hvb3NlIGxheWVyIGRhdGEgdG8gd29yayB3aXRoIHdoaWxlIG9mZmxpbmUsIHRoZW4gcGVyZm9ybSBhIHN5bmMgdG8gY2FjaGUgaXQgb24geW91ciBkZXZpY2UuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1vcGVyYXRpb24tY2Fubm90LWJlLXVuZG9uZSI6Ildhcm5pbmc6IFRoaXMgb3BlcmF0aW9uIGNsZWFycyBvciBvdmVyd3JpdGVzIGFsbCB0aGUgb2ZmbGluZSBkYXRhIGFuZCBlZGl0cyBvbiB0aGUgbGF5ZXIuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jcmVhdGUtbmV3LWZlYXR1cmUiOiJBZGQgTmV3IEZlYXR1cmUiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLW1hcC1yZXNpemUiOiJUZWxscyB0aGUgbWFwIGNvbnRyb2wgdG8gcmVzaXplIGl0c2VsZi4gVGhpcyBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsdGVyaW5nIHRoZSBtYXAgY29udGFpbmVyJ3MgZGltZW5zaW9ucy4iLCJsYW5ndWFnZS1mZWF0dXJlLWF0dGFjaG1lbnRzLW5vdC1zdXBwb3J0ZWQiOiJUaGVyZSBhcmUgbm8gYXR0YWNobWVudHMgZm9yIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1nZW9tZXRyeS1jYXB0dXJlZCI6Ikdlb21ldHJ5IGNhcHR1cmVkLiIsImxhbmd1YWdlLWlkZW50aWZ5LXJlY3RhbmdsZS10b29sIjoiRHJhZyBvbiB0aGUgbWFwIHRvIGRyYXcgYSByZWN0YW5nbGUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1nby10by1zeW5jLXBhbmVsIjoiQ2xpY2sgaGVyZSB0byByZXZpZXcgeW91ciBlZGl0cyBhbmQgdGhlbiBzeW5jIHlvdXIgb2ZmbGluZSBkYXRhLiIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLWZvcm1hdHRlZCI6IkZvcm1hdHRlZCBBZGRyZXNzIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1uby1jYWNoZWQtZGF0YSI6Ik5vIGNhY2hlZCBkYXRhIGF2YWlsYWJsZSIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLWFkbWluLWRpc3RyaWN0IjoiQWRtaW5pc3RyYXRpdmUgRGlzdHJpY3QiLCJsYW5ndWFnZS10b29sYmFyLW1hcmt1cC1wb2ludC10b29sdGlwIjoiUGxhY2UgYSBwb2ludCBvbiB0aGUgbWFwIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbGVhci1hY3RpdmUtdG9vbCI6IkNsZWFycyB0aGUgYWN0aXZlIHRvb2wuIiwibGFuZ3VhZ2UtdG9vbGJhci1lZGl0aW5nLW1hbmFnZS1vZmZsaW5lLWRhdGEiOiJNYW5hZ2UgT2ZmbGluZSBEYXRhIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zdGFydC1lZGl0aW5nLWZlYXR1cmUiOiJCZWdpbnMgZWRpdGluZyBhbiBleGlzdGluZyBmZWF0dXJlLiIsImxhbmd1YWdlLWZlYXR1cmUtZWRpdGluZy1kc2stZnJlZWhhbmQtcG9seWdvbi10b29sIjoiQ2xpY2sgb3IgdGFwIG9uIHRoZSBtYXAgdG8gZHJhdyBhIHBvbHlnb24gc2hhcGUuIERvdWJsZSBjbGljay90YXAgdG8gc3RvcCIsImxhbmd1YWdlLWNvbW1hbmQtZGVzY3JpcHRpb24tZ2V0LWVkaXQtbG9nIjoiR2V0cyB0aGUgZWRpdCBsb2csIHBhc3NpbmcgaXQgaW50byBhIGNhbGxiYWNrLiBJZiBhbiBlcnJvciBvY2N1cnMsIHRoZSBlcnJvciBpcyBwYXNzZWQgaW50byB0aGUgY2FsbGJhY2suIiwibGFuZ3VhZ2Utd29ya2Zsb3ctYXZhaWxhYmxlLXdvcmtmbG93cyI6IkF2YWlsYWJsZSBUYXNrcyIsImxhbmd1YWdlLW1lbnUtaG9tZS1wYW5lbCI6IlNob3cgdGhlIGhvbWUgcGFuZWwiLCJsYW5ndWFnZS1iYW5uZXItdGl0bGUiOiJBcHBsaWNhdGlvbiBUaXRsZSIsImxhbmd1YWdlLWZlYXR1cmUtYXR0YWNobWVudHMtZmlsZS1zaXplIjoiQnl0ZXMiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWRlbGV0ZS1mcm9tLWVkaXQtbG9nIjoiUmVtb3ZlcyB0aGUgZ2l2ZW4gZW50cnkgZnJvbSB0aGUgZWRpdCBsb2csIHRoZW4gc2V0cyB0aGUgZWRpdCBsb2cuIiwibGFuZ3VhZ2UtdG9vbGJhci1tYXJrdXAtZWxsaXBzZS10b29sdGlwIjoiRHJhdyBhbiBlbGxpcHNlIG9uIHRoZSBtYXAiLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLXB1bHNlLXN0YXR1cyI6IlJlc2V0cyB0aGUgdGltZXIgb2YgdGhlIHN0YXR1cyB2aWV3TW9kZWwuIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20tb3V0LXRvb2x0aXAiOiJEcmF3IGFuIGFyZWEgb2YgaW50ZXJlc3Qgb24gdGhlIG1hcCBhbmQgem9vbSBvdXQsIGtlZXBpbmcgdGhlIGFyZWEgY2VudGVyZWQiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctYWRkLWZlYXR1cmUtYnV0dG9uIjoiQWRkIEZlYXR1cmUiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXdhcm5pbmctb2ZmbGluZS1jbGVhcmluZy1kYXRhIjoiWW91IGNhbm5vdCBjbGVhciBkYXRhIHdoaWxlIG9mZmxpbmUuIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWFkZC1nZW9tZXRyeS1jYXB0aW9uIjoiQWRkIEdlb21ldHJ5IiwibGFuZ3VhZ2UtbGF5ZXJsaXN0LXNob3ctbGVnZW5kIjoiU2hvdyBMZWdlbmQiLCJsYW5ndWFnZS10b29sYmFyLWlkZW50aWZ5LXBvaW50IjoiUG9pbnQgSWRlbnRpZnkiLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXdpbGwtY2FjaGUtZGVzYyI6IkZlYXR1cmVzIGluIHRoZSBmb2xsb3dpbmcgYXJlYSB3aWxsIGJlIGF2YWlsYWJsZSBvZmZsaW5lIGFmdGVyIHN5bmM6IiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1jYWNoZWQtb24iOiJDYWNoZWQgT24iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXlvdS1hcmUtb2ZmbGluZSI6IllvdSBhcmUgaW4gb2ZmbGluZSBtb2RlLiIsImxhbmd1YWdlLWxvZy1sZXZlbCI6IkxldmVsIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1mc20tY29sbGVjdGlvbi1zZXQtY29tbWFuZCI6IlNldCB0aGUgcHJlZmVycmVkIGNvbW1hbmQgdG8gb3BlbiB0aGUgZmVhdHVyZSBzZXQgY29sbGVjdGlvbiBmb3IgdGhlIGdpdmVuIHNvdXJjZSBuYW1lLiIsImxhbmd1YWdlLXBhZ2UtbGFzdCI6Ikxhc3QiLCJsYW5ndWFnZS1tZW51LXJ1bi13b3JrZmxvdyI6IlBlcmZvcm0gYSB0YXNrIiwibGFuZ3VhZ2UtbWVudS16b29tLWRlc2NyaXB0aW9uIjoiWm9vbSB0byB0aGlzIGZlYXR1cmUgb24gdGhlIG1hcC4iLCJsYW5ndWFnZS1jb21tb24tbG9hZGluZyI6IkxvYWRpbmcuLi4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLWhhcy1nZW9tZXRyeS1zaG9ydCI6IkhhcyBnZW9tZXRyeS4iLCJsYW5ndWFnZS10b29sYmFyLXRhc2tzLWlkZW50aWZ5IjoiSWRlbnRpZnkiLCJsYW5ndWFnZS1jb21tb24tZmVhdHVyZS1zeW5jLXNldHRpbmdzLWRlc2MiOiJEaXNwbGF5cyBhIGxpc3Qgb2YgZmVhdHVyZSBsYXllcnMgdG8gY2hvb3NlIGZyb20uIiwibGFuZ3VhZ2UtdG9vbGJhci1uYXZpZ2F0aW9uLXpvb20taW4tZGVzYyI6IkRyYWcgYSByZWN0YW5nbGUgb24gdGhlIG1hcCB0byB6b29tIGludG8gdGhhdCBhcmVhIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLWRzay1saW5lLXRvb2wiOiJDbGljayBvciB0YXAgb24gdGhlIG1hcCB0byBhZGQgdHdvIG9yIG1vcmUgbGluZSBwb2ludHMuIERvdWJsZSBjbGljay90YXAgdG8gc3RvcCIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2UtZG9tYWluLWNvbmZpcm0iOiJXYXJuaW5nOiBDbGVhcmluZyBhbGwgdGhlIGRhdGEgc3RvcmVkIGZvciB0aGlzIGRvbWFpbiByZW1vdmVzIGFsbCBvZmZsaW5lIGRhdGEgc3RvcmVkIGZvciB0aGlzIGRvbWFpbiwgaW5jbHVkaW5nIGFueSBlZGl0cyBtYWRlIHdoaWxlIG9mZmxpbmUuIElmIHlvdSBjbGVhciBzdG9yZWQgZG9tYWluIGRhdGEsIHlvdSB3aWxsIG5lZWQgdG8gcmVjYWNoZSBtYXAgZGF0YSB3aGlsZSBvbmxpbmUgYmVmb3JlIHlvdSBjYW4gY29udGludWUgd29ya2luZyBvZmZsaW5lLiIsImxhbmd1YWdlLWNsZWFyLXN0b3JhZ2UtZG9tYWluIjoiQ2xlYXIgb2ZmbGluZSBkYXRhIGZvciB0aGlzIGRvbWFpbiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItbm8tZGF0YS13aWxsLWJlLWNhY2hlZC1kZXNjIjoiV2hlbiB5b3Ugc3luYywgbm8gZGF0YSB3aWxsIGJlIHN0b3JlZCBvbiB0aGUgZGV2aWNlLiBZb3UgY2FuIGRlZmluZSB0aGUgZGF0YSB5b3Ugd2FudCB0byBjYWNoZSBpbiB0aGUgU3luYyBTZXR0aW5ncyBwYW5lbC4iLCJsYW5ndWFnZS1yZXN1bHRzLXRvZ2dsZS10YWJsZS12aWV3IjoiU3dpdGNoIFRvIFRhYmxlIiwibGFuZ3VhZ2UtZmVhdHVyZS1lZGl0aW5nLW5vLXN5bWJvbG9neSI6IllvdSBjYW5ub3QgZWRpdCB0aGUgc3ltYm9sb2d5IG9mIHRoaXMgZmVhdHVyZS4iLCJsYW5ndWFnZS1mZWF0dXJlLWxheWVyLXNraXBwaW5nLWZlYXR1cmUtYmxvY2tlZCI6IlNraXBwaW5nIGVkaXQgJ3swfScgYmVjYXVzZSBpdCBpcyByZWxhdGVkIHRvIGEgYmxvY2tlZCBlZGl0LiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXItcGVuZGluZy1lZGl0cy1tdWx0aXBsZS1sYXllcnMiOiJZb3UgaGF2ZSBlZGl0cyBvbiBvbmUgb3IgbW9yZSBsYXllcnMgdGhhdCBoYXZlIG5vdCBiZWVuIHN5bmNlZCB0byB0aGUgc2VydmVyLiIsImxhbmd1YWdlLXRha2UtYXBwLW9ubGluZS1kZXNjIjoiR28gdG8gb25saW5lIG1vZGUuIiwibGFuZ3VhZ2UtY29tbW9uLXNob3ctZGV0YWlscyI6IlNlZSBEZXRhaWxzIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1mcmVlaGFuZC1wb2x5Z29uLWRlc2MiOiJEcmF3IGEgZnJlZWhhbmQgcG9seWdvbiBvbiB0aGUgbWFwIHRvIHNlZSB3aGF0J3MgdGhlcmUiLCJsYW5ndWFnZS1tZW51LWVudGVyLW9ubGluZS1kZXNjIjoiR28gdG8gb25saW5lIG1vZGUgYW5kIHZpZXcgbGl2ZSBtYXAgZGF0YSBmcm9tIHRoZSB3ZWIuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1nZXQtcmVsYXRlZC1mZWF0dXJlIjoiR2V0cyBmZWF0dXJlcyByZWxhdGVkIHRvIHRoZSBmZWF0dXJlLiIsImxhbmd1YWdlLWZlYXR1cmUtbGF5ZXIteW91LWFyZS1vbmxpbmUtZGVzYyI6IkFueSBmZWF0dXJlcyBkaXNwbGF5ZWQgb24gdGhlIG1hcCBhcmUgZnJvbSB0aGUgbGl2ZSBsYXllciwgYW5kIG5vdCB0aGUgY2FjaGVkIGRhdGEuIiwibGFuZ3VhZ2UtbmF0aXZlLWNsb3NlLWFwcGxpY2F0aW9uLWRlc2MiOiJDbG9zZXMgdGhlIGN1cnJlbnQgYXBwbGljYXRpb24gYW5kIHJldHVybnMgdG8gdGhlIG1haW4gbWVudS4iLCJsYW5ndWFnZS1vZmZsaW5lLXJlc291cmNlLXNhdmUtZXJyb3IiOiJUaGVyZSB3YXMgYW4gZXJyb3Igc2F2aW5nIGFuIG9mZmxpbmUgcmVzb3VyY2UuIFlvdSBtYXkgYmUgb3V0IG9mIHNwYWNlLiBFcnJvcjogezB9IiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1zaG93LXJlc3VsdHMtdGFibGUiOiJEaXNwbGF5cyB0aGUgbGlzdCBvZiBmZWF0dXJlcyBpbiB0aGUgZ2l2ZW4gZmVhdHVyZSBzZXQgY29sbGVjdGlvbiBpbiBhIHRhYnVsYXIgdmlldy4iLCJsYW5ndWFnZS1jb21tYW5kLWRlc2NyaXB0aW9uLWNyZWF0ZS1oaWdobGlnaHQtbGF5ZXIiOiJDcmVhdGVzIGEgbmV3IGhpZ2hsaWdodCBsYXllciB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS4iLCJsYW5ndWFnZS1sYXllcmxpc3QtdGl0bGUiOiJNYXAgTGF5ZXJzIiwibGFuZ3VhZ2UtdG9vbGJhci1pZGVudGlmeS1wb2x5bGluZSI6IkxpbmUgSWRlbnRpZnkiLCJsYW5ndWFnZS1tZW51LXpvb20tdG8tbGF5ZXItZGVzYyI6Ilpvb20gdGhlIG1hcCB0byB0aGUgZnVsbCBleHRlbnQgb2YgdGhlIGxheWVyLiIsImxhbmd1YWdlLXNlYXJjaC1iaW5nLWxvY2FsaXR5IjoiTG9jYWxpdHkiLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctZHNrLXBvbHlnb24tdG9vbCI6IkNsaWNrIG9yIHRhcCBvbiB0aGUgbWFwIHRvIGFkZCBwb2ludHMgdG8gYSBwb2x5Z29uLiBEb3VibGUgY2xpY2svdGFwIHRvIHN0b3AiLCJsYW5ndWFnZS1jYXB0dXJlLWdlb21ldHJ5LXBvbHlsaW5lIjoiRHJhdyBhIGxpbmUgb24gdGhlIG1hcC4gRG91YmxlLWNsaWNrIHRvIGZpbmlzaC4iLCJsYW5ndWFnZS1mZWF0dXJlLWVkaXRpbmctY2lyY2xlLXRvb2wiOiJEcmFnIG9uIHRoZSBtYXAgdG8gZHJhdyBhIGNpcmNsZSIsImxhbmd1YWdlLXNpdGUtdHJ5LWxvZy1vbi1hZ2FpbiI6IlRyeSBBZ2FpbiIsImxhbmd1YWdlLW9mZmxpbmUtdmlld2VyLXByb3Zpc2lvbi1vbmxpbmUtb25seSI6IllvdSBtdXN0IGJlIG9ubGluZSB0byBkb3dubG9hZCByZXNvdXJjZXMgdG8gdXNlIG9mZmxpbmUuIiwibGFuZ3VhZ2UtY29tbWFuZC1kZXNjcmlwdGlvbi1jbG9zZS1yZXN1bHRzLWZyYW1lIjoiRGVhY3RpdmF0ZXMgdGhlIFJlc3VsdHNSZWdpb24uIiwibGFuZ3VhZ2UtZmVhdHVyZS1sYXllci1udW1iZXItb2YtZmVhdHVyZXMiOiJDb3VudCJ9");
geocortex.framework.notifyLibraryDownload("Mapping");
